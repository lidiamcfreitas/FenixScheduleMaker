/*
 2010-2011 Benjamin Arthur Lupton <contact@balupton.com>
 @license New BSD License <http://creativecommons.org/licenses/BSD/>
 2010-2011 Benjamin Arthur Lupton <contact@balupton.com>
 @license New BSD License <http://creativecommons.org/licenses/BSD/>
 Public Domain
 @author Benjamin Arthur Lupton <contact@balupton.com>
 @author James Padolsey <https://gist.github.com/527683>
 Public Domain
 @author Benjamin Arthur Lupton <contact@balupton.com>
 AngularJS v1.4.1
 (c) 2010-2015 Google, Inc. http://angularjs.org
 License: MIT
 AngularJS v1.4.1
 (c) 2010-2015 Google, Inc. http://angularjs.org
 License: MIT

 lodash 3.9.3 (Custom Build) <https://lodash.com/>
 Build: `lodash modern -o ./lodash.js`
 Copyright 2012-2015 The Dojo Foundation <http://dojofoundation.org/>
 Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 Copyright 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 Available under MIT license <https://lodash.com/license>
 FastClick: polyfill to remove click delays on browsers with touch UIs.

 @codingstandard ftlabs-jsv2
 @copyright The Financial Times Limited [All Rights Reserved]
 @license MIT License (see LICENSE.txt)
*/
window["com.genius.Genius"]||(window["com.genius.Genius"]={},window.require=function(){return window["com.genius.Genius"].require.apply(this,arguments)});
(function(a,b){function c(a){var b=W[a]={},c,d;a=a.split(/\s+/);c=0;for(d=a.length;c<d;c++)b[a[c]]=!0;return b}function d(a,c,d){if(d===b&&1===a.nodeType)if(d="data-"+c.replace(w,"-$1").toLowerCase(),d=a.getAttribute(d),"string"===typeof d){try{d="true"===d?!0:"false"===d?!1:"null"===d?null:r.isNumeric(d)?+d:la.test(d)?r.parseJSON(d):d}catch(e){}r.data(a,c,d)}else d=b;return d}function e(a){for(var b in a)if(("data"!==b||!r.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function f(a,b,c){var d=
b+"defer",e=b+"queue",f=b+"mark",g=r._data(a,d);!g||"queue"!==c&&r._data(a,e)||"mark"!==c&&r._data(a,f)||setTimeout(function(){r._data(a,e)||r._data(a,f)||(r.removeData(a,d,!0),g.fire())},0)}function h(){return!1}function g(){return!0}function k(a){return!a||!a.parentNode||11===a.parentNode.nodeType}function n(a,b,c){b=b||0;if(r.isFunction(b))return r.grep(a,function(a,d){return!!b.call(a,d,a)===c});if(b.nodeType)return r.grep(a,function(a,d){return a===b===c});if("string"===typeof b){var d=r.grep(a,
function(a){return 1===a.nodeType});if(Ya.test(b))return r.filter(b,d,!c);b=r.filter(b,d)}return r.grep(a,function(a,d){return 0<=r.inArray(a,b)===c})}function q(a){var b=z.split("|");a=a.createDocumentFragment();if(a.createElement)for(;b.length;)a.createElement(b.pop());return a}function m(a,b){return r.nodeName(a,"table")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function p(a,b){if(1===b.nodeType&&r.hasData(a)){var c,d,e;d=r._data(a);var f=r._data(b,
d),g=d.events;if(g)for(c in delete f.handle,f.events={},g)for(d=0,e=g[c].length;d<e;d++)r.event.add(b,c,g[c][d]);f.data&&(f.data=r.extend({},f.data))}}function u(a,b){var c;1===b.nodeType&&(b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase(),"object"===c?b.outerHTML=a.outerHTML:"input"!==c||"checkbox"!==a.type&&"radio"!==a.type?"option"===c?b.selected=a.defaultSelected:"input"===c||"textarea"===c?b.defaultValue=a.defaultValue:"script"===c&&b.text!==
a.text&&(b.text=a.text):(a.checked&&(b.defaultChecked=b.checked=a.checked),b.value!==a.value&&(b.value=a.value)),b.removeAttribute(r.expando),b.removeAttribute("_submit_attached"),b.removeAttribute("_change_attached"))}function v(a){return"undefined"!==typeof a.getElementsByTagName?a.getElementsByTagName("*"):"undefined"!==typeof a.querySelectorAll?a.querySelectorAll("*"):[]}function A(a){if("checkbox"===a.type||"radio"===a.type)a.defaultChecked=a.checked}function D(a){var b=(a.nodeName||"").toLowerCase();
"input"===b?A(a):"script"!==b&&"undefined"!==typeof a.getElementsByTagName&&r.grep(a.getElementsByTagName("input"),A)}function x(a,b,c){var d="width"===b?a.offsetWidth:a.offsetHeight,e="width"===b?1:0;if(0<d){if("border"!==c)for(;4>e;e+=2)c||(d-=parseFloat(r.css(a,"padding"+Ma[e]))||0),d="margin"===c?d+(parseFloat(r.css(a,c+Ma[e]))||0):d-(parseFloat(r.css(a,"border"+Ma[e]+"Width"))||0);return d+"px"}d=Hb(a,b);if(0>d||null==d)d=a.style[b];if(Ja.test(d))return d;d=parseFloat(d)||0;if(c)for(;4>e;e+=
2)d+=parseFloat(r.css(a,"padding"+Ma[e]))||0,"padding"!==c&&(d+=parseFloat(r.css(a,"border"+Ma[e]+"Width"))||0),"margin"===c&&(d+=parseFloat(r.css(a,c+Ma[e]))||0);return d+"px"}function B(a){return function(b,c){"string"!==typeof b&&(c=b,b="*");if(r.isFunction(c))for(var d=b.toLowerCase().split(wc),e=0,f=d.length,g,h;e<f;e++)g=d[e],(h=/^\+/.test(g))&&(g=g.substr(1)||"*"),g=a[g]=a[g]||[],g[h?"unshift":"push"](c)}}function s(a,c,d,e,f,g){f=f||c.dataTypes[0];g=g||{};g[f]=!0;f=a[f];for(var h=0,k=f?f.length:
0,m=a===xc,n;h<k&&(m||!n);h++)n=f[h](c,d,e),"string"===typeof n&&(!m||g[n]?n=b:(c.dataTypes.unshift(n),n=s(a,c,d,e,n,g)));!m&&n||g["*"]||(n=s(a,c,d,e,"*",g));return n}function G(a,c){var d,e,f=r.ajaxSettings.flatOptions||{};for(d in c)c[d]!==b&&((f[d]?a:e||(e={}))[d]=c[d]);e&&r.extend(!0,a,e)}function K(a,b,c,d){if(r.isArray(b))r.each(b,function(b,e){c||Fa.test(a)?d(a,e):K(a+"["+("object"===typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==r.type(b))d(a,b);else for(var e in b)K(a+"["+e+"]",b[e],c,
d)}function J(){try{return new a.XMLHttpRequest}catch(b){}}function C(){setTimeout(L,0);return Zb=r.now()}function L(){Zb=b}function N(a,b){var c={};r.each(yc.concat.apply([],yc.slice(0,b)),function(){c[this]=a});return c}function Q(a){if(!zc[a]){var b=E.body,c=r("<"+a+">").appendTo(b),d=c.css("display");c.remove();if("none"===d||""===d)tb||(tb=E.createElement("iframe"),tb.frameBorder=tb.width=tb.height=0),b.appendChild(tb),$b&&tb.createElement||($b=(tb.contentWindow||tb.contentDocument).document,
$b.write((r.support.boxModel?"<!doctype html>":"")+"<html><body>"),$b.close()),c=$b.createElement(a),$b.body.appendChild(c),d=r.css(c,"display"),b.removeChild(tb);zc[a]=d}return zc[a]}function T(a){return r.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}var E=a.document,X=a.navigator,aa=a.location,r=function(){function c(){if(!d.isReady){try{E.documentElement.doScroll("left")}catch(a){setTimeout(c,1);return}d.ready()}}var d=function(a,b){return new d.fn.init(a,b,g)},e=a.jQuery,f=a.$,
g,h=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,k=/\S/,m=/^\s+/,n=/\s+$/,r=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,q=/^[\],:{}\s]*$/,p=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,w=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,x=/(?:^|:|,)(?:\s*\[)+/g,L=/(webkit)[ \/]([\w.]+)/,s=/(opera)(?:.*version)?[ \/]([\w.]+)/,G=/(msie) ([\w.]+)/,B=/(mozilla)(?:.*? rv:([\w.]+))?/,R=/-([a-z]|[0-9])/ig,u=/^-ms-/,v=function(a,b){return(b+"").toUpperCase()},A=X.userAgent,N,U,C=Object.prototype.toString,Q=Object.prototype.hasOwnProperty,
T=Array.prototype.push,ga=Array.prototype.slice,W=String.prototype.trim,D=Array.prototype.indexOf,ua={};d.fn=d.prototype={constructor:d,init:function(a,c,e){var f;if(!a)return this;if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if("body"===a&&!c&&E.body)return this.context=E,this[0]=E.body,this.selector=a,this.length=1,this;if("string"===typeof a){f="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&3<=a.length?[null,a,null]:h.exec(a);if(!f||!f[1]&&c)return!c||c.jquery?(c||e).find(a):
this.constructor(c).find(a);if(f[1])return e=(c=c instanceof d?c[0]:c)?c.ownerDocument||c:E,(a=r.exec(a))?d.isPlainObject(c)?(a=[E.createElement(a[1])],d.fn.attr.call(a,c,!0)):a=[e.createElement(a[1])]:(a=d.buildFragment([f[1]],[e]),a=(a.cacheable?d.clone(a.fragment):a.fragment).childNodes),d.merge(this,a);if((c=E.getElementById(f[2]))&&c.parentNode){if(c.id!==f[2])return e.find(a);this.length=1;this[0]=c}this.context=E;this.selector=a;return this}if(d.isFunction(a))return e.ready(a);a.selector!==
b&&(this.selector=a.selector,this.context=a.context);return d.makeArray(a,this)},selector:"",jquery:"1.7.2",length:0,size:function(){return this.length},toArray:function(){return ga.call(this,0)},get:function(a){return null==a?this.toArray():0>a?this[this.length+a]:this[a]},pushStack:function(a,b,c){var e=this.constructor();d.isArray(a)?T.apply(e,a):d.merge(e,a);e.prevObject=this;e.context=this.context;"find"===b?e.selector=this.selector+(this.selector?" ":"")+c:b&&(e.selector=this.selector+"."+b+
"("+c+")");return e},each:function(a,b){return d.each(this,a,b)},ready:function(a){d.bindReady();N.add(a);return this},eq:function(a){a=+a;return-1===a?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(ga.apply(this,arguments),"slice",ga.call(arguments).join(","))},map:function(a){return this.pushStack(d.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},
push:T,sort:[].sort,splice:[].splice};d.fn.init.prototype=d.fn;d.extend=d.fn.extend=function(){var a,c,e,f,g,h=arguments[0]||{},k=1,m=arguments.length,n=!1;"boolean"===typeof h&&(n=h,h=arguments[1]||{},k=2);"object"===typeof h||d.isFunction(h)||(h={});m===k&&(h=this,--k);for(;k<m;k++)if(null!=(a=arguments[k]))for(c in a)e=h[c],f=a[c],h!==f&&(n&&f&&(d.isPlainObject(f)||(g=d.isArray(f)))?(g?(g=!1,e=e&&d.isArray(e)?e:[]):e=e&&d.isPlainObject(e)?e:{},h[c]=d.extend(n,e,f)):f!==b&&(h[c]=f));return h};d.extend({noConflict:function(b){a.$===
d&&(a.$=f);b&&a.jQuery===d&&(a.jQuery=e);return d},isReady:!1,readyWait:1,holdReady:function(a){a?d.readyWait++:d.ready(!0)},ready:function(a){if(!0===a&&!--d.readyWait||!0!==a&&!d.isReady){if(!E.body)return setTimeout(d.ready,1);d.isReady=!0;!0!==a&&0<--d.readyWait||(N.fireWith(E,[d]),d.fn.trigger&&d(E).trigger("ready").off("ready"))}},bindReady:function(){if(!N){N=d.Callbacks("once memory");if("complete"===E.readyState)return setTimeout(d.ready,1);if(E.addEventListener)E.addEventListener("DOMContentLoaded",
U,!1),a.addEventListener("load",d.ready,!1);else if(E.attachEvent){E.attachEvent("onreadystatechange",U);a.attachEvent("onload",d.ready);var b=!1;try{b=null==a.frameElement}catch(e){}E.documentElement.doScroll&&b&&c()}}},isFunction:function(a){return"function"===d.type(a)},isArray:Array.isArray||function(a){return"array"===d.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return null==a?String(a):ua[C.call(a)]||
"object"},isPlainObject:function(a){if(!a||"object"!==d.type(a)||a.nodeType||d.isWindow(a))return!1;try{if(a.constructor&&!Q.call(a,"constructor")&&!Q.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}for(var e in a);return e===b||Q.call(a,e)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw Error(a);},parseJSON:function(b){if("string"!==typeof b||!b)return null;b=d.trim(b);if(a.JSON&&a.JSON.parse)return a.JSON.parse(b);if(q.test(b.replace(p,
"@").replace(w,"]").replace(x,"")))return(new Function("return "+b))();d.error("Invalid JSON: "+b)},parseXML:function(c){if("string"!==typeof c||!c)return null;var e,f;try{a.DOMParser?(f=new DOMParser,e=f.parseFromString(c,"text/xml")):(e=new ActiveXObject("Microsoft.XMLDOM"),e.async="false",e.loadXML(c))}catch(g){e=b}e&&e.documentElement&&!e.getElementsByTagName("parsererror").length||d.error("Invalid XML: "+c);return e},noop:function(){},globalEval:function(b){b&&k.test(b)&&(a.execScript||function(b){a.eval.call(a,
b)})(b)},camelCase:function(a){return a.replace(u,"ms-").replace(R,v)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,c,e){var f,g=0,h=a.length,k=h===b||d.isFunction(a);if(e)if(k)for(f in a){if(!1===c.apply(a[f],e))break}else for(;g<h&&!1!==c.apply(a[g++],e););else if(k)for(f in a){if(!1===c.call(a[f],f,a[f]))break}else for(;g<h&&!1!==c.call(a[g],g,a[g++]););return a},trim:W?function(a){return null==a?"":W.call(a)}:function(a){return null==a?
"":a.toString().replace(m,"").replace(n,"")},makeArray:function(a,b){var c=b||[];if(null!=a){var e=d.type(a);null==a.length||"string"===e||"function"===e||"regexp"===e||d.isWindow(a)?T.call(c,a):d.merge(c,a)}return c},inArray:function(a,b,c){var d;if(b){if(D)return D.call(b,a,c);d=b.length;for(c=c?0>c?Math.max(0,d+c):c:0;c<d;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,c){var d=a.length,e=0;if("number"===typeof c.length)for(var f=c.length;e<f;e++)a[d++]=c[e];else for(;c[e]!==b;)a[d++]=
c[e++];a.length=d;return a},grep:function(a,b,c){var d=[],e;c=!!c;for(var f=0,g=a.length;f<g;f++)e=!!b(a[f],f),c!==e&&d.push(a[f]);return d},map:function(a,c,e){var f,g,h=[],k=0,m=a.length;if(a instanceof d||m!==b&&"number"===typeof m&&(0<m&&a[0]&&a[m-1]||0===m||d.isArray(a)))for(;k<m;k++)f=c(a[k],k,e),null!=f&&(h[h.length]=f);else for(g in a)f=c(a[g],g,e),null!=f&&(h[h.length]=f);return h.concat.apply([],h)},guid:1,proxy:function(a,c){if("string"===typeof c){var e=a[c];c=a;a=e}if(!d.isFunction(a))return b;
var f=ga.call(arguments,2),e=function(){return a.apply(c,f.concat(ga.call(arguments)))};e.guid=a.guid=a.guid||e.guid||d.guid++;return e},access:function(a,c,e,f,g,h,k){var m,n=null==e,r=0,q=a.length;if(e&&"object"===typeof e){for(r in e)d.access(a,c,r,e[r],1,h,f);g=1}else if(f!==b){m=k===b&&d.isFunction(f);n&&(m?(m=c,c=function(a,b,c){return m.call(d(a),c)}):(c.call(a,f),c=null));if(c)for(;r<q;r++)c(a[r],e,m?f.call(a[r],r,c(a[r],e)):f,k);g=1}return g?a:n?c.call(a):q?c(a[0],e):h},now:function(){return(new Date).getTime()},
uaMatch:function(a){a=a.toLowerCase();a=L.exec(a)||s.exec(a)||G.exec(a)||0>a.indexOf("compatible")&&B.exec(a)||[];return{browser:a[1]||"",version:a[2]||"0"}},sub:function(){function a(b,c){return new a.fn.init(b,c)}d.extend(!0,a,this);a.superclass=this;a.fn=a.prototype=this();a.fn.constructor=a;a.sub=this.sub;a.fn.init=function(c,e){e&&e instanceof d&&!(e instanceof a)&&(e=a(e));return d.fn.init.call(this,c,e,b)};a.fn.init.prototype=a.fn;var b=a(E);return a},browser:{}});d.each("Boolean Number String Function Array Date RegExp Object".split(" "),
function(a,b){ua["[object "+b+"]"]=b.toLowerCase()});A=d.uaMatch(A);A.browser&&(d.browser[A.browser]=!0,d.browser.version=A.version);d.browser.webkit&&(d.browser.safari=!0);k.test("\u00a0")&&(m=/^[\s\xA0]+/,n=/[\s\xA0]+$/);g=d(E);E.addEventListener?U=function(){E.removeEventListener("DOMContentLoaded",U,!1);d.ready()}:E.attachEvent&&(U=function(){"complete"===E.readyState&&(E.detachEvent("onreadystatechange",U),d.ready())});return d}(),W={};r.Callbacks=function(a){a=a?W[a]||c(a):{};var d=[],e=[],
f,g,h,k,m,n,q=function(b){var c,e,f,g;c=0;for(e=b.length;c<e;c++)f=b[c],g=r.type(f),"array"===g?q(f):"function"===g&&(a.unique&&w.has(f)||d.push(f))},p=function(b,c){c=c||[];f=!a.memory||[b,c];h=g=!0;n=k||0;k=0;for(m=d.length;d&&n<m;n++)if(!1===d[n].apply(b,c)&&a.stopOnFalse){f=!0;break}h=!1;d&&(a.once?!0===f?w.disable():d=[]:e&&e.length&&(f=e.shift(),w.fireWith(f[0],f[1])))},w={add:function(){if(d){var a=d.length;q(arguments);h?m=d.length:f&&!0!==f&&(k=a,p(f[0],f[1]))}return this},remove:function(){if(d)for(var b=
arguments,c=0,e=b.length;c<e;c++)for(var f=0;f<d.length&&(b[c]!==d[f]||(h&&f<=m&&(m--,f<=n&&n--),d.splice(f--,1),!a.unique));f++);return this},has:function(a){if(d)for(var b=0,c=d.length;b<c;b++)if(a===d[b])return!0;return!1},empty:function(){d=[];return this},disable:function(){d=e=f=b;return this},disabled:function(){return!d},lock:function(){e=b;f&&!0!==f||w.disable();return this},locked:function(){return!e},fireWith:function(b,c){e&&(h?a.once||e.push([b,c]):a.once&&f||p(b,c));return this},fire:function(){w.fireWith(this,
arguments);return this},fired:function(){return!!g}};return w};var ba=[].slice;r.extend({Deferred:function(a){var b=r.Callbacks("once memory"),c=r.Callbacks("once memory"),d=r.Callbacks("memory"),e="pending",f={resolve:b,reject:c,notify:d},g={done:b.add,fail:c.add,progress:d.add,state:function(){return e},isResolved:b.fired,isRejected:c.fired,then:function(a,b,c){h.done(a).fail(b).progress(c);return this},always:function(){h.done.apply(h,arguments).fail.apply(h,arguments);return this},pipe:function(a,
b,c){return r.Deferred(function(d){r.each({done:[a,"resolve"],fail:[b,"reject"],progress:[c,"notify"]},function(a,b){var c=b[0],e=b[1],f;if(r.isFunction(c))h[a](function(){if((f=c.apply(this,arguments))&&r.isFunction(f.promise))f.promise().then(d.resolve,d.reject,d.notify);else d[e+"With"](this===h?d:this,[f])});else h[a](d[e])})}).promise()},promise:function(a){if(null==a)a=g;else for(var b in g)a[b]=g[b];return a}},h=g.promise({}),k;for(k in f)h[k]=f[k].fire,h[k+"With"]=f[k].fireWith;h.done(function(){e=
"resolved"},c.disable,d.lock).fail(function(){e="rejected"},b.disable,d.lock);a&&a.call(h,h);return h},when:function(a){function b(a){return function(b){d[a]=1<arguments.length?ba.call(arguments,0):b;--h||k.resolveWith(k,d)}}function c(a){return function(b){g[a]=1<arguments.length?ba.call(arguments,0):b;k.notifyWith(m,g)}}var d=ba.call(arguments,0),e=0,f=d.length,g=Array(f),h=f,k=1>=f&&a&&r.isFunction(a.promise)?a:r.Deferred(),m=k.promise();if(1<f){for(;e<f;e++)d[e]&&d[e].promise&&r.isFunction(d[e].promise)?
d[e].promise().then(b(e),k.reject,c(e)):--h;h||k.resolveWith(k,d)}else k!==a&&k.resolveWith(k,f?[a]:[]);return m}});r.support=function(){var b,c,d,e,f,g,h,k,m=E.createElement("div");m.setAttribute("className","t");m.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>";c=m.getElementsByTagName("*");d=m.getElementsByTagName("a")[0];if(!c||!c.length||!d)return{};e=E.createElement("select");f=e.appendChild(E.createElement("option"));c=
m.getElementsByTagName("input")[0];b={leadingWhitespace:3===m.firstChild.nodeType,tbody:!m.getElementsByTagName("tbody").length,htmlSerialize:!!m.getElementsByTagName("link").length,style:/top/.test(d.getAttribute("style")),hrefNormalized:"/a"===d.getAttribute("href"),opacity:/^0.55/.test(d.style.opacity),cssFloat:!!d.style.cssFloat,checkOn:"on"===c.value,optSelected:f.selected,getSetAttribute:"t"!==m.className,enctype:!!E.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==E.createElement("nav").cloneNode(!0).outerHTML,
submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,pixelMargin:!0};r.boxModel=b.boxModel="CSS1Compat"===E.compatMode;c.checked=!0;b.noCloneChecked=c.cloneNode(!0).checked;e.disabled=!0;b.optDisabled=!f.disabled;try{delete m.test}catch(n){b.deleteExpando=!1}!m.addEventListener&&m.attachEvent&&m.fireEvent&&(m.attachEvent("onclick",function(){b.noCloneEvent=!1}),m.cloneNode(!0).fireEvent("onclick"));
c=E.createElement("input");c.value="t";c.setAttribute("type","radio");b.radioValue="t"===c.value;c.setAttribute("checked","checked");c.setAttribute("name","t");m.appendChild(c);d=E.createDocumentFragment();d.appendChild(m.lastChild);b.checkClone=d.cloneNode(!0).cloneNode(!0).lastChild.checked;b.appendChecked=c.checked;d.removeChild(c);d.appendChild(m);if(m.attachEvent)for(h in{submit:1,change:1,focusin:1})c="on"+h,k=c in m,k||(m.setAttribute(c,"return;"),k="function"===typeof m[c]),b[h+"Bubbles"]=
k;d.removeChild(m);d=e=f=m=c=null;r(function(){var c,d,e,f,h=E.getElementsByTagName("body")[0];h&&(c=E.createElement("div"),c.style.cssText="padding:0;margin:0;border:0;visibility:hidden;width:0;height:0;position:static;top:0;margin-top:1px",h.insertBefore(c,h.firstChild),m=E.createElement("div"),c.appendChild(m),m.innerHTML="<table><tr><td style='padding:0;margin:0;border:0;display:none'></td><td>t</td></tr></table>",g=m.getElementsByTagName("td"),k=0===g[0].offsetHeight,g[0].style.display="",g[1].style.display=
"none",b.reliableHiddenOffsets=k&&0===g[0].offsetHeight,a.getComputedStyle&&(m.innerHTML="",d=E.createElement("div"),d.style.width="0",d.style.marginRight="0",m.style.width="2px",m.appendChild(d),b.reliableMarginRight=0===(parseInt((a.getComputedStyle(d,null)||{marginRight:0}).marginRight,10)||0)),"undefined"!==typeof m.style.zoom&&(m.innerHTML="",m.style.width=m.style.padding="1px",m.style.border=0,m.style.overflow="hidden",m.style.display="inline",m.style.zoom=1,b.inlineBlockNeedsLayout=3===m.offsetWidth,
m.style.display="block",m.style.overflow="visible",m.innerHTML="<div style='width:5px;'></div>",b.shrinkWrapBlocks=3!==m.offsetWidth),m.style.cssText="position:absolute;top:0;left:0;width:1px;height:1px;padding:0;margin:0;border:0;visibility:hidden;",m.innerHTML="<div style='position:absolute;top:0;left:0;width:1px;height:1px;padding:0;margin:0;border:5px solid #000;display:block;'><div style='padding:0;margin:0;border:0;display:block;overflow:hidden;'></div></div><table style='position:absolute;top:0;left:0;width:1px;height:1px;padding:0;margin:0;border:5px solid #000;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>",
d=m.firstChild,e=d.firstChild,f=d.nextSibling.firstChild.firstChild,f={doesNotAddBorder:5!==e.offsetTop,doesAddBorderForTableAndCells:5===f.offsetTop},e.style.position="fixed",e.style.top="20px",f.fixedPosition=20===e.offsetTop||15===e.offsetTop,e.style.position=e.style.top="",d.style.overflow="hidden",d.style.position="relative",f.subtractsBorderForOverflowNotVisible=-5===e.offsetTop,f.doesNotIncludeMarginInBodyOffset=1!==h.offsetTop,a.getComputedStyle&&(m.style.marginTop="1%",b.pixelMargin="1%"!==
(a.getComputedStyle(m,null)||{marginTop:0}).marginTop),"undefined"!==typeof c.style.zoom&&(c.style.zoom=1),h.removeChild(c),m=null,r.extend(b,f))});return b}();var la=/^(?:\{.*\}|\[.*\])$/,w=/([A-Z])/g;r.extend({cache:{},uuid:0,expando:"jQuery"+(r.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){a=a.nodeType?r.cache[a[r.expando]]:a[r.expando];return!!a&&!e(a)},data:function(a,c,d,e){if(r.acceptData(a)){var f;
f=r.expando;var g="string"===typeof c,h=a.nodeType,k=h?r.cache:a,m=h?a[f]:a[f]&&f,n="events"===c;if(m&&k[m]&&(n||e||k[m].data)||!g||d!==b){m||(h?a[f]=m=++r.uuid:m=f);k[m]||(k[m]={},h||(k[m].toJSON=r.noop));if("object"===typeof c||"function"===typeof c)e?k[m]=r.extend(k[m],c):k[m].data=r.extend(k[m].data,c);f=a=k[m];e||(a.data||(a.data={}),a=a.data);d!==b&&(a[r.camelCase(c)]=d);if(n&&!a[c])return f.events;g?(d=a[c],null==d&&(d=a[r.camelCase(c)])):d=a;return d}}},removeData:function(a,b,c){if(r.acceptData(a)){var d,
f,g,h=r.expando,k=a.nodeType,m=k?r.cache:a,n=k?a[h]:h;if(m[n]){if(b&&(d=c?m[n]:m[n].data)){r.isArray(b)||(b in d?b=[b]:(b=r.camelCase(b),b=b in d?[b]:b.split(" ")));f=0;for(g=b.length;f<g;f++)delete d[b[f]];if(!(c?e:r.isEmptyObject)(d))return}if(!c&&(delete m[n].data,!e(m[n])))return;r.support.deleteExpando||!m.setInterval?delete m[n]:m[n]=null;k&&(r.support.deleteExpando?delete a[h]:a.removeAttribute?a.removeAttribute(h):a[h]=null)}}},_data:function(a,b,c){return r.data(a,b,c,!0)},acceptData:function(a){if(a.nodeName){var b=
r.noData[a.nodeName.toLowerCase()];if(b)return!(!0===b||a.getAttribute("classid")!==b)}return!0}});r.fn.extend({data:function(a,c){var e,f,g,h,k,m=this[0],n=0,q=null;if(a===b){if(this.length&&(q=r.data(m),1===m.nodeType&&!r._data(m,"parsedAttrs"))){g=m.attributes;for(k=g.length;n<k;n++)h=g[n].name,0===h.indexOf("data-")&&(h=r.camelCase(h.substring(5)),d(m,h,q[h]));r._data(m,"parsedAttrs",!0)}return q}if("object"===typeof a)return this.each(function(){r.data(this,a)});e=a.split(".",2);e[1]=e[1]?"."+
e[1]:"";f=e[1]+"!";return r.access(this,function(c){if(c===b)return q=this.triggerHandler("getData"+f,[e[0]]),q===b&&m&&(q=r.data(m,a),q=d(m,a,q)),q===b&&e[1]?this.data(e[0]):q;e[1]=c;this.each(function(){var b=r(this);b.triggerHandler("setData"+f,e);r.data(this,a,c);b.triggerHandler("changeData"+f,e)})},null,c,1<arguments.length,null,!1)},removeData:function(a){return this.each(function(){r.removeData(this,a)})}});r.extend({_mark:function(a,b){a&&(b=(b||"fx")+"mark",r._data(a,b,(r._data(a,b)||0)+
1))},_unmark:function(a,b,c){!0!==a&&(c=b,b=a,a=!1);if(b){c=c||"fx";var d=c+"mark";(a=a?0:(r._data(b,d)||1)-1)?r._data(b,d,a):(r.removeData(b,d,!0),f(b,c,"mark"))}},queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=r._data(a,b),c&&(!d||r.isArray(c)?d=r._data(a,b,r.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){b=b||"fx";var c=r.queue(a,b),d=c.shift(),e={};"inprogress"===d&&(d=c.shift());d&&("fx"===b&&c.unshift("inprogress"),r._data(a,b+".run",e),d.call(a,function(){r.dequeue(a,
b)},e));c.length||(r.removeData(a,b+"queue "+b+".run",!0),f(a,b,"queue"))}});r.fn.extend({queue:function(a,c){var d=2;"string"!==typeof a&&(c=a,a="fx",d--);return arguments.length<d?r.queue(this[0],a):c===b?this:this.each(function(){var b=r.queue(this,a,c);"fx"===a&&"inprogress"!==b[0]&&r.dequeue(this,a)})},dequeue:function(a){return this.each(function(){r.dequeue(this,a)})},delay:function(a,b){a=r.fx?r.fx.speeds[a]||a:a;return this.queue(b||"fx",function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},
clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){function d(){--h||e.resolveWith(f,[f])}"string"!==typeof a&&(c=a,a=b);a=a||"fx";for(var e=r.Deferred(),f=this,g=f.length,h=1,k=a+"defer",m=a+"queue",n=a+"mark",q;g--;)if(q=r.data(f[g],k,b,!0)||(r.data(f[g],m,b,!0)||r.data(f[g],n,b,!0))&&r.data(f[g],k,r.Callbacks("once memory"),!0))h++,q.add(d);d();return e.promise(c)}});var R=/[\n\t\r]/g,U=/\s+/,ua=/\r/g,wa=/^(?:button|input)$/i,ub=/^(?:button|input|object|select|textarea)$/i,
pb=/^a(?:rea)?$/i,V=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,Da=r.support.getSetAttribute,qa,Jb,qb;r.fn.extend({attr:function(a,b){return r.access(this,r.attr,a,b,1<arguments.length)},removeAttr:function(a){return this.each(function(){r.removeAttr(this,a)})},prop:function(a,b){return r.access(this,r.prop,a,b,1<arguments.length)},removeProp:function(a){a=r.propFix[a]||a;return this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},
addClass:function(a){var b,c,d,e,f,g,h;if(r.isFunction(a))return this.each(function(b){r(this).addClass(a.call(this,b,this.className))});if(a&&"string"===typeof a)for(b=a.split(U),c=0,d=this.length;c<d;c++)if(e=this[c],1===e.nodeType)if(e.className||1!==b.length){f=" "+e.className+" ";g=0;for(h=b.length;g<h;g++)~f.indexOf(" "+b[g]+" ")||(f+=b[g]+" ");e.className=r.trim(f)}else e.className=a;return this},removeClass:function(a){var c,d,e,f,g,h,k;if(r.isFunction(a))return this.each(function(b){r(this).removeClass(a.call(this,
b,this.className))});if(a&&"string"===typeof a||a===b)for(c=(a||"").split(U),d=0,e=this.length;d<e;d++)if(f=this[d],1===f.nodeType&&f.className)if(a){g=(" "+f.className+" ").replace(R," ");h=0;for(k=c.length;h<k;h++)g=g.replace(" "+c[h]+" "," ");f.className=r.trim(g)}else f.className="";return this},toggleClass:function(a,b){var c=typeof a,d="boolean"===typeof b;return r.isFunction(a)?this.each(function(c){r(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if("string"===
c)for(var e,f=0,g=r(this),h=b,k=a.split(U);e=k[f++];)h=d?h:!g.hasClass(e),g[h?"addClass":"removeClass"](e);else if("undefined"===c||"boolean"===c)this.className&&r._data(this,"__className__",this.className),this.className=this.className||!1===a?"":r._data(this,"__className__")||""})},hasClass:function(a){a=" "+a+" ";for(var b=0,c=this.length;b<c;b++)if(1===this[b].nodeType&&-1<(" "+this[b].className+" ").replace(R," ").indexOf(a))return!0;return!1},val:function(a){var c,d,e,f=this[0];if(arguments.length)return e=
r.isFunction(a),this.each(function(d){var f=r(this);1===this.nodeType&&(d=e?a.call(this,d,f.val()):a,null==d?d="":"number"===typeof d?d+="":r.isArray(d)&&(d=r.map(d,function(a){return null==a?"":a+""})),c=r.valHooks[this.type]||r.valHooks[this.nodeName.toLowerCase()],c&&"set"in c&&c.set(this,d,"value")!==b||(this.value=d))});if(f){if((c=r.valHooks[f.type]||r.valHooks[f.nodeName.toLowerCase()])&&"get"in c&&(d=c.get(f,"value"))!==b)return d;d=f.value;return"string"===typeof d?d.replace(ua,""):null==
d?"":d}}});r.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,c,d=a.selectedIndex,e=[],f=a.options,g="select-one"===a.type;if(0>d)return null;a=g?d:0;for(c=g?d+1:f.length;a<c;a++)if(b=f[a],!(!b.selected||(r.support.optDisabled?b.disabled:null!==b.getAttribute("disabled"))||b.parentNode.disabled&&r.nodeName(b.parentNode,"optgroup"))){b=r(b).val();if(g)return b;e.push(b)}return g&&!e.length&&f.length?r(f[d]).val():
e},set:function(a,b){var c=r.makeArray(b);r(a).find("option").each(function(){this.selected=0<=r.inArray(r(this).val(),c)});c.length||(a.selectedIndex=-1);return c}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(a,c,d,e){var f,g,h=a.nodeType;if(a&&3!==h&&8!==h&&2!==h){if(e&&c in r.attrFn)return r(a)[c](d);if("undefined"===typeof a.getAttribute)return r.prop(a,c,d);if(e=1!==h||!r.isXMLDoc(a))c=c.toLowerCase(),g=r.attrHooks[c]||(V.test(c)?Jb:qa);if(d!==b)if(null===
d)r.removeAttr(a,c);else{if(g&&"set"in g&&e&&(f=g.set(a,d,c))!==b)return f;a.setAttribute(c,""+d);return d}else{if(g&&"get"in g&&e&&null!==(f=g.get(a,c)))return f;f=a.getAttribute(c);return null===f?b:f}}},removeAttr:function(a,b){var c,d,e,f,g,h=0;if(b&&1===a.nodeType)for(d=b.toLowerCase().split(U),f=d.length;h<f;h++)if(e=d[h])c=r.propFix[e]||e,(g=V.test(e))||r.attr(a,e,""),a.removeAttribute(Da?e:c),g&&c in a&&(a[c]=!1)},attrHooks:{type:{set:function(a,b){if(wa.test(a.nodeName)&&a.parentNode)r.error("type property can't be changed");
else if(!r.support.radioValue&&"radio"===b&&r.nodeName(a,"input")){var c=a.value;a.setAttribute("type",b);c&&(a.value=c);return b}}},value:{get:function(a,b){return qa&&r.nodeName(a,"button")?qa.get(a,b):b in a?a.value:null},set:function(a,b,c){if(qa&&r.nodeName(a,"button"))return qa.set(a,b,c);a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",
usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,f,g;g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g){if(g=1!==g||!r.isXMLDoc(a))c=r.propFix[c]||c,f=r.propHooks[c];return d!==b?f&&"set"in f&&(e=f.set(a,d,c))!==b?e:a[c]=d:f&&"get"in f&&null!==(e=f.get(a,c))?e:a[c]}},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):ub.test(a.nodeName)||pb.test(a.nodeName)&&a.href?0:b}}}});r.attrHooks.tabindex=
r.propHooks.tabIndex;Jb={get:function(a,c){var d,e=r.prop(a,c);return!0===e||"boolean"!==typeof e&&(d=a.getAttributeNode(c))&&!1!==d.nodeValue?c.toLowerCase():b},set:function(a,b,c){!1===b?r.removeAttr(a,c):(b=r.propFix[c]||c,b in a&&(a[b]=!0),a.setAttribute(c,c.toLowerCase()));return c}};Da||(qb={name:!0,id:!0,coords:!0},qa=r.valHooks.button={get:function(a,c){var d;return(d=a.getAttributeNode(c))&&(qb[c]?""!==d.nodeValue:d.specified)?d.nodeValue:b},set:function(a,b,c){var d=a.getAttributeNode(c);
d||(d=E.createAttribute(c),a.setAttributeNode(d));return d.nodeValue=b+""}},r.attrHooks.tabindex.set=qa.set,r.each(["width","height"],function(a,b){r.attrHooks[b]=r.extend(r.attrHooks[b],{set:function(a,c){if(""===c)return a.setAttribute(b,"auto"),c}})}),r.attrHooks.contenteditable={get:qa.get,set:function(a,b,c){""===b&&(b="false");qa.set(a,b,c)}});r.support.hrefNormalized||r.each(["href","src","width","height"],function(a,c){r.attrHooks[c]=r.extend(r.attrHooks[c],{get:function(a){a=a.getAttribute(c,
2);return null===a?b:a}})});r.support.style||(r.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=""+b}});r.support.optSelected||(r.propHooks.selected=r.extend(r.propHooks.selected,{get:function(a){if(a=a.parentNode)a.selectedIndex,a.parentNode&&a.parentNode.selectedIndex;return null}}));r.support.enctype||(r.propFix.enctype="encoding");r.support.checkOn||r.each(["radio","checkbox"],function(){r.valHooks[this]={get:function(a){return null===
a.getAttribute("value")?"on":a.value}}});r.each(["radio","checkbox"],function(){r.valHooks[this]=r.extend(r.valHooks[this],{set:function(a,b){if(r.isArray(b))return a.checked=0<=r.inArray(r(a).val(),b)}})});var hb=/^(?:textarea|input|select)$/i,ha=/^([^\.]*)?(?:\.(.+))?$/,ea=/(?:^|\s)hover(\.\S+)?\b/,Kb=/^key/,vb=/^(?:mouse|contextmenu)|click/,Bb=/^(?:focusinfocus|focusoutblur)$/,wb=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,Oa=function(a){if(a=wb.exec(a))a[1]=(a[1]||"").toLowerCase(),a[3]=a[3]&&new RegExp("(?:^|\\s)"+
a[3]+"(?:\\s|$)");return a},ib=function(a){return r.event.special.hover?a:a.replace(ea,"mouseenter$1 mouseleave$1")};r.event={add:function(a,c,d,e,f){var g,h,k,m,n,q,p,w,E;if(3!==a.nodeType&&8!==a.nodeType&&c&&d&&(g=r._data(a))){d.handler&&(p=d,d=p.handler,f=p.selector);d.guid||(d.guid=r.guid++);k=g.events;k||(g.events=k={});h=g.handle;h||(g.handle=h=function(a){return"undefined"===typeof r||a&&r.event.triggered===a.type?b:r.event.dispatch.apply(h.elem,arguments)},h.elem=a);c=r.trim(ib(c)).split(" ");
for(g=0;g<c.length;g++)m=ha.exec(c[g])||[],n=m[1],q=(m[2]||"").split(".").sort(),E=r.event.special[n]||{},n=(f?E.delegateType:E.bindType)||n,E=r.event.special[n]||{},m=r.extend({type:n,origType:m[1],data:e,handler:d,guid:d.guid,selector:f,quick:f&&Oa(f),namespace:q.join(".")},p),w=k[n],w||(w=k[n]=[],w.delegateCount=0,E.setup&&!1!==E.setup.call(a,e,q,h)||(a.addEventListener?a.addEventListener(n,h,!1):a.attachEvent&&a.attachEvent("on"+n,h))),E.add&&(E.add.call(a,m),m.handler.guid||(m.handler.guid=d.guid)),
f?w.splice(w.delegateCount++,0,m):w.push(m),r.event.global[n]=!0;a=null}},global:{},remove:function(a,b,c,d,e){var f=r.hasData(a)&&r._data(a),g,h,k,m,n,q,p,w,E,x;if(f&&(p=f.events)){b=r.trim(ib(b||"")).split(" ");for(g=0;g<b.length;g++)if(h=ha.exec(b[g])||[],k=m=h[1],h=h[2],k){w=r.event.special[k]||{};k=(d?w.delegateType:w.bindType)||k;E=p[k]||[];n=E.length;h=h?new RegExp("(^|\\.)"+h.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;for(q=0;q<E.length;q++)x=E[q],!e&&m!==x.origType||c&&c.guid!==
x.guid||h&&!h.test(x.namespace)||d&&d!==x.selector&&("**"!==d||!x.selector)||(E.splice(q--,1),x.selector&&E.delegateCount--,w.remove&&w.remove.call(a,x));0===E.length&&n!==E.length&&(w.teardown&&!1!==w.teardown.call(a,h)||r.removeEvent(a,k,f.handle),delete p[k])}else for(k in p)r.event.remove(a,k+b[g],c,d,!0);if(r.isEmptyObject(p)){if(b=f.handle)b.elem=null;r.removeData(a,["events","handle"],!0)}}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,e,f){if(!e||3!==e.nodeType&&
8!==e.nodeType){var g=c.type||c,h=[],k,m,n,q,p;if(!Bb.test(g+r.event.triggered)&&(0<=g.indexOf("!")&&(g=g.slice(0,-1),k=!0),0<=g.indexOf(".")&&(h=g.split("."),g=h.shift(),h.sort()),e&&!r.event.customEvent[g]||r.event.global[g]))if(c="object"===typeof c?c[r.expando]?c:new r.Event(g,c):new r.Event(g),c.type=g,c.isTrigger=!0,c.exclusive=k,c.namespace=h.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,k=0>g.indexOf(":")?"on"+g:"",e){if(c.result=b,c.target||
(c.target=e),d=null!=d?r.makeArray(d):[],d.unshift(c),n=r.event.special[g]||{},!n.trigger||!1!==n.trigger.apply(e,d)){p=[[e,n.bindType||g]];if(!f&&!n.noBubble&&!r.isWindow(e)){q=n.delegateType||g;h=Bb.test(q+g)?e:e.parentNode;for(m=null;h;h=h.parentNode)p.push([h,q]),m=h;m&&m===e.ownerDocument&&p.push([m.defaultView||m.parentWindow||a,q])}for(m=0;m<p.length&&!c.isPropagationStopped();m++)h=p[m][0],c.type=p[m][1],(q=(r._data(h,"events")||{})[c.type]&&r._data(h,"handle"))&&q.apply(h,d),(q=k&&h[k])&&
r.acceptData(h)&&!1===q.apply(h,d)&&c.preventDefault();c.type=g;f||c.isDefaultPrevented()||n._default&&!1!==n._default.apply(e.ownerDocument,d)||"click"===g&&r.nodeName(e,"a")||!r.acceptData(e)||!k||!e[g]||("focus"===g||"blur"===g)&&0===c.target.offsetWidth||r.isWindow(e)||((m=e[k])&&(e[k]=null),r.event.triggered=g,e[g](),r.event.triggered=b,m&&(e[k]=m));return c.result}}else for(m in e=r.cache,e)e[m].events&&e[m].events[g]&&r.event.trigger(c,d,e[m].handle.elem,!0)}},dispatch:function(c){c=r.event.fix(c||
a.event);var d=(r._data(this,"events")||{})[c.type]||[],e=d.delegateCount,f=[].slice.call(arguments,0),g=!c.exclusive&&!c.namespace,h=r.event.special[c.type]||{},k=[],m,n,q,p,w,E,x;f[0]=c;c.delegateTarget=this;if(!h.preDispatch||!1!==h.preDispatch.call(this,c)){if(e&&(!c.button||"click"!==c.type))for(q=r(this),q.context=this.ownerDocument||this,n=c.target;n!=this;n=n.parentNode||this)if(!0!==n.disabled){w={};E=[];q[0]=n;for(m=0;m<e;m++){p=d[m];x=p.selector;if(w[x]===b){var L=w,s=x,G;if(p.quick){G=
p.quick;var B=n.attributes||{};G=(!G[1]||n.nodeName.toLowerCase()===G[1])&&(!G[2]||(B.id||{}).value===G[2])&&(!G[3]||G[3].test((B["class"]||{}).value))}else G=q.is(x);L[s]=G}w[x]&&E.push(p)}E.length&&k.push({elem:n,matches:E})}d.length>e&&k.push({elem:this,matches:d.slice(e)});for(m=0;m<k.length&&!c.isPropagationStopped();m++)for(e=k[m],c.currentTarget=e.elem,d=0;d<e.matches.length&&!c.isImmediatePropagationStopped();d++)if(p=e.matches[d],g||!c.namespace&&!p.namespace||c.namespace_re&&c.namespace_re.test(p.namespace))c.data=
p.data,c.handleObj=p,p=((r.event.special[p.origType]||{}).handle||p.handler).apply(e.elem,f),p!==b&&(c.result=p,!1===p&&(c.preventDefault(),c.stopPropagation()));h.postDispatch&&h.postDispatch.call(this,c);return c.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:["char","charCode","key","keyCode"],filter:function(a,b){null==a.which&&
(a.which=null!=b.charCode?b.charCode:b.keyCode);return a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,c){var d,e,f=c.button,g=c.fromElement;null==a.pageX&&null!=c.clientX&&(d=a.target.ownerDocument||E,e=d.documentElement,d=d.body,a.pageX=c.clientX+(e&&e.scrollLeft||d&&d.scrollLeft||0)-(e&&e.clientLeft||d&&d.clientLeft||0),a.pageY=c.clientY+(e&&e.scrollTop||d&&d.scrollTop||0)-(e&&e.clientTop||d&&
d.clientTop||0));!a.relatedTarget&&g&&(a.relatedTarget=g===a.target?c.toElement:g);a.which||f===b||(a.which=f&1?1:f&2?3:f&4?2:0);return a}},fix:function(a){if(a[r.expando])return a;var c,d,e=a,f=r.event.fixHooks[a.type]||{},g=f.props?this.props.concat(f.props):this.props;a=r.Event(e);for(c=g.length;c;)d=g[--c],a[d]=e[d];a.target||(a.target=e.srcElement||E);3===a.target.nodeType&&(a.target=a.target.parentNode);a.metaKey===b&&(a.metaKey=a.ctrlKey);return f.filter?f.filter(a,e):a},special:{ready:{setup:r.bindReady},
load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){r.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,c,d){a=r.extend(new r.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?r.event.trigger(a,null,b):r.event.dispatch.call(b,a);a.isDefaultPrevented()&&c.preventDefault()}};r.event.handle=r.event.dispatch;r.removeEvent=E.removeEventListener?function(a,
b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)};r.Event=function(a,b){if(!(this instanceof r.Event))return new r.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||!1===a.returnValue||a.getPreventDefault&&a.getPreventDefault()?g:h):this.type=a;b&&r.extend(this,b);this.timeStamp=a&&a.timeStamp||r.now();this[r.expando]=!0};r.Event.prototype={preventDefault:function(){this.isDefaultPrevented=
g;var a=this.originalEvent;a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=g;var a=this.originalEvent;a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=g;this.stopPropagation()},isDefaultPrevented:h,isPropagationStopped:h,isImmediatePropagationStopped:h};r.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){r.event.special[a]={delegateType:b,
bindType:b,handle:function(a){var c=a.relatedTarget,d=a.handleObj,e;if(!c||c!==this&&!r.contains(this,c))a.type=d.origType,e=d.handler.apply(this,arguments),a.type=b;return e}}});r.support.submitBubbles||(r.event.special.submit={setup:function(){if(r.nodeName(this,"form"))return!1;r.event.add(this,"click._submit keypress._submit",function(a){a=a.target;(a=r.nodeName(a,"input")||r.nodeName(a,"button")?a.form:b)&&!a._submit_attached&&(r.event.add(a,"submit._submit",function(a){a._submit_bubble=!0}),
a._submit_attached=!0)})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&r.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){if(r.nodeName(this,"form"))return!1;r.event.remove(this,"._submit")}});r.support.changeBubbles||(r.event.special.change={setup:function(){if(hb.test(this.nodeName)){if("checkbox"===this.type||"radio"===this.type)r.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&
(this._just_changed=!0)}),r.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1,r.event.simulate("change",this,a,!0))});return!1}r.event.add(this,"beforeactivate._change",function(a){a=a.target;hb.test(a.nodeName)&&!a._change_attached&&(r.event.add(a,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||r.event.simulate("change",this.parentNode,a,!0)}),a._change_attached=!0)})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||
a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type)return a.handleObj.handler.apply(this,arguments)},teardown:function(){r.event.remove(this,"._change");return hb.test(this.nodeName)}});r.support.focusinBubbles||r.each({focus:"focusin",blur:"focusout"},function(a,b){var c=0,d=function(a){r.event.simulate(b,a.target,r.event.fix(a),!0)};r.event.special[b]={setup:function(){0===c++&&E.addEventListener(a,d,!0)},teardown:function(){0===--c&&E.removeEventListener(a,d,!0)}}});r.fn.extend({on:function(a,
c,d,e,f){var g,k;if("object"===typeof a){"string"!==typeof c&&(d=d||c,c=b);for(k in a)this.on(k,c,d,a[k],f);return this}null==d&&null==e?(e=c,d=c=b):null==e&&("string"===typeof c?(e=d,d=b):(e=d,d=c,c=b));if(!1===e)e=h;else if(!e)return this;1===f&&(g=e,e=function(a){r().off(a);return g.apply(this,arguments)},e.guid=g.guid||(g.guid=r.guid++));return this.each(function(){r.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,c,d){if(a&&a.preventDefault&&a.handleObj){var e=
a.handleObj;r(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler);return this}if("object"===typeof a){for(e in a)this.off(e,c,a[e]);return this}if(!1===c||"function"===typeof c)d=c,c=b;!1===d&&(d=h);return this.each(function(){r.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){r(this.context).on(a,this.selector,b,c);return this},die:function(a,b){r(this.context).off(a,
this.selector||"**",b);return this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1==arguments.length?this.off(a,"**"):this.off(b,a,c)},trigger:function(a,b){return this.each(function(){r.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0])return r.event.trigger(a,b,this[0],!0)},toggle:function(a){var b=arguments,c=a.guid||r.guid++,d=0,e=function(c){var e=(r._data(this,"lastToggle"+a.guid)||0)%d;r._data(this,"lastToggle"+a.guid,e+1);c.preventDefault();
return b[e].apply(this,arguments)||!1};for(e.guid=c;d<b.length;)b[d++].guid=c;return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}});r.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){r.fn[b]=function(a,c){null==c&&(c=a,a=null);return 0<arguments.length?this.on(b,null,a,c):this.trigger(b)};
r.attrFn&&(r.attrFn[b]=!0);Kb.test(b)&&(r.event.fixHooks[b]=r.event.keyHooks);vb.test(b)&&(r.event.fixHooks[b]=r.event.mouseHooks)});(function(){function a(b,c,d,f,g,h){g=0;for(var k=f.length;g<k;g++){var m=f[g];if(m){for(var n=!1,m=m[b];m;){if(m[e]===d){n=f[m.sizset];break}1!==m.nodeType||h||(m[e]=d,m.sizset=g);if(m.nodeName.toLowerCase()===c){n=m;break}m=m[b]}f[g]=n}}}function c(a,b,d,f,g,h){g=0;for(var k=f.length;g<k;g++){var m=f[g];if(m){for(var n=!1,m=m[a];m;){if(m[e]===d){n=f[m.sizset];break}if(1===
m.nodeType)if(h||(m[e]=d,m.sizset=g),"string"!==typeof b){if(m===b){n=!0;break}}else if(0<p.filter(b,[m]).length){n=m;break}m=m[a]}f[g]=n}}}var d=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,e="sizcache"+(Math.random()+"").replace(".",""),f=0,g=Object.prototype.toString,h=!1,k=!0,m=/\\/g,n=/\r\n/g,q=/\W/;[0,0].sort(function(){k=!1;return 0});var p=function(a,b,c,e){c=c||[];var f=b=b||E;if(1!==b.nodeType&&9!==
b.nodeType)return[];if(!a||"string"!==typeof a)return c;var h,k,m,n,q,r=!0,w=p.isXML(b),s=[],L=a;do if(d.exec(""),h=d.exec(L))if(L=h[3],s.push(h[1]),h[2]){n=h[3];break}while(h);if(1<s.length&&G.exec(a))if(2===s.length&&x.relative[s[0]])k=A(s[0]+s[1],b,e);else for(k=x.relative[s[0]]?[b]:p(s.shift(),b);s.length;)a=s.shift(),x.relative[a]&&(a+=s.shift()),k=A(a,k,e);else if(!e&&1<s.length&&9===b.nodeType&&!w&&x.match.ID.test(s[0])&&!x.match.ID.test(s[s.length-1])&&(h=p.find(s.shift(),b,w),b=h.expr?p.filter(h.expr,
h.set)[0]:h.set[0]),b)for(h=e?{expr:s.pop(),set:B(e)}:p.find(s.pop(),1!==s.length||"~"!==s[0]&&"+"!==s[0]||!b.parentNode?b:b.parentNode,w),k=h.expr?p.filter(h.expr,h.set):h.set,0<s.length?m=B(k):r=!1;s.length;)h=q=s.pop(),x.relative[q]?h=s.pop():q="",null==h&&(h=b),x.relative[q](m,h,w);else m=[];m||(m=k);m||p.error(q||a);if("[object Array]"===g.call(m))if(r)if(b&&1===b.nodeType)for(a=0;null!=m[a];a++)m[a]&&(!0===m[a]||1===m[a].nodeType&&p.contains(b,m[a]))&&c.push(k[a]);else for(a=0;null!=m[a];a++)m[a]&&
1===m[a].nodeType&&c.push(k[a]);else c.push.apply(c,m);else B(m,c);n&&(p(n,f,c,e),p.uniqueSort(c));return c};p.uniqueSort=function(a){if(u&&(h=k,a.sort(u),h))for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1);return a};p.matches=function(a,b){return p(a,null,null,b)};p.matchesSelector=function(a,b){return 0<p(b,null,null,[a]).length};p.find=function(a,b,c){var d,e,f,g,h,k;if(!a)return[];e=0;for(f=x.order.length;e<f;e++)if(h=x.order[e],g=x.leftMatch[h].exec(a))if(k=g[1],g.splice(1,1),"\\"!==
k.substr(k.length-1)&&(g[1]=(g[1]||"").replace(m,""),d=x.find[h](g,b,c),null!=d)){a=a.replace(x.match[h],"");break}d||(d="undefined"!==typeof b.getElementsByTagName?b.getElementsByTagName("*"):[]);return{set:d,expr:a}};p.filter=function(a,c,d,e){for(var f,g,h,k,m,n,q,r,w=a,E=[],s=c,G=c&&c[0]&&p.isXML(c[0]);a&&c.length;){for(h in x.filter)if(null!=(f=x.leftMatch[h].exec(a))&&f[2]&&(n=x.filter[h],m=f[1],g=!1,f.splice(1,1),"\\"!==m.substr(m.length-1))){s===E&&(E=[]);if(x.preFilter[h])if(f=x.preFilter[h](f,
s,d,E,e,G),!f)g=k=!0;else if(!0===f)continue;if(f)for(q=0;null!=(m=s[q]);q++)m&&(k=n(m,f,q,s),r=e^k,d&&null!=k?r?g=!0:s[q]=!1:r&&(E.push(m),g=!0));if(k!==b){d||(s=E);a=a.replace(x.match[h],"");if(!g)return[];break}}if(a===w)if(null==g)p.error(a);else break;w=a}return s};p.error=function(a){throw Error("Syntax error, unrecognized expression: "+a);};var w=p.getText=function(a){var b,c;b=a.nodeType;var d="";if(b)if(1===b||9===b||11===b){if("string"===typeof a.textContent)return a.textContent;if("string"===
typeof a.innerText)return a.innerText.replace(n,"");for(a=a.firstChild;a;a=a.nextSibling)d+=w(a)}else{if(3===b||4===b)return a.nodeValue}else for(b=0;c=a[b];b++)8!==c.nodeType&&(d+=w(c));return d},x=p.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,
CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var c="string"===typeof b,d=c&&!q.test(b),
c=c&&!d;d&&(b=b.toLowerCase());for(var d=0,e=a.length,f;d<e;d++)if(f=a[d]){for(;(f=f.previousSibling)&&1!==f.nodeType;);a[d]=c||f&&f.nodeName.toLowerCase()===b?f||!1:f===b}c&&p.filter(b,a,!0)},">":function(a,b){var c,d="string"===typeof b,e=0,f=a.length;if(d&&!q.test(b))for(b=b.toLowerCase();e<f;e++){if(c=a[e])c=c.parentNode,a[e]=c.nodeName.toLowerCase()===b?c:!1}else{for(;e<f;e++)(c=a[e])&&(a[e]=d?c.parentNode:c.parentNode===b);d&&p.filter(b,a,!0)}},"":function(b,d,e){var g,h=f++,k=c;"string"!==
typeof d||q.test(d)||(g=d=d.toLowerCase(),k=a);k("parentNode",d,h,b,g,e)},"~":function(b,d,e){var g,h=f++,k=c;"string"!==typeof d||q.test(d)||(g=d=d.toLowerCase(),k=a);k("previousSibling",d,h,b,g,e)}},find:{ID:function(a,b,c){if("undefined"!==typeof b.getElementById&&!c)return(a=b.getElementById(a[1]))&&a.parentNode?[a]:[]},NAME:function(a,b){if("undefined"!==typeof b.getElementsByName){for(var c=[],d=b.getElementsByName(a[1]),e=0,f=d.length;e<f;e++)d[e].getAttribute("name")===a[1]&&c.push(d[e]);
return 0===c.length?null:c}},TAG:function(a,b){if("undefined"!==typeof b.getElementsByTagName)return b.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,b,c,d,e,f){a=" "+a[1].replace(m,"")+" ";if(f)return a;f=0;for(var g;null!=(g=b[f]);f++)g&&(e^(g.className&&0<=(" "+g.className+" ").replace(/[\t\n\r]/g," ").indexOf(a))?c||d.push(g):c&&(b[f]=!1));return!1},ID:function(a){return a[1].replace(m,"")},TAG:function(a,b){return a[1].replace(m,"").toLowerCase()},CHILD:function(a){if("nth"===a[1]){a[2]||
p.error(a[0]);a[2]=a[2].replace(/^\+|\s*/g,"");var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec("even"===a[2]&&"2n"||"odd"===a[2]&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0;a[3]=b[3]-0}else a[2]&&p.error(a[0]);a[0]=f++;return a},ATTR:function(a,b,c,d,e,f){b=a[1]=a[1].replace(m,"");!f&&x.attrMap[b]&&(a[1]=x.attrMap[b]);a[4]=(a[4]||a[5]||"").replace(m,"");"~="===a[2]&&(a[4]=" "+a[4]+" ");return a},PSEUDO:function(a,b,c,e,f){if("not"===a[1])if(1<(d.exec(a[3])||"").length||/^\w/.test(a[3]))a[3]=
p(a[3],null,null,b);else return a=p.filter(a[3],b,c,1^f),c||e.push.apply(e,a),!1;else if(x.match.POS.test(a[0])||x.match.CHILD.test(a[0]))return!0;return a},POS:function(a){a.unshift(!0);return a}},filters:{enabled:function(a){return!1===a.disabled&&"hidden"!==a.type},disabled:function(a){return!0===a.disabled},checked:function(a){return!0===a.checked},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return!0===a.selected},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},
has:function(a,b,c){return!!p(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute("type"),c=a.type;return"input"===a.nodeName.toLowerCase()&&"text"===c&&(b===c||null===b)},radio:function(a){return"input"===a.nodeName.toLowerCase()&&"radio"===a.type},checkbox:function(a){return"input"===a.nodeName.toLowerCase()&&"checkbox"===a.type},file:function(a){return"input"===a.nodeName.toLowerCase()&&"file"===a.type},password:function(a){return"input"===a.nodeName.toLowerCase()&&
"password"===a.type},submit:function(a){var b=a.nodeName.toLowerCase();return("input"===b||"button"===b)&&"submit"===a.type},image:function(a){return"input"===a.nodeName.toLowerCase()&&"image"===a.type},reset:function(a){var b=a.nodeName.toLowerCase();return("input"===b||"button"===b)&&"reset"===a.type},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},focus:function(a){return a===
a.ownerDocument.activeElement}},setFilters:{first:function(a,b){return 0===b},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return 0===b%2},odd:function(a,b){return 1===b%2},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=x.filters[e];if(f)return f(a,c,b,d);if("contains"===e)return 0<=(a.textContent||a.innerText||w([a])||"").indexOf(b[3]);
if("not"===e){b=b[3];c=0;for(d=b.length;c<d;c++)if(b[c]===a)return!1;return!0}p.error(e)},CHILD:function(a,b){var c,d,f,g,h,k;c=b[1];k=a;switch(c){case "only":case "first":for(;k=k.previousSibling;)if(1===k.nodeType)return!1;if("first"===c)return!0;k=a;case "last":for(;k=k.nextSibling;)if(1===k.nodeType)return!1;return!0;case "nth":c=b[2];d=b[3];if(1===c&&0===d)return!0;f=b[0];if((g=a.parentNode)&&(g[e]!==f||!a.nodeIndex)){h=0;for(k=g.firstChild;k;k=k.nextSibling)1===k.nodeType&&(k.nodeIndex=++h);
g[e]=f}k=a.nodeIndex-d;return 0===c?0===k:0===k%c&&0<=k/c}},ID:function(a,b){return 1===a.nodeType&&a.getAttribute("id")===b},TAG:function(a,b){return"*"===b&&1===a.nodeType||!!a.nodeName&&a.nodeName.toLowerCase()===b},CLASS:function(a,b){return-1<(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)},ATTR:function(a,b){var c=b[1],c=p.attr?p.attr(a,c):x.attrHandle[c]?x.attrHandle[c](a):null!=a[c]?a[c]:a.getAttribute(c),d=c+"",e=b[2],f=b[4];return null==c?"!="===e:!e&&p.attr?null!=c:"="===e?
d===f:"*="===e?0<=d.indexOf(f):"~="===e?0<=(" "+d+" ").indexOf(f):f?"!="===e?d!==f:"^="===e?0===d.indexOf(f):"$="===e?d.substr(d.length-f.length)===f:"|="===e?d===f||d.substr(0,f.length+1)===f+"-":!1:d&&!1!==c},POS:function(a,b,c,d){var e=x.setFilters[b[2]];if(e)return e(a,c,b,d)}}},G=x.match.POS,L=function(a,b){return"\\"+(b-0+1)},s;for(s in x.match)x.match[s]=new RegExp(x.match[s].source+/(?![^\[]*\])(?![^\(]*\))/.source),x.leftMatch[s]=new RegExp(/(^(?:.|\r|\n)*?)/.source+x.match[s].source.replace(/\\(\d+)/g,
L));x.match.globalPOS=G;var B=function(a,b){a=Array.prototype.slice.call(a,0);return b?(b.push.apply(b,a),b):a};try{Array.prototype.slice.call(E.documentElement.childNodes,0)[0].nodeType}catch(R){B=function(a,b){var c=0,d=b||[];if("[object Array]"===g.call(a))Array.prototype.push.apply(d,a);else if("number"===typeof a.length)for(var e=a.length;c<e;c++)d.push(a[c]);else for(;a[c];c++)d.push(a[c]);return d}}var u,v;E.documentElement.compareDocumentPosition?u=function(a,b){return a===b?(h=!0,0):a.compareDocumentPosition&&
b.compareDocumentPosition?a.compareDocumentPosition(b)&4?-1:1:a.compareDocumentPosition?-1:1}:(u=function(a,b){if(a===b)return h=!0,0;if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,e=[],f=[];c=a.parentNode;d=b.parentNode;var g=c;if(c===d)return v(a,b);if(!c)return-1;if(!d)return 1;for(;g;)e.unshift(g),g=g.parentNode;for(g=d;g;)f.unshift(g),g=g.parentNode;c=e.length;d=f.length;for(g=0;g<c&&g<d;g++)if(e[g]!==f[g])return v(e[g],f[g]);return g===c?v(a,f[g],-1):v(e[g],b,1)},
v=function(a,b,c){if(a===b)return c;for(a=a.nextSibling;a;){if(a===b)return-1;a=a.nextSibling}return 1});(function(){var a=E.createElement("div"),c="script"+(new Date).getTime(),d=E.documentElement;a.innerHTML="<a name='"+c+"'/>";d.insertBefore(a,d.firstChild);E.getElementById(c)&&(x.find.ID=function(a,c,d){if("undefined"!==typeof c.getElementById&&!d)return(c=c.getElementById(a[1]))?c.id===a[1]||"undefined"!==typeof c.getAttributeNode&&c.getAttributeNode("id").nodeValue===a[1]?[c]:b:[]},x.filter.ID=
function(a,b){var c="undefined"!==typeof a.getAttributeNode&&a.getAttributeNode("id");return 1===a.nodeType&&c&&c.nodeValue===b});d.removeChild(a);d=a=null})();(function(){var a=E.createElement("div");a.appendChild(E.createComment(""));0<a.getElementsByTagName("*").length&&(x.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if("*"===a[1]){for(var d=[],e=0;c[e];e++)1===c[e].nodeType&&d.push(c[e]);c=d}return c});a.innerHTML="<a href='#'></a>";a.firstChild&&"undefined"!==typeof a.firstChild.getAttribute&&
"#"!==a.firstChild.getAttribute("href")&&(x.attrHandle.href=function(a){return a.getAttribute("href",2)});a=null})();E.querySelectorAll&&function(){var a=p,b=E.createElement("div");b.innerHTML="<p class='TEST'></p>";if(!b.querySelectorAll||0!==b.querySelectorAll(".TEST").length){p=function(b,c,d,e){c=c||E;if(!e&&!p.isXML(c)){var f=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(f&&(1===c.nodeType||9===c.nodeType)){if(f[1])return B(c.getElementsByTagName(b),d);if(f[2]&&x.find.CLASS&&c.getElementsByClassName)return B(c.getElementsByClassName(f[2]),
d)}if(9===c.nodeType){if("body"===b&&c.body)return B([c.body],d);if(f&&f[3]){var g=c.getElementById(f[3]);if(g&&g.parentNode){if(g.id===f[3])return B([g],d)}else return B([],d)}try{return B(c.querySelectorAll(b),d)}catch(h){}}else if(1===c.nodeType&&"object"!==c.nodeName.toLowerCase()){var f=c,k=(g=c.getAttribute("id"))||"__sizzle__",m=c.parentNode,n=/^\s*[+~]/.test(b);g?k=k.replace(/'/g,"\\$&"):c.setAttribute("id",k);n&&m&&(c=c.parentNode);try{if(!n||m)return B(c.querySelectorAll("[id='"+k+"'] "+
b),d)}catch(q){}finally{g||f.removeAttribute("id")}}}return a(b,c,d,e)};for(var c in a)p[c]=a[c];b=null}}();(function(){var a=E.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var c=!b.call(E.createElement("div"),"div"),d=!1;try{b.call(E.documentElement,"[test!='']:sizzle")}catch(e){d=!0}p.matchesSelector=function(a,e){e=e.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!p.isXML(a))try{if(d||!x.match.PSEUDO.test(e)&&!/!=/.test(e)){var f=b.call(a,
e);if(f||!c||a.document&&11!==a.document.nodeType)return f}}catch(g){}return 0<p(e,null,null,[a]).length}}})();(function(){var a=E.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";a.getElementsByClassName&&0!==a.getElementsByClassName("e").length&&(a.lastChild.className="e",1!==a.getElementsByClassName("e").length&&(x.order.splice(1,0,"CLASS"),x.find.CLASS=function(a,b,c){if("undefined"!==typeof b.getElementsByClassName&&!c)return b.getElementsByClassName(a[1])},
a=null))})();p.contains=E.documentElement.contains?function(a,b){return a!==b&&(a.contains?a.contains(b):!0)}:E.documentElement.compareDocumentPosition?function(a,b){return!!(a.compareDocumentPosition(b)&16)}:function(){return!1};p.isXML=function(a){return(a=(a?a.ownerDocument||a:0).documentElement)?"HTML"!==a.nodeName:!1};var A=function(a,b,c){var d,e=[],f="";for(b=b.nodeType?[b]:b;d=x.match.PSEUDO.exec(a);)f+=d[0],a=a.replace(x.match.PSEUDO,"");a=x.relative[a]?a+"*":a;d=0;for(var g=b.length;d<g;d++)p(a,
b[d],e,c);return p.filter(f,e)};p.attr=r.attr;p.selectors.attrMap={};r.find=p;r.expr=p.selectors;r.expr[":"]=r.expr.filters;r.unique=p.uniqueSort;r.text=p.getText;r.isXMLDoc=p.isXML;r.contains=p.contains})();var rb=/Until$/,jb=/^(?:parents|prevUntil|prevAll)/,kb=/,/,Ya=/^.[^:#\[\.,]*$/,Ta=Array.prototype.slice,Y=r.expr.match.globalPOS,fa={children:!0,contents:!0,next:!0,prev:!0};r.fn.extend({find:function(a){var b=this,c,d;if("string"!==typeof a)return r(a).filter(function(){c=0;for(d=b.length;c<
d;c++)if(r.contains(b[c],this))return!0});var e=this.pushStack("","find",a),f,g,h;c=0;for(d=this.length;c<d;c++)if(f=e.length,r.find(a,this[c],e),0<c)for(g=f;g<e.length;g++)for(h=0;h<f;h++)if(e[h]===e[g]){e.splice(g--,1);break}return e},has:function(a){var b=r(a);return this.filter(function(){for(var a=0,c=b.length;a<c;a++)if(r.contains(this,b[a]))return!0})},not:function(a){return this.pushStack(n(this,a,!1),"not",a)},filter:function(a){return this.pushStack(n(this,a,!0),"filter",a)},is:function(a){return!!a&&
("string"===typeof a?Y.test(a)?0<=r(a,this.context).index(this[0]):0<r.filter(a,this).length:0<this.filter(a).length)},closest:function(a,b){var c=[],d,e,f=this[0];if(r.isArray(a)){for(e=1;f&&f.ownerDocument&&f!==b;){for(d=0;d<a.length;d++)r(f).is(a[d])&&c.push({selector:a[d],elem:f,level:e});f=f.parentNode;e++}return c}var g=Y.test(a)||"string"!==typeof a?r(a,b||this.context):0;d=0;for(e=this.length;d<e;d++)for(f=this[d];f;)if(g?-1<g.index(f):r.find.matchesSelector(f,a)){c.push(f);break}else if(f=
f.parentNode,!f||!f.ownerDocument||f===b||11===f.nodeType)break;c=1<c.length?r.unique(c):c;return this.pushStack(c,"closest",a)},index:function(a){return a?"string"===typeof a?r.inArray(this[0],r(a)):r.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(a,b){var c="string"===typeof a?r(a,b):r.makeArray(a&&a.nodeType?[a]:a),d=r.merge(this.get(),c);return this.pushStack(k(c[0])||k(d[0])?d:r.unique(d))},andSelf:function(){return this.add(this.prevObject)}});
r.each({parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},parents:function(a){return r.dir(a,"parentNode")},parentsUntil:function(a,b,c){return r.dir(a,"parentNode",c)},next:function(a){return r.nth(a,2,"nextSibling")},prev:function(a){return r.nth(a,2,"previousSibling")},nextAll:function(a){return r.dir(a,"nextSibling")},prevAll:function(a){return r.dir(a,"previousSibling")},nextUntil:function(a,b,c){return r.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return r.dir(a,"previousSibling",
c)},siblings:function(a){return r.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return r.sibling(a.firstChild)},contents:function(a){return r.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:r.makeArray(a.childNodes)}},function(a,b){r.fn[a]=function(c,d){var e=r.map(this,b,c);rb.test(a)||(d=c);d&&"string"===typeof d&&(e=r.filter(d,e));e=1<this.length&&!fa[a]?r.unique(e):e;(1<this.length||kb.test(d))&&jb.test(a)&&(e=e.reverse());return this.pushStack(e,a,Ta.call(arguments).join(","))}});
r.extend({filter:function(a,b,c){c&&(a=":not("+a+")");return 1===b.length?r.find.matchesSelector(b[0],a)?[b[0]]:[]:r.find.matches(a,b)},dir:function(a,c,d){var e=[];for(a=a[c];a&&9!==a.nodeType&&(d===b||1!==a.nodeType||!r(a).is(d));)1===a.nodeType&&e.push(a),a=a[c];return e},nth:function(a,b,c,d){b=b||1;for(d=0;a&&(1!==a.nodeType||++d!==b);a=a[c]);return a},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}});var z="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",
Ua=/ jQuery\d+="(?:\d+|null)"/g,va=/^\s+/,da=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,xa=/<([\w:]+)/,ec=/<tbody/i,Va=/<|&#?\w+;/,ca=/<(?:script|style)/i,ra=/<(?:script|object|embed|option|style)/i,Pa=new RegExp("<(?:"+z+")[\\s/>]","i"),lb=/checked\s*(?:[^=]|=\s*.checked.)/i,za=/\/(java|ecma)script/i,Wa=/^\s*<!(?:\[CDATA\[|\-\-)/,Aa={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>",
"</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},O=q(E);Aa.optgroup=Aa.option;Aa.tbody=Aa.tfoot=Aa.colgroup=Aa.caption=Aa.thead;Aa.th=Aa.td;r.support.htmlSerialize||(Aa._default=[1,"div<div>","</div>"]);r.fn.extend({text:function(a){return r.access(this,function(a){return a===b?r.text(this):this.empty().append((this[0]&&this[0].ownerDocument||E).createTextNode(a))},
null,a,arguments.length)},wrapAll:function(a){if(r.isFunction(a))return this.each(function(b){r(this).wrapAll(a.call(this,b))});if(this[0]){var b=r(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]);b.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return r.isFunction(a)?this.each(function(b){r(this).wrapInner(a.call(this,b))}):this.each(function(){var b=r(this),c=b.contents();
c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=r.isFunction(a);return this.each(function(c){r(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){r.nodeName(this,"body")||r(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){1===this.nodeType&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){1===this.nodeType&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&
this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=r.clean(arguments);a.push.apply(a,this.toArray());return this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=this.pushStack(this,"after",arguments);a.push.apply(a,r.clean(arguments));return a}},remove:function(a,
b){for(var c=0,d;null!=(d=this[c]);c++)if(!a||r.filter(a,[d]).length)b||1!==d.nodeType||(r.cleanData(d.getElementsByTagName("*")),r.cleanData([d])),d.parentNode&&d.parentNode.removeChild(d);return this},empty:function(){for(var a=0,b;null!=(b=this[a]);a++)for(1===b.nodeType&&r.cleanData(b.getElementsByTagName("*"));b.firstChild;)b.removeChild(b.firstChild);return this},clone:function(a,b){a=null==a?!1:a;b=null==b?a:b;return this.map(function(){return r.clone(this,a,b)})},html:function(a){return r.access(this,
function(a){var c=this[0]||{},d=0,e=this.length;if(a===b)return 1===c.nodeType?c.innerHTML.replace(Ua,""):null;if(!("string"!==typeof a||ca.test(a)||!r.support.leadingWhitespace&&va.test(a)||Aa[(xa.exec(a)||["",""])[1].toLowerCase()])){a=a.replace(da,"<$1></$2>");try{for(;d<e;d++)c=this[d]||{},1===c.nodeType&&(r.cleanData(c.getElementsByTagName("*")),c.innerHTML=a);c=0}catch(f){}}c&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(a){if(this[0]&&this[0].parentNode){if(r.isFunction(a))return this.each(function(b){var c=
r(this),d=c.html();c.replaceWith(a.call(this,b,d))});"string"!==typeof a&&(a=r(a).detach());return this.each(function(){var b=this.nextSibling,c=this.parentNode;r(this).remove();b?r(b).before(a):r(c).append(a)})}return this.length?this.pushStack(r(r.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){var e,f,g,h=a[0],k=[];if(!r.support.checkClone&&3===arguments.length&&"string"===typeof h&&lb.test(h))return this.each(function(){r(this).domManip(a,
c,d,!0)});if(r.isFunction(h))return this.each(function(e){var f=r(this);a[0]=h.call(this,e,c?f.html():b);f.domManip(a,c,d)});if(this[0]){e=h&&h.parentNode;e=r.support.parentNode&&e&&11===e.nodeType&&e.childNodes.length===this.length?{fragment:e}:r.buildFragment(a,this,k);g=e.fragment;if(f=1===g.childNodes.length?g=g.firstChild:g.firstChild){c=c&&r.nodeName(f,"tr");for(var n=0,q=this.length,p=q-1;n<q;n++)d.call(c?m(this[n],f):this[n],e.cacheable||1<q&&n<p?r.clone(g,!0,!0):g)}k.length&&r.each(k,function(a,
b){b.src?r.ajax({type:"GET",global:!1,url:b.src,async:!1,dataType:"script"}):r.globalEval((b.text||b.textContent||b.innerHTML||"").replace(Wa,"/*$0*/"));b.parentNode&&b.parentNode.removeChild(b)})}return this}});r.buildFragment=function(a,b,c){var d,e,f,g,h=a[0];b&&b[0]&&(g=b[0].ownerDocument||b[0]);g.createDocumentFragment||(g=E);!(1===a.length&&"string"===typeof h&&512>h.length&&g===E&&"<"===h.charAt(0))||ra.test(h)||!r.support.checkClone&&lb.test(h)||!r.support.html5Clone&&Pa.test(h)||(e=!0,(f=
r.fragments[h])&&1!==f&&(d=f));d||(d=g.createDocumentFragment(),r.clean(a,g,d,c));e&&(r.fragments[h]=f?d:1);return{fragment:d,cacheable:e}};r.fragments={};r.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){r.fn[a]=function(c){var d=[];c=r(c);var e=1===this.length&&this[0].parentNode;if(e&&11===e.nodeType&&1===e.childNodes.length&&1===c.length)return c[b](this[0]),this;for(var e=0,f=c.length;e<f;e++){var g=(0<e?this.clone(!0):
this).get();r(c[e])[b](g);d=d.concat(g)}return this.pushStack(d,a,c.selector)}});r.extend({clone:function(a,b,c){var d,e,f;r.support.html5Clone||r.isXMLDoc(a)||!Pa.test("<"+a.nodeName+">")?d=a.cloneNode(!0):(d=E.createElement("div"),O.appendChild(d),d.innerHTML=a.outerHTML,d=d.firstChild);var g=d;if(!(r.support.noCloneEvent&&r.support.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||r.isXMLDoc(a)))for(u(a,g),d=v(a),e=v(g),f=0;d[f];++f)e[f]&&u(d[f],e[f]);if(b&&(p(a,g),c))for(d=v(a),e=v(g),f=0;d[f];++f)p(d[f],
e[f]);return g},clean:function(a,b,c,d){var e,f=[];b=b||E;"undefined"===typeof b.createElement&&(b=b.ownerDocument||b[0]&&b[0].ownerDocument||E);for(var g=0,h;null!=(h=a[g]);g++)if("number"===typeof h&&(h+=""),h){if("string"===typeof h)if(Va.test(h)){h=h.replace(da,"<$1></$2>");e=(xa.exec(h)||["",""])[1].toLowerCase();var k=Aa[e]||Aa._default,m=k[0],n=b.createElement("div"),p=O.childNodes;b===E?O.appendChild(n):q(b).appendChild(n);for(n.innerHTML=k[1]+h+k[2];m--;)n=n.lastChild;if(!r.support.tbody)for(m=
ec.test(h),k="table"!==e||m?"<table>"!==k[1]||m?[]:n.childNodes:n.firstChild&&n.firstChild.childNodes,e=k.length-1;0<=e;--e)r.nodeName(k[e],"tbody")&&!k[e].childNodes.length&&k[e].parentNode.removeChild(k[e]);!r.support.leadingWhitespace&&va.test(h)&&n.insertBefore(b.createTextNode(va.exec(h)[0]),n.firstChild);h=n.childNodes;n&&(n.parentNode.removeChild(n),0<p.length&&(n=p[p.length-1])&&n.parentNode&&n.parentNode.removeChild(n))}else h=b.createTextNode(h);var w;if(!r.support.appendChecked)if(h[0]&&
"number"===typeof(w=h.length))for(e=0;e<w;e++)D(h[e]);else D(h);h.nodeType?f.push(h):f=r.merge(f,h)}if(c)for(a=function(a){return!a.type||za.test(a.type)},g=0;f[g];g++)b=f[g],d&&r.nodeName(b,"script")&&(!b.type||za.test(b.type))?d.push(b.parentNode?b.parentNode.removeChild(b):b):(1===b.nodeType&&(h=r.grep(b.getElementsByTagName("script"),a),f.splice.apply(f,[g+1,0].concat(h))),c.appendChild(b));return f},cleanData:function(a){for(var b,c,d=r.cache,e=r.event.special,f=r.support.deleteExpando,g=0,h;null!=
(h=a[g]);g++)if(!h.nodeName||!r.noData[h.nodeName.toLowerCase()])if(c=h[r.expando]){if((b=d[c])&&b.events){for(var k in b.events)e[k]?r.event.remove(h,k):r.removeEvent(h,k,b.handle);b.handle&&(b.handle.elem=null)}f?delete h[r.expando]:h.removeAttribute&&h.removeAttribute(r.expando);delete d[c]}}});var mb=/alpha\([^)]*\)/i,ma=/opacity=([^)]*)/,nb=/([A-Z]|^ms)/g,Ba=/^[\-+]?(?:\d*\.)?\d+$/i,Ja=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,lc=/^([\-+])=([\-+.\de]+)/,Qa=/^margin/,db={position:"absolute",visibility:"hidden",
display:"block"},Ma=["Top","Right","Bottom","Left"],Hb,fc,Nc;r.fn.css=function(a,c){return r.access(this,function(a,c,d){return d!==b?r.style(a,c,d):r.css(a,c)},a,c,1<arguments.length)};r.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Hb(a,"opacity");return""===c?"1":c}return a.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":r.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(a&&
3!==a.nodeType&&8!==a.nodeType&&a.style){var f,g=r.camelCase(c),h=a.style,k=r.cssHooks[g];c=r.cssProps[g]||g;if(d!==b){if(e=typeof d,"string"===e&&(f=lc.exec(d))&&(d=+(f[1]+1)*+f[2]+parseFloat(r.css(a,c)),e="number"),!(null==d||"number"===e&&isNaN(d)||("number"!==e||r.cssNumber[g]||(d+="px"),k&&"set"in k&&(d=k.set(a,d))===b)))try{h[c]=d}catch(m){}}else return k&&"get"in k&&(f=k.get(a,!1,e))!==b?f:h[c]}},css:function(a,c,d){var e,f;c=r.camelCase(c);f=r.cssHooks[c];c=r.cssProps[c]||c;"cssFloat"===c&&
(c="float");if(f&&"get"in f&&(e=f.get(a,!0,d))!==b)return e;if(Hb)return Hb(a,c)},swap:function(a,b,c){var d={},e;for(e in b)d[e]=a.style[e],a.style[e]=b[e];c=c.call(a);for(e in b)a.style[e]=d[e];return c}});r.curCSS=r.css;E.defaultView&&E.defaultView.getComputedStyle&&(fc=function(a,b){var c,d,e,f=a.style;b=b.replace(nb,"-$1").toLowerCase();(d=a.ownerDocument.defaultView)&&(e=d.getComputedStyle(a,null))&&(c=e.getPropertyValue(b),""!==c||r.contains(a.ownerDocument.documentElement,a)||(c=r.style(a,
b)));!r.support.pixelMargin&&e&&Qa.test(b)&&Ja.test(c)&&(d=f.width,f.width=c,c=e.width,f.width=d);return c});E.documentElement.currentStyle&&(Nc=function(a,b){var c,d,e=a.currentStyle&&a.currentStyle[b],f=a.style;null==e&&f&&(c=f[b])&&(e=c);if(Ja.test(e)){c=f.left;if(d=a.runtimeStyle&&a.runtimeStyle.left)a.runtimeStyle.left=a.currentStyle.left;f.left="fontSize"===b?"1em":e;e=f.pixelLeft+"px";f.left=c;d&&(a.runtimeStyle.left=d)}return""===e?"auto":e});Hb=fc||Nc;r.each(["height","width"],function(a,
b){r.cssHooks[b]={get:function(a,c,d){if(c)return 0!==a.offsetWidth?x(a,b,d):r.swap(a,db,function(){return x(a,b,d)})},set:function(a,b){return Ba.test(b)?b+"px":b}}});r.support.opacity||(r.cssHooks.opacity={get:function(a,b){return ma.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=r.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1;if(1<=b&&""===r.trim(f.replace(mb,
""))&&(c.removeAttribute("filter"),d&&!d.filter))return;c.filter=mb.test(f)?f.replace(mb,e):f+" "+e}});r(function(){r.support.reliableMarginRight||(r.cssHooks.marginRight={get:function(a,b){return r.swap(a,{display:"inline-block"},function(){return b?Hb(a,"margin-right"):a.style.marginRight})}})});r.expr&&r.expr.filters&&(r.expr.filters.hidden=function(a){var b=a.offsetHeight;return 0===a.offsetWidth&&0===b||!r.support.reliableHiddenOffsets&&"none"===(a.style&&a.style.display||r.css(a,"display"))},
r.expr.filters.visible=function(a){return!r.expr.filters.hidden(a)});r.each({margin:"",padding:"",border:"Width"},function(a,b){r.cssHooks[a+b]={expand:function(c){var d="string"===typeof c?c.split(" "):[c],e={};for(c=0;4>c;c++)e[a+Ma[c]+b]=d[c]||d[c-2]||d[0];return e}}});var xb=/%20/g,Fa=/\[\]$/,mc=/\r?\n/g,oa=/#.*$/,ga=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,Xa=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,Za=/^(?:GET|HEAD)$/,eb=/^\/\//,
dd=/\?/,xd=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,de=/^(?:select|textarea)/i,wc=/\s+/,yd=/([?&])_=[^&]*/,Bc=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,Lb=r.fn.load,xc={},Cc={},gc,Ra,zd=["*/"]+["*"];try{gc=aa.href}catch(ed){gc=E.createElement("a"),gc.href="",gc=gc.href}Ra=Bc.exec(gc.toLowerCase())||[];r.fn.extend({load:function(a,c,d){if("string"!==typeof a&&Lb)return Lb.apply(this,arguments);if(!this.length)return this;var e=a.indexOf(" ");if(0<=e){var f=a.slice(e,a.length);a=
a.slice(0,e)}e="GET";c&&(r.isFunction(c)?(d=c,c=b):"object"===typeof c&&(c=r.param(c,r.ajaxSettings.traditional),e="POST"));var g=this;r.ajax({url:a,type:e,dataType:"html",data:c,complete:function(a,b,c){c=a.responseText;a.isResolved()&&(a.done(function(a){c=a}),g.html(f?r("<div>").append(c.replace(xd,"")).find(f):c));d&&g.each(d,[c,b,a])}});return this},serialize:function(){return r.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?r.makeArray(this.elements):
this}).filter(function(){return this.name&&!this.disabled&&(this.checked||de.test(this.nodeName)||Xa.test(this.type))}).map(function(a,b){var c=r(this).val();return null==c?null:r.isArray(c)?r.map(c,function(a,c){return{name:b.name,value:a.replace(mc,"\r\n")}}):{name:b.name,value:c.replace(mc,"\r\n")}}).get()}});r.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){r.fn[b]=function(a){return this.on(b,a)}});r.each(["get","post"],function(a,c){r[c]=function(a,
d,e,f){r.isFunction(d)&&(f=f||e,e=d,d=b);return r.ajax({type:c,url:a,data:d,success:e,dataType:f})}});r.extend({getScript:function(a,c){return r.get(a,b,c,"script")},getJSON:function(a,b,c){return r.get(a,b,c,"json")},ajaxSetup:function(a,b){b?G(a,r.ajaxSettings):(b=a,a=r.ajaxSettings);G(a,b);return a},ajaxSettings:{url:gc,isLocal:/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/.test(Ra[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,
async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":zd},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":r.parseJSON,"text xml":r.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:B(xc),ajaxTransport:B(Cc),ajax:function(a,c){function d(a,c,q,p){if(2!==B){B=2;G&&clearTimeout(G);E=b;w=p||"";v.readyState=0<a?4:
0;var x,s,L;p=c;if(q){var u=e,A=v,N=u.contents,U=u.dataTypes,C=u.responseFields,Q,X,ga,T;for(X in C)X in q&&(A[C[X]]=q[X]);for(;"*"===U[0];)U.shift(),Q===b&&(Q=u.mimeType||A.getResponseHeader("content-type"));if(Q)for(X in N)if(N[X]&&N[X].test(Q)){U.unshift(X);break}if(U[0]in q)ga=U[0];else{for(X in q){if(!U[0]||u.converters[X+" "+U[0]]){ga=X;break}T||(T=X)}ga=ga||T}ga?(ga!==U[0]&&U.unshift(ga),q=q[ga]):q=void 0}else q=b;if(200<=a&&300>a||304===a){if(e.ifModified){if(Q=v.getResponseHeader("Last-Modified"))r.lastModified[n]=
Q;if(Q=v.getResponseHeader("Etag"))r.etag[n]=Q}if(304===a)p="notmodified",x=!0;else try{Q=e;Q.dataFilter&&(q=Q.dataFilter(q,Q.dataType));var W=Q.dataTypes;X={};var D,ua,ba=W.length,aa,K=W[0],J,Xa,z,wa,Za;for(D=1;D<ba;D++){if(1===D)for(ua in Q.converters)"string"===typeof ua&&(X[ua.toLowerCase()]=Q.converters[ua]);J=K;K=W[D];if("*"===K)K=J;else if("*"!==J&&J!==K){Xa=J+" "+K;z=X[Xa]||X["* "+K];if(!z)for(wa in Za=b,X)if(aa=wa.split(" "),aa[0]===J||"*"===aa[0])if(Za=X[aa[1]+" "+K]){wa=X[wa];!0===wa?z=
Za:!0===Za&&(z=wa);break}z||Za||r.error("No conversion from "+Xa.replace(" "," to "));!0!==z&&(q=z?z(q):Za(wa(q)))}}s=q;p="success";x=!0}catch(la){p="parsererror",L=la}}else if(L=p,!p||a)p="error",0>a&&(a=0);v.status=a;v.statusText=""+(c||p);x?h.resolveWith(f,[s,p,v]):h.rejectWith(f,[v,p,L]);v.statusCode(m);m=b;R&&g.trigger("ajax"+(x?"Success":"Error"),[v,e,x?s:L]);k.fireWith(f,[v,p]);R&&(g.trigger("ajaxComplete",[v,e]),--r.active||r.event.trigger("ajaxStop"))}}"object"===typeof a&&(c=a,a=b);c=c||
{};var e=r.ajaxSetup({},c),f=e.context||e,g=f!==e&&(f.nodeType||f instanceof r)?r(f):r.event,h=r.Deferred(),k=r.Callbacks("once memory"),m=e.statusCode||{},n,q={},p={},w,x,E,G,L,B=0,R,u,v={readyState:0,setRequestHeader:function(a,b){if(!B){var c=a.toLowerCase();a=p[c]=p[c]||a;q[a]=b}return this},getAllResponseHeaders:function(){return 2===B?w:null},getResponseHeader:function(a){var c;if(2===B){if(!x)for(x={};c=ga.exec(w);)x[c[1].toLowerCase()]=c[2];c=x[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){B||
(e.mimeType=a);return this},abort:function(a){a=a||"abort";E&&E.abort(a);d(0,a);return this}};h.promise(v);v.success=v.done;v.error=v.fail;v.complete=k.add;v.statusCode=function(a){if(a){var b;if(2>B)for(b in a)m[b]=[m[b],a[b]];else b=a[v.status],v.then(b,b)}return this};e.url=((a||e.url)+"").replace(oa,"").replace(eb,Ra[1]+"//");e.dataTypes=r.trim(e.dataType||"*").toLowerCase().split(wc);null==e.crossDomain&&(L=Bc.exec(e.url.toLowerCase()),e.crossDomain=!(!L||L[1]==Ra[1]&&L[2]==Ra[2]&&(L[3]||("http:"===
L[1]?80:443))==(Ra[3]||("http:"===Ra[1]?80:443))));e.data&&e.processData&&"string"!==typeof e.data&&(e.data=r.param(e.data,e.traditional));s(xc,e,c,v);if(2===B)return!1;R=e.global;e.type=e.type.toUpperCase();e.hasContent=!Za.test(e.type);R&&0===r.active++&&r.event.trigger("ajaxStart");if(!e.hasContent&&(e.data&&(e.url+=(dd.test(e.url)?"&":"?")+e.data,delete e.data),n=e.url,!1===e.cache)){L=r.now();var A=e.url.replace(yd,"$1_="+L);e.url=A+(A===e.url?(dd.test(e.url)?"&":"?")+"_="+L:"")}(e.data&&e.hasContent&&
!1!==e.contentType||c.contentType)&&v.setRequestHeader("Content-Type",e.contentType);e.ifModified&&(n=n||e.url,r.lastModified[n]&&v.setRequestHeader("If-Modified-Since",r.lastModified[n]),r.etag[n]&&v.setRequestHeader("If-None-Match",r.etag[n]));v.setRequestHeader("Accept",e.dataTypes[0]&&e.accepts[e.dataTypes[0]]?e.accepts[e.dataTypes[0]]+("*"!==e.dataTypes[0]?", "+zd+"; q=0.01":""):e.accepts["*"]);for(u in e.headers)v.setRequestHeader(u,e.headers[u]);if(e.beforeSend&&(!1===e.beforeSend.call(f,v,
e)||2===B))return v.abort(),!1;for(u in{success:1,error:1,complete:1})v[u](e[u]);if(E=s(Cc,e,c,v)){v.readyState=1;R&&g.trigger("ajaxSend",[v,e]);e.async&&0<e.timeout&&(G=setTimeout(function(){v.abort("timeout")},e.timeout));try{B=1,E.send(q,d)}catch(N){if(2>B)d(-1,N);else throw N;}}else d(-1,"No Transport");return v},param:function(a,c){var d=[],e=function(a,b){b=r.isFunction(b)?b():b;d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};c===b&&(c=r.ajaxSettings.traditional);if(r.isArray(a)||
a.jquery&&!r.isPlainObject(a))r.each(a,function(){e(this.name,this.value)});else for(var f in a)K(f,a[f],c,e);return d.join("&").replace(xb,"+")}});r.extend({active:0,lastModified:{},etag:{}});var Ad=r.now(),Oc=/(\=)\?(&|$)|\?\?/i;r.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return r.expando+"_"+Ad++}});r.ajaxPrefilter("json jsonp",function(b,c,d){c="string"===typeof b.data&&/^application\/x\-www\-form\-urlencoded/.test(b.contentType);if("jsonp"===b.dataTypes[0]||!1!==b.jsonp&&(Oc.test(b.url)||
c&&Oc.test(b.data))){var e,f=b.jsonpCallback=r.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,g=a[f],h=b.url,k=b.data,m="$1"+f+"$2";!1!==b.jsonp&&(h=h.replace(Oc,m),b.url===h&&(c&&(k=k.replace(Oc,m)),b.data===k&&(h+=(/\?/.test(h)?"&":"?")+b.jsonp+"="+f)));b.url=h;b.data=k;a[f]=function(a){e=[a]};d.always(function(){a[f]=g;if(e&&r.isFunction(g))a[f](e[0])});b.converters["script json"]=function(){e||r.error(f+" was not called");return e[0]};b.dataTypes[0]="json";return"script"}});r.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},
contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){r.globalEval(a);return a}}});r.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1);a.crossDomain&&(a.type="GET",a.global=!1)});r.ajaxTransport("script",function(a){if(a.crossDomain){var c,d=E.head||E.getElementsByTagName("head")[0]||E.documentElement;return{send:function(e,f){c=E.createElement("script");c.async="async";a.scriptCharset&&(c.charset=a.scriptCharset);c.src=a.url;c.onload=c.onreadystatechange=function(a,
e){if(e||!c.readyState||/loaded|complete/.test(c.readyState))c.onload=c.onreadystatechange=null,d&&c.parentNode&&d.removeChild(c),c=b,e||f(200,"success")};d.insertBefore(c,d.firstChild)},abort:function(){if(c)c.onload(0,1)}}}});var hc=a.ActiveXObject?function(){for(var a in Mb)Mb[a](0,1)}:!1,Pc=0,Mb;r.ajaxSettings.xhr=a.ActiveXObject?function(){var b;if(!(b=!this.isLocal&&J()))a:{try{b=new a.ActiveXObject("Microsoft.XMLHTTP");break a}catch(c){}b=void 0}return b}:J;(function(a){r.extend(r.support,
{ajax:!!a,cors:!!a&&"withCredentials"in a})})(r.ajaxSettings.xhr());r.support.ajax&&r.ajaxTransport(function(c){if(!c.crossDomain||r.support.cors){var d;return{send:function(e,f){var g=c.xhr(),h,k;c.username?g.open(c.type,c.url,c.async,c.username,c.password):g.open(c.type,c.url,c.async);if(c.xhrFields)for(k in c.xhrFields)g[k]=c.xhrFields[k];c.mimeType&&g.overrideMimeType&&g.overrideMimeType(c.mimeType);c.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");try{for(k in e)g.setRequestHeader(k,
e[k])}catch(m){}g.send(c.hasContent&&c.data||null);d=function(a,e){var k,m,n,q,p;try{if(d&&(e||4===g.readyState))if(d=b,h&&(g.onreadystatechange=r.noop,hc&&delete Mb[h]),e)4!==g.readyState&&g.abort();else{k=g.status;n=g.getAllResponseHeaders();q={};(p=g.responseXML)&&p.documentElement&&(q.xml=p);try{q.text=g.responseText}catch(w){}try{m=g.statusText}catch(x){m=""}k||!c.isLocal||c.crossDomain?1223===k&&(k=204):k=q.text?200:404}}catch(E){e||f(-1,E)}q&&f(k,m,q,n)};c.async&&4!==g.readyState?(h=++Pc,hc&&
(Mb||(Mb={},r(a).unload(hc)),Mb[h]=d),g.onreadystatechange=d):d()},abort:function(){d&&d(0,1)}}}});var zc={},tb,$b,sb=/^(?:toggle|show|hide)$/,gd=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,Dc,yc=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],Zb;r.fn.extend({show:function(a,b,c){if(a||0===a)return this.animate(N("show",3),a,b,c);c=0;for(var d=this.length;c<d;c++)a=this[c],a.style&&(b=a.style.display,r._data(a,
"olddisplay")||"none"!==b||(b=a.style.display=""),(""===b&&"none"===r.css(a,"display")||!r.contains(a.ownerDocument.documentElement,a))&&r._data(a,"olddisplay",Q(a.nodeName)));for(c=0;c<d;c++)if(a=this[c],a.style&&(b=a.style.display,""===b||"none"===b))a.style.display=r._data(a,"olddisplay")||"";return this},hide:function(a,b,c){if(a||0===a)return this.animate(N("hide",3),a,b,c);c=0;for(var d=this.length;c<d;c++)a=this[c],a.style&&(b=r.css(a,"display"),"none"===b||r._data(a,"olddisplay")||r._data(a,
"olddisplay",b));for(c=0;c<d;c++)this[c].style&&(this[c].style.display="none");return this},_toggle:r.fn.toggle,toggle:function(a,b,c){var d="boolean"===typeof a;r.isFunction(a)&&r.isFunction(b)?this._toggle.apply(this,arguments):null==a||d?this.each(function(){var b=d?a:r(this).is(":hidden");r(this)[b?"show":"hide"]()}):this.animate(N("toggle",3),a,b,c);return this},fadeTo:function(a,b,c,d){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,
b,c,d){function e(){!1===f.queue&&r._mark(this);var b=r.extend({},f),c=1===this.nodeType,d=c&&r(this).is(":hidden"),g,h,k,m,n;b.animatedProperties={};for(k in a)if(g=r.camelCase(k),k!==g&&(a[g]=a[k],delete a[k]),(h=r.cssHooks[g])&&"expand"in h)for(k in m=h.expand(a[g]),delete a[g],m)k in a||(a[k]=m[k]);for(g in a){h=a[g];r.isArray(h)?(b.animatedProperties[g]=h[1],h=a[g]=h[0]):b.animatedProperties[g]=b.specialEasing&&b.specialEasing[g]||b.easing||"swing";if("hide"===h&&d||"show"===h&&!d)return b.complete.call(this);
!c||"height"!==g&&"width"!==g||(b.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],"inline"===r.css(this,"display")&&"none"===r.css(this,"float")&&(r.support.inlineBlockNeedsLayout&&"inline"!==Q(this.nodeName)?this.style.zoom=1:this.style.display="inline-block"))}null!=b.overflow&&(this.style.overflow="hidden");for(k in a)if(c=new r.fx(this,b,k),h=a[k],sb.test(h))if(g=r._data(this,"toggle"+k)||("toggle"===h?d?"show":"hide":0))r._data(this,"toggle"+k,"show"===g?"hide":"show"),
c[g]();else c[h]();else g=gd.exec(h),m=c.cur(),g?(h=parseFloat(g[2]),n=g[3]||(r.cssNumber[k]?"":"px"),"px"!==n&&(r.style(this,k,(h||1)+n),m*=(h||1)/c.cur(),r.style(this,k,m+n)),g[1]&&(h=("-="===g[1]?-1:1)*h+m),c.custom(m,h,n)):c.custom(m,h,"");return!0}var f=r.speed(b,c,d);if(r.isEmptyObject(a))return this.each(f.complete,[!1]);a=r.extend({},a);return!1===f.queue?this.each(e):this.queue(f.queue,e)},stop:function(a,c,d){"string"!==typeof a&&(d=c,c=a,a=b);c&&!1!==a&&this.queue(a||"fx",[]);return this.each(function(){var b,
c=!1,e=r.timers,f=r._data(this);d||r._unmark(!0,this);if(null==a)for(b in f){if(f[b]&&f[b].stop&&b.indexOf(".run")===b.length-4){var g=f[b];r.removeData(this,b,!0);g.stop(d)}}else f[b=a+".run"]&&f[b].stop&&(f=f[b],r.removeData(this,b,!0),f.stop(d));for(b=e.length;b--;)if(e[b].elem===this&&(null==a||e[b].queue===a)){if(d)e[b](!0);else e[b].saveState();c=!0;e.splice(b,1)}d&&c||r.dequeue(this,a)})}});r.each({slideDown:N("show",1),slideUp:N("hide",1),slideToggle:N("toggle",1),fadeIn:{opacity:"show"},
fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){r.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}});r.extend({speed:function(a,b,c){var d=a&&"object"===typeof a?r.extend({},a):{complete:c||!c&&b||r.isFunction(a)&&a,duration:a,easing:c&&b||b&&!r.isFunction(b)&&b};d.duration=r.fx.off?0:"number"===typeof d.duration?d.duration:d.duration in r.fx.speeds?r.fx.speeds[d.duration]:r.fx.speeds._default;if(null==d.queue||!0===d.queue)d.queue="fx";d.old=d.complete;d.complete=function(a){r.isFunction(d.old)&&
d.old.call(this);d.queue?r.dequeue(this,d.queue):!1!==a&&r._unmark(this)};return d},easing:{linear:function(a){return a},swing:function(a){return-Math.cos(a*Math.PI)/2+.5}},timers:[],fx:function(a,b,c){this.options=b;this.elem=a;this.prop=c;b.orig=b.orig||{}}});r.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this);(r.fx.step[this.prop]||r.fx.step._default)(this)},cur:function(){if(null!=this.elem[this.prop]&&(!this.elem.style||null==this.elem.style[this.prop]))return this.elem[this.prop];
var a,b=r.css(this.elem,this.prop);return isNaN(a=parseFloat(b))?b&&"auto"!==b?b:0:a},custom:function(a,c,d){function e(a){return f.step(a)}var f=this,g=r.fx;this.startTime=Zb||C();this.end=c;this.now=this.start=a;this.pos=this.state=0;this.unit=d||this.unit||(r.cssNumber[this.prop]?"":"px");e.queue=this.options.queue;e.elem=this.elem;e.saveState=function(){r._data(f.elem,"fxshow"+f.prop)===b&&(f.options.hide?r._data(f.elem,"fxshow"+f.prop,f.start):f.options.show&&r._data(f.elem,"fxshow"+f.prop,f.end))};
e()&&r.timers.push(e)&&!Dc&&(Dc=setInterval(g.tick,g.interval))},show:function(){var a=r._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=a||r.style(this.elem,this.prop);this.options.show=!0;a!==b?this.custom(this.cur(),a):this.custom("width"===this.prop||"height"===this.prop?1:0,this.cur());r(this.elem).show()},hide:function(){this.options.orig[this.prop]=r._data(this.elem,"fxshow"+this.prop)||r.style(this.elem,this.prop);this.options.hide=!0;this.custom(this.cur(),0)},step:function(a){var b,
c=Zb||C(),d=!0,e=this.elem,f=this.options;if(a||c>=f.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();f.animatedProperties[this.prop]=!0;for(b in f.animatedProperties)!0!==f.animatedProperties[b]&&(d=!1);if(d){null==f.overflow||r.support.shrinkWrapBlocks||r.each(["","X","Y"],function(a,b){e.style["overflow"+b]=f.overflow[a]});f.hide&&r(e).hide();if(f.hide||f.show)for(b in f.animatedProperties)r.style(e,b,f.orig[b]),r.removeData(e,"fxshow"+b,!0),r.removeData(e,"toggle"+
b,!0);if(a=f.complete)f.complete=!1,a.call(e)}return!1}Infinity==f.duration?this.now=c:(a=c-this.startTime,this.state=a/f.duration,this.pos=r.easing[f.animatedProperties[this.prop]](this.state,a,0,1,f.duration),this.now=this.start+(this.end-this.start)*this.pos);this.update();return!0}};r.extend(r.fx,{tick:function(){for(var a,b=r.timers,c=0;c<b.length;c++)a=b[c],a()||b[c]!==a||b.splice(c--,1);b.length||r.fx.stop()},interval:13,stop:function(){clearInterval(Dc);Dc=null},speeds:{slow:600,fast:200,
_default:400},step:{opacity:function(a){r.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&null!=a.elem.style[a.prop]?a.elem.style[a.prop]=a.now+a.unit:a.elem[a.prop]=a.now}}});r.each(yc.concat.apply([],yc),function(a,b){b.indexOf("margin")&&(r.fx.step[b]=function(a){r.style(a.elem,b,Math.max(0,a.now)+a.unit)})});r.expr&&r.expr.filters&&(r.expr.filters.animated=function(a){return r.grep(r.timers,function(b){return a===b.elem}).length});var Ec,hd=/^t(?:able|d|h)$/i,Qc=/^(?:body|html)$/i;
Ec="getBoundingClientRect"in E.documentElement?function(a,b,c,d){try{d=a.getBoundingClientRect()}catch(e){}if(!d||!r.contains(c,a))return d?{top:d.top,left:d.left}:{top:0,left:0};a=b.body;b=T(b);return{top:d.top+(b.pageYOffset||r.support.boxModel&&c.scrollTop||a.scrollTop)-(c.clientTop||a.clientTop||0),left:d.left+(b.pageXOffset||r.support.boxModel&&c.scrollLeft||a.scrollLeft)-(c.clientLeft||a.clientLeft||0)}}:function(a,b,c){var d,e=a.offsetParent,f=b.body;d=(b=b.defaultView)?b.getComputedStyle(a,
null):a.currentStyle;for(var g=a.offsetTop,h=a.offsetLeft;(a=a.parentNode)&&a!==f&&a!==c&&(!r.support.fixedPosition||"fixed"!==d.position);)d=b?b.getComputedStyle(a,null):a.currentStyle,g-=a.scrollTop,h-=a.scrollLeft,a===e&&(g+=a.offsetTop,h+=a.offsetLeft,!r.support.doesNotAddBorder||r.support.doesAddBorderForTableAndCells&&hd.test(a.nodeName)||(g+=parseFloat(d.borderTopWidth)||0,h+=parseFloat(d.borderLeftWidth)||0),e=a.offsetParent),r.support.subtractsBorderForOverflowNotVisible&&"visible"!==d.overflow&&
(g+=parseFloat(d.borderTopWidth)||0,h+=parseFloat(d.borderLeftWidth)||0);if("relative"===d.position||"static"===d.position)g+=f.offsetTop,h+=f.offsetLeft;r.support.fixedPosition&&"fixed"===d.position&&(g+=Math.max(c.scrollTop,f.scrollTop),h+=Math.max(c.scrollLeft,f.scrollLeft));return{top:g,left:h}};r.fn.offset=function(a){if(arguments.length)return a===b?this:this.each(function(b){r.offset.setOffset(this,a,b)});var c=this[0],d=c&&c.ownerDocument;return d?c===d.body?r.offset.bodyOffset(c):Ec(c,d,
d.documentElement):null};r.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;r.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(r.css(a,"marginTop"))||0,c+=parseFloat(r.css(a,"marginLeft"))||0);return{top:b,left:c}},setOffset:function(a,b,c){var d=r.css(a,"position");"static"===d&&(a.style.position="relative");var e=r(a),f=e.offset(),g=r.css(a,"top"),h=r.css(a,"left"),k={},m={};("absolute"===d||"fixed"===d)&&-1<r.inArray("auto",[g,h])?(m=e.position(),d=m.top,h=m.left):(d=parseFloat(g)||
0,h=parseFloat(h)||0);r.isFunction(b)&&(b=b.call(a,c,f));null!=b.top&&(k.top=b.top-f.top+d);null!=b.left&&(k.left=b.left-f.left+h);"using"in b?b.using.call(a,k):e.css(k)}};r.fn.extend({position:function(){if(!this[0])return null;var a=this[0],b=this.offsetParent(),c=this.offset(),d=Qc.test(b[0].nodeName)?{top:0,left:0}:b.offset();c.top-=parseFloat(r.css(a,"marginTop"))||0;c.left-=parseFloat(r.css(a,"marginLeft"))||0;d.top+=parseFloat(r.css(b[0],"borderTopWidth"))||0;d.left+=parseFloat(r.css(b[0],
"borderLeftWidth"))||0;return{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||E.body;a&&!Qc.test(a.nodeName)&&"static"===r.css(a,"position");)a=a.offsetParent;return a})}});r.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,c){var d=/Y/.test(c);r.fn[a]=function(e){return r.access(this,function(a,e,f){var g=T(a);if(f===b)return g?c in g?g[c]:r.support.boxModel&&g.document.documentElement[e]||g.document.body[e]:a[e];
g?g.scrollTo(d?r(g).scrollLeft():f,d?f:r(g).scrollTop()):a[e]=f},a,e,arguments.length,null)}});r.each({Height:"height",Width:"width"},function(a,c){var d="client"+a,e="scroll"+a,f="offset"+a;r.fn["inner"+a]=function(){var a=this[0];return a?a.style?parseFloat(r.css(a,c,"padding")):this[c]():null};r.fn["outer"+a]=function(a){var b=this[0];return b?b.style?parseFloat(r.css(b,c,a?"margin":"border")):this[c]():null};r.fn[c]=function(a){return r.access(this,function(a,c,g){if(r.isWindow(a))return c=a.document,
a=c.documentElement[d],r.support.boxModel&&a||c.body&&c.body[d]||a;if(9===a.nodeType)return c=a.documentElement,c[d]>=c[e]?c[d]:Math.max(a.body[e],c[e],a.body[f],c[f]);if(g===b)return a=r.css(a,c),c=parseFloat(a),r.isNumeric(c)?c:a;r(a).css(c,g)},c,a,arguments.length,null)}});a.jQuery=a.$=r;"function"===typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return r})})(window);
(function(a,b){function c(a){u[p]=d.apply(b,a);return p++}function d(a){var c=[].slice.call(arguments,1);return function(){"function"===typeof a?a.apply(b,c):(new Function(""+a))()}}function e(a){if(v)setTimeout(d(e,a),0);else{var b=u[a];if(b){v=!0;try{b()}finally{f(a),v=!1}}}}function f(a){delete u[a]}function h(){D=function(){var a=c(arguments);process.nextTick(d(e,a));return a}}function g(){if(a.postMessage&&!a.importScripts){var b=!0,c=a.onmessage;a.onmessage=function(){b=!1};a.postMessage("",
"*");a.onmessage=c;return b}}function k(){var b="setImmediate$"+Math.random()+"$",d=function(c){c.source===a&&"string"===typeof c.data&&0===c.data.indexOf(b)&&e(+c.data.slice(b.length))};a.addEventListener?a.addEventListener("message",d,!1):a.attachEvent("onmessage",d);D=function(){var d=c(arguments);a.postMessage(b+d,"*");return d}}function n(){var a=new MessageChannel;a.port1.onmessage=function(a){e(a.data)};D=function(){var b=c(arguments);a.port2.postMessage(b);return b}}function q(){var a=A.documentElement;
D=function(){var b=c(arguments),d=A.createElement("script");d.onreadystatechange=function(){e(b);d.onreadystatechange=null;a.removeChild(d);d=null};a.appendChild(d);return b}}function m(){D=function(){var a=c(arguments);setTimeout(d(e,a),0);return a}}if(!a.setImmediate){var p=1,u={},v=!1,A=a.document,D,x=Object.getPrototypeOf&&Object.getPrototypeOf(a),x=x&&x.setTimeout?x:a;"[object process]"==={}.toString.call(a.process)?h():g()?k():a.MessageChannel?n():A&&"onreadystatechange"in A.createElement("script")?
q():m();x.setImmediate=D;x.clearImmediate=f}})((new Function("return this"))());
(function(){var a=this,b=a._,c=Array.prototype,d=Object.prototype,e=c.push,f=c.slice,h=c.concat,g=d.toString,k=d.hasOwnProperty,d=Array.isArray,n=Object.keys,q=Function.prototype.bind,m=function(a){if(a instanceof m)return a;if(!(this instanceof m))return new m(a);this._wrapped=a};"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=m),exports._=m):a._=m;m.VERSION="1.7.0";var p=function(a,b,c){if(void 0===b)return a;switch(null==c?3:c){case 1:return function(c){return a.call(b,
c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return function(){return a.apply(b,arguments)}};m.iteratee=function(a,b,c){return null==a?m.identity:m.isFunction(a)?p(a,b,c):m.isObject(a)?m.matches(a):m.property(a)};m.each=m.forEach=function(a,b,c){if(null==a)return a;b=p(b,c);var d=a.length;if(d===+d)for(c=0;c<d;c++)b(a[c],c,a);else{var e=m.keys(a);c=0;for(d=e.length;c<d;c++)b(a[e[c]],
e[c],a)}return a};m.map=m.collect=function(a,b,c){if(null==a)return[];b=m.iteratee(b,c);c=a.length!==+a.length&&m.keys(a);for(var d=(c||a).length,e=Array(d),f,g=0;g<d;g++)f=c?c[g]:g,e[g]=b(a[f],f,a);return e};m.reduce=m.foldl=m.inject=function(a,b,c,d){null==a&&(a=[]);b=p(b,d,4);var e=a.length!==+a.length&&m.keys(a),f=(e||a).length,g=0,h;if(3>arguments.length){if(!f)throw new TypeError("Reduce of empty array with no initial value");c=a[e?e[g++]:g++]}for(;g<f;g++)h=e?e[g]:g,c=b(c,a[h],h,a);return c};
m.reduceRight=m.foldr=function(a,b,c,d){null==a&&(a=[]);b=p(b,d,4);var e=a.length!==+a.length&&m.keys(a),f=(e||a).length,g;if(3>arguments.length){if(!f)throw new TypeError("Reduce of empty array with no initial value");c=a[e?e[--f]:--f]}for(;f--;)g=e?e[f]:f,c=b(c,a[g],g,a);return c};m.find=m.detect=function(a,b,c){var d;b=m.iteratee(b,c);m.some(a,function(a,c,e){if(b(a,c,e))return d=a,!0});return d};m.filter=m.select=function(a,b,c){var d=[];if(null==a)return d;b=m.iteratee(b,c);m.each(a,function(a,
c,e){b(a,c,e)&&d.push(a)});return d};m.reject=function(a,b,c){return m.filter(a,m.negate(m.iteratee(b)),c)};m.every=m.all=function(a,b,c){if(null==a)return!0;b=m.iteratee(b,c);c=a.length!==+a.length&&m.keys(a);var d=(c||a).length,e,f;for(e=0;e<d;e++)if(f=c?c[e]:e,!b(a[f],f,a))return!1;return!0};m.some=m.any=function(a,b,c){if(null==a)return!1;b=m.iteratee(b,c);c=a.length!==+a.length&&m.keys(a);var d=(c||a).length,e,f;for(e=0;e<d;e++)if(f=c?c[e]:e,b(a[f],f,a))return!0;return!1};m.contains=m.include=
function(a,b){if(null==a)return!1;a.length!==+a.length&&(a=m.values(a));return 0<=m.indexOf(a,b)};m.invoke=function(a,b){var c=f.call(arguments,2),d=m.isFunction(b);return m.map(a,function(a){return(d?b:a[b]).apply(a,c)})};m.pluck=function(a,b){return m.map(a,m.property(b))};m.where=function(a,b){return m.filter(a,m.matches(b))};m.findWhere=function(a,b){return m.find(a,m.matches(b))};m.max=function(a,b,c){var d=-Infinity,e=-Infinity,f;if(null==b&&null!=a){a=a.length===+a.length?a:m.values(a);for(var g=
0,h=a.length;g<h;g++)c=a[g],c>d&&(d=c)}else b=m.iteratee(b,c),m.each(a,function(a,c,g){f=b(a,c,g);if(f>e||-Infinity===f&&-Infinity===d)d=a,e=f});return d};m.min=function(a,b,c){var d=Infinity,e=Infinity,f;if(null==b&&null!=a){a=a.length===+a.length?a:m.values(a);for(var g=0,h=a.length;g<h;g++)c=a[g],c<d&&(d=c)}else b=m.iteratee(b,c),m.each(a,function(a,c,g){f=b(a,c,g);if(f<e||Infinity===f&&Infinity===d)d=a,e=f});return d};m.shuffle=function(a){a=a&&a.length===+a.length?a:m.values(a);for(var b=a.length,
c=Array(b),d=0,e;d<b;d++)e=m.random(0,d),e!==d&&(c[d]=c[e]),c[e]=a[d];return c};m.sample=function(a,b,c){return null==b||c?(a.length!==+a.length&&(a=m.values(a)),a[m.random(a.length-1)]):m.shuffle(a).slice(0,Math.max(0,b))};m.sortBy=function(a,b,c){b=m.iteratee(b,c);return m.pluck(m.map(a,function(a,c,d){return{value:a,index:c,criteria:b(a,c,d)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(c<d||void 0===d)return-1}return a.index-b.index}),"value")};var u=
function(a){return function(b,c,d){var e={};c=m.iteratee(c,d);m.each(b,function(d,f){var g=c(d,f,b);a(e,d,g)});return e}};m.groupBy=u(function(a,b,c){m.has(a,c)?a[c].push(b):a[c]=[b]});m.indexBy=u(function(a,b,c){a[c]=b});m.countBy=u(function(a,b,c){m.has(a,c)?a[c]++:a[c]=1});m.sortedIndex=function(a,b,c,d){c=m.iteratee(c,d,1);b=c(b);d=0;for(var e=a.length;d<e;){var f=d+e>>>1;c(a[f])<b?d=f+1:e=f}return d};m.toArray=function(a){return a?m.isArray(a)?f.call(a):a.length===+a.length?m.map(a,m.identity):
m.values(a):[]};m.size=function(a){return null==a?0:a.length===+a.length?a.length:m.keys(a).length};m.partition=function(a,b,c){b=m.iteratee(b,c);var d=[],e=[];m.each(a,function(a,c,f){(b(a,c,f)?d:e).push(a)});return[d,e]};m.first=m.head=m.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:0>b?[]:f.call(a,0,b)};m.initial=function(a,b,c){return f.call(a,0,Math.max(0,a.length-(null==b||c?1:b)))};m.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:f.call(a,Math.max(a.length-
b,0))};m.rest=m.tail=m.drop=function(a,b,c){return f.call(a,null==b||c?1:b)};m.compact=function(a){return m.filter(a,m.identity)};var v=function(a,b,c,d){if(b&&m.every(a,m.isArray))return h.apply(d,a);for(var f=0,g=a.length;f<g;f++){var k=a[f];m.isArray(k)||m.isArguments(k)?b?e.apply(d,k):v(k,b,c,d):c||d.push(k)}return d};m.flatten=function(a,b){return v(a,b,!1,[])};m.without=function(a){return m.difference(a,f.call(arguments,1))};m.uniq=m.unique=function(a,b,c,d){if(null==a)return[];m.isBoolean(b)||
(d=c,c=b,b=!1);null!=c&&(c=m.iteratee(c,d));d=[];for(var e=[],f=0,g=a.length;f<g;f++){var h=a[f];if(b)f&&e===h||d.push(h),e=h;else if(c){var k=c(h,f,a);0>m.indexOf(e,k)&&(e.push(k),d.push(h))}else 0>m.indexOf(d,h)&&d.push(h)}return d};m.union=function(){return m.uniq(v(arguments,!0,!0,[]))};m.intersection=function(a){if(null==a)return[];for(var b=[],c=arguments.length,d=0,e=a.length;d<e;d++){var f=a[d];if(!m.contains(b,f)){for(var g=1;g<c&&m.contains(arguments[g],f);g++);g===c&&b.push(f)}}return b};
m.difference=function(a){var b=v(f.call(arguments,1),!0,!0,[]);return m.filter(a,function(a){return!m.contains(b,a)})};m.zip=function(a){if(null==a)return[];for(var b=m.max(arguments,"length").length,c=Array(b),d=0;d<b;d++)c[d]=m.pluck(arguments,d);return c};m.object=function(a,b){if(null==a)return{};for(var c={},d=0,e=a.length;d<e;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c};m.indexOf=function(a,b,c){if(null==a)return-1;var d=0,e=a.length;if(c)if("number"==typeof c)d=0>c?Math.max(0,e+c):c;else return d=
m.sortedIndex(a,b),a[d]===b?d:-1;for(;d<e;d++)if(a[d]===b)return d;return-1};m.lastIndexOf=function(a,b,c){if(null==a)return-1;var d=a.length;for("number"==typeof c&&(d=0>c?d+c+1:Math.min(d,c+1));0<=--d;)if(a[d]===b)return d;return-1};m.range=function(a,b,c){1>=arguments.length&&(b=a||0,a=0);c=c||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=Array(d),f=0;f<d;f++,a+=c)e[f]=a;return e};var A=function(){};m.bind=function(a,b){var c,d;if(q&&a.bind===q)return q.apply(a,f.call(arguments,1));if(!m.isFunction(a))throw new TypeError("Bind must be called on a function");
c=f.call(arguments,2);return d=function(){if(!(this instanceof d))return a.apply(b,c.concat(f.call(arguments)));A.prototype=a.prototype;var e=new A;A.prototype=null;var g=a.apply(e,c.concat(f.call(arguments)));return m.isObject(g)?g:e}};m.partial=function(a){var b=f.call(arguments,1);return function(){for(var c=0,d=b.slice(),e=0,f=d.length;e<f;e++)d[e]===m&&(d[e]=arguments[c++]);for(;c<arguments.length;)d.push(arguments[c++]);return a.apply(this,d)}};m.bindAll=function(a){var b,c=arguments.length,
d;if(1>=c)throw Error("bindAll must be passed function names");for(b=1;b<c;b++)d=arguments[b],a[d]=m.bind(a[d],a);return a};m.memoize=function(a,b){var c=function(d){var e=c.cache,f=b?b.apply(this,arguments):d;m.has(e,f)||(e[f]=a.apply(this,arguments));return e[f]};c.cache={};return c};m.delay=function(a,b){var c=f.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)};m.defer=function(a){return m.delay.apply(m,[a,1].concat(f.call(arguments,1)))};m.throttle=function(a,b,c){var d,
e,f,g=null,h=0;c||(c={});var k=function(){h=!1===c.leading?0:m.now();g=null;f=a.apply(d,e);g||(d=e=null)};return function(){var n=m.now();h||!1!==c.leading||(h=n);var q=b-(n-h);d=this;e=arguments;0>=q||q>b?(clearTimeout(g),g=null,h=n,f=a.apply(d,e),g||(d=e=null)):g||!1===c.trailing||(g=setTimeout(k,q));return f}};m.debounce=function(a,b,c){var d,e,f,g,h,k=function(){var n=m.now()-g;n<b&&0<n?d=setTimeout(k,b-n):(d=null,c||(h=a.apply(f,e),d||(f=e=null)))};return function(){f=this;e=arguments;g=m.now();
var n=c&&!d;d||(d=setTimeout(k,b));n&&(h=a.apply(f,e),f=e=null);return h}};m.wrap=function(a,b){return m.partial(b,a)};m.negate=function(a){return function(){return!a.apply(this,arguments)}};m.compose=function(){var a=arguments,b=a.length-1;return function(){for(var c=b,d=a[b].apply(this,arguments);c--;)d=a[c].call(this,d);return d}};m.after=function(a,b){return function(){if(1>--a)return b.apply(this,arguments)}};m.before=function(a,b){var c;return function(){0<--a?c=b.apply(this,arguments):b=null;
return c}};m.once=m.partial(m.before,2);m.keys=function(a){if(!m.isObject(a))return[];if(n)return n(a);var b=[],c;for(c in a)m.has(a,c)&&b.push(c);return b};m.values=function(a){for(var b=m.keys(a),c=b.length,d=Array(c),e=0;e<c;e++)d[e]=a[b[e]];return d};m.pairs=function(a){for(var b=m.keys(a),c=b.length,d=Array(c),e=0;e<c;e++)d[e]=[b[e],a[b[e]]];return d};m.invert=function(a){for(var b={},c=m.keys(a),d=0,e=c.length;d<e;d++)b[a[c[d]]]=c[d];return b};m.functions=m.methods=function(a){var b=[],c;for(c in a)m.isFunction(a[c])&&
b.push(c);return b.sort()};m.extend=function(a){if(!m.isObject(a))return a;for(var b,c,d=1,e=arguments.length;d<e;d++)for(c in b=arguments[d],b)k.call(b,c)&&(a[c]=b[c]);return a};m.pick=function(a,b,c){var d={},e;if(null==a)return d;if(m.isFunction(b))for(e in b=p(b,c),a){var g=a[e];b(g,e,a)&&(d[e]=g)}else{g=h.apply([],f.call(arguments,1));a=Object(a);for(var k=0,n=g.length;k<n;k++)e=g[k],e in a&&(d[e]=a[e])}return d};m.omit=function(a,b,c){if(m.isFunction(b))b=m.negate(b);else{var d=m.map(h.apply([],
f.call(arguments,1)),String);b=function(a,b){return!m.contains(d,b)}}return m.pick(a,b,c)};m.defaults=function(a){if(!m.isObject(a))return a;for(var b=1,c=arguments.length;b<c;b++){var d=arguments[b],e;for(e in d)void 0===a[e]&&(a[e]=d[e])}return a};m.clone=function(a){return m.isObject(a)?m.isArray(a)?a.slice():m.extend({},a):a};m.tap=function(a,b){b(a);return a};var D=function(a,b,c,d){if(a===b)return 0!==a||1/a===1/b;if(null==a||null==b)return a===b;a instanceof m&&(a=a._wrapped);b instanceof m&&
(b=b._wrapped);var e=g.call(a);if(e!==g.call(b))return!1;switch(e){case "[object RegExp]":case "[object String]":return""+a===""+b;case "[object Number]":return+a!==+a?+b!==+b:0===+a?1/+a===1/b:+a===+b;case "[object Date]":case "[object Boolean]":return+a===+b}if("object"!=typeof a||"object"!=typeof b)return!1;for(var f=c.length;f--;)if(c[f]===a)return d[f]===b;var f=a.constructor,h=b.constructor;if(f!==h&&"constructor"in a&&"constructor"in b&&!(m.isFunction(f)&&f instanceof f&&m.isFunction(h)&&h instanceof
h))return!1;c.push(a);d.push(b);if("[object Array]"===e){if(e=a.length,h=e===b.length)for(;e--&&(h=D(a[e],b[e],c,d)););}else if(f=m.keys(a),e=f.length,h=m.keys(b).length===e)for(;e--&&(h=f[e],h=m.has(b,h)&&D(a[h],b[h],c,d)););c.pop();d.pop();return h};m.isEqual=function(a,b){return D(a,b,[],[])};m.isEmpty=function(a){if(null==a)return!0;if(m.isArray(a)||m.isString(a)||m.isArguments(a))return 0===a.length;for(var b in a)if(m.has(a,b))return!1;return!0};m.isElement=function(a){return!(!a||1!==a.nodeType)};
m.isArray=d||function(a){return"[object Array]"===g.call(a)};m.isObject=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a};m.each("Arguments Function String Number Date RegExp".split(" "),function(a){m["is"+a]=function(b){return g.call(b)==="[object "+a+"]"}});m.isArguments(arguments)||(m.isArguments=function(a){return m.has(a,"callee")});"function"!==typeof/./&&(m.isFunction=function(a){return"function"==typeof a||!1});m.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))};
m.isNaN=function(a){return m.isNumber(a)&&a!==+a};m.isBoolean=function(a){return!0===a||!1===a||"[object Boolean]"===g.call(a)};m.isNull=function(a){return null===a};m.isUndefined=function(a){return void 0===a};m.has=function(a,b){return null!=a&&k.call(a,b)};m.noConflict=function(){a._=b;return this};m.identity=function(a){return a};m.constant=function(a){return function(){return a}};m.noop=function(){};m.property=function(a){return function(b){return b[a]}};m.matches=function(a){var b=m.pairs(a),
c=b.length;return function(a){if(null==a)return!c;a=Object(a);for(var d=0;d<c;d++){var e=b[d],f=e[0];if(e[1]!==a[f]||!(f in a))return!1}return!0}};m.times=function(a,b,c){var d=Array(Math.max(0,a));b=p(b,c,1);for(c=0;c<a;c++)d[c]=b(c);return d};m.random=function(a,b){null==b&&(b=a,a=0);return a+Math.floor(Math.random()*(b-a+1))};m.now=Date.now||function(){return(new Date).getTime()};var d={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},u=m.invert(d),x=function(a){var b=
function(b){return a[b]},c="(?:"+m.keys(a).join("|")+")",d=RegExp(c),e=RegExp(c,"g");return function(a){a=null==a?"":""+a;return d.test(a)?a.replace(e,b):a}};m.escape=x(d);m.unescape=x(u);m.result=function(a,b){if(null!=a){var c=a[b];return m.isFunction(c)?a[b]():c}};var B=0;m.uniqueId=function(a){var b=++B+"";return a?a+b:b};m.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var s=/(.)^/,G={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028",
"\u2029":"u2029"},K=/\\|'|\r|\n|\u2028|\u2029/g,J=function(a){return"\\"+G[a]};m.template=function(a,b,c){!b&&c&&(b=c);b=m.defaults({},b,m.templateSettings);c=RegExp([(b.escape||s).source,(b.interpolate||s).source,(b.evaluate||s).source].join("|")+"|$","g");var d=0,e="__p+='";a.replace(c,function(b,c,f,g,h){e+=a.slice(d,h).replace(K,J);d=h+b.length;c?e+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'":f?e+="'+\n((__t=("+f+"))==null?'':__t)+\n'":g&&(e+="';\n"+g+"\n__p+='");return b});e+="';\n";b.variable||
(e="with(obj||{}){\n"+e+"}\n");e="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+e+"return __p;\n";try{var f=new Function(b.variable||"obj","_",e)}catch(g){throw g.source=e,g;}c=function(a){return f.call(this,a,m)};c.source="function("+(b.variable||"obj")+"){\n"+e+"}";return c};m.chain=function(a){a=m(a);a._chain=!0;return a};var C=function(a){return this._chain?m(a).chain():a};m.mixin=function(a){m.each(m.functions(a),function(b){var c=m[b]=a[b];m.prototype[b]=
function(){var a=[this._wrapped];e.apply(a,arguments);return C.call(this,c.apply(m,a))}})};m.mixin(m);m.each("pop push reverse shift sort splice unshift".split(" "),function(a){var b=c[a];m.prototype[a]=function(){var c=this._wrapped;b.apply(c,arguments);"shift"!==a&&"splice"!==a||0!==c.length||delete c[0];return C.call(this,c)}});m.each(["concat","join","slice"],function(a){var b=c[a];m.prototype[a]=function(){return C.call(this,b.apply(this._wrapped,arguments))}});m.prototype.value=function(){return this._wrapped};
"function"===typeof define&&define.amd&&define("underscore",[],function(){return m})}).call(this);
(function(a,b){if("function"===typeof define&&define.amd)define(["underscore","jquery","exports"],function(c,e,f){a.Backbone=b(a,f,c,e)});else if("undefined"!==typeof exports){var c=require("underscore");b(a,exports,c)}else a.Backbone=b(a,{},a._,a.jQuery||a.Zepto||a.ender||a.$)})(this,function(a,b,c,d){var e=a.Backbone,f=[].slice;b.VERSION="1.1.2";b.$=d;b.noConflict=function(){a.Backbone=e;return this};b.emulateHTTP=!1;b.emulateJSON=!1;var h=b.Events={on:function(a,b,c){if(!k(this,"on",a,[b,c])||
!b)return this;this._events||(this._events={});(this._events[a]||(this._events[a]=[])).push({callback:b,context:c,ctx:c||this});return this},once:function(a,b,d){if(!k(this,"once",a,[b,d])||!b)return this;var e=this,f=c.once(function(){e.off(a,f);b.apply(this,arguments)});f._callback=b;return this.on(a,f,d)},off:function(a,b,d){var e,f,g,h,m,n,q,p;if(!this._events||!k(this,"off",a,[b,d]))return this;if(!a&&!b&&!d)return this._events=void 0,this;h=a?[a]:c.keys(this._events);m=0;for(n=h.length;m<n;m++)if(a=
h[m],g=this._events[a]){this._events[a]=e=[];if(b||d)for(q=0,p=g.length;q<p;q++)f=g[q],(b&&b!==f.callback&&b!==f.callback._callback||d&&d!==f.context)&&e.push(f);e.length||delete this._events[a]}return this},trigger:function(a){if(!this._events)return this;var b=f.call(arguments,1);if(!k(this,"trigger",a,b))return this;var c=this._events[a],d=this._events.all;c&&n(c,b);d&&n(d,arguments);return this},stopListening:function(a,b,d){var e=this._listeningTo;if(!e)return this;var f=!b&&!d;d||"object"!==
typeof b||(d=this);a&&((e={})[a._listenId]=a);for(var g in e)a=e[g],a.off(b,d,this),(f||c.isEmpty(a._events))&&delete this._listeningTo[g];return this}},g=/\s+/,k=function(a,b,c,d){if(!c)return!0;if("object"===typeof c){for(var e in c)a[b].apply(a,[e,c[e]].concat(d));return!1}if(g.test(c)){c=c.split(g);e=0;for(var f=c.length;e<f;e++)a[b].apply(a,[c[e]].concat(d));return!1}return!0},n=function(a,b){var c,d=-1,e=a.length,f=b[0],g=b[1],h=b[2];switch(b.length){case 0:for(;++d<e;)(c=a[d]).callback.call(c.ctx);
break;case 1:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f);break;case 2:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g);break;case 3:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g,h);break;default:for(;++d<e;)(c=a[d]).callback.apply(c.ctx,b)}};c.each({listenTo:"on",listenToOnce:"once"},function(a,b){h[b]=function(b,d,e){var f=this._listeningTo||(this._listeningTo={}),g=b._listenId||(b._listenId=c.uniqueId("l"));f[g]=b;e||"object"!==typeof d||(e=this);b[a](d,e,this);return this}});h.bind=h.on;h.unbind=h.off;
c.extend(b,h);var q=b.Model=function(a,b){var d=a||{};b||(b={});this.cid=c.uniqueId("c");this.attributes={};b.collection&&(this.collection=b.collection);b.parse&&(d=this.parse(d,b)||{});d=c.defaults({},d,c.result(this,"defaults"));this.set(d,b);this.changed={};this.initialize.apply(this,arguments)};c.extend(q.prototype,h,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(a){return c.clone(this.attributes)},sync:function(){return b.sync.apply(this,arguments)},
get:function(a){return this.attributes[a]},escape:function(a){return c.escape(this.get(a))},has:function(a){return null!=this.get(a)},set:function(a,b,d){var e,f,g,h,k,m,n;if(null==a)return this;"object"===typeof a?(f=a,d=b):(f={})[a]=b;d||(d={});if(!this._validate(f,d))return!1;g=d.unset;h=d.silent;a=[];k=this._changing;this._changing=!0;k||(this._previousAttributes=c.clone(this.attributes),this.changed={});n=this.attributes;m=this._previousAttributes;this.idAttribute in f&&(this.id=f[this.idAttribute]);
for(e in f)b=f[e],c.isEqual(n[e],b)||a.push(e),c.isEqual(m[e],b)?delete this.changed[e]:this.changed[e]=b,g?delete n[e]:n[e]=b;if(!h)for(a.length&&(this._pending=d),b=0,e=a.length;b<e;b++)this.trigger("change:"+a[b],this,n[a[b]],d);if(k)return this;if(!h)for(;this._pending;)d=this._pending,this._pending=!1,this.trigger("change",this,d);this._changing=this._pending=!1;return this},unset:function(a,b){return this.set(a,void 0,c.extend({},b,{unset:!0}))},clear:function(a){var b={},d;for(d in this.attributes)b[d]=
void 0;return this.set(b,c.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!c.isEmpty(this.changed):c.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?c.clone(this.changed):!1;var b,d=!1,e=this._changing?this._previousAttributes:this.attributes,f;for(f in a)c.isEqual(e[f],b=a[f])||((d||(d={}))[f]=b);return d},previous:function(a){return null!=a&&this._previousAttributes?this._previousAttributes[a]:null},previousAttributes:function(){return c.clone(this._previousAttributes)},
fetch:function(a){a=a?c.clone(a):{};void 0===a.parse&&(a.parse=!0);var b=this,d=a.success;a.success=function(c){if(!b.set(b.parse(c,a),a))return!1;d&&d(b,c,a);b.trigger("sync",b,c,a)};aa(this,a);return this.sync("read",this,a)},save:function(a,b,d){var e,f=this.attributes;null==a||"object"===typeof a?(e=a,d=b):(e={})[a]=b;d=c.extend({validate:!0},d);if(e&&!d.wait){if(!this.set(e,d))return!1}else if(!this._validate(e,d))return!1;e&&d.wait&&(this.attributes=c.extend({},f,e));void 0===d.parse&&(d.parse=
!0);var g=this,h=d.success;d.success=function(a){g.attributes=f;var b=g.parse(a,d);d.wait&&(b=c.extend(e||{},b));if(c.isObject(b)&&!g.set(b,d))return!1;h&&h(g,a,d);g.trigger("sync",g,a,d)};aa(this,d);a=this.isNew()?"create":d.patch?"patch":"update";"patch"===a&&(d.attrs=e);a=this.sync(a,this,d);e&&d.wait&&(this.attributes=f);return a},destroy:function(a){a=a?c.clone(a):{};var b=this,d=a.success,e=function(){b.trigger("destroy",b,b.collection,a)};a.success=function(c){(a.wait||b.isNew())&&e();d&&d(b,
c,a);b.isNew()||b.trigger("sync",b,c,a)};if(this.isNew())return a.success(),!1;aa(this,a);var f=this.sync("delete",this,a);a.wait||e();return f},url:function(){var a=c.result(this,"urlRoot")||c.result(this.collection,"url")||X();return this.isNew()?a:a.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(a,b){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(a){return this._validate({},c.extend(a||
{},{validate:!0}))},_validate:function(a,b){if(!b.validate||!this.validate)return!0;a=c.extend({},this.attributes,a);var d=this.validationError=this.validate(a,b)||null;if(!d)return!0;this.trigger("invalid",this,d,c.extend(b,{validationError:d}));return!1}});c.each("keys values pairs invert pick omit".split(" "),function(a){q.prototype[a]=function(){var b=f.call(arguments);b.unshift(this.attributes);return c[a].apply(c,b)}});var m=b.Collection=function(a,b){b||(b={});b.model&&(this.model=b.model);
void 0!==b.comparator&&(this.comparator=b.comparator);this._reset();this.initialize.apply(this,arguments);a&&this.reset(a,c.extend({silent:!0},b))},p={add:!0,remove:!0,merge:!0},u={add:!0,remove:!1};c.extend(m.prototype,h,{model:q,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return b.sync.apply(this,arguments)},add:function(a,b){return this.set(a,c.extend({merge:!1},b,u))},remove:function(a,b){var d=!c.isArray(a);a=d?[a]:c.clone(a);b||
(b={});var e,f,g,h;e=0;for(f=a.length;e<f;e++)if(h=a[e]=this.get(a[e]))delete this._byId[h.id],delete this._byId[h.cid],g=this.indexOf(h),this.models.splice(g,1),this.length--,b.silent||(b.index=g,h.trigger("remove",h,this,b)),this._removeReference(h,b);return d?a[0]:a},set:function(a,b){b=c.defaults({},b,p);b.parse&&(a=this.parse(a,b));var d=!c.isArray(a);a=d?a?[a]:[]:c.clone(a);var e,f,g,h,k,m,n=b.at,x=this.model,s=this.comparator&&null==n&&!1!==b.sort,G=c.isString(this.comparator)?this.comparator:
null,B=[],v=[],u={},A=b.add,E=b.merge,C=b.remove,D=!s&&A&&C?[]:!1;e=0;for(f=a.length;e<f;e++){k=a[e]||{};g=k instanceof q?h=k:k[x.prototype.idAttribute||"id"];if(g=this.get(g))C&&(u[g.cid]=!0),E&&(k=k===h?h.attributes:k,b.parse&&(k=g.parse(k,b)),g.set(k,b),s&&!m&&g.hasChanged(G)&&(m=!0)),a[e]=g;else if(A){h=a[e]=this._prepareModel(k,b);if(!h)continue;B.push(h);this._addReference(h,b)}h=g||h;!D||!h.isNew()&&u[h.id]||D.push(h);u[h.id]=!0}if(C){e=0;for(f=this.length;e<f;++e)u[(h=this.models[e]).cid]||
v.push(h);v.length&&this.remove(v,b)}if(B.length||D&&D.length)if(s&&(m=!0),this.length+=B.length,null!=n)for(e=0,f=B.length;e<f;e++)this.models.splice(n+e,0,B[e]);else for(D&&(this.models.length=0),k=D||B,e=0,f=k.length;e<f;e++)this.models.push(k[e]);m&&this.sort({silent:!0});if(!b.silent){e=0;for(f=B.length;e<f;e++)(h=B[e]).trigger("add",h,this,b);(m||D&&D.length)&&this.trigger("sort",this,b)}return d?a[0]:a},reset:function(a,b){b||(b={});for(var d=0,e=this.models.length;d<e;d++)this._removeReference(this.models[d],
b);b.previousModels=this.models;this._reset();a=this.add(a,c.extend({silent:!0},b));b.silent||this.trigger("reset",this,b);return a},push:function(a,b){return this.add(a,c.extend({at:this.length},b))},pop:function(a){var b=this.at(this.length-1);this.remove(b,a);return b},unshift:function(a,b){return this.add(a,c.extend({at:0},b))},shift:function(a){var b=this.at(0);this.remove(b,a);return b},slice:function(){return f.apply(this.models,arguments)},get:function(a){return null==a?void 0:this._byId[a]||
this._byId[a.id]||this._byId[a.cid]},at:function(a){return this.models[a]},where:function(a,b){return c.isEmpty(a)?b?void 0:[]:this[b?"find":"filter"](function(b){for(var c in a)if(a[c]!==b.get(c))return!1;return!0})},findWhere:function(a){return this.where(a,!0)},sort:function(a){if(!this.comparator)throw Error("Cannot sort a set without a comparator");a||(a={});c.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(c.bind(this.comparator,
this));a.silent||this.trigger("sort",this,a);return this},pluck:function(a){return c.invoke(this.models,"get",a)},fetch:function(a){a=a?c.clone(a):{};void 0===a.parse&&(a.parse=!0);var b=a.success,d=this;a.success=function(c){d[a.reset?"reset":"set"](c,a);b&&b(d,c,a);d.trigger("sync",d,c,a)};aa(this,a);return this.sync("read",this,a)},create:function(a,b){b=b?c.clone(b):{};if(!(a=this._prepareModel(a,b)))return!1;b.wait||this.add(a,b);var d=this,e=b.success;b.success=function(a,c){b.wait&&d.add(a,
b);e&&e(a,c,b)};a.save(null,b);return a},parse:function(a,b){return a},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0;this.models=[];this._byId={}},_prepareModel:function(a,b){if(a instanceof q)return a;b=b?c.clone(b):{};b.collection=this;var d=new this.model(a,b);if(!d.validationError)return d;this.trigger("invalid",this,d.validationError,b);return!1},_addReference:function(a,b){this._byId[a.cid]=a;null!=a.id&&(this._byId[a.id]=a);a.collection||(a.collection=
this);a.on("all",this._onModelEvent,this)},_removeReference:function(a,b){this===a.collection&&delete a.collection;a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){if("add"!==a&&"remove"!==a||c===this)"destroy"===a&&this.remove(b,d),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],null!=b.id&&(this._byId[b.id]=b)),this.trigger.apply(this,arguments)}});c.each("forEach each map collect reduce foldl inject reduceRight foldr find detect filter select reject every all some any include contains invoke max min toArray size first head take initial rest tail drop last without difference indexOf shuffle lastIndexOf isEmpty chain sample".split(" "),
function(a){m.prototype[a]=function(){var b=f.call(arguments);b.unshift(this.models);return c[a].apply(c,b)}});c.each(["groupBy","countBy","sortBy","indexBy"],function(a){m.prototype[a]=function(b,d){var e=c.isFunction(b)?b:function(a){return a.get(b)};return c[a](this.models,e,d)}});d=b.View=function(a){this.cid=c.uniqueId("view");a||(a={});c.extend(this,c.pick(a,A));this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()};var v=/^(\S+)\s*(.*)$/,A="model collection el id attributes className tagName events".split(" ");
c.extend(d.prototype,h,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){this.$el.remove();this.stopListening();return this},setElement:function(a,c){this.$el&&this.undelegateEvents();this.$el=a instanceof b.$?a:b.$(a);this.el=this.$el[0];!1!==c&&this.delegateEvents();return this},delegateEvents:function(a){if(!a&&!(a=c.result(this,"events")))return this;this.undelegateEvents();for(var b in a){var d=a[b];c.isFunction(d)||
(d=this[a[b]]);if(d){var e=b.match(v),f=e[1],e=e[2],d=c.bind(d,this),f=f+(".delegateEvents"+this.cid);if(""===e)this.$el.on(f,d);else this.$el.on(f,e,d)}}return this},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid);return this},_ensureElement:function(){if(this.el)this.setElement(c.result(this,"el"),!1);else{var a=c.extend({},c.result(this,"attributes"));this.id&&(a.id=c.result(this,"id"));this.className&&(a["class"]=c.result(this,"className"));a=b.$("<"+c.result(this,"tagName")+
">").attr(a);this.setElement(a,!1)}}});b.sync=function(a,d,e){var f=x[a];c.defaults(e||(e={}),{emulateHTTP:b.emulateHTTP,emulateJSON:b.emulateJSON});var g={type:f,dataType:"json"};e.url||(g.url=c.result(d,"url")||X());null!=e.data||!d||"create"!==a&&"update"!==a&&"patch"!==a||(g.contentType="application/json",g.data=JSON.stringify(e.attrs||d.toJSON(e)));e.emulateJSON&&(g.contentType="application/x-www-form-urlencoded",g.data=g.data?{model:g.data}:{});if(e.emulateHTTP&&("PUT"===f||"DELETE"===f||"PATCH"===
f)){g.type="POST";e.emulateJSON&&(g.data._method=f);var h=e.beforeSend;e.beforeSend=function(a){a.setRequestHeader("X-HTTP-Method-Override",f);if(h)return h.apply(this,arguments)}}"GET"===g.type||e.emulateJSON||(g.processData=!1);"PATCH"===g.type&&D&&(g.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});a=e.xhr=b.ajax(c.extend(g,e));d.trigger("request",d,a,e);return a};var D="undefined"!==typeof window&&!!window.ActiveXObject&&!(window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),
x={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};b.ajax=function(){return b.$.ajax.apply(b.$,arguments)};var B=b.Router=function(a){a||(a={});a.routes&&(this.routes=a.routes);this._bindRoutes();this.initialize.apply(this,arguments)},s=/\((.*?)\)/g,G=/(\(\?)?:\w+/g,K=/\*\w+/g,J=/[\-{}\[\]+?.,\\\^$|#\s]/g;c.extend(B.prototype,h,{initialize:function(){},route:function(a,d,e){c.isRegExp(a)||(a=this._routeToRegExp(a));c.isFunction(d)&&(e=d,d="");e||(e=this[d]);var f=this;b.history.route(a,
function(c){c=f._extractParameters(a,c);f.execute(e,c);f.trigger.apply(f,["route:"+d].concat(c));f.trigger("route",d,c);b.history.trigger("route",f,d,c)});return this},execute:function(a,b){a&&a.apply(this,b)},navigate:function(a,c){b.history.navigate(a,c);return this},_bindRoutes:function(){if(this.routes){this.routes=c.result(this,"routes");for(var a,b=c.keys(this.routes);null!=(a=b.pop());)this.route(a,this.routes[a])}},_routeToRegExp:function(a){a=a.replace(J,"\\$&").replace(s,"(?:$1)?").replace(G,
function(a,b){return b?a:"([^/?]+)"}).replace(K,"([^?]*?)");return new RegExp("^"+a+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(a,b){var d=a.exec(b).slice(1);return c.map(d,function(a,b){return b===d.length-1?a||null:a?decodeURIComponent(a):null})}});var C=b.History=function(){this.handlers=[];c.bindAll(this,"checkUrl");"undefined"!==typeof window&&(this.location=window.location,this.history=window.history)},L=/^[#\/]|\s+$/g,N=/^\/+|\/+$/g,Q=/msie [\w.]+/,T=/\/$/,E=/#.*$/;C.started=!1;c.extend(C.prototype,
h,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(a){return(a=(a||this).location.href.match(/#(.*)$/))?a[1]:""},getFragment:function(a,b){if(null==a)if(this._hasPushState||!this._wantsHashChange||b){a=decodeURI(this.location.pathname+this.location.search);var c=this.root.replace(T,"");a.indexOf(c)||(a=a.slice(c.length))}else a=this.getHash();return a.replace(L,"")},start:function(a){if(C.started)throw Error("Backbone.history has already been started");
C.started=!0;this.options=c.extend({root:"/"},this.options,a);this.root=this.options.root;this._wantsHashChange=!1!==this.options.hashChange;this._wantsPushState=!!this.options.pushState;this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);a=this.getFragment();var d=document.documentMode,d=Q.exec(navigator.userAgent.toLowerCase())&&(!d||7>=d);this.root=("/"+this.root+"/").replace(N,"/");d&&this._wantsHashChange&&(this.iframe=b.$('<iframe src="javascript:0" tabindex="-1">').hide().appendTo("body")[0].contentWindow,
this.navigate(a));if(this._hasPushState)b.$(window).on("popstate",this.checkUrl);else if(this._wantsHashChange&&"onhashchange"in window&&!d)b.$(window).on("hashchange",this.checkUrl);else this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval));this.fragment=a;a=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&
this.atRoot()&&a.hash&&(this.fragment=this.getHash().replace(L,""),this.history.replaceState({},document.title,this.root+this.fragment))}if(!this.options.silent)return this.loadUrl()},stop:function(){b.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl);this._checkUrlInterval&&clearInterval(this._checkUrlInterval);C.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(a){a=this.getFragment();a===this.fragment&&this.iframe&&(a=this.getFragment(this.getHash(this.iframe)));
if(a===this.fragment)return!1;this.iframe&&this.navigate(a);this.loadUrl()},loadUrl:function(a){a=this.fragment=this.getFragment(a);return c.any(this.handlers,function(b){if(b.route.test(a))return b.callback(a),!0})},navigate:function(a,b){if(!C.started)return!1;b&&!0!==b||(b={trigger:!!b});var c=this.root+(a=this.getFragment(a||""));a=a.replace(E,"");if(this.fragment!==a){this.fragment=a;""===a&&"/"!==c&&(c=c.slice(0,-1));if(this._hasPushState)this.history[b.replace?"replaceState":"pushState"]({},
document.title,c);else if(this._wantsHashChange)this._updateHash(this.location,a,b.replace),this.iframe&&a!==this.getFragment(this.getHash(this.iframe))&&(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,a,b.replace));else return this.location.assign(c);if(b.trigger)return this.loadUrl(a)}},_updateHash:function(a,b,c){c?(c=a.href.replace(/(javascript:|#).*$/,""),a.replace(c+"#"+b)):a.hash="#"+b}});b.history=new C;q.extend=m.extend=B.extend=d.extend=C.extend=function(a,
b){var d=this,e;e=a&&c.has(a,"constructor")?a.constructor:function(){return d.apply(this,arguments)};c.extend(e,d,b);var f=function(){this.constructor=e};f.prototype=d.prototype;e.prototype=new f;a&&c.extend(e.prototype,a);e.__super__=d.prototype;return e};var X=function(){throw Error('A "url" property or function must be specified');},aa=function(a,b){var c=b.error;b.error=function(d){c&&c(a,d,b);a.trigger("error",a,d,b)}};return b});
(function(a,b,c){var d,e,f,h,g=[],k=[];a.extend(c.View,{attach:function(a,d){"function"!==typeof d&&(d=c.View.extend(d));g.push(function(){this.find(a).add(this.filter(a)).each(function(){var a=b(this);void 0===a.data("backbone.attached-view")&&a.data("backbone.attached-view",new d({el:this}))})});return d}});e=function(a){var b,c=g.length;for(b=0;b<c;b+=1)g[b].call(a)};d=function(){var a;a=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;if(void 0===a)return!1;(new a(function(a){var c,
d=a.length,f=[];for(c=0;c<d;c+=1)f.push.apply(f,a[c].addedNodes);0<f.length&&e(b(f))})).observe(document.body,{childList:!0,subtree:!0});return!0};f=function(){b(document.body).on("DOMNodeInserted",function(a){var b=0<k.length;k.push(a);b||setTimeout(h,0)})};h=function(){var a,c=k.length,d=[];for(a=0;a<c;a+=1)d.push(k[a].target);k=[];e(b(d))};b(function(){e(b(document));d()||f()})})(window._,window.jQuery,window.Backbone);
(function(a){a.extend(a.fn,{validate:function(b){if(this.length){var c=a.data(this[0],"validator");if(c)return c;c=new a.validator(b,this[0]);a.data(this[0],"validator",c);c.settings.onsubmit&&(this.find("input, button").filter(".cancel").click(function(){c.cancelSubmit=!0}),c.settings.submitHandler&&this.find("input, button").filter(":submit").click(function(){c.submitButton=this}),this.submit(function(b){function e(){if(c.settings.submitHandler){if(c.submitButton)var b=a("<input type='hidden'/>").attr("name",
c.submitButton.name).val(c.submitButton.value).appendTo(c.currentForm);c.settings.submitHandler.call(c,c.currentForm);c.submitButton&&b.remove();return!1}return!0}c.settings.debug&&b.preventDefault();if(c.cancelSubmit)return c.cancelSubmit=!1,e();if(c.form())return c.pendingRequest?(c.formSubmitted=!0,!1):e();c.focusInvalid();return!1}));return c}b&&b.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing")},valid:function(){if(a(this[0]).is("form"))return this.validate().form();
var b=!0,c=a(this[0].form).validate();this.each(function(){b&=c.element(this)});return b},removeAttrs:function(b){var c={},d=this;a.each(b.split(/\s/),function(a,b){c[b]=d.attr(b);d.removeAttr(b)});return c},rules:function(b,c){var d=this[0];if(b){var e=a.data(d.form,"validator").settings,f=e.rules,h=a.validator.staticRules(d);switch(b){case "add":a.extend(h,a.validator.normalizeRule(c));f[d.name]=h;c.messages&&(e.messages[d.name]=a.extend(e.messages[d.name],c.messages));break;case "remove":if(!c)return delete f[d.name],
h;var g={};a.each(c.split(/\s/),function(a,b){g[b]=h[b];delete h[b]});return g}}d=a.validator.normalizeRules(a.extend({},a.validator.metadataRules(d),a.validator.classRules(d),a.validator.attributeRules(d),a.validator.staticRules(d)),d);d.required&&(e=d.required,delete d.required,d=a.extend({required:e},d));return d}});a.extend(a.expr[":"],{blank:function(b){return!a.trim(""+b.value)},filled:function(b){return!!a.trim(""+b.value)},unchecked:function(a){return!a.checked}});a.validator=function(b,c){this.settings=
a.extend({},a.validator.defaults,b);this.currentForm=c;this.init()};a.validator.format=function(b,c){if(1==arguments.length)return function(){var c=a.makeArray(arguments);c.unshift(b);return a.validator.format.apply(this,c)};2<arguments.length&&c.constructor!=Array&&(c=a.makeArray(arguments).slice(1));c.constructor!=Array&&(c=[c]);a.each(c,function(a,c){b=b.replace(new RegExp("\\{"+a+"\\}","g"),c)});return b};a.extend(a.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",
errorElement:"label",focusInvalid:!0,errorContainer:a([]),errorLabelContainer:a([]),onsubmit:!0,ignore:[],ignoreTitle:!1,onfocusin:function(a){this.lastActive=a;this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,a,this.settings.errorClass,this.settings.validClass),this.errorsFor(a).hide())},onfocusout:function(a){this.checkable(a)||!(a.name in this.submitted)&&this.optional(a)||this.element(a)},onkeyup:function(a){(a.name in this.submitted||
a==this.lastElement)&&this.element(a)},onclick:function(a){a.name in this.submitted?this.element(a):a.parentNode.name in this.submitted&&this.element(a.parentNode)},highlight:function(b,c,d){a(b).addClass(c).removeClass(d)},unhighlight:function(b,c,d){a(b).removeClass(c).addClass(d)}},setDefaults:function(b){a.extend(a.validator.defaults,b)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",
dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",accept:"Please enter a value with a valid extension.",maxlength:a.validator.format("Please enter no more than {0} characters."),minlength:a.validator.format("Please enter at least {0} characters."),rangelength:a.validator.format("Please enter a value between {0} and {1} characters long."),
range:a.validator.format("Please enter a value between {0} and {1}."),max:a.validator.format("Please enter a value less than or equal to {0}."),min:a.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function b(b){var c=a.data(this[0].form,"validator");c.settings["on"+b.type]&&c.settings["on"+b.type].call(c,this[0])}this.labelContainer=a(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||
a(this.currentForm);this.containers=a(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var c=this.groups={};a.each(this.settings.groups,function(b,d){a.each(d.split(/\s/),function(a,d){c[d]=b})});var d=this.settings.rules;a.each(d,function(b,c){d[b]=a.validator.normalizeRule(c)});a(this.currentForm).delegate("focusin focusout keyup",":text, :password, :file, select, textarea",
b).delegate("click",":radio, :checkbox, select, option",b);this.settings.invalidHandler&&a(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){this.checkForm();a.extend(this.submitted,this.errorMap);this.invalid=a.extend({},this.errorMap);this.valid()||a(this.currentForm).triggerHandler("invalid-form",[this]);this.showErrors();return this.valid()},checkForm:function(){this.prepareForm();for(var a=0,c=this.currentElements=this.elements();c[a];a++)this.check(c[a]);
return this.valid()},element:function(b){this.lastElement=b=this.clean(b);this.prepareElement(b);this.currentElements=a(b);var c=this.check(b);c?delete this.invalid[b.name]:this.invalid[b.name]=!0;this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers));this.showErrors();return c},showErrors:function(b){if(b){a.extend(this.errorMap,b);this.errorList=[];for(var c in b)this.errorList.push({message:b[c],element:this.findByName(c)[0]});this.successList=a.grep(this.successList,function(a){return!(a.name in
b)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){a.fn.resetForm&&a(this.currentForm).resetForm();this.submitted={};this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(a){var c=0,d;for(d in a)c++;return c},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0==
this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{a(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus()}catch(b){}},findLastActive:function(){var b=this.lastActive;return b&&1==a.grep(this.errorList,function(a){return a.element.name==b.name}).length&&b},elements:function(){var b=this,c={};return a([]).add(this.currentForm.elements).filter(":input").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){!this.name&&
b.settings.debug&&window.console&&console.error("%o has no name assigned",this);return this.name in c||!b.objectLength(a(this).rules())?!1:c[this.name]=!0})},clean:function(b){return a(b)[0]},errors:function(){return a(this.settings.errorElement+"."+this.settings.errorClass,this.errorContext)},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=a([]);this.toHide=a([]);this.currentElements=a([])},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers)},
prepareElement:function(a){this.reset();this.toHide=this.errorsFor(a)},check:function(b){b=this.clean(b);this.checkable(b)&&(b=this.findByName(b.name)[0]);var c=a(b).rules(),d=!1;for(method in c){var e={method:method,parameters:c[method]};try{var f=a.validator.methods[method].call(this,b.value.replace(/\r/g,""),b,e.parameters);if("dependency-mismatch"==f)d=!0;else{d=!1;if("pending"==f){this.toHide=this.toHide.not(this.errorsFor(b));return}if(!f)return this.formatAndAdd(b,e),!1}}catch(h){throw this.settings.debug&&
window.console&&console.log("exception occured when checking element "+b.id+", check the '"+e.method+"' method",h),h;}}if(!d)return this.objectLength(c)&&this.successList.push(b),!0},customMetaMessage:function(b,c){if(a.metadata){var d=this.settings.meta?a(b).metadata()[this.settings.meta]:a(b).metadata();return d&&d.messages&&d.messages[c]}},customMessage:function(a,c){var d=this.settings.messages[a];return d&&(d.constructor==String?d:d[c])},findDefined:function(){for(var a=0;a<arguments.length;a++)if(void 0!==
arguments[a])return arguments[a]},defaultMessage:function(b,c){return this.findDefined(this.customMessage(b.name,c),this.customMetaMessage(b,c),!this.settings.ignoreTitle&&b.title||void 0,a.validator.messages[c],"<strong>Warning: No message defined for "+b.name+"</strong>")},formatAndAdd:function(a,c){var d=this.defaultMessage(a,c.method),e=/\$?\{(\d+)\}/g;"function"==typeof d?d=d.call(this,c.parameters,a):e.test(d)&&(d=jQuery.format(d.replace(e,"{$1}"),c.parameters));this.errorList.push({message:d,
element:a});this.errorMap[a.name]=d;this.submitted[a.name]=d},addWrapper:function(a){this.settings.wrapper&&(a=a.add(a.parent(this.settings.wrapper)));return a},defaultShowErrors:function(){for(var a=0;this.errorList[a];a++){var c=this.errorList[a];this.settings.highlight&&this.settings.highlight.call(this,c.element,this.settings.errorClass,this.settings.validClass);this.showLabel(c.element,c.message)}this.errorList.length&&(this.toShow=this.toShow.add(this.containers));if(this.settings.success)for(a=
0;this.successList[a];a++)this.showLabel(this.successList[a]);if(this.settings.unhighlight)for(a=0,c=this.validElements();c[a];a++)this.settings.unhighlight.call(this,c[a],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return a(this.errorList).map(function(){return this.element})},showLabel:function(b,
c){var d=this.errorsFor(b);d.length?(d.removeClass().addClass(this.settings.errorClass),d.attr("generated")&&d.html(c)):(d=a("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(b),generated:!0}).addClass(this.settings.errorClass).html(c||""),this.settings.wrapper&&(d=d.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(d).length||(this.settings.errorPlacement?this.settings.errorPlacement(d,a(b)):d.insertAfter(b)));!c&&this.settings.success&&(d.text(""),
"string"==typeof this.settings.success?d.addClass(this.settings.success):this.settings.success(d));this.toShow=this.toShow.add(d)},errorsFor:function(b){var c=this.idOrName(b);return this.errors().filter(function(){return a(this).attr("for")==c})},idOrName:function(a){return this.groups[a.name]||(this.checkable(a)?a.name:a.id||a.name)},checkable:function(a){return/radio|checkbox/i.test(a.type)},findByName:function(b){var c=this.currentForm;return a(document.getElementsByName(b)).map(function(a,e){return e.form==
c&&e.name==b&&e||null})},getLength:function(b,c){switch(c.nodeName.toLowerCase()){case "select":return a("option:selected",c).length;case "input":if(this.checkable(c))return this.findByName(c.name).filter(":checked").length}return b.length},depend:function(a,c){return this.dependTypes[typeof a]?this.dependTypes[typeof a](a,c):!0},dependTypes:{"boolean":function(a,c){return a},string:function(b,c){return!!a(b,c.form).length},"function":function(a,c){return a(c)}},optional:function(b){return!a.validator.methods.required.call(this,
a.trim(b.value),b)&&"dependency-mismatch"},startRequest:function(a){this.pending[a.name]||(this.pendingRequest++,this.pending[a.name]=!0)},stopRequest:function(b,c){this.pendingRequest--;0>this.pendingRequest&&(this.pendingRequest=0);delete this.pending[b.name];c&&0==this.pendingRequest&&this.formSubmitted&&this.form()?(a(this.currentForm).submit(),this.formSubmitted=!1):!c&&0==this.pendingRequest&&this.formSubmitted&&(a(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},
previousValue:function(b){return a.data(b,"previousValue")||a.data(b,"previousValue",{old:null,valid:!0,message:this.defaultMessage(b,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},dateDE:{dateDE:!0},number:{number:!0},numberDE:{numberDE:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(b,c){b.constructor==String?this.classRuleSettings[b]=c:a.extend(this.classRuleSettings,b)},classRules:function(b){var c=
{};(b=a(b).attr("class"))&&a.each(b.split(" "),function(){this in a.validator.classRuleSettings&&a.extend(c,a.validator.classRuleSettings[this])});return c},attributeRules:function(b){var c={};b=a(b);for(method in a.validator.methods){var d=b.attr(method);d&&(c[method]=d)}c.maxlength&&/-1|2147483647|524288/.test(c.maxlength)&&delete c.maxlength;return c},metadataRules:function(b){if(!a.metadata)return{};var c=a.data(b.form,"validator").settings.meta;return c?a(b).metadata()[c]:a(b).metadata()},staticRules:function(b){var c=
{},d=a.data(b.form,"validator");d.settings.rules&&(c=a.validator.normalizeRule(d.settings.rules[b.name])||{});return c},normalizeRules:function(b,c){a.each(b,function(d,e){if(!1===e)delete b[d];else if(e.param||e.depends){var f=!0;switch(typeof e.depends){case "string":f=!!a(e.depends,c.form).length;break;case "function":f=e.depends.call(c,c)}f?b[d]=void 0!==e.param?e.param:!0:delete b[d]}});a.each(b,function(d,e){b[d]=a.isFunction(e)?e(c):e});a.each(["minlength","maxlength","min","max"],function(){b[this]&&
(b[this]=Number(b[this]))});a.each(["rangelength","range"],function(){b[this]&&(b[this]=[Number(b[this][0]),Number(b[this][1])])});a.validator.autoCreateRanges&&(b.min&&b.max&&(b.range=[b.min,b.max],delete b.min,delete b.max),b.minlength&&b.maxlength&&(b.rangelength=[b.minlength,b.maxlength],delete b.minlength,delete b.maxlength));b.messages&&delete b.messages;return b},normalizeRule:function(b){if("string"==typeof b){var c={};a.each(b.split(/\s/),function(){c[this]=!0});b=c}return b},addMethod:function(b,
c,d){a.validator.methods[b]=c;a.validator.messages[b]=void 0!=d?d:a.validator.messages[b];3>c.length&&a.validator.addClassRules(b,a.validator.normalizeRule(b))},methods:{required:function(b,c,d){if(!this.depend(d,c))return"dependency-mismatch";switch(c.nodeName.toLowerCase()){case "select":return(b=a(c).val())&&0<b.length;case "input":if(this.checkable(c))return 0<this.getLength(b,c);default:return 0<a.trim(b).length}},remote:function(b,c,d){if(this.optional(c))return"dependency-mismatch";var e=this.previousValue(c);
this.settings.messages[c.name]||(this.settings.messages[c.name]={});e.originalMessage=this.settings.messages[c.name].remote;this.settings.messages[c.name].remote=e.message;d="string"==typeof d&&{url:d}||d;if(e.old!==b){e.old=b;var f=this;this.startRequest(c);var h={};h[c.name]=b;a.ajax(a.extend(!0,{url:d,mode:"abort",port:"validate"+c.name,dataType:"json",data:h,success:function(d){f.settings.messages[c.name].remote=e.originalMessage;var h=!0===d;if(h){var n=f.formSubmitted;f.prepareElement(c);f.formSubmitted=
n;f.successList.push(c);f.showErrors()}else n={},d=e.message=d||f.defaultMessage(c,"remote"),n[c.name]=a.isFunction(d)?d(b):d,f.showErrors(n);e.valid=h;f.stopRequest(c,h)}},d));return"pending"}return this.pending[c.name]?"pending":e.valid},minlength:function(b,c,d){return this.optional(c)||this.getLength(a.trim(b),c)>=d},maxlength:function(b,c,d){return this.optional(c)||this.getLength(a.trim(b),c)<=d},rangelength:function(b,c,d){b=this.getLength(a.trim(b),c);return this.optional(c)||b>=d[0]&&b<=
d[1]},min:function(a,c,d){return this.optional(c)||a>=d},max:function(a,c,d){return this.optional(c)||a<=d},range:function(a,c,d){return this.optional(c)||a>=d[0]&&a<=d[1]},email:function(a,c){return this.optional(c)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(a)},
url:function(a,c){return this.optional(c)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(a)},
date:function(a,c){return this.optional(c)||!/Invalid|NaN/.test(new Date(a))},dateISO:function(a,c){return this.optional(c)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(a)},number:function(a,c){return this.optional(c)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(a)},digits:function(a,c){return this.optional(c)||/^\d+$/.test(a)},creditcard:function(a,c){if(this.optional(c))return"dependency-mismatch";if(/[^0-9-]+/.test(a))return!1;var d=0,e=0,f=!1;a=a.replace(/\D/g,"");for(var h=a.length-1;0<=h;h--)e=
a.charAt(h),e=parseInt(e,10),f&&9<(e*=2)&&(e-=9),d+=e,f=!f;return 0==d%10},accept:function(a,c,d){d="string"==typeof d?d.replace(/,/g,"|"):"png|jpe?g|gif";return this.optional(c)||a.match(new RegExp(".("+d+")$","i"))},equalTo:function(b,c,d){d=a(d).unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){a(c).valid()});return b==d.val()}}});a.format=a.validator.format})(jQuery);
(function(a){var b=a.ajax,c={};a.ajax=function(d){d=a.extend(d,a.extend({},a.ajaxSettings,d));var e=d.port;return"abort"==d.mode?(c[e]&&c[e].abort(),c[e]=b.apply(this,arguments)):b.apply(this,arguments)}})(jQuery);
(function(a){a.each({focus:"focusin",blur:"focusout"},function(b,c){a.event.special[c]={setup:function(){if(a.browser.msie)return!1;this.addEventListener(b,a.event.special[c].handler,!0)},teardown:function(){if(a.browser.msie)return!1;this.removeEventListener(b,a.event.special[c].handler,!0)},handler:function(b){arguments[0]=a.event.fix(b);arguments[0].type=c;return a.event.handle.apply(this,arguments)}}});a.extend(a.fn,{delegate:function(b,c,d){return this.bind(b,function(b){var f=a(b.target);if(f.is(c))return d.apply(f,
arguments)})},triggerEvent:function(b,c){return this.triggerHandler(b,[a.event.fix({type:b,target:c})])}})})(jQuery);
(function(a){"function"===typeof define&&define.amd?define(["jquery"],a):a(jQuery)})(function(a){function b(a){a=e.json?JSON.stringify(a):String(a);return e.raw?a:encodeURIComponent(a)}function c(b,c){var g;if(e.raw)g=b;else a:{var k=b;0===k.indexOf('"')&&(k=k.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{k=decodeURIComponent(k.replace(d," "));g=e.json?JSON.parse(k):k;break a}catch(n){}g=void 0}return a.isFunction(c)?c(g):g}var d=/\+/g,e=a.cookie=function(d,h,g){if(void 0!==h&&!a.isFunction(h)){g=
a.extend({},e.defaults,g);if("number"===typeof g.expires){var k=g.expires,n=g.expires=new Date;n.setTime(+n+864E5*k)}return document.cookie=[e.raw?d:encodeURIComponent(d),"=",b(h),g.expires?"; expires="+g.expires.toUTCString():"",g.path?"; path="+g.path:"",g.domain?"; domain="+g.domain:"",g.secure?"; secure":""].join("")}g=d?void 0:{};for(var k=document.cookie?document.cookie.split("; "):[],n=0,q=k.length;n<q;n++){var m=k[n].split("="),p;p=m.shift();p=e.raw?p:decodeURIComponent(p);m=m.join("=");if(d&&
d===p){g=c(m,h);break}d||void 0===(m=c(m))||(g[p]=m)}return g};e.defaults={};a.removeCookie=function(b,c){if(void 0===a.cookie(b))return!1;a.cookie(b,"",a.extend({},c,{expires:-1}));return!a.cookie(b)}});
(function(a){var b={},c={};a.manageAjax=function(){return{create:function(c,e){b[c]=new a.manageAjax._manager(c,e);return b[c]},destroy:function(a){b[a]&&(b[a].clear(!0),delete b[a])}}}();a.manageAjax._manager=function(b,c){this.requests={};this.inProgress=0;this.qName=this.name=b;this.opts=a.extend({},a.ajaxSettings,a.manageAjax.defaults,c);c&&c.queue&&!0!==c.queue&&"string"===typeof c.queue&&"clear"!==c.queue&&(this.qName=c.queue)};a.manageAjax._manager.prototype={add:function(b){b=a.extend({},
this.opts,b);var c=b.complete||a.noop,f=b.success||a.noop,h=b.beforeSend||a.noop,g=b.error||a.noop,k="string"==typeof b.data?b.data:a.param(b.data||{}),n=b.type+b.url+k,q=this,m=this._createAjax(n,b,f,c);if(!this.requests[n]||!b.preventDoubbleRequests)return m.xhrID=n,b.xhrID=n,b.beforeSend=function(a,b){var c=h.call(this,a,b);!1===c&&q._removeXHR(n);return c},b.complete=function(a,f){q._complete.call(q,this,c,a,f,n,b)},b.success=function(a,c,e){q._success.call(q,this,f,a,c,e,b)},b.error=function(a,
c,e){var f="",h="";"timeout"!==c&&a&&(f=a.status,h=a.responseXML||a.responseText);g?g.call(this,a,c,e,b):setTimeout(function(){throw c+"| status: "+f+" | URL: "+b.url+" | data: "+k+" | thrown: "+e+" | response: "+h;},0);a=null},"clear"===b.queue&&a(document).clearQueue(this.qName),b.queue?(a.queue(document,this.qName,m),this.inProgress<b.maxRequests&&a.dequeue(document,this.qName),n):m()},_createAjax:function(b,e,f,h){var g=this;return function(){if(!1!==e.beforeCreate.call(e.context||g,b,e))return g.inProgress++,
1===g.inProgress&&a.event.trigger(g.name+"AjaxStart"),e.cacheResponse&&c[b]?(g.requests[b]={},setTimeout(function(){g._complete.call(g,e.context||e,h,c[b],"success",b,e);g._success.call(g,e.context||e,f,c[b]._successData,"success",c[b],e)},0)):e.async?g.requests[b]=a.ajax(e):a.ajax(e),b}},_removeXHR:function(b){this.opts.queue&&a.dequeue(document,this.qName);this.inProgress--;this.requests[b]=null;delete this.requests[b]},_isAbort:function(a,b){return!(!b.abortIsNoSuccess||a&&0!==a.readyState&&this.lastAbort!==
b.xhrID)},_complete:function(b,c,f,h,g,k){this._isAbort(f,k)&&(h="abort",k.abort.call(b,f,h,k));c.call(b,f,h,k);a.event.trigger(this.name+"AjaxComplete",[f,h,k]);k.domCompleteTrigger&&a(k.domCompleteTrigger).trigger(this.name+"DOMComplete",[f,h,k]).trigger("DOMComplete",[f,h,k]);this._removeXHR(g);this.inProgress||a.event.trigger(this.name+"AjaxStop")},_success:function(b,e,f,h,g,k){var n=this;if(!this._isAbort(g,k)){k.abortOld&&a.each(this.requests,function(a){if(a===k.xhrID)return!1;n.abort(a)});
if(k.cacheResponse&&!c[k.xhrID]&&(c[k.xhrID]={status:g.status,statusText:g.statusText,responseText:g.responseText,responseXML:g.responseXML,_successData:f},g.getAllResponseHeaders)){var q=g.getAllResponseHeaders();a.extend(c[k.xhrID],{getAllResponseHeaders:function(){return q},getResponseHeader:function(){var b={};a.each(q.split("\n"),function(a,c){var d=c.indexOf(":");b[c.substr(0,d)]=c.substr(d+2)});return function(a){return b[a]}}()})}e.call(b,f,h,g,k);a.event.trigger(this.name+"AjaxSuccess",[g,
k,f]);k.domSuccessTrigger&&a(k.domSuccessTrigger).trigger(this.name+"DOMSuccess",[f,k]).trigger("DOMSuccess",[f,k])}g=null},getData:function(b){if(b){var c=this.requests[b];!c&&this.opts.queue&&(c=a.grep(a(document).queue(this.qName),function(a,c){return a.xhrID===b})[0]);return c}return{requests:this.requests,queue:this.opts.queue?a(document).queue(this.qName):[],inProgress:this.inProgress}},abort:function(b){var c;if(b)(c=this.getData(b))&&c.abort?(this.lastAbort=b,c.abort(),this.lastAbort=!1):
a(document).queue(this.qName,a.grep(a(document).queue(this.qName),function(a,b){return a!==c})),c=null;else{var f=this,h=[];a.each(this.requests,function(a){h.push(a)});a.each(h,function(a,b){f.abort(b)})}},clear:function(b){a(document).clearQueue(this.qName);b&&this.abort()}};a.manageAjax._manager.prototype.getXHR=a.manageAjax._manager.prototype.getData;a.manageAjax.defaults={beforeCreate:a.noop,abort:a.noop,abortIsNoSuccess:!0,maxRequests:1,cacheResponse:!1,domCompleteTrigger:!1,domSuccessTrigger:!1,
preventDoubbleRequests:!0,queue:!1};a.each(a.manageAjax._manager.prototype,function(c,e){0!==c.indexOf("_")&&a.isFunction(e)&&(a.manageAjax[c]=function(e,h){if(!b[e])if("add"===c)a.manageAjax.create(e,h);else return;var g=Array.prototype.slice.call(arguments,1);b[e][c].apply(b[e],g)})})})(jQuery);var Attacklab=Attacklab||{};Attacklab.showdown=Attacklab.showdown||{};
Attacklab.showdown.converter=function(){var a,b,c,d=0;this.makeHtml=function(d){if(null!==d)return a=[],b=[],c=[],d=d.replace(/~/g,"~T"),d=d.replace(/\$/g,"~D"),d=d.replace(/\r\n/g,"\n"),d=d.replace(/\r/g,"\n"),d="\n\n"+d+"\n\n",d=N(d),d=d.replace(/^[ \t]+$/mg,""),d=f(d),d=e(d),d=g(d),d=C(d),d=d.replace(/~D/g,"$$"),d=d.replace(/~T/g,"~"),d=d.replace(/https?\:\/\/[^"\s\<\>]*[^.,;'">\:\s\<\>\)\]\!]/g,function(a,b){var c=d.slice(0,b),e=d.slice(b);return c.match(/<[^>]+$/)&&e.match(/^[^>]*>/)?a:"<a href='"+
a+"'>"+a+"</a>"}),d=d.replace(/[a-z0-9_\-+=.]+@[a-z0-9\-]+(\.[a-z0-9-]+)+/ig,function(a){return"<a href='mailto:"+a+"'>"+a+"</a>"})};var e=function(c){return c=c.replace(/^[ ]{0,3}\[(.+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)["(](.+?)[")][ \t]*)?(?:\n+)/gm,function(c,d,e,f,g){d=d.toLowerCase();a[d]=G(e);if(f)return f+g;g&&(b[d]=g.replace(/"/g,"&quot;"));return""})},f=function(a){a=a.replace(/\n/g,"\n\n");a=a.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n<\/\2>[ \t]*(?=\n+))/gm,
h);a=a.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math)\b[^\r]*?.*<\/\2>[ \t]*(?=\n+)\n)/gm,h);a=a.replace(/(\n[ ]{0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,h);a=a.replace(/(\n\n[ ]{0,3}<!(--[^\r]*?--\s*)+>[ \t]*(?=\n{2,}))/g,h);a=a.replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,h);return a=a.replace(/\n\n/g,"\n")},h=function(a,b){var d;d=b.replace(/\n\n/g,"\n");d=d.replace(/^\n/,"");d=d.replace(/\n+$/g,"");return d="\n\n~K"+
(c.push(d)-1)+"K\n\n"},g=function(a){a=p(a);var b=D("<hr />");a=a.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,b);a=a.replace(/^[ ]{0,2}([ ]?-[ ]?){3,}[ \t]*$/gm,b);a=a.replace(/^[ ]{0,2}([ ]?_[ ]?){3,}[ \t]*$/gm,b);a=v(a);a=A(a);a=s(a);a=f(a);a=a.replace(/^\n+/g,"");a=a.replace(/\n+$/g,"");var d=a.split(/\n{2,}/g);a=[];for(var b=d.length,e=0;e<b;e++){var g=d[e];0<=g.search(/~K(\d+)K/g)?a.push(g):0<=g.search(/\S/)&&(g=k(g),g=g.replace(/\n/g,"<br />"),g=g.replace(/^([ \t]*)/g,"<p>"),g+="</p>",a.push(g))}b=
a.length;for(e=0;e<b;e++)for(;0<=a[e].search(/~K(\d+)K/);)d=c[RegExp.$1],d=d.replace(/\$/g,"$$$$"),a[e]=a[e].replace(/~K\d+K/,d);return a=a.join("\n\n")},k=function(a){a=x(a);a=n(a);a=a.replace(/\\(\\)/g,T);a=a.replace(/\\([`*_{}\[\]()>#+-.!])/g,T);a=a.replace(/(!\[(.*?)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,m);a=a.replace(/(!\[(.*?)\]\s?\([ \t]*()<?(\S+?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,m);a=a.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,q);a=a.replace(/(\[((?:\[[^\]]*\]|\[\[[^\]]*\]\]|[^\[\]])*)\]\([ \t]*()<?(.*?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,
q);a=a.replace(/(\[([^\[\]]+)\])()()()()()/g,q);a=K(a);a=G(a);a=a.replace(/(\*\*|__)(?=\S)([^\r]*?\S[\*_]*)\1/g,"<strong>$2</strong>");a=a.replace(/(\w)_(\w)/g,"$1~E95E$2");a=a.replace(/(\*|_)(?=\S)([^\r]*?\S)\1/g,"<em>$2</em>");return a=a.replace(/  +\n/g," <br />\n")},n=function(a){return a=a.replace(/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--.*?--\s*)+>)/gi,function(a){a=a.replace(/(.)<\/?code>(?=.)/g,"$1`");return a=Q(a,"\\`*_")})},q=function(c,d,e,f,g,h,k,m){void 0==m&&(m="");c=f.toLowerCase();
if(""==g)if(""==c&&(c=e.toLowerCase().replace(/ ?\n/g," ")),void 0!=a[c])g=a[c],void 0!=b[c]&&(m=b[c]);else if(-1<d.search(/\(\s*\)$/m))g="";else return d;g=Q(g,"*_");d='<a href="'+g+'"';""!=m&&(m=m.replace(/"/g,"&quot;"),m=Q(m,"*_"),d+=' title="'+m+'"');return d+(">"+e+"</a>")},m=function(c,d,e,f,g,h,k,m){c=e;f=f.toLowerCase();m||(m="");if(""==g)if(""==f&&(f=c.toLowerCase().replace(/ ?\n/g," ")),void 0!=a[f])g=a[f],void 0!=b[f]&&(m=b[f]);else return d;c=c.replace(/"/g,"&quot;");g=Q(g,"*_");d='<img src="'+
g+'" alt="'+c+'"';m=m.replace(/"/g,"&quot;");m=Q(m,"*_");return d=d+(' title="'+m+'"')+" />"},p=function(a){a=a.replace(/^(.+)[ \t]*\n=+[ \t]*\n+/gm,function(a,b){return D("<h1>"+k(b)+"</h1>")});a=a.replace(/^(.+)[ \t]*\n-+[ \t]*\n+/gm,function(a,b){return D("<h2>"+k(b)+"</h2>")});return a=a.replace(/^(\#{1,6})[ \t]*(.+?)[ \t]*\#*\n+/gm,function(a,b,c){a=b.length;return D("<h"+a+">"+k(c)+"</h"+a+">")})},u,v=function(a){a+="~0";var b=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;
d?a=a.replace(b,function(a,b,c){a=b;c=-1<c.search(/[*+-]/g)?"ul":"ol";a=a.replace(/\n{2,}/g,"\n\n\n");a=u(a);a=a.replace(/\s+$/,"");return"<"+c+">"+a+"</"+c+">\n"}):(b=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/g,a=a.replace(b,function(a,b,c,d){a=c;d=-1<d.search(/[*+-]/g)?"ul":"ol";a=a.replace(/\n{2,}/g,"\n\n\n");a=u(a);return b+"<"+d+">\n"+a+"</"+d+">\n"}));return a=a.replace(/~0/,"")};u=function(a){d++;a=a.replace(/\n{2,}$/,"\n");a=(a+"~0").replace(/(\n)?(^[ \t]*)([*+-]|\d+[.])[ \t]+([^\r]+?(\n{1,2}))(?=\n*(~0|\2([*+-]|\d+[.])[ \t]+))/gm,
function(a,b,c,d,e){a=e;b||-1<a.search(/\n{2,}/)?a=g(L(a)):(a=v(L(a)),a=a.replace(/\n$/,""),a=k(a));return"<li>"+a+"</li>\n"});a=a.replace(/~0/g,"");d--;return a};var A=function(a){a=(a+"~0").replace(/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,function(a,b,c){a=B(L(b));a=N(a);a=a.replace(/^\n+/g,"");a=a.replace(/\n+$/g,"");a="<pre><code>"+a+"\n</code></pre>";return D(a)+c});return a=a.replace(/~0/,"")},D=function(a){a=a.replace(/(^\n+|\n+$)/g,"");return"\n\n~K"+(c.push(a)-1)+
"K\n\n"},x=function(a){return a=a.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(a,b,c,d,e){a=d.replace(/^([ \t]*)/g,"");a=a.replace(/[ \t]*$/g,"");a=B(a);return b+"<code>"+a+"</code>"})},B=function(a){a=a.replace(/&/g,"&amp;");a=a.replace(/</g,"&lt;");a=a.replace(/>/g,"&gt;");return a=Q(a,"*_{}[]\\",!1)},s=function(a){return a=a.replace(/((^[ \t]*>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(a,b){var c;c=b.replace(/^[ \t]*>[ \t]?/gm,"~0");c=c.replace(/~0/g,"");c=c.replace(/^[ \t]+$/gm,"");c=g(c);
c=c.replace(/(^|\n)/g,"$1  ");c=c.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(a,b){var c;c=b.replace(/^  /mg,"~0");return c=c.replace(/~0/g,"")});return D("<blockquote>\n"+c+"\n</blockquote>")})},G=function(a){a=a.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;");return a=a.replace(/<(?![a-z\/?\$!])/gi,"&lt;")},K=function(a){a=a.replace(/<((https?|ftp|dict):[^'">\s]+)>/gi,'<a href="$1">$1</a>');return a=a.replace(/<(?:mailto:)?([-.\w]+\@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,function(a,b){return J(C(b))})},
J=function(a){var b=[function(a){return"&#"+a.charCodeAt(0)+";"},function(a){a=a.charCodeAt(0);return"&#x"+("0123456789ABCDEF".charAt(a>>4)+"0123456789ABCDEF".charAt(a&15))+";"},function(a){return a}];a=("mailto:"+a).replace(/./g,function(a){if("@"==a)a=b[Math.floor(2*Math.random())](a);else if(":"!=a){var c=Math.random();a=.9<c?b[2](a):.45<c?b[1](a):b[0](a)}return a});a='<a href="'+a+'">'+a+"</a>";return a=a.replace(/">.+:/g,'">')},C=function(a){return a=a.replace(/~E(\d+)E/g,function(a,b){var c=
parseInt(b);return String.fromCharCode(c)})},L=function(a){a=a.replace(/^(\t|[ ]{1,4})/gm,"~0");return a=a.replace(/~0/g,"")},N=function(a){a=a.replace(/\t(?=\t)/g,"    ");a=a.replace(/\t/g,"~A~B");a=a.replace(/~B(.+?)~A/g,function(a,b,c){a=b;b=4-a.length%4;for(c=0;c<b;c++)a+=" ";return a});a=a.replace(/~A/g,"    ");return a=a.replace(/~B/g,"")},Q=function(a,b,c){b="(["+b.replace(/([\[\]\\])/g,"\\$1")+"])";c&&(b="\\\\"+b);return a=a.replace(new RegExp(b,"g"),T)},T=function(a,b){return"~E"+b.charCodeAt(0)+
"E"}};var Showdown=Attacklab.showdown;Attacklab.fileLoaded&&Attacklab.fileLoaded("showdown.js");
(function(a,b){var c=a.document,d=a.navigator,e=a.setTimeout,f=a.clearTimeout,h=a.setInterval,g=a.clearInterval,k=a.getComputedStyle,n=a.encodeURIComponent,q=a.ActiveXObject,m=a.Error,p=a.Number.parseInt||a.parseInt,u=a.Number.parseFloat||a.parseFloat,v=a.Number.isNaN||a.isNaN,A=a.Date.now,D=a.Object.keys,x=a.Object.defineProperty,B=a.Object.prototype.hasOwnProperty,s=a.Array.prototype.slice,G=function(){var b=function(a){return a};if("function"===typeof a.wrap&&"function"===typeof a.unwrap)try{var d=
c.createElement("div"),e=a.unwrap(d);1===d.nodeType&&e&&1===e.nodeType&&(b=a.unwrap)}catch(f){}return b}(),K=function(a){return s.call(a,0)},J=function(){var a,c,d,e,f,g=K(arguments),h=g[0]||{};a=1;for(c=g.length;a<c;a++)if(null!=(d=g[a]))for(e in d)B.call(d,e)&&(f=d[e],h!==f&&f!==b&&(h[e]=f));return h},C=function(a){var b,c,d;if("object"!==typeof a||null==a||"number"===typeof a.nodeType)b=a;else if("number"===typeof a.length)for(b=[],c=0,d=a.length;c<d;c++)B.call(a,c)&&(b[c]=C(a[c]));else for(c in b=
{},a)B.call(a,c)&&(b[c]=C(a[c]));return b},L=function(a,b){if(a&&1===a.nodeType&&a.ownerDocument&&b&&(1===b.nodeType&&b.ownerDocument&&b.ownerDocument===a.ownerDocument||9===b.nodeType&&!b.ownerDocument&&b===a.ownerDocument)){do{if(a===b)return!0;a=a.parentNode}while(a)}return!1},N=function(a){var b;"string"===typeof a&&a&&(a.split("#")[0].split("?"),b=a.slice(0,a.lastIndexOf("/")+1));return b},Q=function(){var a,d,e;if(c.currentScript&&(a=c.currentScript.src))return a;d=c.getElementsByTagName("script");
if(1===d.length)return d[0].src||b;if("readyState"in d[0])for(e=d.length;e--;)if("interactive"===d[e].readyState&&(a=d[e].src))return a;if("loading"===c.readyState&&(a=d[d.length-1].src))return a;var f;try{throw new m;}catch(g){d=g}if(d&&!(f=d.sourceURL||d.fileName)){f=d.stack;var h;"string"===typeof f&&f&&((d=f.match(/^(?:|[^:@]*@|.+\)@(?=http[s]?|file)|.+?\s+(?: at |@)(?:[^:\(]+ )*[\(]?)((?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/))&&d[1]?h=d[1]:(d=f.match(/\)@((?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/))&&
d[1]&&(h=d[1]));f=h}return(a=f)?a:b},T=null==a.opener&&(!!a.top&&a!=a.top||!!a.parent&&a!=a.parent),E={bridge:null,version:"0.0.0",pluginType:"unknown",disabled:null,outdated:null,sandboxed:null,unavailable:null,degraded:null,deactivated:null,overdue:null,ready:null},X,aa={},r,W,ba={},la=null,w=0,R=0,U={ready:"Flash communication is established",error:{"flash-disabled":"Flash is disabled or not installed. May also be attempting to run Flash in a sandboxed iframe, which is impossible.","flash-outdated":"Flash is too outdated to support ZeroClipboard",
"flash-sandboxed":"Attempting to run Flash in a sandboxed iframe, which is impossible","flash-unavailable":"Flash is unable to communicate bidirectionally with JavaScript","flash-degraded":"Flash is unable to preserve data fidelity when communicating with JavaScript","flash-deactivated":"Flash is too outdated for your browser and/or is configured as click-to-activate.\nThis may also mean that the ZeroClipboard SWF object could not be loaded, so please check your `swfPath` configuration and/or network connectivity.\nMay also be attempting to run Flash in a sandboxed iframe, which is impossible.",
"flash-overdue":"Flash communication was established but NOT within the acceptable time limit","version-mismatch":"ZeroClipboard JS version number does not match ZeroClipboard SWF version number","clipboard-error":"At least one error was thrown while ZeroClipboard was attempting to inject your data into the clipboard","config-mismatch":"ZeroClipboard configuration does not match Flash's reality","swf-not-found":"The ZeroClipboard SWF object could not be loaded, so please check your `swfPath` configuration and/or network connectivity"}},
ua="flash-unavailable flash-degraded flash-overdue version-mismatch config-mismatch clipboard-error".split(" "),wa="flash-disabled flash-outdated flash-sandboxed flash-unavailable flash-degraded flash-deactivated flash-overdue".split(" "),ub=new RegExp("^flash-("+wa.map(function(a){return a.replace(/^flash-/,"")}).join("|")+")$"),pb=new RegExp("^flash-("+wa.slice(1).map(function(a){return a.replace(/^flash-/,"")}).join("|")+")$"),V={swfPath:function(){var a;if(!(a=N(Q()))){var d,e,f=c.getElementsByTagName("script");
for(a=f.length;a--;){if(!(e=f[a].src)){d=null;break}e=N(e);if(null==d)d=e;else if(d!==e){d=null;break}}a=d||b}return(a||"")+"ZeroClipboard.swf"}(),trustedDomains:a.location.host?[a.location.host]:[],cacheBust:!0,forceEnhancedClipboard:!1,flashLoadTimeout:3E4,autoActivate:!0,bubbleEvents:!0,containerId:"global-zeroclipboard-html-bridge",containerClass:"global-zeroclipboard-container",swfObjectId:"global-zeroclipboard-flash-bridge",hoverClass:"zeroclipboard-is-hover",activeClass:"zeroclipboard-is-active",
forceHandCursor:!1,title:null,zIndex:999999999},Da=function(a){if("object"===typeof a&&null!==a)for(var b in a)if(B.call(a,b))if(/^(?:forceHandCursor|title|zIndex|bubbleEvents)$/.test(b))V[b]=a[b];else if(null==E.bridge)if("containerId"===b||"swfObjectId"===b){var c=a[b];if("string"===typeof c&&c&&/^[A-Za-z][A-Za-z0-9_:\-\.]*$/.test(c))V[b]=a[b];else throw Error("The specified `"+b+"` value is not valid as an HTML4 Element ID");}else V[b]=a[b];if("string"===typeof a&&a){if(B.call(V,a))return V[a]}else return C(V)},
qa=function(){Wa();for(var a=["userAgent","platform","appName"],b={},c=0,e=a.length;c<e;c++)a[c]in d&&(b[a[c]]=d[a[c]]);var a=["bridge"],c={},f;for(f in E)-1===a.indexOf(f)&&(c[f]=E[f]);return{browser:b,flash:c,zeroclipboard:{version:O.version,config:O.config()}}},Jb=function(){return!!(E.disabled||E.outdated||E.sandboxed||E.unavailable||E.degraded||E.deactivated)},qb=function(a,c){var d,e,f,g={};if("string"===typeof a&&a)f=a.toLowerCase().split(/\s+/);else if("object"===typeof a&&a&&"undefined"===
typeof c)for(d in a)if(B.call(a,d)&&"string"===typeof d&&d&&"function"===typeof a[d])O.on(d,a[d]);if(f&&f.length){d=0;for(e=f.length;d<e;d++)a=f[d].replace(/^on/,""),g[a]=!0,aa[a]||(aa[a]=[]),aa[a].push(c);g.ready&&E.ready&&O.emit({type:"ready"});if(g.error){d=0;for(e=wa.length;d<e;d++)if(!0===E[wa[d].replace(/^flash-/,"")]){O.emit({type:"error",name:wa[d]});break}X!==b&&O.version!==X&&O.emit({type:"error",name:"version-mismatch",jsVersion:O.version,swfVersion:X})}}return O},hb=function(a,b){var c,
d,e,f,g;if(0===arguments.length)f=D(aa);else if("string"===typeof a&&a)f=a.split(/\s+/);else if("object"===typeof a&&a&&"undefined"===typeof b)for(c in a)B.call(a,c)&&"string"===typeof c&&c&&"function"===typeof a[c]&&O.off(c,a[c]);if(f&&f.length)for(c=0,d=f.length;c<d;c++)if(a=f[c].toLowerCase().replace(/^on/,""),(g=aa[a])&&g.length)if(b)for(e=g.indexOf(b);-1!==e;)g.splice(e,1),e=g.indexOf(b,e);else g.length=0;return O},ha=function(a){return"string"===typeof a&&a?C(aa[a])||null:C(aa)},ea=function(b){var d,
e,f;if(b=kb(b)){d=b;var g=d.target||r||null,h="swf"===d._source;delete d._source;switch(d.type){case "error":!(g="flash-sandboxed"===d.name)&&(g=null,!1===T||d&&"error"===d.type&&d.name&&-1!==ua.indexOf(d.name))&&(g=!1);"boolean"===typeof g&&(E.sandboxed=g);-1!==wa.indexOf(d.name)?J(E,{disabled:"flash-disabled"===d.name,outdated:"flash-outdated"===d.name,unavailable:"flash-unavailable"===d.name,degraded:"flash-degraded"===d.name,deactivated:"flash-deactivated"===d.name,overdue:"flash-overdue"===d.name,
ready:!1}):"version-mismatch"===d.name&&(X=d.swfVersion,J(E,{disabled:!1,outdated:!1,unavailable:!1,degraded:!1,deactivated:!1,overdue:!1,ready:!1}));lb();break;case "ready":X=d.swfVersion;g=!0===E.deactivated;J(E,{disabled:!1,outdated:!1,sandboxed:!1,unavailable:!1,degraded:!1,deactivated:!1,overdue:g,ready:!g});lb();break;case "beforecopy":W=g;break;case "copy":var k,m,g=d.relatedTarget;!ba["text/html"]&&!ba["text/plain"]&&g&&(m=g.value||g.outerHTML||g.innerHTML)&&(k=g.value||g.textContent||g.innerText)?
(d.clipboardData.clearData(),d.clipboardData.setData("text/plain",k),m!==k&&d.clipboardData.setData("text/html",m)):!ba["text/plain"]&&d.target&&(k=d.target.getAttribute("data-clipboard-text"))&&(d.clipboardData.clearData(),d.clipboardData.setData("text/plain",k));break;case "aftercopy":Y(d);O.clearData();if(k=g){var n;try{n=c.activeElement}catch(q){n=null}k=g!==n}k&&g.focus&&g.focus();break;case "_mouseover":O.focus(g);!0===V.bubbleEvents&&h&&(g&&g!==d.relatedTarget&&!L(d.relatedTarget,g)&&fa(J({},
d,{type:"mouseenter",bubbles:!1,cancelable:!1})),fa(J({},d,{type:"mouseover"})));break;case "_mouseout":O.blur();!0===V.bubbleEvents&&h&&(g&&g!==d.relatedTarget&&!L(d.relatedTarget,g)&&fa(J({},d,{type:"mouseleave",bubbles:!1,cancelable:!1})),fa(J({},d,{type:"mouseout"})));break;case "_mousedown":Va(g,V.activeClass);!0===V.bubbleEvents&&h&&fa(J({},d,{type:d.type.slice(1)}));break;case "_mouseup":ca(g,V.activeClass);!0===V.bubbleEvents&&h&&fa(J({},d,{type:d.type.slice(1)}));break;case "_click":W=null;
!0===V.bubbleEvents&&h&&fa(J({},d,{type:d.type.slice(1)}));break;case "_mousemove":!0===V.bubbleEvents&&h&&fa(J({},d,{type:d.type.slice(1)}))}d=/^_(?:click|mouse(?:over|out|down|up|move))$/.test(d.type)?!0:void 0;if(!d){if("ready"===b.type&&!0===E.overdue)return O.emit({type:"error",name:"flash-overdue"});d=J({},b);if("object"===typeof d&&d&&d.type&&(g=Ya(d),(k=(aa["*"]||[]).concat(aa[d.type]||[]))&&k.length)){var p,w;m=0;for(n=k.length;m<n;m++)h=k[m],p=this,"string"===typeof h&&"function"===typeof a[h]&&
(h=a[h]),"object"===typeof h&&h&&"function"===typeof h.handleEvent&&(p=h,h=h.handleEvent),"function"===typeof h&&(w=J({},d),Ta(h,p,[w],g))}if("copy"===b.type){e={};b={};if("object"===typeof ba&&ba){for(f in ba)if(f&&B.call(ba,f)&&"string"===typeof ba[f]&&ba[f])switch(f.toLowerCase()){case "text/plain":case "text":case "air:text":case "flash:text":e.text=ba[f];b.text=f;break;case "text/html":case "html":case "air:html":case "flash:html":e.html=ba[f];b.html=f;break;case "application/rtf":case "text/rtf":case "rtf":case "richtext":case "air:rtf":case "flash:rtf":e.rtf=
ba[f],b.rtf=f}f={data:e,formatMap:b}}else f=void 0;e=f.data;la=f.formatMap}return e}}},Kb=function(){var a=E.sandboxed;Wa();"boolean"!==typeof E.ready&&(E.ready=!1);E.sandboxed!==a&&!0===E.sandboxed?(E.ready=!1,O.emit({type:"error",name:"flash-sandboxed"})):O.isFlashUnusable()||null!==E.bridge||(a=V.flashLoadTimeout,"number"===typeof a&&0<=a&&(w=e(function(){"boolean"!==typeof E.deactivated&&(E.deactivated=!0);!0===E.deactivated&&O.emit({type:"error",name:"flash-deactivated"})},a)),E.overdue=!1,va())},
vb=function(){O.clearData();O.blur();O.emit("destroy");da();O.off()},Bb=function(a,b){var c;if("object"===typeof a&&a&&"undefined"===typeof b)c=a,O.clearData();else if("string"===typeof a&&a)c={},c[a]=b;else return;for(var d in c)"string"===typeof d&&d&&B.call(c,d)&&"string"===typeof c[d]&&c[d]&&(ba[d]=c[d])},wb=function(a){if("undefined"===typeof a){if(ba)for(var b in ba)B.call(ba,b)&&delete ba[b];la=null}else"string"===typeof a&&B.call(ba,a)&&delete ba[a]},Oa=function(a){if("undefined"===typeof a)return C(ba);
if("string"===typeof a&&B.call(ba,a))return ba[a]},ib=function(a){if(a&&1===a.nodeType){r&&(ca(r,V.activeClass),r!==a&&ca(r,V.hoverClass));r=a;Va(a,V.hoverClass);var b=a.getAttribute("title")||V.title;if("string"===typeof b&&b){var c=Ua(E.bridge);c&&c.setAttribute("title",b)}a=!0===V.forceHandCursor||"pointer"===ra(a,"cursor");!0===E.ready&&(E.bridge&&"function"===typeof E.bridge.setHandCursor?E.bridge.setHandCursor(a):E.ready=!1);var d;r&&(d=Ua(E.bridge))&&(a=Pa(r),J(d.style,{width:a.width+"px",
height:a.height+"px",top:a.top+"px",left:a.left+"px",zIndex:""+za(V.zIndex)}))}},rb=function(){var a=Ua(E.bridge);a&&(a.removeAttribute("title"),a.style.left="0px",a.style.top="-9999px",a.style.width="1px",a.style.height="1px");r&&(ca(r,V.hoverClass),ca(r,V.activeClass),r=null)},jb=function(){return r||null},kb=function(d){var e;"string"===typeof d&&d?(e=d,d={}):"object"===typeof d&&d&&"string"===typeof d.type&&d.type&&(e=d.type);if(e){e=e.toLowerCase();!d.target&&(/^(copy|aftercopy|_click)$/.test(e)||
"error"===e&&"clipboard-error"===d.name)&&(d.target=W);J(d,{type:e,target:d.target||r||null,relatedTarget:d.relatedTarget||null,currentTarget:E&&E.bridge||null,timeStamp:d.timeStamp||A()||null});e=U[d.type];"error"===d.type&&d.name&&e&&(e=e[d.name]);e&&(d.message=e);"ready"===d.type&&J(d,{target:null,version:E.version});"error"===d.type&&(ub.test(d.name)&&J(d,{target:null,minimumVersion:"11.0.0"}),pb.test(d.name)&&J(d,{version:E.version}));"copy"===d.type&&(d.clipboardData={setData:O.setData,clearData:O.clearData});
if("aftercopy"===d.type&&(e=la,"object"===typeof d&&d&&"object"===typeof e&&e)){var f={},g;for(g in d)if(B.call(d,g))if("errors"===g){f[g]=d[g]?d[g].slice():[];for(var h=0,k=f[g].length;h<k;h++)f[g][h].format=e[f[g][h].format]}else if("success"!==g&&"data"!==g)f[g]=d[g];else{f[g]={};var h=d[g],m;for(m in h)m&&B.call(h,m)&&B.call(e,m)&&(f[g][e[m]]=h[m])}d=f}d.target&&!d.relatedTarget&&(g=d,m=(m=(m=d.target)&&m.getAttribute&&m.getAttribute("data-clipboard-target"))?c.getElementById(m):null,g.relatedTarget=
m);if((g=d)&&/^_(?:click|mouse(?:over|out|down|up|move))$/.test(g.type)){m=g.target;d="_mouseover"===g.type&&g.relatedTarget?g.relatedTarget:b;e="_mouseout"===g.type&&g.relatedTarget?g.relatedTarget:b;var h=Pa(m),f=h.left+("number"===typeof g._stageX?g._stageX:0),h=h.top+("number"===typeof g._stageY?g._stageY:0),k=f-(c.body.scrollLeft+c.documentElement.scrollLeft),n=h-(c.body.scrollTop+c.documentElement.scrollTop),q=(a.screenLeft||a.screenX||0)+k,p=(a.screenTop||a.screenY||0)+n,w="number"===typeof g.movementX?
g.movementX:0,x="number"===typeof g.movementY?g.movementY:0;delete g._stageX;delete g._stageY;J(g,{srcElement:m,fromElement:d,toElement:e,screenX:q,screenY:p,pageX:f,pageY:h,clientX:k,clientY:n,x:k,y:n,movementX:w,movementY:x,offsetX:0,offsetY:0,layerX:0,layerY:0})}return g}},Ya=function(a){return!/^(?:(?:before)?copy|destroy)$/.test(a&&"string"===typeof a.type&&a.type||"")},Ta=function(a,b,c,d){d?e(function(){a.apply(b,c)},0):a.apply(b,c)},Y=function(a){if(a.errors&&0<a.errors.length){var b=C(a);
J(b,{type:"error",name:"clipboard-error"});delete b.success;e(function(){O.emit(b)},0)}},fa=function(b){if(b&&"string"===typeof b.type&&b){var d,e=b.target||null;d=e&&e.ownerDocument||c;b=J({view:d.defaultView||a,canBubble:!0,cancelable:!0,detail:"click"===b.type?1:0,button:"number"===typeof b.which?b.which-1:"number"===typeof b.button?b.button:d.createEvent?0:1},b);e&&d.createEvent&&e.dispatchEvent&&(b=[b.type,b.canBubble,b.cancelable,b.view,b.detail,b.screenX,b.screenY,b.clientX,b.clientY,b.ctrlKey,
b.altKey,b.shiftKey,b.metaKey,b.button,b.relatedTarget],d=d.createEvent("MouseEvents"),d.initMouseEvent&&(d.initMouseEvent.apply(d,b),d._source="js",e.dispatchEvent(d)))}},z=function(){var a=V.flashLoadTimeout;if("number"===typeof a&&0<=a){var a=Math.min(1E3,a/10),b=V.swfObjectId+"_fallbackContent";R=h(function(){var a;var d=c.getElementById(b);if(d){a=k(d,null);var e=0<u(a.height),f=0<u(a.width),g=0<=u(a.top),h=0<=u(a.left),m=e&&f&&g&&h,d=m?null:Pa(d);a="none"!==a.display&&"collapse"!==a.visibility&&
(m||!!d&&(e||0<d.height)&&(f||0<d.width)&&(g||0<=d.top)&&(h||0<=d.left))}else a=!1;a&&(lb(),E.deactivated=null,O.emit({type:"error",name:"swf-not-found"}))},a)}},Ua=function(a){for(a=a&&a.parentNode;a&&"OBJECT"===a.nodeName&&a.parentNode;)a=a.parentNode;return a||null},va=function(){var b,d=E.bridge,e=Ua(d);if(!d){var d=ec(a.location.host,V),f="never"===d?"none":"all",g,e=J({jsVersion:O.version},V),h,k,m,q="",p=[];e.trustedDomains&&("string"===typeof e.trustedDomains?g=[e.trustedDomains]:"object"===
typeof e.trustedDomains&&"length"in e.trustedDomains&&(g=e.trustedDomains));if(g&&g.length)for(h=0,k=g.length;h<k;h++)if(B.call(g,h)&&g[h]&&"string"===typeof g[h]&&(m=xa(g[h]))){if("*"===m){p.length=0;p.push(m);break}p.push.apply(p,[m,"//"+m,a.location.protocol+"//"+m])}p.length&&(q+="trustedOrigins="+n(p.join(",")));!0===e.forceEnhancedClipboard&&(q+=(q?"&":"")+"forceEnhancedClipboard=true");"string"===typeof e.swfObjectId&&e.swfObjectId&&(q+=(q?"&":"")+"swfObjectId="+n(e.swfObjectId));"string"===
typeof e.jsVersion&&e.jsVersion&&(q+=(q?"&":"")+"jsVersion="+n(e.jsVersion));g=q;e=V.swfPath;h=null==V||V&&!0===V.cacheBust?(-1===V.swfPath.indexOf("?")?"?":"&")+"noCache="+A():"";h=e+h;e=c.createElement("div");e.id=V.containerId;e.className=V.containerClass;e.style.position="absolute";e.style.left="0px";e.style.top="-9999px";e.style.width="1px";e.style.height="1px";e.style.zIndex=""+za(V.zIndex);k=c.createElement("div");e.appendChild(k);c.body.appendChild(e);m=c.createElement("div");q="activex"===
E.pluginType;m.innerHTML='<object id="'+V.swfObjectId+'" name="'+V.swfObjectId+'" width="100%" height="100%" '+(q?'classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"':'type="application/x-shockwave-flash" data="'+h+'"')+">"+(q?'<param name="movie" value="'+h+'"/>':"")+'<param name="allowScriptAccess" value="'+d+'"/><param name="allowNetworking" value="'+f+'"/><param name="menu" value="false"/><param name="wmode" value="transparent"/><param name="flashvars" value="'+g+'"/><div id="'+V.swfObjectId+
'_fallbackContent">&nbsp;</div></object>';d=m.firstChild;G(d).ZeroClipboard=O;e.replaceChild(d,k);z()}d||((d=c[V.swfObjectId])&&(b=d.length)&&(d=d[b-1]),!d&&e&&(d=e.firstChild));E.bridge=d||null;return d},da=function(){var a=E.bridge;if(a){var c=Ua(a);c&&("activex"===E.pluginType&&"readyState"in a?(a.style.display="none",function eb(){if(4===a.readyState){for(var b in a)"function"===typeof a[b]&&(a[b]=null);a.parentNode&&a.parentNode.removeChild(a);c.parentNode&&c.parentNode.removeChild(c)}else e(eb,
10)}()):(a.parentNode&&a.parentNode.removeChild(a),c.parentNode&&c.parentNode.removeChild(c)));lb();E.ready=null;E.bridge=null;E.deactivated=null;X=b}},xa=function(a){if(null==a||""===a)return null;a=a.replace(/^\s+|\s+$/g,"");if(""===a)return null;var b=a.indexOf("//");a=-1===b?a:a.slice(b+2);var c=a.indexOf("/");return(a=-1===c?a:-1===b||0===c?null:a.slice(0,c))&&".swf"===a.slice(-4).toLowerCase()?null:a||null},ec=function(){return function(a,b){var c=xa(b.swfPath);null===c&&(c=a);var d=b.trustedDomains,
e,f,g,h=[];"string"===typeof d&&(d=[d]);if("object"===typeof d&&d&&"number"===typeof d.length)for(e=0,f=d.length;e<f;e++)if(B.call(d,e)&&(g=xa(d[e]))){if("*"===g){h.length=0;h.push("*");break}-1===h.indexOf(g)&&h.push(g)}d=h.length;if(0<d){if(1===d&&"*"===h[0])return"always";if(-1!==h.indexOf(a))return 1===d&&a===c?"sameDomain":"always"}return"never"}}(),Va=function(a,b){var c,d,e,f=[];"string"===typeof b&&b&&(f=b.split(/\s+/));if(a&&1===a.nodeType&&0<f.length)if(a.classList)for(c=0,d=f.length;c<
d;c++)a.classList.add(f[c]);else if(a.hasOwnProperty("className")){e=" "+a.className+" ";c=0;for(d=f.length;c<d;c++)-1===e.indexOf(" "+f[c]+" ")&&(e+=f[c]+" ");a.className=e.replace(/^\s+|\s+$/g,"")}return a},ca=function(a,b){var c,d,e,f=[];"string"===typeof b&&b&&(f=b.split(/\s+/));if(a&&1===a.nodeType&&0<f.length)if(a.classList&&0<a.classList.length)for(c=0,d=f.length;c<d;c++)a.classList.remove(f[c]);else if(a.className){e=(" "+a.className+" ").replace(/[\r\n\t]/g," ");c=0;for(d=f.length;c<d;c++)e=
e.replace(" "+f[c]+" "," ");a.className=e.replace(/^\s+|\s+$/g,"")}return a},ra=function(a,b){var c=k(a,null).getPropertyValue(b);return"cursor"!==b||c&&"auto"!==c||"A"!==a.nodeName?c:"pointer"},Pa=function(b){var d={left:0,top:0,width:0,height:0};if(b.getBoundingClientRect){b=b.getBoundingClientRect();var e=a.pageXOffset,f=a.pageYOffset,g=c.documentElement.clientLeft||0,h=c.documentElement.clientTop||0,k=0,m=0;if("relative"===ra(c.body,"position"))var m=c.body.getBoundingClientRect(),n=c.documentElement.getBoundingClientRect(),
k=m.left-n.left||0,m=m.top-n.top||0;d.left=b.left+e-g-k;d.top=b.top+f-h-m;d.width="width"in b?b.width:b.right-b.left;d.height="height"in b?b.height:b.bottom-b.top}return d},lb=function(){f(w);w=0;g(R);R=0},za=function(a){if(/^(?:auto|inherit)$/.test(a))return a;var b;"number"!==typeof a||v(a)?"string"===typeof a&&(b=za(p(a,10))):b=a;return"number"===typeof b?b:"auto"},Wa=function(b){var c,d,e,f=E.sandboxed,g=null;b=!0===b;if(!1===T)g=!1;else{try{d=a.frameElement||null}catch(h){e={name:h.name,message:h.message}}if(d&&
1===d.nodeType&&"IFRAME"===d.nodeName)try{g=d.hasAttribute("sandbox")}catch(k){g=null}else{try{c=document.domain||null}catch(m){c=null}if(null===c||e&&"SecurityError"===e.name&&/(^|[\s\(\[@])sandbox(es|ed|ing|[\s\.,!\)\]@]|$)/.test(e.message.toLowerCase()))g=!0}}E.sandboxed=g;f===g||b||Aa(q);return g},Aa=function(a){function b(a){a=a.match(/[\d]+/g);a.length=3;return a.join(".")}function c(a){a&&(f=!0,a.version&&(k=b(a.version)),!k&&a.description&&(k=b(a.description)),a.filename&&(a=a.filename,h=
!!a&&(a=a.toLowerCase())&&(/^(pepflashplayer\.dll|libpepflashplayer\.so|pepperflashplayer\.plugin)$/.test(a)||"chrome.plugin"===a.slice(-13))))}var e,f=!1,g=!1,h=!1,k="";if(d.plugins&&d.plugins.length)a=d.plugins["Shockwave Flash"],c(a),d.plugins["Shockwave Flash 2.0"]&&(f=!0,k="2.0.0.11");else if(d.mimeTypes&&d.mimeTypes.length)a=(a=d.mimeTypes["application/x-shockwave-flash"])&&a.enabledPlugin,c(a);else if("undefined"!==typeof a){g=!0;try{e=new a("ShockwaveFlash.ShockwaveFlash.7"),f=!0,k=b(e.GetVariable("$version"))}catch(m){try{e=
new a("ShockwaveFlash.ShockwaveFlash.6"),f=!0,k="6.0.21"}catch(n){try{e=new a("ShockwaveFlash.ShockwaveFlash"),f=!0,k=b(e.GetVariable("$version"))}catch(q){g=!1}}}}E.disabled=!0!==f;E.outdated=k&&u(k)<u("11.0.0");E.version=k||"0.0.0";E.pluginType=h?"pepper":g?"activex":f?"netscape":"unknown"};Aa(q);Wa(!0);var O=function(){if(!(this instanceof O))return new O;"function"===typeof O._createClient&&O._createClient.apply(this,K(arguments))};x(O,"version",{value:"2.2.0",writable:!1,configurable:!0,enumerable:!0});
O.config=function(){return Da.apply(this,K(arguments))};O.state=function(){return qa.apply(this,K(arguments))};O.isFlashUnusable=function(){return Jb.apply(this,K(arguments))};O.on=function(){return qb.apply(this,K(arguments))};O.off=function(){return hb.apply(this,K(arguments))};O.handlers=function(){return ha.apply(this,K(arguments))};O.emit=function(){return ea.apply(this,K(arguments))};O.create=function(){return Kb.apply(this,K(arguments))};O.destroy=function(){return vb.apply(this,K(arguments))};
O.setData=function(){return Bb.apply(this,K(arguments))};O.clearData=function(){return wb.apply(this,K(arguments))};O.getData=function(){return Oa.apply(this,K(arguments))};O.focus=O.activate=function(){return ib.apply(this,K(arguments))};O.blur=O.deactivate=function(){return rb.apply(this,K(arguments))};O.activeElement=function(){return jb.apply(this,K(arguments))};var mb=0,ma={},nb=0,Ba={},Ja={};J(V,{autoActivate:!0});var lc=function(a){var b=this;b.id=""+mb++;ma[b.id]={instance:b,elements:[],handlers:{}};
a&&b.clip(a);O.on("*",function(a){return b.emit(a)});O.on("destroy",function(){b.destroy()});O.create()},Qa=function(a,c){var d,e,f,g={},h=(e=ma[this.id])&&e.handlers;if(!e)throw Error("Attempted to add new listener(s) to a destroyed ZeroClipboard client instance");if("string"===typeof a&&a)f=a.toLowerCase().split(/\s+/);else if("object"===typeof a&&a&&"undefined"===typeof c)for(d in a)if(B.call(a,d)&&"string"===typeof d&&d&&"function"===typeof a[d])this.on(d,a[d]);if(f&&f.length){d=0;for(e=f.length;d<
e;d++)a=f[d].replace(/^on/,""),g[a]=!0,h[a]||(h[a]=[]),h[a].push(c);g.ready&&E.ready&&this.emit({type:"ready",client:this});if(g.error){d=0;for(e=wa.length;d<e;d++)if(E[wa[d].replace(/^flash-/,"")]){this.emit({type:"error",name:wa[d],client:this});break}X!==b&&O.version!==X&&this.emit({type:"error",name:"version-mismatch",jsVersion:O.version,swfVersion:X})}}return this},db=function(a,b){var c,d,e,f,g,h=(d=ma[this.id])&&d.handlers;if(!h)return this;if(0===arguments.length)f=D(h);else if("string"===
typeof a&&a)f=a.split(/\s+/);else if("object"===typeof a&&a&&"undefined"===typeof b)for(c in a)B.call(a,c)&&"string"===typeof c&&c&&"function"===typeof a[c]&&this.off(c,a[c]);if(f&&f.length)for(c=0,d=f.length;c<d;c++)if(a=f[c].toLowerCase().replace(/^on/,""),(g=h[a])&&g.length)if(b)for(e=g.indexOf(b);-1!==e;)g.splice(e,1),e=g.indexOf(b,e);else g.length=0;return this},Ma=function(a){var b=null,c=ma[this.id]&&ma[this.id].handlers;c&&(b="string"===typeof a&&a?c[a]?c[a].slice(0):[]:C(c));return b},Hb=
function(b){var c;var d=b;if(!d||!d.type||d.client&&d.client!==this)c=!1;else{var e=(c=ma[this.id])&&c.elements,f=!!e&&0<e.length,g=!d.target||f&&-1!==e.indexOf(d.target),e=d.relatedTarget&&f&&-1!==e.indexOf(d.relatedTarget),d=d.client&&d.client===this;c=c&&(g||e||d)?!0:!1}if(c&&("object"===typeof b&&b&&"string"===typeof b.type&&b.type&&(b=J({},b)),b=J({},kb(b),{client:this}),g=ma[this.id],"object"===typeof b&&b&&b.type&&g&&(c=Ya(b),(g=(g&&g.handlers["*"]||[]).concat(g&&g.handlers[b.type]||[]))&&
g.length)))for(var h,k,d=0,e=g.length;d<e;d++)f=g[d],h=this,"string"===typeof f&&"function"===typeof a[f]&&(f=a[f]),"object"===typeof f&&f&&"function"===typeof f.handleEvent&&(h=f,f=f.handleEvent),"function"===typeof f&&(k=J({},b),Ta(f,h,[k],c));return this},fc=function(a){if(!ma[this.id])throw Error("Attempted to clip element(s) to a destroyed ZeroClipboard client instance");a=mc(a);for(var b=0;b<a.length;b++)if(B.call(a,b)&&a[b]&&1===a[b].nodeType){a[b].zcClippingId?-1===Ba[a[b].zcClippingId].indexOf(this.id)&&
Ba[a[b].zcClippingId].push(this.id):(a[b].zcClippingId="zcClippingId_"+nb++,Ba[a[b].zcClippingId]=[this.id],!0===V.autoActivate&&oa(a[b]));var c=ma[this.id]&&ma[this.id].elements;-1===c.indexOf(a[b])&&c.push(a[b])}return this},Nc=function(a){var b=ma[this.id];if(!b)return this;var b=b.elements,c;a="undefined"===typeof a?b.slice(0):mc(a);for(var d=a.length;d--;)if(B.call(a,d)&&a[d]&&1===a[d].nodeType){for(c=0;-1!==(c=b.indexOf(a[d],c));)b.splice(c,1);var e=Ba[a[d].zcClippingId];if(e){for(c=0;-1!==
(c=e.indexOf(this.id,c));)e.splice(c,1);if(0===e.length){if(!0===V.autoActivate&&(c=a[d])&&1===c.nodeType&&(e=Ja[c.zcClippingId],"object"===typeof e&&e)){for(var f=void 0,g=void 0,h=["move","leave","enter","out","over"],k=0,m=h.length;k<m;k++)f="mouse"+h[k],g=e[f],"function"===typeof g&&c.removeEventListener(f,g,!1);delete Ja[c.zcClippingId]}delete a[d].zcClippingId}}}return this},xb=function(){var a=ma[this.id];return a&&a.elements?a.elements.slice(0):[]},Fa=function(){ma[this.id]&&(this.unclip(),
this.off(),delete ma[this.id])},mc=function(a){"string"===typeof a&&(a=[]);return"number"!==typeof a.length?[a]:a},oa=function(b){if(b&&1===b.nodeType){var c=function(b){if(b||(b=a.event))"js"!==b._source&&(b.stopImmediatePropagation(),b.preventDefault()),delete b._source},d=function(d){if(d||(d=a.event))c(d),O.focus(b)};b.addEventListener("mouseover",d,!1);b.addEventListener("mouseout",c,!1);b.addEventListener("mouseenter",c,!1);b.addEventListener("mouseleave",c,!1);b.addEventListener("mousemove",
c,!1);Ja[b.zcClippingId]={mouseover:d,mouseout:c,mouseenter:c,mouseleave:c,mousemove:c}}};O._createClient=function(){lc.apply(this,K(arguments))};O.prototype.on=function(){return Qa.apply(this,K(arguments))};O.prototype.off=function(){return db.apply(this,K(arguments))};O.prototype.handlers=function(){return Ma.apply(this,K(arguments))};O.prototype.emit=function(){return Hb.apply(this,K(arguments))};O.prototype.clip=function(){return fc.apply(this,K(arguments))};O.prototype.unclip=function(){return Nc.apply(this,
K(arguments))};O.prototype.elements=function(){return xb.apply(this,K(arguments))};O.prototype.destroy=function(){return Fa.apply(this,K(arguments))};O.prototype.setText=function(a){if(!ma[this.id])throw Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");O.setData("text/plain",a);return this};O.prototype.setHtml=function(a){if(!ma[this.id])throw Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");O.setData("text/html",
a);return this};O.prototype.setRichText=function(a){if(!ma[this.id])throw Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");O.setData("application/rtf",a);return this};O.prototype.setData=function(){if(!ma[this.id])throw Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");O.setData.apply(this,K(arguments));return this};O.prototype.clearData=function(){if(!ma[this.id])throw Error("Attempted to clear pending clipboard data from a destroyed ZeroClipboard client instance");
O.clearData.apply(this,K(arguments));return this};O.prototype.getData=function(){if(!ma[this.id])throw Error("Attempted to get pending clipboard data from a destroyed ZeroClipboard client instance");return O.getData.apply(this,K(arguments))};"function"===typeof define&&define.amd?define(function(){return O}):"object"===typeof module&&module&&"object"===typeof module.exports&&module.exports?module.exports=O:a.ZeroClipboard=O})(function(){return this||window}());var Hogan={};
(function(a,b){function c(a){return""+(null===a||void 0===a?"":a)}a.Template=function(a,c,d,e){this.r=a||this.r;this.c=d;this.options=e;this.text=c||"";this.buf=b?[]:""};a.Template.prototype={r:function(){return""},v:function(a){a=c(a);return k.test(a)?a.replace(d,"&amp;").replace(e,"&lt;").replace(f,"&gt;").replace(h,"&#39;").replace(g,"&quot;"):a},t:c,render:function(a,b,c){return this.ri([a],b||{},c)},ri:function(a,b,c){return this.r(a,b,c)},rp:function(a,b,c,d){a=c[a];if(!a)return"";this.c&&"string"==
typeof a&&(a=this.c.compile(a,this.options));return a.ri(b,c,d)},rs:function(a,b,c){var d=a[a.length-1];if(n(d))for(var e=0;e<d.length;e++)a.push(d[e]),c(a,b,this),a.pop();else c(a,b,this)},s:function(a,b,c,d,e,f,g){if(n(a)&&0===a.length)return!1;"function"==typeof a&&(a=this.ls(a,b,c,d,e,f,g));c=""===a||!!a;!d&&c&&b&&b.push("object"==typeof a?a:b[b.length-1]);return c},d:function(a,b,c,d){var e=a.split("."),f=this.f(e[0],b,c,d),g=null;if("."===a&&n(b[b.length-2]))return b[b.length-1];for(a=1;a<e.length;a++)f&&
"object"==typeof f&&e[a]in f?(g=f,f=f[e[a]]):f="";if(d&&!f)return!1;!d&&"function"==typeof f&&(b.push(g),f=this.lv(f,b,c),b.pop());return f},f:function(a,b,c,d){for(var e=!1,f=null,g=!1,h=b.length-1;0<=h;h--)if((f=b[h])&&"object"==typeof f&&a in f){e=f[a];g=!0;break}if(!g)return d?!1:"";!d&&"function"==typeof e&&(e=this.lv(e,b,c));return e},ho:function(a,b,c,d,e){var f=this.c,g=this.options;g.delimiters=e;d=a.call(b,d);d=null==d?""+d:d.toString();this.b(f.compile(d,g).render(b,c));return!1},b:b?function(a){this.buf.push(a)}:
function(a){this.buf+=a},fl:b?function(){var a=this.buf.join("");this.buf=[];return a}:function(){var a=this.buf;this.buf="";return a},ls:function(a,b,c,d,e,f,g){b=b[b.length-1];var h=null;if(!d&&this.c&&0<a.length)return this.ho(a,b,c,this.text.substring(e,f),g);h=a.call(b);if("function"==typeof h){if(d)return!0;if(this.c)return this.ho(h,b,c,this.text.substring(e,f),g)}return h},lv:function(a,b,d){b=b[b.length-1];a=a.call(b);return"function"==typeof a&&(a=c(a.call(b)),this.c&&~a.indexOf("{{"))?
this.c.compile(a,this.options).render(b,d):c(a)}};var d=/&/g,e=/</g,f=/>/g,h=/\'/g,g=/\"/g,k=/[&<>\"\']/,n=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)}})("undefined"!==typeof exports?exports:Hogan);
(function(a){function b(a){"}"===a.n.substr(a.n.length-1)&&(a.n=a.n.substring(0,a.n.length-1))}function c(a){return a.trim?a.trim():a.replace(/^\s*|\s*$/g,"")}function d(a,b,c){if(b.charAt(c)!=a.charAt(0))return!1;for(var d=1,e=a.length;d<e;d++)if(b.charAt(c+d)!=a.charAt(d))return!1;return!0}function e(a,b,c,d){b=[];for(var f=null,g=null;0<a.length;){g=a.shift();if(!(f="#"==g.tag)&&!(f="^"==g.tag))a:{for(var f=g,h=d,k=0,m=h.length;k<m;k++)if(h[k].o==f.n){f.tag="#";f=!0;break a}f=void 0}if(f)c.push(g),
g.nodes=e(a,g.tag,c,d);else if("/"==g.tag){if(0===c.length)throw Error("Closing tag without opener: /"+g.n);f=c.pop();if(a=g.n!=f.n){a:{a=0;for(c=d.length;a<c;a++)if(d[a].c==g.n&&d[a].o==f.n){d=!0;break a}d=void 0}a=!d}if(a)throw Error("Nesting error: "+f.n+" vs. "+g.n);f.end=g.i;return b}b.push(g)}if(0<c.length)throw Error("missing closing tag: "+c.pop().n);return b}function f(a){return a.replace(p,"\\\\").replace(n,'\\"').replace(q,"\\n").replace(m,"\\r")}function h(a){return~a.indexOf(".")?"d":
"f"}function g(a){for(var b="",c=0,d=a.length;c<d;c++){var e=a[c].tag;if("#"==e)var e=a[c].nodes,k=h(a[c].n),m=a[c].i,n=a[c].end,q=a[c].otag+" "+a[c].ctag,e="if(_.s(_."+k+'("'+f(a[c].n)+'",c,p,1),c,p,0,'+m+","+n+',"'+q+'")){_.rs(c,p,function(c,p,_){'+g(e)+"});c.pop();}",b=b+e;else"^"==e?(e=a[c].nodes,e="if(!_.s(_."+h(a[c].n)+'("'+f(a[c].n)+'",c,p,1),c,p,1,0,0,"")){'+g(e)+"};",b+=e):"<"==e||">"==e?b+='_.b(_.rp("'+f(a[c].n)+'",c,p,"'+(a[c].indent||"")+'"));':"{"==e||"&"==e?(e="_.b(_.t(_."+h(a[c].n)+
'("'+f(a[c].n)+'",c,p,0)));',b+=e):"\n"==e?b+='_.b("\\n"'+(a.length-1==c?"":" + i")+");":"_v"==e?(e="_.b(_.v(_."+h(a[c].n)+'("'+f(a[c].n)+'",c,p,0)));',b+=e):void 0===e&&(e='"'+f(a[c])+'"',b+="_.b("+e+");")}return b}var k=/\S/,n=/\"/g,q=/\n/g,m=/\r/g,p=/\\/g,u={"#":1,"^":2,"/":3,"!":4,">":5,"<":6,"=":7,_v:8,"{":9,"&":10};a.scan=function(a,e){function f(){0<C.length&&(L.push(new String(C)),C="")}function g(a,b){f();var c;if(c=a)a:{c=!0;for(var d=T;d<L.length;d++)if(c=L[d].tag&&u[L[d].tag]<u._v||!L[d].tag&&
null===L[d].match(k),!c){c=!1;break a}}if(c){c=T;for(var e;c<L.length;c++)L[c].tag||((e=L[c+1])&&">"==e.tag&&(e.indent=L[c].toString()),L.splice(c,1))}else b||L.push({tag:"\n"});N=!1;T=L.length}function h(a,b){var d="="+X,e=a.indexOf(d,b),f=c(a.substring(a.indexOf("=",b)+1,e)).split(" ");E=f[0];X=f[1];return e+d.length-1}var m=a.length,n=0,q=null,p=null,C="",L=[],N=!1,Q=0,T=0,E="{{",X="}}";e&&(e=e.split(" "),E=e[0],X=e[1]);for(Q=0;Q<m;Q++)0==n?d(E,a,Q)?(--Q,f(),n=1):"\n"==a.charAt(Q)?g(N):C+=a.charAt(Q):
1==n?(Q+=E.length-1,q=(p=u[a.charAt(Q+1)])?a.charAt(Q+1):"_v","="==q?(Q=h(a,Q),n=0):(p&&Q++,n=2),N=Q):d(X,a,Q)?(L.push({tag:q,n:c(C),otag:E,ctag:X,i:"/"==q?N-X.length:Q+E.length}),C="",Q+=X.length-1,n=0,"{"==q&&("}}"==X?Q++:b(L[L.length-1]))):C+=a.charAt(Q);g(N,!0);return L};a.generate=function(b,c,d){b='var _=this;_.b(i=i||"");'+g(b)+"return _.fl();";return d.asString?"function(c,p,i){"+b+";}":new a.Template(new Function("c","p","i",b),c,a,d)};a.parse=function(a,b,c){c=c||{};return e(a,"",[],c.sectionTags||
[])};a.cache={};a.compile=function(a,b){b=b||{};var c=a+"||"+!!b.asString,d=this.cache[c];if(d)return d;d=this.generate(this.parse(this.scan(a,b.delimiters),a,b),a,b);return this.cache[c]=d}})("undefined"!==typeof exports?exports:Hogan);
(function(a){var b={key:null,endpoint:"oembed",secure:null,query:{},method:"replace",addImageStyles:!0,wrapElement:"div",className:"embed",batch:20,urlRe:null},c=/(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/,d=function(a){return null===a||void 0===a},e=function(b,c){var d=[],e=[];a.each(b,function(a,b){e.push(b);e.length===c&&(d.push(e),e=[])});0!==e.length&&d.push(e);return d},f=function(b){return d(b)?[]:a.isArray(b)?b:[b]},h=function(b){return a.map(b[0],function(c,
d){return[a.map(b,function(a){return a[d]})]})},g=function(a,b,c){this.init(a,b,c)};g.prototype={init:function(b){this.urls=b;this.count=0;this.results={};this._deferred=a.Deferred()},notify:function(b){this.results[b.original_url]=b;this.count++;this._deferred.notify.apply(this._deferred,[b]);if(this.count===this.urls.length){var c=this;b=a.map(this.urls,function(a){return c.results[a]});this._deferred.resolve(b)}return this},state:function(){return this._deferred.state.apply(this._deferred,arguments)}};
window.Keeper=g;var k=function(){};k.prototype={defaults:{},log:function(a,b){d(window.console)||d(window.console[a])||window.console[a].apply(window.console,[b])},build:function(b,c,e){e=d(e)?{}:e;var f=e.secure;d(f)&&(f="https:"===window.location.protocol?!0:!1);b=(f?"https":"http")+"://api.embed.ly/"+("objectify"===b?"2/":"1/")+b;f=d(e.query)?{}:e.query;f.key=e.key;b+="?"+a.param(f);return b+="&urls="+a.map(c,encodeURIComponent).join(",")},ajax:function(k,n,q){q=a.extend({},b,a.embedly.defaults,
"object"===typeof q&&q);if(d(q.key))return this.log("error","Embedly jQuery requires an API Key. Please sign up for one at http://embed.ly"),null;n=f(n);var v=new g(n),A=[],D=[],x;a.each(n,function(a,b){x=!1;c.test(b)&&(x=!0,null!==q.urlRe&&q.urlRe.test&&!q.urlRe.test(b)&&(x=!1));!0===x?A.push(b):D.push({url:b,original_url:b,error:!0,invalid:!0,type:"error",error_message:'Invalid URL "'+b+'"'})});n=e(A,q.batch);var B=this;a.each(n,function(b,c){a.ajax({url:B.build(k,c,q),dataType:"jsonp",success:function(b){a.each(h([c,
b]),function(a,b){var c=b[1];c.original_url=b[0];c.invalid=!1;v.notify(c)})}})});D.length&&setTimeout(function(){a.each(D,function(a,b){v.notify(b)})},1);return v._deferred},oembed:function(a,b){return this.ajax("oembed",a,b)},preview:function(a,b){return this.ajax("preview",a,b)},objectify:function(a,b){return this.ajax("objectify",a,b)},extract:function(a,b){return this.ajax("extract",a,b)}};var n=function(){};n.prototype={build:function(b,c,e){e=a.extend({},a.embedly.defaults,"object"===typeof e&&
e);var f=e.secure;d(f)&&(f="https:"===window.location.protocol?!0:!1);b=(f?"https":"http")+"://i.embed.ly/"+("display"===b?"1/":"1/display/")+b;f=d(e.query)?{}:e.query;f.key=e.key;b+="?"+a.param(f);return b+="&url="+encodeURIComponent(c)},display:function(a,b){return this.build("display",a,b)},resize:function(a,b){return this.build("resize",a,b)},fill:function(a,b){return this.build("fill",a,b)},crop:function(a,b){return this.build("crop",a,b)}};var q=function(a,b,c){this.init(a,b,c)};q.prototype=
{init:function(b,c,d){this.elem=b;this.$elem=a(b);this.original_url=c;this.options=d;this.loaded=a.Deferred();var e=this;this.loaded.done(function(){e.$elem.trigger("loaded",[e])});this.$elem.trigger("initialized",[this])},progress:function(b){a.extend(this,b);this.options.display?this.options.display.apply(this.elem,[this,this.elem]):"oembed"===this.options.endpoint&&this.display();this.loaded.resolve(this)},imageStyle:function(){var a=[],b;this.options.addImageStyles&&(this.options.query.maxwidth&&
(b=isNaN(parseInt(this.options.query.maxwidth,10))?"":"px",a.push("max-width: "+this.options.query.maxwidth+b)),this.options.query.maxheight&&(b=isNaN(parseInt(this.options.query.maxheight,10))?"":"px",a.push("max-height: "+this.options.query.maxheight+b)));return a.join(";")},display:function(){if("error"===this.type)return!1;this.style=this.imageStyle();var a;"photo"===this.type?(a="<a href='"+this.original_url+"' target='_blank'>",a+="<img style='"+this.style+"' src='"+this.url+"' alt='"+this.title+
"' /></a>"):"video"===this.type||"rich"===this.type?a=this.html:(this.title=this.title||this.url,a=this.thumbnail_url?"<img src='"+this.thumbnail_url+"' class='thumb' style='"+this.style+"'/>":"",a+="<a href='"+this.original_url+"'>"+this.title+"</a>",a+=this.provider_name?"<a href='"+this.provider_url+"' class='provider'>"+this.provider_name+"</a>":"",a+=this.description?'<div class="description">'+this.description+"</div>":"");this.options.wrapElement&&(a="<"+this.options.wrapElement+' class="'+
this.options.className+'">'+a+"</"+this.options.wrapElement+">");this.code=a;"replace"===this.options.method?this.$elem.replaceWith(this.code):"after"===this.options.method?this.$elem.after(this.code):"afterParent"===this.options.method?this.$elem.parent().after(this.code):"replaceParent"===this.options.method&&this.$elem.parent().replaceWith(this.code);this.$elem.trigger("displayed",[this])}};a.embedly=new k;a.embedly.display=new n;a.fn.embedly=function(c){if(void 0===c||"object"===typeof c){c=a.extend({},
b,a.embedly.defaults,"object"===typeof c&&c);if(d(c.key))return a.embedly.log("error","Embedly jQuery requires an API Key. Please sign up for one at http://embed.ly"),this.each(a.noop);var e={},f=function(b){if(!a.data(a(b),"embedly")){var d=a(b).attr("href"),f=new q(b,d,c);a.data(b,"embedly",f);e.hasOwnProperty(d)?e[d].push(f):e[d]=[f]}},g=this.each(function(){d(a(this).attr("href"))?a(this).find("a").each(function(){d(a(this).attr("href"))||f(this)}):f(this)}),h=a.embedly.ajax(c.endpoint,a.map(e,
function(a,b){return b}),c).progress(function(b){a.each(e[b.original_url],function(a,c){c.progress(b)})});c.progress&&h.progress(c.progress);c.done&&h.done(c.done);return g}};a.expr[":"].embedly=function(b){return!d(a(b).data("embedly"))};a.fn.display=function(c,e){d(c)&&(c="display");if(void 0===e||"object"===typeof e){e=a.extend({},b,a.embedly.defaults,"object"===typeof e&&e);if(d(e.key))return a.embedly.log("error","Embedly jQuery requires an API Key. Please sign up for one at http://embed.ly/display"),
this.each(a.noop);var f=function(b){var d=a(b);if(!d.data("display")){var f=d.data("src")||d.attr("href"),f={original_url:f,url:a.embedly.display.build(c,f,e)};d.data("display",f);d.trigger("initialized",[b]);b="<img src='"+f.url+"' />";d.is("a")?d.append(b):d.replaceWith(b)}},g=function(b){return d(a(b).data("src"))&&d(a(b).attr("href"))?!1:!0};return this.each(function(){g(this)?f(this):a(this).find("img,a").each(function(){g(this)&&f(this)})})}};a.expr[":"].display=function(b){return!d(a(b).data("display"))}})(jQuery,
window);
(function(a){function b(b){function f(){b?k.removeData(b):u&&delete c[u]}function h(){n.id=setTimeout(function(){n.fn()},v)}var g=this,k,n={},q=b?a.fn:a,m=arguments,p=4,u=m[1],v=m[2],A=m[3];"string"!==typeof u&&(p--,u=b=0,v=m[1],A=m[2]);b?(k=g.eq(0),k.data(b,n=k.data(b)||{})):u&&(n=c[u]||(c[u]={}));n.id&&clearTimeout(n.id);delete n.id;if(A)n.fn=function(a){"string"===typeof A&&(A=q[A]);!0!==A.apply(g,d.call(m,p))||a?f():h()},h();else{if(n.fn)return void 0===v?f():n.fn(!1===v),!0;f()}}var c={},d=Array.prototype.slice;
a.doTimeout=function(){return b.apply(window,[0].concat(d.call(arguments)))};a.fn.doTimeout=function(){var a=d.call(arguments),c=b.apply(this,["doTimeout"+a[0]].concat(a));return"number"===typeof a[0]||"number"===typeof a[1]?this:c}})(jQuery);
(function(a){function b(){var b;b=a(this);if(!b.data("timeago")){b.data("timeago",{datetime:e.datetime(b)});var d=a.trim(b.text());0<d.length&&b.attr("title",d)}b=b.data("timeago");isNaN(b.datetime)||a(this).text(c(b.datetime));return this}function c(a){return e.inWords(d(a))}function d(a){return(new Date).getTime()-a.getTime()}a.timeago=function(b){return b instanceof Date?c(b):"string"==typeof b?c(a.timeago.parse(b)):c(a.timeago.datetime(b))};var e=a.timeago;a.extend(a.timeago,{settings:{refreshMillis:6E4,
allowFuture:!1,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",numbers:[]}},inWords:function(b){function c(b,e){return(a.isFunction(b)?b(e):b).replace(/%d/i,d.numbers&&d.numbers[e]||e)}var d=this.settings.strings,e=d.prefixAgo,n=d.suffixAgo;this.settings.allowFuture&&
(0>b&&(e=d.prefixFromNow,n=d.suffixFromNow),b=Math.abs(b));b/=1E3;var q=b/60,m=q/60,p=m/24,u=p/365;b=45>b&&c(d.seconds,Math.round(b))||90>b&&c(d.minute,1)||45>q&&c(d.minutes,Math.round(q))||90>q&&c(d.hour,1)||24>m&&c(d.hours,Math.round(m))||48>m&&c(d.day,1)||30>p&&c(d.days,Math.floor(p))||60>p&&c(d.month,1)||365>p&&c(d.months,Math.floor(p/30))||2>u&&c(d.year,1)||c(d.years,Math.floor(u));return a.trim([e,b,n].join(" "))},parse:function(b){b=a.trim(b);b=b.replace(/\.\d\d\d/,"");b=b.replace(/-/,"/").replace(/-/,
"/");b=b.replace(/T/," ").replace(/Z/," UTC");b=b.replace(/([\+-]\d\d)\:?(\d\d)/," $1$2");return new Date(b)},datetime:function(b){b="time"==a(b).get(0).tagName.toLowerCase()?a(b).attr("datetime"):a(b).attr("title");return e.parse(b)}});a.fn.timeago=function(){var a=this;a.each(b);var c=e.settings;0<c.refreshMillis&&setInterval(function(){a.each(b)},c.refreshMillis);return a};document.createElement("abbr");document.createElement("time")})(jQuery);
(function(a){var b={className:"autosizejs",id:"autosizejs",append:"\n",callback:!1,resizeDelay:10,placeholder:!0},c="fontFamily fontSize fontWeight fontStyle letterSpacing textTransform wordSpacing textIndent whiteSpace".split(" "),d,e=a('<textarea tabindex="-1" style="position:absolute; top:-999px; left:0; right:auto; bottom:auto; border:0; padding: 0; -moz-box-sizing:content-box; -webkit-box-sizing:content-box; box-sizing:content-box; word-wrap:break-word; height:0 !important; min-height:0 !important; overflow:hidden; transition:none; -webkit-transition:none; -moz-transition:none;"/>').data("autosize",
!0)[0];e.style.lineHeight="99px";"99px"===a(e).css("lineHeight")&&c.push("lineHeight");e.style.lineHeight="";a.fn.autosize=function(f){if(!this.length)return this;f=a.extend({},b,f||{});e.parentNode!==document.body&&a(document.body).append(e);return this.each(function(){function b(){var c,d=window.getComputedStyle?window.getComputedStyle(q,null):null;d?(c=parseFloat(d.width),"border-box"!==d.boxSizing&&"border-box"!==d.webkitBoxSizing&&"border-box"!==d.mozBoxSizing||a.each(["paddingLeft","paddingRight",
"borderLeftWidth","borderRightWidth"],function(a,b){c-=parseFloat(d[b])})):c=m.width();e.style.width=Math.max(c,0)+"px"}function g(){var g={};d=q;e.className=f.className;e.id=f.id;p=parseFloat(m.css("maxHeight"));a.each(c,function(a,b){g[b]=m.css(b)});a(e).css(g).attr("wrap",m.attr("wrap"));b();if(window.chrome){var k=q.style.width;q.style.width="0px";q.style.width=k}}function k(){var a,c;d!==q?g():b();e.value=!q.value&&f.placeholder?m.attr("placeholder")||"":q.value;e.value+=f.append||"";e.style.overflowY=
q.style.overflowY;c=parseFloat(q.style.height)||0;e.scrollTop=0;e.scrollTop=9E4;a=e.scrollTop;p&&a>p?(q.style.overflowY="scroll",a=p):(q.style.overflowY="hidden",a<u&&(a=u));a+=v;.01<Math.abs(c-a)&&(q.style.height=a+"px",e.className=e.className,A&&f.callback.call(q,q),m.trigger("autosize.resized"))}function n(){clearTimeout(x);x=setTimeout(function(){var a=m.width();a!==B&&(B=a,k())},parseInt(f.resizeDelay,10))}var q=this,m=a(q),p,u,v=0,A=a.isFunction(f.callback),D={height:q.style.height,overflow:q.style.overflow,
overflowY:q.style.overflowY,wordWrap:q.style.wordWrap,resize:q.style.resize},x,B=m.width(),s=m.css("resize");if(!m.data("autosize")){m.data("autosize",!0);if("border-box"===m.css("box-sizing")||"border-box"===m.css("-moz-box-sizing")||"border-box"===m.css("-webkit-box-sizing"))v=m.outerHeight()-m.height();u=Math.max(parseFloat(m.css("minHeight"))-v||0,m.height());m.css({overflow:"hidden",overflowY:"hidden",wordWrap:"break-word"});"vertical"===s?m.css("resize","none"):"both"===s&&m.css("resize","horizontal");
if("onpropertychange"in q)if("oninput"in q)m.on("input.autosize keyup.autosize",k);else m.on("propertychange.autosize",function(){"value"===event.propertyName&&k()});else m.on("input.autosize",k);if(!1!==f.resizeDelay)a(window).on("resize.autosize",n);m.on("autosize.resize",k);m.on("autosize.resizeIncludeStyle",function(){d=null;k()});m.on("autosize.destroy",function(){d=null;clearTimeout(x);a(window).off("resize",n);m.off("autosize").off(".autosize").css(D).removeData("autosize")});k()}})}})(jQuery||
$);
(function(a){function b(b){"string"===typeof b.data&&(b.data={keys:b.data});if(b.data&&b.data.keys&&"string"===typeof b.data.keys){var d=b.handler,e=b.data.keys.toLowerCase().split(" "),f="text password number email url range date month week time datetime datetime-local search color tel".split(" ");b.handler=function(h){if(b.data.allowInTextInputField||this===h.target||!(/textarea|select/i.test(h.target.nodeName)||-1<a.inArray(h.target.type,f)||a(h.target).prop("isContentEditable"))){var g=a.hotkeys.specialKeys[h.keyCode],k=
0<h.which&&String.fromCharCode(h.which).toLowerCase(),n="",q={};h.altKey&&"alt"!==g&&(n+="alt+");h.ctrlKey&&"ctrl"!==g&&(n+="ctrl+");h.metaKey&&!h.ctrlKey&&"meta"!==g&&(n+="meta+");h.shiftKey&&"shift"!==g&&(n+="shift+");g&&(q[n+g]=!0);k&&(q[n+k]=!0,q[n+a.hotkeys.shiftNums[k]]=!0,"shift+"===n&&(q[a.hotkeys.shiftNums[k]]=!0));g=0;for(k=e.length;g<k;g++)if(q[e[g]])return d.apply(this,arguments)}}}}a.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",10:"return",13:"return",16:"shift",17:"ctrl",
18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",186:";",191:"/",220:"\\",222:"'",224:"meta"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",
5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}};a.each(["keydown","keyup","keypress"],function(){a.event.special[this]={add:b}})})(this.jQuery);
(function(){function a(b,d){function e(a,b){return function(){return a.apply(b,arguments)}}var f;d=d||{};this.trackingClick=!1;this.trackingClickStart=0;this.targetElement=null;this.lastTouchIdentifier=this.touchStartY=this.touchStartX=0;this.touchBoundary=d.touchBoundary||10;this.layer=b;this.tapDelay=d.tapDelay||200;this.tapTimeout=d.tapTimeout||700;if(!a.notNeeded(b)){for(var h="onMouse onClick onTouchStart onTouchMove onTouchEnd onTouchCancel".split(" "),p=0,u=h.length;p<u;p++)this[h[p]]=e(this[h[p]],
this);c&&(b.addEventListener("mouseover",this.onMouse,!0),b.addEventListener("mousedown",this.onMouse,!0),b.addEventListener("mouseup",this.onMouse,!0));b.addEventListener("click",this.onClick,!0);b.addEventListener("touchstart",this.onTouchStart,!1);b.addEventListener("touchmove",this.onTouchMove,!1);b.addEventListener("touchend",this.onTouchEnd,!1);b.addEventListener("touchcancel",this.onTouchCancel,!1);Event.prototype.stopImmediatePropagation||(b.removeEventListener=function(a,c,d){var e=Node.prototype.removeEventListener;
"click"===a?e.call(b,a,c.hijacked||c,d):e.call(b,a,c,d)},b.addEventListener=function(a,c,d){var e=Node.prototype.addEventListener;"click"===a?e.call(b,a,c.hijacked||(c.hijacked=function(a){a.propagationStopped||c(a)}),d):e.call(b,a,c,d)});"function"===typeof b.onclick&&(f=b.onclick,b.addEventListener("click",function(a){f(a)},!1),b.onclick=null)}}var b=0<=navigator.userAgent.indexOf("Windows Phone"),c=0<navigator.userAgent.indexOf("Android")&&!b,d=/iP(ad|hone|od)/.test(navigator.userAgent)&&!b,e=
d&&/OS 4_\d(_\d)?/.test(navigator.userAgent),f=d&&/OS [6-7]_\d/.test(navigator.userAgent),h=0<navigator.userAgent.indexOf("BB10");a.prototype.needsClick=function(a){switch(a.nodeName.toLowerCase()){case "button":case "select":case "textarea":if(a.disabled)return!0;break;case "input":if(d&&"file"===a.type||a.disabled)return!0;break;case "label":case "iframe":case "video":return!0}return/\bneedsclick\b/.test(a.className)};a.prototype.needsFocus=function(a){switch(a.nodeName.toLowerCase()){case "textarea":return!0;
case "select":return!c;case "input":switch(a.type){case "button":case "checkbox":case "file":case "image":case "radio":case "submit":return!1}return!a.disabled&&!a.readOnly;default:return/\bneedsfocus\b/.test(a.className)}};a.prototype.sendClick=function(a,b){var c,d;document.activeElement&&document.activeElement!==a&&document.activeElement.blur();d=b.changedTouches[0];c=document.createEvent("MouseEvents");c.initMouseEvent(this.determineEventType(a),!0,!0,window,1,d.screenX,d.screenY,d.clientX,d.clientY,
!1,!1,!1,!1,0,null);c.forwardedTouchEvent=!0;a.dispatchEvent(c)};a.prototype.determineEventType=function(a){return c&&"select"===a.tagName.toLowerCase()?"mousedown":"click"};a.prototype.focus=function(a){var b;d&&a.setSelectionRange&&0!==a.type.indexOf("date")&&"time"!==a.type&&"month"!==a.type?(b=a.value.length,a.setSelectionRange(b,b)):a.focus()};a.prototype.updateScrollParent=function(a){var b,c;b=a.fastClickScrollParent;if(!b||!b.contains(a)){c=a;do{if(c.scrollHeight>c.offsetHeight){b=c;a.fastClickScrollParent=
c;break}c=c.parentElement}while(c)}b&&(b.fastClickLastScrollTop=b.scrollTop)};a.prototype.getTargetElementFromEventTarget=function(a){return a.nodeType===Node.TEXT_NODE?a.parentNode:a};a.prototype.onTouchStart=function(a){var b,c,f;if(1<a.targetTouches.length)return!0;b=this.getTargetElementFromEventTarget(a.target);c=a.targetTouches[0];if(d){f=window.getSelection();if(f.rangeCount&&!f.isCollapsed)return!0;if(!e){if(c.identifier&&c.identifier===this.lastTouchIdentifier)return a.preventDefault(),!1;
this.lastTouchIdentifier=c.identifier;this.updateScrollParent(b)}}this.trackingClick=!0;this.trackingClickStart=a.timeStamp;this.targetElement=b;this.touchStartX=c.pageX;this.touchStartY=c.pageY;a.timeStamp-this.lastClickTime<this.tapDelay&&a.preventDefault();return!0};a.prototype.touchHasMoved=function(a){a=a.changedTouches[0];var b=this.touchBoundary;return Math.abs(a.pageX-this.touchStartX)>b||Math.abs(a.pageY-this.touchStartY)>b?!0:!1};a.prototype.onTouchMove=function(a){if(!this.trackingClick)return!0;
if(this.targetElement!==this.getTargetElementFromEventTarget(a.target)||this.touchHasMoved(a))this.trackingClick=!1,this.targetElement=null;return!0};a.prototype.findControl=function(a){return void 0!==a.control?a.control:a.htmlFor?document.getElementById(a.htmlFor):a.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")};a.prototype.onTouchEnd=function(a){var b,h,q=this.targetElement;if(!this.trackingClick)return!0;if(a.timeStamp-this.lastClickTime<
this.tapDelay)return this.cancelNextClick=!0;if(a.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;this.cancelNextClick=!1;this.lastClickTime=a.timeStamp;b=this.trackingClickStart;this.trackingClick=!1;this.trackingClickStart=0;f&&(h=a.changedTouches[0],q=document.elementFromPoint(h.pageX-window.pageXOffset,h.pageY-window.pageYOffset)||q,q.fastClickScrollParent=this.targetElement.fastClickScrollParent);h=q.tagName.toLowerCase();if("label"===h){if(b=this.findControl(q)){this.focus(q);if(c)return!1;
q=b}}else if(this.needsFocus(q)){if(100<a.timeStamp-b||d&&window.top!==window&&"input"===h)return this.targetElement=null,!1;this.focus(q);this.sendClick(q,a);d&&"select"===h||(this.targetElement=null,a.preventDefault());return!1}if(d&&!e&&(b=q.fastClickScrollParent)&&b.fastClickLastScrollTop!==b.scrollTop)return!0;this.needsClick(q)||(a.preventDefault(),this.sendClick(q,a));return!1};a.prototype.onTouchCancel=function(){this.trackingClick=!1;this.targetElement=null};a.prototype.onMouse=function(a){return this.targetElement&&
!a.forwardedTouchEvent&&a.cancelable?!this.needsClick(this.targetElement)||this.cancelNextClick?(a.stopImmediatePropagation?a.stopImmediatePropagation():a.propagationStopped=!0,a.stopPropagation(),a.preventDefault(),!1):!0:!0};a.prototype.onClick=function(a){if(this.trackingClick)return this.targetElement=null,this.trackingClick=!1,!0;if("submit"===a.target.type&&0===a.detail)return!0;a=this.onMouse(a);a||(this.targetElement=null);return a};a.prototype.destroy=function(){var a=this.layer;c&&(a.removeEventListener("mouseover",
this.onMouse,!0),a.removeEventListener("mousedown",this.onMouse,!0),a.removeEventListener("mouseup",this.onMouse,!0));a.removeEventListener("click",this.onClick,!0);a.removeEventListener("touchstart",this.onTouchStart,!1);a.removeEventListener("touchmove",this.onTouchMove,!1);a.removeEventListener("touchend",this.onTouchEnd,!1);a.removeEventListener("touchcancel",this.onTouchCancel,!1)};a.notNeeded=function(a){var b,d;if("undefined"===typeof window.ontouchstart)return!0;if(d=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||
[,0])[1])if(c){if((b=document.querySelector("meta[name=viewport]"))&&(-1!==b.content.indexOf("user-scalable=no")||31<d&&document.documentElement.scrollWidth<=window.outerWidth))return!0}else return!0;return h&&(b=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),10<=b[1]&&3<=b[2]&&(b=document.querySelector("meta[name=viewport]"))&&(-1!==b.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))||"none"===a.style.msTouchAction||"manipulation"===a.style.touchAction||
27<=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]&&(b=document.querySelector("meta[name=viewport]"))&&(-1!==b.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth)?!0:"none"===a.style.touchAction||"manipulation"===a.style.touchAction?!0:!1};a.attach=function(b,c){return new a(b,c)};"function"===typeof define&&"object"===typeof define.amd&&define.amd?define(function(){return a}):"undefined"!==typeof module&&module.exports?(module.exports=a.attach,
module.exports.FastClick=a):window.FastClick=a})();$(function(){FastClick.attach(document.body)});
(function e$$0(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var n="function"==typeof require&&require;if(!h&&n)return n(g,!0);if(f)return f(g,!0);n=Error("Cannot find module '"+g+"'");throw n.code="MODULE_NOT_FOUND",n;}n=c[g]={exports:{}};b[g][0].call(n.exports,function(c){var d=b[g][1][c];return e(d?d:c)},n,n.exports,e$$0,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,h=0;h<d.length;h++)e(d[h]);return e})({1:[function(a,b,c){(function(c){var e,f;f=a("./util/merge.coffee");
e=function(){function a(b,c){this._projectId=0;this._projectKey="";this._host="https://api.airbrake.io";this._context={};this._params={};this._env={};this._session={};this._processor=b;this._reporters=[];this._filters=[];c&&this.addReporter(c)}a.prototype.setProject=function(a,b){this._projectId=a;return this._projectKey=b};a.prototype.setHost=function(a){return this._host=a};a.prototype.addContext=function(a){return f(this._context,a)};a.prototype.setEnvironmentName=function(a){return this._context.environment=
a};a.prototype.addParams=function(a){return f(this._params,a)};a.prototype.addEnvironment=function(a){return f(this._env,a)};a.prototype.addSession=function(a){return f(this._session,a)};a.prototype.addReporter=function(a){return this._reporters.push(a)};a.prototype.addFilter=function(a){return this._filters.push(a)};a.prototype.push=function(a){var b,e;b={language:"JavaScript",sourceMapEnabled:!0};null!=(e=c.navigator)&&e.userAgent&&(b.userAgent=c.navigator.userAgent);c.location&&(b.url=String(c.location));
return this._processor(a.error||a,function(c){return function(d,e){var h,n,A,D,x;n={notifier:{name:"airbrake-js-"+d,version:"0.3.10",url:"https://github.com/airbrake/airbrake-js"},errors:[e],context:f(b,c._context,a.context),params:f({},c._params,a.params),environment:f({},c._env,a.environment),session:f({},c._session,a.session)};x=c._filters;A=0;for(D=x.length;A<D;A++)if(h=x[A],!h(n))return;x=c._reporters;A=0;for(D=x.length;A<D;A++)h=x[A],h(n,{projectId:c._projectId,projectKey:c._projectKey,host:c._host})}}(this))};
a.prototype._wrapArguments=function(a){var b,c,d,e;c=d=0;for(e=a.length;d<e;c=++d)b=a[c],"function"===typeof b&&(a[c]=this.wrap(b));return a};a.prototype.wrap=function(a){var b,c,d;if(a.__airbrake__)return a;d=this;b=function(){var b,c;b=d._wrapArguments(arguments);try{return a.apply(this,b)}catch(e){return c=e,b=Array.prototype.slice.call(arguments),d.push({error:c,params:{arguments:b}}),null}};for(c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);b.__airbrake__=!0;b.__inner__=a;return b};return a}();b.exports=
e}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./util/merge.coffee":10}],2:[function(a,b,c){b="undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{};var d,e;a("./util/compat.coffee");c=a("./client.coffee");d=a("./processors/stack.coffee");e=a("./reporters/hybrid.coffee");c=new c(d,e);c.consoleReporter=a("./reporters/console.coffee");d=b.Airbrake;b.Airbrake=c;a("./util/slurp_config_from_dom.coffee")(c);
if(null!=d){null!=d.wrap&&(c.wrap=d.wrap);if(null!=d.onload)d.onload(c);b=0;for(e=d.length;b<e;b++)a=d[b],c.push(a)}},{"./client.coffee":1,"./processors/stack.coffee":3,"./reporters/console.coffee":4,"./reporters/hybrid.coffee":5,"./util/compat.coffee":8,"./util/slurp_config_from_dom.coffee":11}],3:[function(a,b,c){var d,e;d=[{name:"v8",re:/^\s*at\s(.+?)\s\((?:(?:(.+):(\d+):(\d+))|(.+))\)$/,fn:function(a){return{"function":a[1],file:a[2]||a[5],line:a[3]&&parseInt(a[3],10)||0,column:a[4]&&parseInt(a[4],
10)||0}}},{name:"firefox30",re:/^(.*)@(.+):(\d+):(\d+)$/,fn:function(a){var b,c,d;c=a[1];b=a[2];if(d=b.match(/^(\S+)\s(line\s\d+\s>\seval.*)$/))c=0<c.length?c+" "+d[2]:d[2],b=d[1];return{"function":c,file:b,line:parseInt(a[3],10),column:parseInt(a[4],10)}}},{name:"firefox14",re:/^(.*)@(.+):(\d+)$/,fn:function(a,b,c){b=0===b?c.columnNumber||0:0;return{"function":a[1],file:a[2],line:parseInt(a[3],10),column:b}}},{name:"v8-short",re:/^\s*at\s(.+):(\d+):(\d+)$/,fn:function(a){return{"function":"",file:a[1],
line:parseInt(a[2],10),column:parseInt(a[3],10)}}},{name:"default",re:/.+/,fn:function(a){return{"function":a[0],file:"",line:0,column:0}}}];e=/^\S+:\s.+$/;b.exports=function(a,b){var c,k,n,q,m,p,u,v,A,D,x;p="nostack";q=(a.stack||"").split("\n");c=[];k=v=0;for(D=q.length;v<D;k=++v)if(n=q[k],""!==n)for(A=0,x=d.length;A<x;A++)if(u=d[A],m=n.match(u.re)){p=u.name;c.push(u.fn(m,k,a));break}("v8"===p||"v8-short"===p)&&0<c.length&&c[0]["function"].match(e)&&(c=c.slice(1));0!==c.length||null==a.fileName&&
null==a.lineNumber&&null==a.columnNumber||c.push({"function":"",file:a.fileName||"",line:parseInt(a.lineNumber,10)||0,column:parseInt(a.columnNumber,10)||0});0!==c.length||null==a.filename&&null==a.lineno&&null==a.column&&null==a.colno||c.push({"function":"",file:a.filename||"",line:parseInt(a.lineno,10)||0,column:parseInt(a.column||a.colno,10)||0});k=null!=a.message?a.message:String(a);null!=a.name?(m=a.name,k=m+": "+k):(m=/^Uncaught\s(.+?):\s.+$/,m=(m=k.match(m))?m[1]:"");return b(p,{type:m,message:k,
backtrace:c})}},{}],4:[function(a,b,c){var d;d=function(a){var b,c,d,k;b=""+(a.message+"\n");k=a.backtrace;c=0;for(d=k.length;c<d;c++)a=k[c],""!==a["function"]&&(b+=" at "+a["function"]),""!==a.file&&(b+=" in "+a.file+":"+a.line,0!==a.column&&(b+=":"+a.column)),b+="\n";return b};b.exports=function(a){var b,c,g,k;g=a.errors;k=[];b=0;for(c=g.length;b<c;b++)a=g[b],k.push("undefined"!==typeof console&&null!==console?"function"===typeof console.log?console.log(d(a)):void 0:void 0);return k}},{}],5:[function(a,
b,c){b.exports="withCredentials"in new XMLHttpRequest?a("./xhr.coffee"):a("./jsonp.coffee")},{"./jsonp.coffee":6,"./xhr.coffee":7}],6:[function(a,b,c){(function(c){var e,f;f=a("../util/jsonify_notice.coffee");e=0;b.exports=function(a,b){var k,n,q,m,p;e++;k="airbrakeCb"+String(e);c[k]=function(a){"undefined"!==typeof console&&null!==console&&"function"===typeof console.debug&&console.debug("airbrake: error #%s was reported: %s",a.id,a.url);try{return delete c[k]}catch(b){return c[k]=void 0}};n=encodeURIComponent(f(a));
p=b.host+"/api/v3/projects/"+b.projectId+"/create-notice?key="+b.projectKey+"&callback="+k+"&body="+n;n=c.document;q=n.getElementsByTagName("head")[0];m=n.createElement("script");m.src=p;n=function(){return q.removeChild(m)};m.onload=n;m.onerror=n;return q.appendChild(m)}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"../util/jsonify_notice.coffee":9}],7:[function(a,b,c){(function(c){var e;e=a("../util/jsonify_notice.coffee");
b.exports=function(a,b){var g,k,n;n=b.host+"/api/v3/projects/"+b.projectId+"/notices?key="+b.projectKey;g=e(a);k=new c.XMLHttpRequest;k.open("POST",n,!0);k.setRequestHeader("Content-Type","application/json");k.send(g);return k.onreadystatechange=function(){var a;if(4===k.readyState&&201===k.status&&null!=("undefined"!==typeof console&&null!==console?console.debug:void 0))return a=JSON.parse(k.responseText),console.debug("airbrake: error #%s was reported: %s",a.id,a.url)}}}).call(this,"undefined"!==
typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"../util/jsonify_notice.coffee":9}],8:[function(a,b,c){Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){var c,h,g;c=h=b=b||0;for(g=this.length;b<=g?h<g:h>g;c=b<=g?++h:--h)if(this[c]===a)return c;return-1})},{}],9:[function(a,b,c){var d,e;d=a("./truncate.coffee");e=function(a,b){var c,e;null==b&&(b=1E3);c={};for(e in a)c[e]=d(a[e],b);return c};b.exports=function(a,b,c){var d;null==b&&(b=1E3);
for(null==c&&(c=64E3);;){a.params=e(a.params,b);a.environment=e(a.environment,b);a.session=e(a.session,b);d=JSON.stringify(a);if(d.length<c)return d;if(0===b)break;b=Math.floor(b/2)}throw Error("cannot jsonify notice (length="+d.length+" maxLength="+c+")");}},{"./truncate.coffee":12}],10:[function(a,b,c){b.exports=function(){var a,b,c,h,g,k;h=Array.prototype.slice.call(arguments);a=h.shift()||{};g=0;for(k=h.length;g<k;g++)for(b in c=h[g],c)Object.prototype.hasOwnProperty.call(c,b)&&(a[b]=c[b]);return a}},
{}],11:[function(a,b,c){(function(a){var c;c=function(a,b){return a.getAttribute("data-airbrake-"+b)};b.exports=function(b){var h,g,k,n,q,m,p;n=a.document.getElementsByTagName("script");p=[];q=0;for(m=n.length;q<m;q++)g=n[q],h=c(g,"project-id"),k=c(g,"project-key"),h&&k&&b.setProject(h,k),(h=c(g,"environment-name"))&&b.setEnvironmentName(h),(h=c(g,"host"))&&b.setHost(h),(g=c(g,"onload"))?p.push(a[g](b)):p.push(void 0);return p}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?
self:"undefined"!==typeof window?window:{})},{}],12:[function(a,b,c){var d;d=function(a,b){try{return a[b]}catch(c){}};b.exports=function(a,b,c){var g,k,n,q,m;null==b&&(b=1E3);null==c&&(c=5);q=0;n=[];m=[];k=function(a){var b,c,e,f;c=m.indexOf(a);e=[n[c]];for(b=f=c;0>=c?0>=f:0<=f;b=0>=c?++f:--f)m[b]&&d(m[b],e[0])===a&&(a=m[b],e.unshift(n[b]));return"~"+e.join(".")};g=function(a,e,v){var A,D,x,B;null==e&&(e="");null==v&&(v=0);q++;if(q>b)return"[Truncated]";if(null===a||void 0===a)return a;switch(typeof a){case "boolean":case "number":case "string":case "function":return a;
case "object":break;default:return String(a)}if(a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp)return a;if(0<=m.indexOf(a))return"[Circular "+k(a)+"]";v++;if(v>c)return"[Truncated]";n.push(e);m.push(a);q--;if("[object Array]"===Object.prototype.toString.apply(a)){A=[];D=x=0;for(B=a.length;x<B;D=++x){e=a[D];q++;if(q>=b)break;A.push(g(e,D,v))}return A}A={};for(e in a)if(Object.prototype.hasOwnProperty.call(a,e)){q++;if(q>=b)break;D=d(a,e);void 0!==
D&&(A[e]=g(D,e,v))}return A};return g(a)}},{}]},{},[2]);
!function(a,b){"undefined"!=typeof module&&module.exports?module.exports=b():"function"==typeof define&&define.amd?define(b):this[a]=b()}("bowser",function(){function a(a){function b(d){return(d=a.match(d))&&1<d.length&&d[1]||""}function e(b){return(b=a.match(b))&&1<b.length&&b[2]||""}var f=b(/(ipod|iphone|ipad)/i).toLowerCase(),h=!/like android/i.test(a)&&/android/i.test(a),g=/CrOS/.test(a),k=b(/edge\/(\d+(\.\d+)?)/i),n=b(/version\/(\d+(\.\d+)?)/i),q=/tablet/i.test(a),m=!q&&/[^-]mobi/i.test(a);/opera|opr/i.test(a)?
g={name:"Opera",opera:!0,version:n||b(/(?:opera|opr)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(a)?g={name:"Yandex Browser",yandexbrowser:!0,version:n||b(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/windows phone/i.test(a)?(g={name:"Windows Phone",windowsphone:!0},k?(g.msedge=!0,g.version=k):(g.msie=!0,g.version=b(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(a)?g={name:"Internet Explorer",msie:!0,version:b(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:g?g={name:"Chrome",chromeBook:!0,chrome:!0,version:b(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:
/chrome.+? edge/i.test(a)?g={name:"Microsoft Edge",msedge:!0,version:k}:/chrome|crios|crmo/i.test(a)?g={name:"Chrome",chrome:!0,version:b(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:f?(g={name:"iphone"==f?"iPhone":"ipad"==f?"iPad":"iPod"},n&&(g.version=n)):/sailfish/i.test(a)?g={name:"Sailfish",sailfish:!0,version:b(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(a)?g={name:"SeaMonkey",seamonkey:!0,version:b(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel/i.test(a)?(g={name:"Firefox",firefox:!0,
version:b(/(?:firefox|iceweasel)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(a)&&(g.firefoxos=!0)):/silk/i.test(a)?g={name:"Amazon Silk",silk:!0,version:b(/silk\/(\d+(\.\d+)?)/i)}:h?g={name:"Android",version:n}:/phantom/i.test(a)?g={name:"PhantomJS",phantom:!0,version:b(/phantomjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(a)||/rim\stablet/i.test(a)?g={name:"BlackBerry",blackberry:!0,version:n||b(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:/(web|hpw)os/i.test(a)?(g={name:"WebOS",
webos:!0,version:n||b(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(a)&&(g.touchpad=!0)):g=/bada/i.test(a)?{name:"Bada",bada:!0,version:b(/dolfin\/(\d+(\.\d+)?)/i)}:/tizen/i.test(a)?{name:"Tizen",tizen:!0,version:b(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||n}:/safari/i.test(a)?{name:"Safari",safari:!0,version:n}:{name:b(/^(.*)\/(.*) /),version:e(/^(.*)\/(.*) /)};!g.msedge&&/(apple)?webkit/i.test(a)?(g.name=g.name||"Webkit",g.webkit=!0,!g.version&&n&&(g.version=n)):!g.opera&&/gecko\//i.test(a)&&
(g.name=g.name||"Gecko",g.gecko=!0,g.version=g.version||b(/gecko\/(\d+(\.\d+)?)/i));g.msedge||!h&&!g.silk?f&&(g[f]=!0,g.ios=!0):g.android=!0;k="";g.windowsphone?k=b(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):f?(k=b(/os (\d+([_\s]\d+)*) like mac os x/i),k=k.replace(/[_\s]/g,".")):h?k=b(/android[ \/-](\d+(\.\d+)*)/i):g.webos?k=b(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):g.blackberry?k=b(/rim\stablet\sos\s(\d+(\.\d+)*)/i):g.bada?k=b(/bada\/(\d+(\.\d+)*)/i):g.tizen&&(k=b(/tizen[\/\s](\d+(\.\d+)*)/i));k&&(g.osversion=
k);k=k.split(".")[0];if(q||"ipad"==f||h&&(3==k||4==k&&!m)||g.silk)g.tablet=!0;else if(m||"iphone"==f||"ipod"==f||h||g.blackberry||g.webos||g.bada)g.mobile=!0;g.msedge||g.msie&&10<=g.version||g.yandexbrowser&&15<=g.version||g.chrome&&20<=g.version||g.firefox&&20<=g.version||g.safari&&6<=g.version||g.opera&&10<=g.version||g.ios&&g.osversion&&6<=g.osversion.split(".")[0]||g.blackberry&&10.1<=g.version?g.a=!0:g.msie&&10>g.version||g.chrome&&20>g.version||g.firefox&&20>g.version||g.safari&&6>g.version||
g.opera&&10>g.version||g.ios&&g.osversion&&6>g.osversion.split(".")[0]?g.c=!0:g.x=!0;return g}var b=a("undefined"!==typeof navigator?navigator.userAgent:"");b.test=function(a){for(var d=0;d<a.length;++d){var e=a[d];if("string"===typeof e&&e in b)return!0}return!1};b._detect=a;return b});
(function(a){a.fn.extend({autocomplete:function(b,c){var d="string"==typeof b;c=a.extend({},a.Autocompleter.defaults,{url:d?b:null,data:d?null:b,delay:d?a.Autocompleter.defaults.delay:10,max:c&&!c.scroll?10:150},c);c.highlight=c.highlight||function(a){return a};c.formatMatch=c.formatMatch||c.formatItem;return this.each(function(){new a.Autocompleter(this,c)})},result:function(a){return this.bind("result",a)},search:function(a){return this.trigger("search",[a])},flushCache:function(){return this.trigger("flushCache")},
setOptions:function(a){return this.trigger("setOptions",[a])},unautocomplete:function(){return this.trigger("unautocomplete")}});a.Autocompleter=function(b,c){function d(){var d=B.selected();if(!d)return!1;var e=d.result;u=e;if(c.multiple){var h=f(m.val());if(1<h.length){var k=c.multipleSeparator.length,n=a(b).selection().start,q,p=0;a.each(h,function(a,b){p+=b.length;if(n<=p)return q=a,!1;p+=k});h[q]=e;e=h.join(c.multipleSeparator)}e+=c.multipleSeparator}m.val(e);g();m.trigger("result",[d.data,d.value]);
return!0}function e(a,b){if(D==q.DEL)B.hide();else{var d=m.val();if(b||d!=u)u=d,d=h(d),d.length>=c.minChars?(m.addClass(c.loadingClass),c.matchCase||(d=d.toLowerCase()),n(d,k,g)):(m.removeClass(c.loadingClass),B.hide())}}function f(b){return b?c.multiple?a.map(b.split(c.multipleSeparator),function(c){return a.trim(b).length?a.trim(c):null}):[a.trim(b)]:[""]}function h(d){if(!c.multiple)return d;var e=f(d);if(1==e.length)return e[0];e=a(b).selection().start;e=e==d.length?f(d):f(d.replace(d.substring(e),
""));return e[e.length-1]}function g(){B.visible();B.hide();clearTimeout(p);m.removeClass(c.loadingClass);c.mustMatch&&m.search(function(a){a||(c.multiple?(a=f(m.val()).slice(0,-1),m.val(a.join(c.multipleSeparator)+(a.length?c.multipleSeparator:""))):(m.val(""),m.trigger("result",null)))})}function k(d,e){if(e&&e.length&&A){m.removeClass(c.loadingClass);B.display(e,d);var f=e[0].value;c.autoFill&&h(m.val()).toLowerCase()==d.toLowerCase()&&D!=q.BACKSPACE&&(m.val(m.val()+f.substring(h(u).length)),a(b).selection(u.length,
u.length+f.length));B.show()}else g()}function n(d,e,f){c.matchCase||(d=d.toLowerCase());var g=v.load(d);if(g&&g.length)e(d,g);else if("string"==typeof c.url&&0<c.url.length){var k={timestamp:+new Date};a.each(c.extraParams,function(a,b){k[a]="function"==typeof b?b():b});a.ajax({mode:"abort",port:"autocomplete"+b.name,dataType:c.dataType,url:c.url,data:a.extend({q:h(d),limit:c.max},k),success:function(b){var f;if(!(f=c.parse&&c.parse(b))){f=[];b=b.split("\n");for(var g=0;g<b.length;g++){var h=a.trim(b[g]);
h&&(h=h.split("|"),f[f.length]={data:h,value:h[0],result:c.formatResult&&c.formatResult(h,h[0])||h[0]})}}v.add(d,f);e(d,f)}})}else B.emptyList(),f(d)}var q={UP:38,DOWN:40,DEL:46,TAB:9,RETURN:13,ESC:27,COMMA:188,PAGEUP:33,PAGEDOWN:34,BACKSPACE:8},m=a(b).attr("autocomplete","off").addClass(c.inputClass),p,u="",v=a.Autocompleter.Cache(c),A=0,D,x={mouseDownOnSelect:!1},B=a.Autocompleter.Select(c,b,d,x),s;a.browser.opera&&a(b.form).bind("submit.autocomplete",function(){if(s)return s=!1});m.bind((a.browser.opera?
"keypress":"keydown")+".autocomplete",function(b){A=1;D=b.keyCode;switch(b.keyCode){case q.UP:b.preventDefault();B.visible()?B.prev():e(0,!0);break;case q.DOWN:b.preventDefault();B.visible()?B.next():e(0,!0);break;case q.PAGEUP:b.preventDefault();B.visible()?B.pageUp():e(0,!0);break;case q.PAGEDOWN:b.preventDefault();B.visible()?B.pageDown():e(0,!0);break;case c.multiple&&","==a.trim(c.multipleSeparator)&&q.COMMA:case q.TAB:case q.RETURN:if(d())return b.preventDefault(),s=!0,!1;break;case q.ESC:B.hide();
break;default:clearTimeout(p),p=setTimeout(e,c.delay)}}).focus(function(){A++}).blur(function(){A=0;x.mouseDownOnSelect||(clearTimeout(p),p=setTimeout(g,200))}).click(function(){1<A++&&!B.visible()&&e(0,!0)}).bind("search",function(){function b(a,d){var e;if(d&&d.length)for(var f=0;f<d.length;f++)if(d[f].result.toLowerCase()==a.toLowerCase()){e=d[f];break}"function"==typeof c?c(e):m.trigger("result",e&&[e.data,e.value])}var c=1<arguments.length?arguments[1]:null;a.each(f(m.val()),function(a,c){n(c,
b,b)})}).bind("flushCache",function(){v.flush()}).bind("setOptions",function(b,d){a.extend(c,d);"data"in d&&v.populate()}).bind("unautocomplete",function(){B.unbind();m.unbind();a(b.form).unbind(".autocomplete")})};a.Autocompleter.defaults={inputClass:"ac_input",resultsClass:"ac_results",loadingClass:"ac_loading",minChars:1,delay:400,matchCase:!1,matchSubset:!0,matchContains:!1,cacheLength:10,max:100,mustMatch:!1,extraParams:{},selectFirst:!0,formatItem:function(a){return a[0]},formatMatch:null,autoFill:!1,
width:0,multiple:!1,multipleSeparator:", ",highlight:function(a,c){return a.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+c.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>")},scroll:!0,scrollHeight:180};a.Autocompleter.Cache=function(b){function c(a,c){b.matchCase||(a=a.toLowerCase());var d=a.indexOf(c);"word"==b.matchContains&&(d=a.toLowerCase().search("\\b"+c.toLowerCase()));return-1==d?!1:0==d||b.matchContains}function d(a,c){g>b.cacheLength&&
f();h[a]||g++;h[a]=c}function e(){if(!b.data)return!1;var c={},e=0;b.url||(b.cacheLength=1);c[""]=[];for(var f=0,g=b.data.length;f<g;f++){var h=b.data[f],h="string"==typeof h?[h]:h,u=b.formatMatch(h,f+1,b.data.length);if(!1!==u){var v=u.charAt(0).toLowerCase();c[v]||(c[v]=[]);h={value:u,data:h,result:b.formatResult&&b.formatResult(h)||u};c[v].push(h);e++<b.max&&c[""].push(h)}}a.each(c,function(a,c){b.cacheLength++;d(a,c)})}function f(){h={};g=0}var h={},g=0;setTimeout(e,25);return{flush:f,add:d,populate:e,
load:function(d){if(!b.cacheLength||!g)return null;if(!b.url&&b.matchContains){var e=[],f;for(f in h)if(0<f.length){var m=h[f];a.each(m,function(a,b){c(b.value,d)&&e.push(b)})}return e}if(h[d])return h[d];if(b.matchSubset)for(f=d.length-1;f>=b.minChars;f--)if(m=h[d.substr(0,f)])return e=[],a.each(m,function(a,b){c(b.value,d)&&(e[e.length]=b)}),e;return null}}};a.Autocompleter.Select=function(b,c,d,e){function f(){u&&(v=a("<div/>").hide().addClass(b.resultsClass).css("position","absolute").appendTo(document.body),
A=a("<ul/>").appendTo(v).mouseover(function(b){h(b).nodeName&&"LI"==h(b).nodeName.toUpperCase()&&(q=a("li",A).removeClass(k.ACTIVE).index(h(b)),a(h(b)).addClass(k.ACTIVE))}).click(function(b){a(h(b)).addClass(k.ACTIVE);d();c.focus();return!1}).mousedown(function(){e.mouseDownOnSelect=!0}).mouseup(function(){e.mouseDownOnSelect=!1}),0<b.width&&v.css("width",b.width),u=!1)}function h(a){for(a=a.target;a&&"LI"!=a.tagName;)a=a.parentNode;return a?a:[]}function g(a){n.slice(q,q+1).removeClass(k.ACTIVE);
q+=a;0>q?q=n.size()-1:q>=n.size()&&(q=0);a=n.slice(q,q+1).addClass(k.ACTIVE);if(b.scroll){var c=0;n.slice(0,q).each(function(){c+=this.offsetHeight});c+a[0].offsetHeight-A.scrollTop()>A[0].clientHeight?A.scrollTop(c+a[0].offsetHeight-A.innerHeight()):c<A.scrollTop()&&A.scrollTop(c)}}var k={ACTIVE:"ac_over"},n,q=-1,m,p="",u=!0,v,A;return{display:function(c,d){f();m=c;p=d;A.empty();var e;e=m.length;e=b.max&&b.max<e?b.max:e;for(var g=0;g<e;g++)if(m[g]){var h=b.formatItem(m[g].data,g+1,e,m[g].value,p);
!1!==h&&(h=a("<li/>").html(b.highlight(h,p)).addClass(0==g%2?"ac_even":"ac_odd").appendTo(A)[0],a.data(h,"ac_data",m[g]))}n=A.find("li");b.selectFirst&&(n.slice(0,1).addClass(k.ACTIVE),q=0);a.fn.bgiframe&&A.bgiframe()},next:function(){g(1)},prev:function(){g(-1)},pageUp:function(){0!=q&&0>q-8?g(-q):g(-8)},pageDown:function(){q!=n.size()-1&&q+8>n.size()?g(n.size()-1-q):g(8)},hide:function(){v&&v.hide();n&&n.removeClass(k.ACTIVE);q=-1},visible:function(){return v&&v.is(":visible")},current:function(){return this.visible()&&
(n.filter("."+k.ACTIVE)[0]||b.selectFirst&&n[0])},show:function(){var d=a(c).offset();v.css({width:"string"==typeof b.width||0<b.width?b.width:a(c).width(),top:d.top+c.offsetHeight,left:d.left}).show();if(b.scroll&&(A.scrollTop(0),A.css({maxHeight:b.scrollHeight,overflow:"auto"}),a.browser.msie&&"undefined"===typeof document.body.style.maxHeight)){var e=0;n.each(function(){e+=this.offsetHeight});d=e>b.scrollHeight;A.css("height",d?b.scrollHeight:e);d||n.width(A.width()-parseInt(n.css("padding-left"))-
parseInt(n.css("padding-right")))}},selected:function(){var b=n&&n.filter("."+k.ACTIVE).removeClass(k.ACTIVE);return b&&b.length&&a.data(b[0],"ac_data")},emptyList:function(){A&&A.empty()},unbind:function(){v&&v.remove()}}};a.fn.selection=function(a,c){if(void 0!==a)return this.each(function(){if(this.createTextRange){var d=this.createTextRange();void 0===c||a==c?d.move("character",a):(d.collapse(!0),d.moveStart("character",a),d.moveEnd("character",c));d.select()}else this.setSelectionRange?this.setSelectionRange(a,
c):this.selectionStart&&(this.selectionStart=a,this.selectionEnd=c)});var d=this[0];if(d.createTextRange){var e=document.selection.createRange(),f=d.value,h=e.text.length;e.text="<->";e=d.value.indexOf("<->");d.value=f;this.selection(e,e+h);return{start:e,end:e+h}}if(void 0!==d.selectionStart)return{start:d.selectionStart,end:d.selectionEnd}}})(jQuery);
(function(){void 0===Function.prototype.scopedTo&&(Function.prototype.scopedTo=function(a,c){var d=this;return function(){return d.apply(a,Array.prototype.slice.call(c||[]).concat(Array.prototype.slice.call(arguments)))}});var a=function(b,c){this.options=c||{};this.key=b;this.channels=new a.Channels;this.global_emitter=new a.EventsDispatcher;var d=this;this.checkAppKey();this.connection=new a.Connection(this.key,this.options);this.connection.bind("connected",function(){d.subscribeAll()}).bind("message",
function(a){var b=0===a.event.indexOf("pusher_internal:");if(a.channel){var c;(c=d.channel(a.channel))&&c.emit(a.event,a.data)}b||d.global_emitter.emit(a.event,a.data)}).bind("disconnected",function(){d.channels.disconnect()}).bind("error",function(b){a.warn("Error",b)});a.instances.push(this);a.isReady&&d.connect()};a.instances=[];a.prototype={channel:function(a){return this.channels.find(a)},connect:function(){this.connection.connect()},disconnect:function(){this.connection.disconnect()},bind:function(a,
c){this.global_emitter.bind(a,c);return this},bind_all:function(a){this.global_emitter.bind_all(a);return this},subscribeAll:function(){for(channelName in this.channels.channels)this.channels.channels.hasOwnProperty(channelName)&&this.subscribe(channelName)},subscribe:function(a){var c=this,d=this.channels.add(a,this);"connected"===this.connection.state&&d.authorize(this.connection.socket_id,this.options,function(e,f){e?d.emit("pusher:subscription_error",f):c.send_event("pusher:subscribe",{channel:a,
auth:f.auth,channel_data:f.channel_data})});return d},unsubscribe:function(a){this.channels.remove(a);"connected"===this.connection.state&&this.send_event("pusher:unsubscribe",{channel:a})},send_event:function(a,c,d){return this.connection.send_event(a,c,d)},checkAppKey:function(){null!==this.key&&void 0!==this.key||a.warn("Warning","You must pass your app key when you instantiate Pusher.")}};a.Util={extend:function c(a,e){for(var f in e)a[f]=e[f]&&e[f].constructor&&e[f].constructor===Object?c(a[f]||
{},e[f]):e[f];return a},stringify:function(){for(var a=["Pusher"],d=0;d<arguments.length;d++)"string"===typeof arguments[d]?a.push(arguments[d]):void 0==window.JSON?a.push(arguments[d].toString()):a.push(JSON.stringify(arguments[d]));return a.join(" : ")},arrayIndexOf:function(a,d){var e=Array.prototype.indexOf;if(null==a)return-1;if(e&&a.indexOf===e)return a.indexOf(d);i=0;for(l=a.length;i<l;i++)if(a[i]===d)return i;return-1}};a.debug=function(){a.log&&a.log(a.Util.stringify.apply(this,arguments))};
a.warn=function(){window.console&&window.console.warn?window.console.warn(a.Util.stringify.apply(this,arguments)):a.log&&a.log(a.Util.stringify.apply(this,arguments))};a.VERSION="1.12.1";a.host="ws.pusherapp.com";a.ws_port=80;a.wss_port=443;a.channel_auth_endpoint="/pusher/auth";a.cdn_http="http://js.pusher.com/";a.cdn_https="https://d3dy5gmtp8yhk7.cloudfront.net/";a.dependency_suffix=".min";a.channel_auth_transport="ajax";a.activity_timeout=12E4;a.pong_timeout=3E4;a.isReady=!1;a.ready=function(){a.isReady=
!0;for(var c=0,d=a.instances.length;c<d;c++)a.instances[c].connect()};this.Pusher=a}).call(this);
(function(){function a(a){this.callbacks={};this.global_callbacks=[];this.failThrough=a}a.prototype.bind=function(a,c){this.callbacks[a]=this.callbacks[a]||[];this.callbacks[a].push(c);return this};a.prototype.unbind=function(a,c){if(this.callbacks[a]){var d=Pusher.Util.arrayIndexOf(this.callbacks[a],c);this.callbacks[a].splice(d,1)}return this};a.prototype.emit=function(a,c){for(var d=0;d<this.global_callbacks.length;d++)this.global_callbacks[d](a,c);var e=this.callbacks[a];if(e)for(d=0;d<e.length;d++)e[d](c);
else this.failThrough&&this.failThrough(a,c);return this};a.prototype.bind_all=function(a){this.global_callbacks.push(a);return this};this.Pusher.EventsDispatcher=a}).call(this);
(function(){function a(a,b,c){if(void 0!==b[a])b[a](c)}function b(a,b,f){c.EventsDispatcher.call(this);this.state=void 0;this.errors=[];this.stateActions=f;this.transitions=b;this.transition(a)}var c=this.Pusher;b.prototype.transition=function(b,e){var f=this.state,h=this.stateActions;if(f&&-1==c.Util.arrayIndexOf(this.transitions[f],b))throw this.emit("invalid_transition_attempt",{oldState:f,newState:b}),Error("Invalid transition ["+f+" to "+b+"]");a(f+"Exit",h,e);a(f+"To"+(b.substr(0,1).toUpperCase()+
b.substr(1)),h,e);a(b+"Pre",h,e);this.state=b;this.emit("state_change",{oldState:f,newState:b});a(b+"Post",h,e)};b.prototype.is=function(a){return this.state===a};b.prototype.isNot=function(a){return this.state!==a};c.Util.extend(b.prototype,c.EventsDispatcher.prototype);this.Pusher.Machine=b}).call(this);
(function(){var a=function(){var a=this;Pusher.EventsDispatcher.call(this);void 0!==window.addEventListener&&(window.addEventListener("online",function(){a.emit("online",null)},!1),window.addEventListener("offline",function(){a.emit("offline",null)},!1))};a.prototype.isOnLine=function(){return void 0===window.navigator.onLine?!0:window.navigator.onLine};Pusher.Util.extend(a.prototype,Pusher.EventsDispatcher.prototype);this.Pusher.NetInfo=a}).call(this);
(function(){function a(a){a.connectionWait=0;a.openTimeout="flash"===c.TransportType?5E3:2E3;a.connectedTimeout=2E3;a.connectionSecure=a.compulsorySecure;a.connectionAttempts=0}function b(b,m){function p(){C.connectionWait<g&&(C.connectionWait+=e);C.openTimeout<k&&(C.openTimeout+=f);C.connectedTimeout<n&&(C.connectedTimeout+=h);!0!==C.compulsorySecure&&(C.connectionSecure=!C.connectionSecure);C.connectionAttempts++}function u(){C._machine.transition("impermanentlyClosing")}function v(){C._activityTimer&&
clearTimeout(C._activityTimer);C._activityTimer=setTimeout(function(){C.send_event("pusher:ping",{});C._activityTimer=setTimeout(function(){C.socket.close()},C.options.pong_timeout||c.pong_timeout)},C.options.activity_timeout||c.activity_timeout)}function A(){var a=C.connectionWait;if(0===a&&C.connectedAt){var b=(new Date).getTime()-C.connectedAt;1E3>b&&(a=1E3-b)}return a}function D(){C._machine.transition("open")}function x(a){a=s(a);if(void 0!==a)if("pusher:connection_established"===a.event)C._machine.transition("connected",
a.data.socket_id);else if("pusher:error"===a.event){var b=a.data.code;C.emit("error",{type:"PusherError",data:{code:b,message:a.data.message}});4E3===b?(C.compulsorySecure=!0,C.connectionSecure=!0,C.options.encrypted=!0,u()):4100>b?C._machine.transition("permanentlyClosing"):4200>b?(C.connectionWait=1E3,C._machine.transition("waiting")):4300>b?u():C._machine.transition("permanentlyClosing")}}function B(a){v();a=s(a);if(void 0!==a){c.debug("Event recd",a);switch(a.event){case "pusher:error":C.emit("error",
{type:"PusherError",data:a.data});break;case "pusher:ping":C.send_event("pusher:pong",{})}C.emit("message",a)}}function s(a){try{var b=JSON.parse(a.data);if("string"===typeof b.data)try{b.data=JSON.parse(b.data)}catch(c){if(!(c instanceof SyntaxError))throw c;}return b}catch(d){C.emit("error",{type:"MessageParseError",error:d,data:a.data})}}function G(){C._machine.transition("waiting")}function K(a){C.emit("error",{type:"WebSocketError",error:a})}function J(a,b){var d=C.state;C.state=a;d!==a&&(c.debug("State changed",
d+" -> "+a),C.emit("state_change",{previous:d,current:a}),C.emit(a,b))}var C=this;c.EventsDispatcher.call(this);this.options=c.Util.extend({encrypted:!1},m);this.netInfo=new c.NetInfo;this.netInfo.bind("online",function(){C._machine.is("waiting")&&(C._machine.transition("connecting"),J("connecting"))});this.netInfo.bind("offline",function(){C._machine.is("connected")&&(C.socket.onclose=void 0,C.socket.onmessage=void 0,C.socket.onerror=void 0,C.socket.onopen=void 0,C.socket.close(),C.socket=void 0,
C._machine.transition("waiting"))});this._machine=new c.Machine("initialized",d,{initializedPre:function(){C.compulsorySecure=C.options.encrypted;C.key=b;C.socket=null;C.socket_id=null;C.state="initialized"},waitingPre:function(){0<C.connectionWait&&C.emit("connecting_in",C.connectionWait);C.netInfo.isOnLine()&&4>=C.connectionAttempts?J("connecting"):J("unavailable");C.netInfo.isOnLine()&&(C._waitingTimer=setTimeout(function(){C._machine.transition("connecting")},A()))},waitingExit:function(){clearTimeout(C._waitingTimer)},
connectingPre:function(){if(!1===C.netInfo.isOnLine())C._machine.transition("waiting"),J("unavailable");else{var a;a=c.ws_port;var b="ws://";if(C.connectionSecure||"https:"===document.location.protocol)a=c.wss_port,b="wss://";a=b+c.host+":"+a+"/app/"+C.key+"?protocol=5&client=js&version="+c.VERSION+"&flash="+("flash"===c.TransportType?"true":"false");c.debug("Connecting",a);C.socket=new c.Transport(a);C.socket.onopen=D;C.socket.onclose=G;C.socket.onerror=K;C._connectingTimer=setTimeout(u,C.openTimeout)}},
connectingExit:function(){clearTimeout(C._connectingTimer);C.socket.onopen=void 0},connectingToWaiting:function(){p()},connectingToImpermanentlyClosing:function(){p()},openPre:function(){C.socket.onmessage=x;C.socket.onerror=K;C.socket.onclose=G;C._openTimer=setTimeout(u,C.connectedTimeout)},openExit:function(){clearTimeout(C._openTimer);C.socket.onmessage=void 0},openToWaiting:function(){p()},openToImpermanentlyClosing:function(){p()},connectedPre:function(b){C.socket_id=b;C.socket.onmessage=B;C.socket.onerror=
K;C.socket.onclose=G;a(C);C.connectedAt=(new Date).getTime();v()},connectedPost:function(){J("connected")},connectedExit:function(){C._activityTimer&&clearTimeout(C._activityTimer);J("disconnected")},impermanentlyClosingPost:function(){C.socket&&(C.socket.onclose=G,C.socket.close())},permanentlyClosingPost:function(){C.socket?(C.socket.onclose=function(){a(C);C._machine.transition("permanentlyClosed")},C.socket.close()):(a(C),C._machine.transition("permanentlyClosed"))},failedPre:function(){J("failed");
c.debug("WebSockets are not available in this browser.")},permanentlyClosedPost:function(){J("disconnected")}})}var c=this.Pusher,d={initialized:["waiting","failed"],waiting:["connecting","permanentlyClosed"],connecting:["open","permanentlyClosing","impermanentlyClosing","waiting"],open:["connected","permanentlyClosing","impermanentlyClosing","waiting"],connected:["permanentlyClosing","waiting"],impermanentlyClosing:["waiting","permanentlyClosing"],permanentlyClosing:["permanentlyClosed"],permanentlyClosed:["waiting"],
failed:["permanentlyClosed"]},e=2E3,f=2E3,h=2E3,g=5*e,k=5*f,n=5*h;b.prototype.connect=function(){null===c.Transport||void 0===c.Transport?this._machine.transition("failed"):this._machine.is("initialized")?(a(this),this._machine.transition("waiting")):this._machine.is("waiting")&&!0===this.netInfo.isOnLine()?this._machine.transition("connecting"):this._machine.is("permanentlyClosed")&&(a(this),this._machine.transition("waiting"))};b.prototype.send=function(a){if(this._machine.is("connected")){var b=
this;setTimeout(function(){b.socket.send(a)},0);return!0}return!1};b.prototype.send_event=function(a,b,d){a={event:a,data:b};d&&(a.channel=d);c.debug("Event sent",a);return this.send(JSON.stringify(a))};b.prototype.disconnect=function(){this._machine.is("permanentlyClosed")||(this._machine.is("waiting")||this._machine.is("failed")?this._machine.transition("permanentlyClosed"):this._machine.transition("permanentlyClosing"))};c.Util.extend(b.prototype,c.EventsDispatcher.prototype);this.Pusher.Connection=
b}).call(this);
(function(){Pusher.Channels=function(){this.channels={}};Pusher.Channels.prototype={add:function(a,c){var d=this.find(a);d||(d=Pusher.Channel.factory(a,c),this.channels[a]=d);return d},find:function(a){return this.channels[a]},remove:function(a){delete this.channels[a]},disconnect:function(){for(var a in this.channels)this.channels[a].disconnect()}};Pusher.Channel=function(a,c){var d=this;Pusher.EventsDispatcher.call(this,function(c){Pusher.debug("No callbacks on "+a+" for "+c)});this.pusher=c;this.name=
a;this.subscribed=!1;this.bind("pusher_internal:subscription_succeeded",function(a){d.onSubscriptionSucceeded(a)})};Pusher.Channel.prototype={init:function(){},disconnect:function(){this.subscribed=!1;this.emit("pusher_internal:disconnected")},onSubscriptionSucceeded:function(){this.subscribed=!0;this.emit("pusher:subscription_succeeded")},authorize:function(a,c,d){return d(!1,{})},trigger:function(a,c){return this.pusher.send_event(a,c,this.name)}};Pusher.Util.extend(Pusher.Channel.prototype,Pusher.EventsDispatcher.prototype);
Pusher.Channel.PrivateChannel={authorize:function(a,c,d){var e=this;return(new Pusher.Channel.Authorizer(this,Pusher.channel_auth_transport,c)).authorize(a,function(a,b){a||e.emit("pusher_internal:authorized",b);d(a,b)})}};Pusher.Channel.PresenceChannel={init:function(){this.members=new a(this)},onSubscriptionSucceeded:function(){this.subscribed=!0}};var a=function(a){var c=this,d=function(){this._members_map={};this.count=0;this.me=null};d.call(this);a.bind("pusher_internal:authorized",function(d){var f=
JSON.parse(d.channel_data);a.bind("pusher_internal:subscription_succeeded",function(d){c._members_map=d.presence.hash;c.count=d.presence.count;c.me=c.get(f.user_id);a.emit("pusher:subscription_succeeded",c)})});a.bind("pusher_internal:member_added",function(d){null===c.get(d.user_id)&&c.count++;c._members_map[d.user_id]=d.user_info;a.emit("pusher:member_added",c.get(d.user_id))});a.bind("pusher_internal:member_removed",function(d){var f=c.get(d.user_id);f&&(delete c._members_map[d.user_id],c.count--,
a.emit("pusher:member_removed",f))});a.bind("pusher_internal:disconnected",function(){d.call(c)})};a.prototype={each:function(a){for(var c in this._members_map)a(this.get(c))},get:function(a){return this._members_map.hasOwnProperty(a)?{id:a,info:this._members_map[a]}:null}};Pusher.Channel.factory=function(a,c){var d=new Pusher.Channel(a,c);0===a.indexOf("private-")?Pusher.Util.extend(d,Pusher.Channel.PrivateChannel):0===a.indexOf("presence-")&&(Pusher.Util.extend(d,Pusher.Channel.PrivateChannel),
Pusher.Util.extend(d,Pusher.Channel.PresenceChannel));d.init();return d}}).call(this);
(function(){Pusher.Channel.Authorizer=function(a,b,c){this.channel=a;this.type=b;this.authOptions=(c||{}).auth||{}};Pusher.Channel.Authorizer.prototype={composeQuery:function(a){a="&socket_id="+encodeURIComponent(a)+"&channel_name="+encodeURIComponent(this.channel.name);for(var b in this.authOptions.params)a+="&"+encodeURIComponent(b)+"="+encodeURIComponent(this.authOptions.params[b]);return a},authorize:function(a,b){return Pusher.authorizers[this.type].call(this,a,b)}};Pusher.auth_callbacks={};
Pusher.authorizers={ajax:function(a,b){var c;c=Pusher.XHR?new Pusher.XHR:window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");c.open("POST",Pusher.channel_auth_endpoint,!0);c.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(var d in this.authOptions.headers)c.setRequestHeader(d,this.authOptions.headers[d]);c.onreadystatechange=function(){if(4==c.readyState)if(200==c.status){var a,d=!1;try{a=JSON.parse(c.responseText),d=!0}catch(h){b(!0,"JSON returned from webapp was invalid, yet status code was 200. Data was: "+
c.responseText)}d&&b(!1,a)}else Pusher.warn("Couldn't get auth info from your webapp",c.status),b(!0,c.status)};c.send(this.composeQuery(a));return c},jsonp:function(a,b){void 0!==this.authOptions.headers&&Pusher.warn("Warn","To send headers with the auth request, you must use AJAX, rather than JSONP.");var c=document.createElement("script");Pusher.auth_callbacks[this.channel.name]=function(a){b(!1,a)};c.src=Pusher.channel_auth_endpoint+"?callback="+encodeURIComponent("Pusher.auth_callbacks['"+this.channel.name+
"']")+this.composeQuery(a);var d=document.getElementsByTagName("head")[0]||document.documentElement;d.insertBefore(c,d.firstChild)}}}).call(this);
var _require=function(){var a;a=document.addEventListener?function(a,c){a.addEventListener("load",c,!1)}:function(a,c){a.attachEvent("onreadystatechange",function(){"loaded"!=a.readyState&&"complete"!=a.readyState||c()})};return function(b,c){function d(b,c){c=c||function(){};var d=document.getElementsByTagName("head")[0],h=document.createElement("script");h.setAttribute("src",b);h.setAttribute("type","text/javascript");h.setAttribute("async",!0);a(h,function(){var a=c;e++;f==e&&setTimeout(a,0)});
d.appendChild(h)}for(var e=0,f=b.length,h=0;h<f;h++)d(b[h],c)}}();
(function(){var a=("http:"==document.location.protocol?Pusher.cdn_http:Pusher.cdn_https)+Pusher.VERSION,b=[];void 0===window.JSON&&b.push(a+"/json2"+Pusher.dependency_suffix+".js");void 0===window.WebSocket&&void 0===window.MozWebSocket&&(window.WEB_SOCKET_DISABLE_AUTO_INITIALIZATION=!0,b.push(a+"/flashfallback"+Pusher.dependency_suffix+".js"));var c=function(){return void 0===window.WebSocket&&void 0===window.MozWebSocket?function(){void 0!==window.WebSocket&&void 0===window.MozWebSocket?(Pusher.Transport=
window.WebSocket,Pusher.TransportType="flash",window.WEB_SOCKET_SWF_LOCATION=a+"/WebSocketMain.swf",WebSocket.__addTask(function(){Pusher.ready()}),WebSocket.__initialize()):(Pusher.Transport=null,Pusher.TransportType="none",Pusher.ready())}:function(){Pusher.Transport=void 0!==window.MozWebSocket?window.MozWebSocket:window.WebSocket;Pusher.TransportType="native";Pusher.ready()}}(),d=function(a){var b=function(){document.body?a():setTimeout(b,0)};b()},e=function(){d(c)};0<b.length?_require(b,e):e()})();
jQuery.ui||function(a){function b(b,c,d,e){function f(d){d=a[b][c][d]||[];return"string"==typeof d?d.split(/,?\s+/):d}var g=f("getter");1==e.length&&"string"==typeof e[0]&&(g=g.concat(f("getterSetter")));return-1!=a.inArray(d,g)}var c=a.fn.remove,d=a.browser.mozilla&&1.9>parseFloat(a.browser.version);a.ui={version:"1.7.2",plugin:{add:function(b,c,d){b=a.ui[b].prototype;for(var e in d)b.plugins[e]=b.plugins[e]||[],b.plugins[e].push([c,d[e]])},call:function(a,b,c){if((b=a.plugins[b])&&a.element[0].parentNode)for(var d=
0;d<b.length;d++)a.options[b[d][0]]&&b[d][1].apply(a.element,c)}},contains:function(a,b){return document.compareDocumentPosition?a.compareDocumentPosition(b)&16:a!==b&&a.contains(b)},hasScroll:function(b,c){if("hidden"==a(b).css("overflow"))return!1;var d=c&&"left"==c?"scrollLeft":"scrollTop",e=!1;if(0<b[d])return!0;b[d]=1;e=0<b[d];b[d]=0;return e},isOverAxis:function(a,b,c){return a>b&&a<b+c},isOver:function(b,c,d,e,f,g){return a.ui.isOverAxis(b,d,f)&&a.ui.isOverAxis(c,e,g)},keyCode:{BACKSPACE:8,
CAPS_LOCK:20,COMMA:188,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38}};if(d){var e=a.attr,f=a.fn.removeAttr,h=/^aria-/,g=/^wairole:/;a.attr=function(a,b,c){var d=void 0!==c;return"role"==b?d?e.call(this,a,b,"wairole:"+c):(e.apply(this,arguments)||"").replace(g,""):h.test(b)?d?a.setAttributeNS("http://www.w3.org/2005/07/aaa",
b.replace(h,"aaa:"),c):e.call(this,a,b.replace(h,"aaa:")):e.apply(this,arguments)};a.fn.removeAttr=function(a){return h.test(a)?this.each(function(){this.removeAttributeNS("http://www.w3.org/2005/07/aaa",a.replace(h,""))}):f.call(this,a)}}a.fn.extend({remove:function(){a("*",this).add(this).each(function(){a(this).triggerHandler("remove")});return c.apply(this,arguments)},enableSelection:function(){return this.attr("unselectable","off").css("MozUserSelect","").unbind("selectstart.ui")},disableSelection:function(){return this.attr("unselectable",
"on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})},scrollParent:function(){var b;b=a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,
"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!b.length?a(document):b}});a.extend(a.expr[":"],{data:function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){var c=b.nodeName.toLowerCase(),d=a.attr(b,"tabindex");return(/input|select|textarea|button|object/.test(c)?!b.disabled:"a"==c||"area"==c?b.href||!isNaN(d):!isNaN(d))&&!a(b)["area"==c?"parents":"closest"](":hidden").length},tabbable:function(b){var c=a.attr(b,"tabindex");
return(isNaN(c)||0<=c)&&a(b).is(":focusable")}});a.widget=function(c,d){var e=c.split(".")[0];c=c.split(".")[1];a.fn[c]=function(d){var f="string"==typeof d,g=Array.prototype.slice.call(arguments,1);if(f&&"_"==d.substring(0,1))return this;if(f&&b(e,c,d,g)){var h=a.data(this[0],c);return h?h[d].apply(h,g):void 0}return this.each(function(){var b=a.data(this,c);b||f||a.data(this,c,new a[e][c](this,d))._init();b&&f&&a.isFunction(b[d])&&b[d].apply(b,g)})};a[e]=a[e]||{};a[e][c]=function(b,d){var f=this;
this.namespace=e;this.widgetName=c;this.widgetEventPrefix=a[e][c].eventPrefix||c;this.widgetBaseClass=e+"-"+c;this.options=a.extend({},a.widget.defaults,a[e][c].defaults,a.metadata&&a.metadata.get(b)[c],d);this.element=a(b).bind("setData."+c,function(a,c,d){if(a.target==b)return f._setData(c,d)}).bind("getData."+c,function(a,c){if(a.target==b)return f._getData(c)}).bind("remove",function(){return f.destroy()})};a[e][c].prototype=a.extend({},a.widget.prototype,d);a[e][c].getterSetter="option"};a.widget.prototype=
{_init:function(){},destroy:function(){this.element.removeData(this.widgetName).removeClass(this.widgetBaseClass+"-disabled "+this.namespace+"-state-disabled").removeAttr("aria-disabled")},option:function(b,c){var d=b,e=this;if("string"==typeof b){if(void 0===c)return this._getData(b);d={};d[b]=c}a.each(d,function(a,b){e._setData(a,b)})},_getData:function(a){return this.options[a]},_setData:function(a,b){this.options[a]=b;"disabled"==a&&this.element[b?"addClass":"removeClass"](this.widgetBaseClass+
"-disabled "+this.namespace+"-state-disabled").attr("aria-disabled",b)},enable:function(){this._setData("disabled",!1)},disable:function(){this._setData("disabled",!0)},_trigger:function(b,c,d){var e=this.options[b];b=b==this.widgetEventPrefix?b:this.widgetEventPrefix+b;c=a.Event(c);c.type=b;if(c.originalEvent){b=a.event.props.length;for(var f;b;)f=a.event.props[--b],c[f]=c.originalEvent[f]}this.element.trigger(c,d);return!(a.isFunction(e)&&!1===e.call(this.element[0],c,d)||c.isDefaultPrevented())}};
a.widget.defaults={disabled:!1};a.ui.mouse={_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(a){if(b._preventClickEvent)return b._preventClickEvent=!1,a.stopImmediatePropagation(),!1});a.browser.msie&&(this._mouseUnselectable=this.element.attr("unselectable"),this.element.attr("unselectable","on"));this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);a.browser.msie&&
this.element.attr("unselectable",this._mouseUnselectable)},_mouseDown:function(b){b.originalEvent=b.originalEvent||{};if(!b.originalEvent.mouseHandled){this._mouseStarted&&this._mouseUp(b);this._mouseDownEvent=b;var c=this,d=1==b.which,e="string"==typeof this.options.cancel?a(b.target).parents().add(b.target).filter(this.options.cancel).length:!1;if(!d||e||!this._mouseCapture(b))return!0;this.mouseDelayMet=!this.options.delay;this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){c.mouseDelayMet=
!0},this.options.delay));if(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=!1!==this._mouseStart(b),!this._mouseStarted))return b.preventDefault(),!0;this._mouseMoveDelegate=function(a){return c._mouseMove(a)};this._mouseUpDelegate=function(a){return c._mouseUp(a)};a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);a.browser.safari||b.preventDefault();return b.originalEvent.mouseHandled=!0}},_mouseMove:function(b){if(a.browser.msie&&
!b.button)return this._mouseUp(b);if(this._mouseStarted)return this._mouseDrag(b),b.preventDefault();this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&((this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,b))?this._mouseDrag(b):this._mouseUp(b));return!this._mouseStarted},_mouseUp:function(b){a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);this._mouseStarted&&(this._mouseStarted=!1,this._preventClickEvent=
b.target==this._mouseDownEvent.target,this._mouseStop(b));return!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(a){return this.mouseDelayMet},_mouseStart:function(a){},_mouseDrag:function(a){},_mouseStop:function(a){},_mouseCapture:function(a){return!0}};a.ui.mouse.defaults={cancel:null,distance:1,delay:0}}(jQuery);
(function(a){var b=0;a.widget("ui.tabs",{_init:function(){void 0!==this.options.deselectable&&(this.options.collapsible=this.options.deselectable);this._tabify(!0)},_setData:function(a,b){"selected"==a?this.options.collapsible&&b==this.options.selected||this.select(b):(this.options[a]=b,"deselectable"==a&&(this.options.collapsible=b),this._tabify())},_tabId:function(a){return a.title&&a.title.replace(/\s/g,"_").replace(/[^A-Za-z0-9\-_:\.]/g,"")||this.options.idPrefix+ ++b},_sanitizeSelector:function(a){return a.replace(/:/g,
"\\:")},_cookie:function(){var b=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+a.data(this.list[0]));return a.cookie.apply(null,[b].concat(a.makeArray(arguments)))},_ui:function(a,b){return{tab:a,panel:b,index:this.anchors.index(a)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var b=a(this);b.html(b.data("label.tabs")).removeData("label.tabs")})},_tabify:function(b){function d(b,c){b.css({display:""});
a.browser.msie&&c.opacity&&b[0].style.removeAttribute("filter")}this.list=this.element.children("ul:first");this.lis=a("li:has(a[href])",this.list);this.anchors=this.lis.map(function(){return a("a",this)[0]});this.panels=a([]);var e=this,f=this.options,h=/^#.+/;this.anchors.each(function(b,c){var d=a(c).attr("href"),g=d.split("#")[0],k;g&&(g===location.toString().split("#")[0]||(k=a("base")[0])&&g===k.href)&&(d=c.hash,c.href=d);h.test(d)?e.panels=e.panels.add(e._sanitizeSelector(d)):"#"!=d?(a.data(c,
"href.tabs",d),a.data(c,"load.tabs",d.replace(/#.*$/,"")),d=e._tabId(c),c.href="#"+d,g=a("#"+d),g.length||(g=a(f.panelTemplate).attr("id",d).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(e.panels[b-1]||e.list),g.data("destroy.tabs",!0)),e.panels=e.panels.add(g)):f.disabled.push(b)});b?(this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all"),this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.lis.addClass("ui-state-default ui-corner-top"),
this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom"),void 0===f.selected?(location.hash&&this.anchors.each(function(a,b){if(b.hash==location.hash)return f.selected=a,!1}),"number"!=typeof f.selected&&f.cookie&&(f.selected=parseInt(e._cookie(),10)),"number"!=typeof f.selected&&this.lis.filter(".ui-tabs-selected").length&&(f.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))),f.selected=f.selected||0):null===f.selected&&(f.selected=-1),f.selected=0<=f.selected&&this.anchors[f.selected]||
0>f.selected?f.selected:0,f.disabled=a.unique(f.disabled.concat(a.map(this.lis.filter(".ui-state-disabled"),function(a,b){return e.lis.index(a)}))).sort(),-1!=a.inArray(f.selected,f.disabled)&&f.disabled.splice(a.inArray(f.selected,f.disabled),1),this.panels.addClass("ui-tabs-hide"),this.lis.removeClass("ui-tabs-selected ui-state-active"),0<=f.selected&&this.anchors.length&&(this.panels.eq(f.selected).removeClass("ui-tabs-hide"),this.lis.eq(f.selected).addClass("ui-tabs-selected ui-state-active"),
e.element.queue("tabs",function(){e._trigger("show",null,e._ui(e.anchors[f.selected],e.panels[f.selected]))}),this.load(f.selected)),a(window).bind("unload",function(){e.lis.add(e.anchors).unbind(".tabs");e.lis=e.anchors=e.panels=null})):f.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"));this.element[f.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible");f.cookie&&this._cookie(f.selected,f.cookie);b=0;for(var g;g=this.lis[b];b++)a(g)[-1==a.inArray(b,f.disabled)||a(g).hasClass("ui-tabs-selected")?
"removeClass":"addClass"]("ui-state-disabled");!1===f.cache&&this.anchors.removeData("cache.tabs");this.lis.add(this.anchors).unbind(".tabs");if("mouseover"!=f.event){var k=function(a,b){b.is(":not(.ui-state-disabled)")&&b.addClass("ui-state-"+a)};this.lis.bind("mouseover.tabs",function(){k("hover",a(this))});this.lis.bind("mouseout.tabs",function(){a(this).removeClass("ui-state-hover")});this.anchors.bind("focus.tabs",function(){k("focus",a(this).closest("li"))});this.anchors.bind("blur.tabs",function(){a(this).closest("li").removeClass("ui-state-focus")})}var n,
q;f.fx&&(a.isArray(f.fx)?(n=f.fx[0],q=f.fx[1]):n=q=f.fx);var m=q?function(b,c){a(b).closest("li").removeClass("ui-state-default").addClass("ui-tabs-selected ui-state-active");c.hide().removeClass("ui-tabs-hide").animate(q,q.duration||"normal",function(){d(c,q);e._trigger("show",null,e._ui(b,c[0]))})}:function(b,c){a(b).closest("li").removeClass("ui-state-default").addClass("ui-tabs-selected ui-state-active");c.removeClass("ui-tabs-hide");e._trigger("show",null,e._ui(b,c[0]))},p=n?function(a,b){b.animate(n,
n.duration||"normal",function(){e.lis.removeClass("ui-tabs-selected ui-state-active").addClass("ui-state-default");b.addClass("ui-tabs-hide");d(b,n);e.element.dequeue("tabs")})}:function(a,b,c){e.lis.removeClass("ui-tabs-selected ui-state-active").addClass("ui-state-default");b.addClass("ui-tabs-hide");e.element.dequeue("tabs")};this.anchors.bind(f.event+".tabs",function(){var b=this,c=a(this).closest("li"),d=e.panels.filter(":not(.ui-tabs-hide)"),g=a(e._sanitizeSelector(this.hash));if(c.hasClass("ui-tabs-selected")&&
!f.collapsible||c.hasClass("ui-state-disabled")||c.hasClass("ui-state-processing")||!1===e._trigger("select",null,e._ui(this,g[0])))return this.blur(),!1;f.selected=e.anchors.index(this);e.abort();if(f.collapsible){if(c.hasClass("ui-tabs-selected"))return f.selected=-1,f.cookie&&e._cookie(f.selected,f.cookie),e.element.queue("tabs",function(){p(b,d)}).dequeue("tabs"),this.blur(),!1;if(!d.length)return f.cookie&&e._cookie(f.selected,f.cookie),e.element.queue("tabs",function(){m(b,g)}),e.load(e.anchors.index(this)),
this.blur(),!1}f.cookie&&e._cookie(f.selected,f.cookie);if(g.length)d.length&&e.element.queue("tabs",function(){p(b,d)}),e.element.queue("tabs",function(){m(b,g)}),e.load(e.anchors.index(this));else throw"jQuery UI Tabs: Mismatching fragment identifier.";a.browser.msie&&this.blur()});this.anchors.bind("click.tabs",function(){return!1})},destroy:function(){var b=this.options;this.abort();this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs");
this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all");this.anchors.each(function(){var b=a.data(this,"href.tabs");b&&(this.href=b);var c=a(this).unbind(".tabs");a.each(["href","load","cache"],function(a,b){c.removeData(b+".tabs")})});this.lis.unbind(".tabs").add(this.panels).each(function(){a.data(this,"destroy.tabs")?a(this).remove():a(this).removeClass("ui-state-default ui-corner-top ui-tabs-selected ui-state-active ui-state-hover ui-state-focus ui-state-disabled ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide")});
b.cookie&&this._cookie(null,b.cookie)},add:function(b,d,e){void 0===e&&(e=this.anchors.length);var f=this,h=this.options;d=a(h.tabTemplate.replace(/#\{href\}/g,b).replace(/#\{label\}/g,d));b=b.indexOf("#")?this._tabId(a("a",d)[0]):b.replace("#","");d.addClass("ui-state-default ui-corner-top").data("destroy.tabs",!0);var g=a("#"+b);g.length||(g=a(h.panelTemplate).attr("id",b).data("destroy.tabs",!0));g.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide");e>=this.lis.length?(d.appendTo(this.list),
g.appendTo(this.list[0].parentNode)):(d.insertBefore(this.lis[e]),g.insertBefore(this.panels[e]));h.disabled=a.map(h.disabled,function(a,b){return a>=e?++a:a});this._tabify();1==this.anchors.length&&(d.addClass("ui-tabs-selected ui-state-active"),g.removeClass("ui-tabs-hide"),this.element.queue("tabs",function(){f._trigger("show",null,f._ui(f.anchors[0],f.panels[0]))}),this.load(0));this._trigger("add",null,this._ui(this.anchors[e],this.panels[e]))},remove:function(b){var d=this.options,e=this.lis.eq(b).remove(),
f=this.panels.eq(b).remove();e.hasClass("ui-tabs-selected")&&1<this.anchors.length&&this.select(b+(b+1<this.anchors.length?1:-1));d.disabled=a.map(a.grep(d.disabled,function(a,d){return a!=b}),function(a,d){return a>=b?--a:a});this._tabify();this._trigger("remove",null,this._ui(e.find("a")[0],f[0]))},enable:function(b){var d=this.options;-1!=a.inArray(b,d.disabled)&&(this.lis.eq(b).removeClass("ui-state-disabled"),d.disabled=a.grep(d.disabled,function(a,d){return a!=b}),this._trigger("enable",null,
this._ui(this.anchors[b],this.panels[b])))},disable:function(a){var b=this.options;a!=b.selected&&(this.lis.eq(a).addClass("ui-state-disabled"),b.disabled.push(a),b.disabled.sort(),this._trigger("disable",null,this._ui(this.anchors[a],this.panels[a])))},select:function(a){"string"==typeof a?a=this.anchors.index(this.anchors.filter("[href$="+a+"]")):null===a&&(a=-1);-1==a&&this.options.collapsible&&(a=this.options.selected);this.anchors.eq(a).trigger(this.options.event+".tabs")},load:function(b){var d=
this,e=this.options,f=this.anchors.eq(b)[0],h=a.data(f,"load.tabs");this.abort();if(!h||0!==this.element.queue("tabs").length&&a.data(f,"cache.tabs"))this.element.dequeue("tabs");else{this.lis.eq(b).addClass("ui-state-processing");if(e.spinner){var g=a("span",f);g.data("label.tabs",g.html()).html(e.spinner)}this.xhr=a.ajax(a.extend({},e.ajaxOptions,{url:h,success:function(g,h){a(d._sanitizeSelector(f.hash)).html(g);d._cleanup();e.cache&&a.data(f,"cache.tabs",!0);d._trigger("load",null,d._ui(d.anchors[b],
d.panels[b]));try{e.ajaxOptions.success(g,h)}catch(q){}d.element.dequeue("tabs")}}))}},abort:function(){this.element.queue([]);this.panels.stop(!1,!0);this.xhr&&(this.xhr.abort(),delete this.xhr);this._cleanup()},url:function(a,b){this.anchors.eq(a).removeData("cache.tabs").data("load.tabs",b)},length:function(){return this.anchors.length}});a.extend(a.ui.tabs,{version:"1.7.2",getter:"length",defaults:{ajaxOptions:null,cache:!1,cookie:null,collapsible:!1,disabled:[],event:"click",fx:null,idPrefix:"ui-tabs-",
panelTemplate:"<div></div>",spinner:"<em>Loading&#8230;</em>",tabTemplate:'<li><a href="#{href}"><span>#{label}</span></a></li>'}});a.extend(a.ui.tabs.prototype,{rotation:null,rotate:function(a,b){var e=this,f=this.options,h=e._rotate||(e._rotate=function(b){clearTimeout(e.rotation);e.rotation=setTimeout(function(){var a=f.selected;e.select(++a<e.anchors.length?a:0)},a);b&&b.stopPropagation()}),g=e._unrotate||(e._unrotate=b?function(a){t=f.selected;h()}:function(a){a.clientX&&e.rotate(null)});a?(this.element.bind("tabsshow",
h),this.anchors.bind(f.event+".tabs",g),h()):(clearTimeout(e.rotation),this.element.unbind("tabsshow",h),this.anchors.unbind(f.event+".tabs",g),delete this._rotate,delete this._unrotate)}})})(jQuery);
(function(a){function b(b,c,d){var f=this;f.id=d;f.options=c;f.status={animated:!1,rendered:!1,disabled:!1,focused:!1};f.elements={target:b.addClass(f.options.style.classes.target),tooltip:null,wrapper:null,content:null,contentWrapper:null,title:null,button:null,tip:null,bgiframe:null};f.cache={mouse:{},position:{},toggle:0};f.timers={};a.extend(f,f.options.api,{show:function(b){function c(){"static"!==f.options.position.type&&f.focus();f.onShow.call(f,b);a.browser.msie&&f.elements.tooltip.get(0).style.removeAttribute("filter")}
var d;if(!f.status.rendered)return a.fn.qtip.log.error.call(f,2,a.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"show");if("none"!==f.elements.tooltip.css("display"))return f;f.elements.tooltip.stop(!0,!1);if(!1===f.beforeShow.call(f,b))return f;f.cache.toggle=1;"static"!==f.options.position.type&&f.updatePosition(b,0<f.options.show.effect.length);"object"==typeof f.options.show.solo?d=a(f.options.show.solo):!0===f.options.show.solo&&(d=a("div.qtip").not(f.elements.tooltip));d&&d.each(function(){!0===a(this).qtip("api").status.rendered&&
a(this).qtip("api").hide()});if("function"==typeof f.options.show.effect.type)f.options.show.effect.type.call(f.elements.tooltip,f.options.show.effect.length),f.elements.tooltip.queue(function(){c();a(this).dequeue()});else{switch(f.options.show.effect.type.toLowerCase()){case "fade":f.elements.tooltip.fadeIn(f.options.show.effect.length,c);break;case "slide":f.elements.tooltip.slideDown(f.options.show.effect.length,function(){c();"static"!==f.options.position.type&&f.updatePosition(b,!0)});break;
case "grow":f.elements.tooltip.show(f.options.show.effect.length,c);break;default:f.elements.tooltip.show(null,c)}f.elements.tooltip.addClass(f.options.style.classes.active)}return a.fn.qtip.log.error.call(f,1,a.fn.qtip.constants.EVENT_SHOWN,"show")},hide:function(b){function c(){f.onHide.call(f,b)}if(!f.status.rendered)return a.fn.qtip.log.error.call(f,2,a.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"hide");if("none"===f.elements.tooltip.css("display"))return f;clearTimeout(f.timers.show);f.elements.tooltip.stop(!0,
!1);if(!1===f.beforeHide.call(f,b))return f;f.cache.toggle=0;if("function"==typeof f.options.hide.effect.type)f.options.hide.effect.type.call(f.elements.tooltip,f.options.hide.effect.length),f.elements.tooltip.queue(function(){c();a(this).dequeue()});else{switch(f.options.hide.effect.type.toLowerCase()){case "fade":f.elements.tooltip.fadeOut(f.options.hide.effect.length,c);break;case "slide":f.elements.tooltip.slideUp(f.options.hide.effect.length,c);break;case "grow":f.elements.tooltip.hide(f.options.hide.effect.length,
c);break;default:f.elements.tooltip.hide(null,c)}f.elements.tooltip.removeClass(f.options.style.classes.active)}return a.fn.qtip.log.error.call(f,1,a.fn.qtip.constants.EVENT_HIDDEN,"hide")},updatePosition:function(b,c){var d,e,g,h,k,m,n;if(!f.status.rendered)return a.fn.qtip.log.error.call(f,2,a.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"updatePosition");if("static"==f.options.position.type)return a.fn.qtip.log.error.call(f,1,a.fn.qtip.constants.CANNOT_POSITION_STATIC,"updatePosition");e={position:{left:0,
top:0},dimensions:{height:0,width:0},corner:f.options.position.corner.target};g={position:f.getPosition(),dimensions:f.getDimensions(),corner:f.options.position.corner.tooltip};if("mouse"!==f.options.position.target){if("area"==f.options.position.target.get(0).nodeName.toLowerCase()){h=f.options.position.target.attr("coords").split(",");for(d=0;d<h.length;d++)h[d]=parseInt(h[d]);d=f.options.position.target.parent("map").attr("name");k=a('img[usemap="#'+d+'"]:first').offset();e.position={left:Math.floor(k.left+
h[0]),top:Math.floor(k.top+h[1])};switch(f.options.position.target.attr("shape").toLowerCase()){case "rect":e.dimensions={width:Math.ceil(Math.abs(h[2]-h[0])),height:Math.ceil(Math.abs(h[3]-h[1]))};break;case "circle":e.dimensions={width:h[2]+1,height:h[2]+1};break;case "poly":e.dimensions={width:h[0],height:h[1]};for(d=0;d<h.length;d++)0==d%2?(h[d]>e.dimensions.width&&(e.dimensions.width=h[d]),h[d]<h[0]&&(e.position.left=Math.floor(k.left+h[d]))):(h[d]>e.dimensions.height&&(e.dimensions.height=h[d]),
h[d]<h[1]&&(e.position.top=Math.floor(k.top+h[d])));e.dimensions.width-=e.position.left-k.left;e.dimensions.height-=e.position.top-k.top;break;default:return a.fn.qtip.log.error.call(f,4,a.fn.qtip.constants.INVALID_AREA_SHAPE,"updatePosition")}e.dimensions.width-=2;e.dimensions.height-=2}else 1===f.options.position.target.add(document.body).length?(e.position={left:a(document).scrollLeft(),top:a(document).scrollTop()},e.dimensions={height:a(window).height(),width:a(window).width()}):("undefined"!==
typeof f.options.position.target.attr("qtip")?e.position=f.options.position.target.qtip("api").cache.position:e.position=f.options.position.target.offset(),e.dimensions={height:f.options.position.target.outerHeight(),width:f.options.position.target.outerWidth()});m=a.extend({},e.position);-1!==e.corner.search(/right/i)&&(m.left+=e.dimensions.width);-1!==e.corner.search(/bottom/i)&&(m.top+=e.dimensions.height);-1!==e.corner.search(/((top|bottom)Middle)|center/)&&(m.left+=e.dimensions.width/2);-1!==
e.corner.search(/((left|right)Middle)|center/)&&(m.top+=e.dimensions.height/2)}else e.position=m={left:f.cache.mouse.x,top:f.cache.mouse.y},e.dimensions={height:1,width:1};-1!==g.corner.search(/right/i)&&(m.left-=g.dimensions.width);-1!==g.corner.search(/bottom/i)&&(m.top-=g.dimensions.height);-1!==g.corner.search(/((top|bottom)Middle)|center/)&&(m.left-=g.dimensions.width/2);-1!==g.corner.search(/((left|right)Middle)|center/)&&(m.top-=g.dimensions.height/2);h=a.browser.msie?1:0;a.browser.msie&&parseInt(a.browser.version.charAt(0));
0<f.options.style.border.radius&&(-1!==g.corner.search(/Left/)?m.left-=f.options.style.border.radius:-1!==g.corner.search(/Right/)&&(m.left+=f.options.style.border.radius),-1!==g.corner.search(/Top/)?m.top-=f.options.style.border.radius:-1!==g.corner.search(/Bottom/)&&(m.top+=f.options.style.border.radius));h&&(-1!==g.corner.search(/top/)?m.top-=h:-1!==g.corner.search(/bottom/)&&(m.top+=h),-1!==g.corner.search(/left/)?m.left-=h:-1!==g.corner.search(/right/)&&(m.left+=h),-1!==g.corner.search(/leftMiddle|rightMiddle/)&&
(m.top-=1));!0===f.options.position.adjust.screen&&(m=q.call(f,m,e,g));"mouse"===f.options.position.target&&!0===f.options.position.adjust.mouse&&(e=!0===f.options.position.adjust.screen&&f.elements.tip?f.elements.tip.attr("rel"):f.options.position.corner.tooltip,m.left+=-1!==e.search(/right/i)?-6:6,m.top+=-1!==e.search(/bottom/i)?-6:6);!f.elements.bgiframe&&a.browser.msie&&6==parseInt(a.browser.version.charAt(0))&&a("select, object").each(function(){n=a(this).offset();n.bottom=n.top+a(this).height();
n.right=n.left+a(this).width();m.top+g.dimensions.height>=n.top&&m.left+g.dimensions.width>=n.left&&D.call(f)});m.left+=f.options.position.adjust.x;m.top+=f.options.position.adjust.y;e=f.getPosition();if(m.left!=e.left||m.top!=e.top){e=f.beforePositionUpdate.call(f,b);if(!1===e)return f;f.cache.position=m;!0===c?(f.status.animated=!0,f.elements.tooltip.animate(m,200,"swing",function(){f.status.animated=!1})):f.elements.tooltip.css(m);f.onPositionUpdate.call(f,b);"undefined"!==typeof b&&b.type&&"mousemove"!==
b.type&&a.fn.qtip.log.error.call(f,1,a.fn.qtip.constants.EVENT_POSITION_UPDATED,"updatePosition")}return f},updateWidth:function(b){var c;if(!f.status.rendered)return a.fn.qtip.log.error.call(f,2,a.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"updateWidth");if(b&&"number"!==typeof b)return a.fn.qtip.log.error.call(f,2,"newWidth must be of type number","updateWidth");c=f.elements.contentWrapper.siblings().add(f.elements.tip).add(f.elements.button);b||("number"==typeof f.options.style.width.value?b=f.options.style.width.value:
(f.elements.tooltip.css({width:"auto"}),c.hide(),a.browser.msie&&f.elements.wrapper.add(f.elements.contentWrapper.children()).css({zoom:"normal"}),b=f.getDimensions().width+1,f.options.style.width.value||(b>f.options.style.width.max&&(b=f.options.style.width.max),b<f.options.style.width.min&&(b=f.options.style.width.min))));0!==b%2&&(b-=1);f.elements.tooltip.width(b);c.show();f.options.style.border.radius&&f.elements.tooltip.find(".qtip-betweenCorners").each(function(c){a(this).width(b-2*f.options.style.border.radius)});
a.browser.msie&&(f.elements.wrapper.add(f.elements.contentWrapper.children()).css({zoom:"1"}),f.elements.wrapper.width(b),f.elements.bgiframe&&f.elements.bgiframe.width(b).height(f.getDimensions.height));return a.fn.qtip.log.error.call(f,1,a.fn.qtip.constants.EVENT_WIDTH_UPDATED,"updateWidth")},updateStyle:function(b){var c,d,g,k;if(!f.status.rendered)return a.fn.qtip.log.error.call(f,2,a.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"updateStyle");if("string"!==typeof b||!a.fn.qtip.styles[b])return a.fn.qtip.log.error.call(f,
2,a.fn.qtip.constants.STYLE_NOT_DEFINED,"updateStyle");f.options.style=u.call(f,a.fn.qtip.styles[b],f.options.user.style);f.elements.content.css(m(f.options.style));!1!==f.options.content.title.text&&f.elements.title.css(m(f.options.style.title,!0));f.elements.contentWrapper.css({borderColor:f.options.style.border.color});!1!==f.options.style.tip.corner&&(a("<canvas>").get(0).getContext?(b=f.elements.tooltip.find(".qtip-tip canvas:first"),d=b.get(0).getContext("2d"),d.clearRect(0,0,300,300),g=b.parent("div[rel]:first").attr("rel"),
k=v(g,f.options.style.tip.size.width,f.options.style.tip.size.height),h.call(f,b,k,f.options.style.tip.color||f.options.style.border.color)):a.browser.msie&&(b=f.elements.tooltip.find('.qtip-tip [nodeName="shape"]'),b.attr("fillcolor",f.options.style.tip.color||f.options.style.border.color)));0<f.options.style.border.radius&&(f.elements.tooltip.find(".qtip-betweenCorners").css({backgroundColor:f.options.style.border.color}),a("<canvas>").get(0).getContext?(c=A(f.options.style.border.radius),f.elements.tooltip.find(".qtip-wrapper canvas").each(function(){d=
a(this).get(0).getContext("2d");d.clearRect(0,0,300,300);g=a(this).parent("div[rel]:first").attr("rel");e.call(f,a(this),c[g],f.options.style.border.radius,f.options.style.border.color)})):a.browser.msie&&f.elements.tooltip.find('.qtip-wrapper [nodeName="arc"]').each(function(){a(this).attr("fillcolor",f.options.style.border.color)}));return a.fn.qtip.log.error.call(f,1,a.fn.qtip.constants.EVENT_STYLE_UPDATED,"updateStyle")},updateContent:function(b,c){function d(){f.updateWidth();!1!==c&&("static"!==
f.options.position.type&&f.updatePosition(f.elements.tooltip.is(":visible"),!0),!1!==f.options.style.tip.corner&&g.call(f))}var e,h,k;if(!f.status.rendered)return a.fn.qtip.log.error.call(f,2,a.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"updateContent");if(!b)return a.fn.qtip.log.error.call(f,2,a.fn.qtip.constants.NO_CONTENT_PROVIDED,"updateContent");e=f.beforeContentUpdate.call(f,b);if("string"==typeof e)b=e;else if(!1===e)return;a.browser.msie&&f.elements.contentWrapper.children().css({zoom:"normal"});
b.jquery&&0<b.length?b.clone(!0).appendTo(f.elements.content).show():f.elements.content.html(b);h=f.elements.content.find("img[complete=false]");0<h.length?(k=0,h.each(function(b){a('<img src="'+a(this).attr("src")+'" />').load(function(){++k==h.length&&d()})})):d();f.onContentUpdate.call(f);return a.fn.qtip.log.error.call(f,1,a.fn.qtip.constants.EVENT_CONTENT_UPDATED,"loadContent")},loadContent:function(b,c,d){function e(b){f.onContentLoad.call(f);a.fn.qtip.log.error.call(f,1,a.fn.qtip.constants.EVENT_CONTENT_LOADED,
"loadContent");f.updateContent(b)}if(!f.status.rendered)return a.fn.qtip.log.error.call(f,2,a.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"loadContent");if(!1===f.beforeContentLoad.call(f))return f;"post"==d?a.post(b,c,e):a.get(b,c,e);return f},updateTitle:function(b){if(!f.status.rendered)return a.fn.qtip.log.error.call(f,2,a.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"updateTitle");if(!b)return a.fn.qtip.log.error.call(f,2,a.fn.qtip.constants.NO_CONTENT_PROVIDED,"updateTitle");returned=f.beforeTitleUpdate.call(f);
if(!1===returned)return f;f.elements.button&&(f.elements.button=f.elements.button.clone(!0));f.elements.title.html(b);f.elements.button&&f.elements.title.prepend(f.elements.button);f.onTitleUpdate.call(f);return a.fn.qtip.log.error.call(f,1,a.fn.qtip.constants.EVENT_TITLE_UPDATED,"updateTitle")},focus:function(b){var c,d,e;if(!f.status.rendered)return a.fn.qtip.log.error.call(f,2,a.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"focus");if("static"==f.options.position.type)return a.fn.qtip.log.error.call(f,
1,a.fn.qtip.constants.CANNOT_FOCUS_STATIC,"focus");c=parseInt(f.elements.tooltip.css("z-index"));d=6E3+a("div.qtip[qtip]").length-1;if(!f.status.focused&&c!==d){c=f.beforeFocus.call(f,b);if(!1===c)return f;a("div.qtip[qtip]").not(f.elements.tooltip).each(function(){!0===a(this).qtip("api").status.rendered&&(e=parseInt(a(this).css("z-index")),"number"==typeof e&&-1<e&&a(this).css({zIndex:parseInt(a(this).css("z-index"))-1}),a(this).qtip("api").status.focused=!1)});f.elements.tooltip.css({zIndex:d});
f.status.focused=!0;f.onFocus.call(f,b);a.fn.qtip.log.error.call(f,1,a.fn.qtip.constants.EVENT_FOCUSED,"focus")}return f},disable:function(b){if(!f.status.rendered)return a.fn.qtip.log.error.call(f,2,a.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"disable");b?f.status.disabled?a.fn.qtip.log.error.call(f,1,a.fn.qtip.constants.TOOLTIP_ALREADY_DISABLED,"disable"):(f.status.disabled=!0,a.fn.qtip.log.error.call(f,1,a.fn.qtip.constants.EVENT_DISABLED,"disable")):f.status.disabled?(f.status.disabled=!1,a.fn.qtip.log.error.call(f,
1,a.fn.qtip.constants.EVENT_ENABLED,"disable")):a.fn.qtip.log.error.call(f,1,a.fn.qtip.constants.TOOLTIP_ALREADY_ENABLED,"disable");return f},destroy:function(){var b,c;if(!1===f.beforeDestroy.call(f))return f;f.status.rendered?(f.options.show.when.target.unbind("mousemove.qtip",f.updatePosition),f.options.show.when.target.unbind("mouseout.qtip",f.hide),f.options.show.when.target.unbind(f.options.show.when.event+".qtip"),f.options.hide.when.target.unbind(f.options.hide.when.event+".qtip"),f.elements.tooltip.unbind(f.options.hide.when.event+
".qtip"),f.elements.tooltip.unbind("mouseover.qtip",f.focus),f.elements.tooltip.remove()):f.options.show.when.target.unbind(f.options.show.when.event+".qtip-create");if("object"==typeof f.elements.target.data("qtip")&&(c=f.elements.target.data("qtip").interfaces,"object"==typeof c&&0<c.length))for(b=0;b<c.length-1;b++)c[b].id==f.id&&c.splice(b,1);delete a.fn.qtip.interfaces[f.id];"object"==typeof c&&0<c.length?f.elements.target.data("qtip").current=c.length-1:f.elements.target.removeData("qtip");
f.onDestroy.call(f);a.fn.qtip.log.error.call(f,1,a.fn.qtip.constants.EVENT_DESTROYED,"destroy");return f.elements.target},getPosition:function(){var b,c;if(!f.status.rendered)return a.fn.qtip.log.error.call(f,2,a.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"getPosition");(b="none"!==f.elements.tooltip.css("display")?!1:!0)&&f.elements.tooltip.css({visiblity:"hidden"}).show();c=f.elements.tooltip.offset();b&&f.elements.tooltip.css({visiblity:"visible"}).hide();return c},getDimensions:function(){var b,c;
if(!f.status.rendered)return a.fn.qtip.log.error.call(f,2,a.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"getDimensions");(b=f.elements.tooltip.is(":visible")?!1:!0)&&f.elements.tooltip.css({visiblity:"hidden"}).show();c={height:f.elements.tooltip.outerHeight(),width:f.elements.tooltip.outerWidth()};b&&f.elements.tooltip.css({visiblity:"visible"}).hide();return c}})}function c(){var b,c,e;this.beforeRender.call(this);this.status.rendered=!0;this.elements.tooltip='<div qtip="'+this.id+'" class="qtip '+(this.options.style.classes.tooltip||
this.options.style)+'"style="display:none; -moz-border-radius:0; -webkit-border-radius:0; border-radius:0;position:'+this.options.position.type+';">  <div class="qtip-wrapper" style="position:relative; overflow:hidden; text-align:left;">    <div class="qtip-contentWrapper" style="overflow:hidden;">       <div class="qtip-content '+this.options.style.classes.content+'"></div></div></div></div>';this.elements.tooltip=a(this.elements.tooltip);this.elements.tooltip.appendTo(this.options.position.container);
this.elements.tooltip.data("qtip",{current:0,interfaces:[this]});this.elements.wrapper=this.elements.tooltip.children("div:first");this.elements.contentWrapper=this.elements.wrapper.children("div:first").css({background:this.options.style.background});this.elements.content=this.elements.contentWrapper.children("div:first").css(m(this.options.style));a.browser.msie&&this.elements.wrapper.add(this.elements.content).css({zoom:1});"unfocus"==this.options.hide.when.event&&this.elements.tooltip.attr("unfocus",
!0);"number"==typeof this.options.style.width.value&&this.updateWidth();a("<canvas>").get(0).getContext||a.browser.msie?(0<this.options.style.border.radius?d.call(this):this.elements.contentWrapper.css({border:this.options.style.border.width+"px solid "+this.options.style.border.color}),!1!==this.options.style.tip.corner&&f.call(this)):(this.elements.contentWrapper.css({border:this.options.style.border.width+"px solid "+this.options.style.border.color}),this.options.style.border.radius=0,this.options.style.tip.corner=
!1,a.fn.qtip.log.error.call(this,2,a.fn.qtip.constants.CANVAS_VML_NOT_SUPPORTED,"render"));"string"==typeof this.options.content.text&&0<this.options.content.text.length||this.options.content.text.jquery&&0<this.options.content.text.length?b=this.options.content.text:"string"==typeof this.elements.target.attr("title")&&0<this.elements.target.attr("title").length?(b=this.elements.target.attr("title").replace("\\n","<br />"),this.elements.target.attr("title","")):"string"==typeof this.elements.target.attr("alt")&&
0<this.elements.target.attr("alt").length?(b=this.elements.target.attr("alt").replace("\\n","<br />"),this.elements.target.attr("alt","")):(b=" ",a.fn.qtip.log.error.call(this,1,a.fn.qtip.constants.NO_VALID_CONTENT,"render"));!1!==this.options.content.title.text&&k.call(this);this.updateContent(b);n.call(this);!0===this.options.show.ready&&this.show();!1!==this.options.content.url&&(b=this.options.content.url,c=this.options.content.data,e=this.options.content.method||"get",this.loadContent(b,c,e));
this.onRender.call(this);a.fn.qtip.log.error.call(this,1,a.fn.qtip.constants.EVENT_RENDERED,"render")}function d(){var b,c,d,f,g,h,k,m,n;b=this;b.elements.wrapper.find(".qtip-borderBottom, .qtip-borderTop").remove();d=b.options.style.border.width;f=b.options.style.border.radius;g=b.options.style.border.color||b.options.style.tip.color;h=A(f);k={};for(c in h)k[c]='<div rel="'+c+'" style="'+(-1!==c.search(/Left/)?"left":"right")+":0; position:absolute; height:"+f+"px; width:"+f+'px; overflow:hidden; line-height:0.1px; font-size:1px">',
a("<canvas>").get(0).getContext?k[c]+='<canvas height="'+f+'" width="'+f+'" style="vertical-align: top"></canvas>':a.browser.msie&&(m=2*f+3,k[c]+='<v:arc stroked="false" fillcolor="'+g+'" startangle="'+h[c][0]+'" endangle="'+h[c][1]+'" style="width:'+m+"px; height:"+m+"px; margin-top:"+(-1!==c.search(/bottom/)?-2:-1)+"px; margin-left:"+(-1!==c.search(/Right/)?h[c][2]-3.5:-1)+'px; vertical-align:top; display:inline-block; behavior:url(#default#VML)"></v:arc>'),k[c]+="</div>";c=b.getDimensions().width-
2*Math.max(d,f);c='<div class="qtip-betweenCorners" style="height:'+f+"px; width:"+c+"px; overflow:hidden; background-color:"+g+'; line-height:0.1px; font-size:1px;">';b.elements.wrapper.prepend('<div class="qtip-borderTop" dir="ltr" style="height:'+f+"px; margin-left:"+f+'px; line-height:0.1px; font-size:1px; padding:0;">'+k.topLeft+k.topRight+c);b.elements.wrapper.append('<div class="qtip-borderBottom" dir="ltr" style="height:'+f+"px; margin-left:"+f+'px; line-height:0.1px; font-size:1px; padding:0;">'+
k.bottomLeft+k.bottomRight+c);a("<canvas>").get(0).getContext?b.elements.wrapper.find("canvas").each(function(){n=h[a(this).parent("[rel]:first").attr("rel")];e.call(b,a(this),n,f,g)}):a.browser.msie&&b.elements.tooltip.append('<v:image style="behavior:url(#default#VML);"></v:image>');k=Math.max(f,f+(d-f));d=Math.max(d-f,0);b.elements.contentWrapper.css({border:"0px solid "+g,borderWidth:d+"px "+k+"px"})}function e(a,b,c,d){a=a.get(0).getContext("2d");a.fillStyle=d;a.beginPath();a.arc(b[0],b[1],c,
0,2*Math.PI,!1);a.fill()}function f(b){var c,d,e,f;null!==this.elements.tip&&this.elements.tip.remove();c=this.options.style.tip.color||this.options.style.border.color;!1!==this.options.style.tip.corner&&(b||(b=this.options.style.tip.corner),d=v(b,this.options.style.tip.size.width,this.options.style.tip.size.height),this.elements.tip='<div class="'+this.options.style.classes.tip+'" dir="ltr" rel="'+b+'" style="position:absolute; height:'+this.options.style.tip.size.height+"px; width:"+this.options.style.tip.size.width+
'px; margin:0 auto; line-height:0.1px; font-size:1px;">',a("<canvas>").get(0).getContext?this.elements.tip+='<canvas height="'+this.options.style.tip.size.height+'" width="'+this.options.style.tip.size.width+'"></canvas>':a.browser.msie&&(e=this.options.style.tip.size.width+","+this.options.style.tip.size.height,f="m"+d[0][0]+","+d[0][1],f+=" l"+d[1][0]+","+d[1][1],f+=" "+d[2][0]+","+d[2][1],this.elements.tip+='<v:shape fillcolor="'+c+'" stroked="false" filled="true" path="'+(f+" xe")+'" coordsize="'+
e+'" style="width:'+this.options.style.tip.size.width+"px; height:"+this.options.style.tip.size.height+"px; line-height:0.1px; display:inline-block; behavior:url(#default#VML); vertical-align:"+(-1!==b.search(/top/)?"bottom":"top")+'"></v:shape>',this.elements.tip+='<v:image style="behavior:url(#default#VML);"></v:image>',this.elements.contentWrapper.css("position","relative")),this.elements.tooltip.prepend(this.elements.tip+"</div>"),this.elements.tip=this.elements.tooltip.find("."+this.options.style.classes.tip).eq(0),
a("<canvas>").get(0).getContext&&h.call(this,this.elements.tip.find("canvas:first"),d,c),-1!==b.search(/top/)&&a.browser.msie&&6===parseInt(a.browser.version.charAt(0))&&this.elements.tip.css({marginTop:-4}),g.call(this,b))}function h(a,b,c){a=a.get(0).getContext("2d");a.fillStyle=c;a.beginPath();a.moveTo(b[0][0],b[0][1]);a.lineTo(b[1][0],b[1][1]);a.lineTo(b[2][0],b[2][1]);a.fill()}function g(b){var c;!1!==this.options.style.tip.corner&&this.elements.tip&&(b||(b=this.elements.tip.attr("rel")),c=positionAdjust=
a.browser.msie?1:0,this.elements.tip.css(b.match(/left|right|top|bottom/)[0],0),-1!==b.search(/top|bottom/)?(a.browser.msie&&(positionAdjust=6===parseInt(a.browser.version.charAt(0))?-1!==b.search(/top/)?-3:1:-1!==b.search(/top/)?1:2),-1!==b.search(/Middle/)?this.elements.tip.css({left:"50%",marginLeft:-(this.options.style.tip.size.width/2)}):-1!==b.search(/Left/)?this.elements.tip.css({left:this.options.style.border.radius-c}):-1!==b.search(/Right/)&&this.elements.tip.css({right:this.options.style.border.radius+
c}),-1!==b.search(/top/)?this.elements.tip.css({top:-positionAdjust}):this.elements.tip.css({bottom:positionAdjust})):-1!==b.search(/left|right/)&&(a.browser.msie&&(positionAdjust=6===parseInt(a.browser.version.charAt(0))?1:-1!==b.search(/left/)?1:2),-1!==b.search(/Middle/)?this.elements.tip.css({top:"50%",marginTop:-(this.options.style.tip.size.height/2)}):-1!==b.search(/Top/)?this.elements.tip.css({top:this.options.style.border.radius-c}):-1!==b.search(/Bottom/)&&this.elements.tip.css({bottom:this.options.style.border.radius+
c}),-1!==b.search(/left/)?this.elements.tip.css({left:-positionAdjust}):this.elements.tip.css({right:positionAdjust})),b="padding-"+b.match(/left|right|top|bottom/)[0],c=this.options.style.tip.size[-1!==b.search(/left|right/)?"width":"height"],this.elements.tooltip.css("padding",0),this.elements.tooltip.css(b,c),a.browser.msie&&6==parseInt(a.browser.version.charAt(0))&&(b=parseInt(this.elements.tip.css("margin-top"))||0,b+=parseInt(this.elements.content.css("margin-top"))||0,this.elements.tip.css({marginTop:b})))}
function k(){var b=this;null!==b.elements.title&&b.elements.title.remove();b.elements.title=a('<div class="'+b.options.style.classes.title+'">').css(m(b.options.style.title,!0)).css({zoom:a.browser.msie?1:0}).prependTo(b.elements.contentWrapper);b.options.content.title.text&&b.updateTitle.call(b,b.options.content.title.text);!1!==b.options.content.title.button&&"string"==typeof b.options.content.title.button&&(b.elements.button=a('<a class="'+b.options.style.classes.button+'" style="float:right; position: relative"></a>').css(m(b.options.style.button,
!0)).html(b.options.content.title.button).prependTo(b.elements.title).click(function(a){b.status.disabled||b.hide(a)}))}function n(){function b(c){!0!==d.status.disabled&&("inactive"==d.options.hide.when.event&&(a(g).each(function(){f.bind(this+".qtip-inactive",h);d.elements.content.bind(this+".qtip-inactive",h)}),h()),clearTimeout(d.timers.show),clearTimeout(d.timers.hide),d.timers.show=setTimeout(function(){d.show(c)},d.options.show.delay))}function c(b){if(!0!==d.status.disabled){if(!0===d.options.hide.fixed&&
-1!==d.options.hide.when.event.search(/mouse(out|leave)/i)&&0<a(b.relatedTarget).parents("div.qtip[qtip="+d.id+"]").length)return b.stopPropagation(),b.preventDefault(),clearTimeout(d.timers.hide),!1;clearTimeout(d.timers.show);clearTimeout(d.timers.hide);d.elements.tooltip.stop(!0,!0);d.timers.hide=setTimeout(function(){d.hide(b)},d.options.hide.delay)}}var d,e,f,g;d=this;e=d.options.show.when.target;f=d.options.hide.when.target;d.options.hide.fixed&&(f=f.add(d.elements.tooltip));if("inactive"==
d.options.hide.when.event){var h=function(b){!0!==d.status.disabled&&(clearTimeout(d.timers.inactive),d.timers.inactive=setTimeout(function(){a(g).each(function(){f.unbind(this+".qtip-inactive");d.elements.content.unbind(this+".qtip-inactive")});d.hide(b)},d.options.hide.delay))};g="click dblclick mousedown mouseup mousemove mouseout mouseenter mouseleave mouseover".split(" ")}else!0===d.options.hide.fixed&&d.elements.tooltip.bind("mouseover.qtip",function(){!0!==d.status.disabled&&clearTimeout(d.timers.hide)});
1===d.options.show.when.target.add(d.options.hide.when.target).length&&d.options.show.when.event==d.options.hide.when.event&&"inactive"!==d.options.hide.when.event||"unfocus"==d.options.hide.when.event?(d.cache.toggle=0,e.bind(d.options.show.when.event+".qtip",function(a){0==d.cache.toggle?b(a):c(a)})):(e.bind(d.options.show.when.event+".qtip",b),"inactive"!==d.options.hide.when.event&&f.bind(d.options.hide.when.event+".qtip",c));-1!==d.options.position.type.search(/(fixed|absolute)/)&&d.elements.tooltip.bind("mouseover.qtip",
d.focus);"mouse"===d.options.position.target&&"static"!==d.options.position.type&&e.bind("mousemove.qtip",function(a){d.cache.mouse={x:a.pageX,y:a.pageY};!1===d.status.disabled&&!0===d.options.position.adjust.mouse&&"static"!==d.options.position.type&&"none"!==d.elements.tooltip.css("display")&&d.updatePosition(a)})}function q(b,c,d){var e,g,h,k,m,n,q,p;if("center"==d.corner)return c.position;p=a.extend({},b);n=m=!1;e=p.left<a.fn.qtip.cache.screen.scroll.left;g=p.left+d.dimensions.width+2>=a.fn.qtip.cache.screen.width+
a.fn.qtip.cache.screen.scroll.left;h=p.top<a.fn.qtip.cache.screen.scroll.top;k=p.top+d.dimensions.height+2>=a.fn.qtip.cache.screen.height+a.fn.qtip.cache.screen.scroll.top;q=e&&(-1!=d.corner.search(/right/i)||-1==d.corner.search(/right/i)&&!g);e=g&&(-1!=d.corner.search(/left/i)||-1==d.corner.search(/left/i)&&!e);h=h&&-1==d.corner.search(/top/i);k=k&&-1==d.corner.search(/bottom/i);q?(p.left="mouse"!==this.options.position.target?c.position.left+c.dimensions.width:this.cache.mouse.x,m="Left"):e&&(p.left=
"mouse"!==this.options.position.target?c.position.left-d.dimensions.width:this.cache.mouse.x-d.dimensions.width,m="Right");h?(p.top="mouse"!==this.options.position.target?c.position.top+c.dimensions.height:this.cache.mouse.y,n="top"):k&&(p.top="mouse"!==this.options.position.target?c.position.top-d.dimensions.height:this.cache.mouse.y-d.dimensions.height,n="bottom");0>p.left&&(p.left=b.left,m=!1);0>p.top&&(p.top=b.top,n=!1);!1!==this.options.style.tip.corner&&(p.corner=new String(d.corner),!1!==m&&
(p.corner=p.corner.replace(/Left|Right|Middle/,m)),!1!==n&&(p.corner=p.corner.replace(/top|bottom/,n)),p.corner!==this.elements.tip.attr("rel")&&f.call(this,p.corner));return p}function m(b,c){var d,e;d=a.extend(!0,{},b);for(e in d)!0===c&&-1!==e.search(/(tip|classes)/i)?delete d[e]:c||-1===e.search(/(width|border|tip|title|classes|user)/i)||delete d[e];return d}function p(a){"object"!==typeof a.tip&&(a.tip={corner:a.tip});"object"!==typeof a.tip.size&&(a.tip.size={width:a.tip.size,height:a.tip.size});
"object"!==typeof a.border&&(a.border={width:a.border});"object"!==typeof a.width&&(a.width={value:a.width});"string"==typeof a.width.max&&(a.width.max=parseInt(a.width.max.replace(/([0-9]+)/i,"$1")));"string"==typeof a.width.min&&(a.width.min=parseInt(a.width.min.replace(/([0-9]+)/i,"$1")));"number"==typeof a.tip.size.x&&(a.tip.size.width=a.tip.size.x,delete a.tip.size.x);"number"==typeof a.tip.size.y&&(a.tip.size.height=a.tip.size.y,delete a.tip.size.y);return a}function u(){var b,c;c=[!0,{}];for(b=
0;b<arguments.length;b++)c.push(arguments[b]);for(b=[a.extend.apply(a,c)];"string"==typeof b[0].name;)b.unshift(p(a.fn.qtip.styles[b[0].name]));b.unshift(!0,{classes:{tooltip:"qtip-"+(arguments[0].name||"defaults")}},a.fn.qtip.styles.defaults);b=a.extend.apply(a,b);c=a.browser.msie?1:0;b.tip.size.width+=c;b.tip.size.height+=c;0<b.tip.size.width%2&&(b.tip.size.width+=1);0<b.tip.size.height%2&&(b.tip.size.height+=1);!0===b.tip.corner&&(b.tip.corner="center"===this.options.position.corner.tooltip?!1:
this.options.position.corner.tooltip);return b}function v(a,b,c){b={bottomRight:[[0,0],[b,c],[b,0]],bottomLeft:[[0,0],[b,0],[0,c]],topRight:[[0,c],[b,0],[b,c]],topLeft:[[0,0],[0,c],[b,c]],topMiddle:[[0,c],[b/2,0],[b,c]],bottomMiddle:[[0,0],[b,0],[b/2,c]],rightMiddle:[[0,0],[b,c/2],[0,c]],leftMiddle:[[b,0],[b,c],[0,c/2]]};b.leftTop=b.bottomRight;b.rightTop=b.bottomLeft;b.leftBottom=b.topRight;b.rightBottom=b.topLeft;return b[a]}function A(b){var c;a("<canvas>").get(0).getContext?c={topLeft:[b,b],topRight:[0,
b],bottomLeft:[b,0],bottomRight:[0,0]}:a.browser.msie&&(c={topLeft:[-90,90,0],topRight:[-90,90,-b],bottomLeft:[90,270,0],bottomRight:[90,270,-b]});return c}function D(){var a;a=this.getDimensions();this.elements.bgiframe=this.elements.wrapper.prepend('<iframe class="qtip-bgiframe" frameborder="0" tabindex="-1" src="javascript:false" style="display:block; position:absolute; z-index:-1; filter:alpha(opacity=\'0\'); border: 1px solid red; height:'+a.height+"px; width:"+a.width+'px" />').children(".qtip-bgiframe:first")}
a.fn.qtip=function(d,e){var f,g,h,k,m,n,q,A;if("string"==typeof d){"object"!==typeof a(this).data("qtip")&&a.fn.qtip.log.error.call(self,1,a.fn.qtip.constants.NO_TOOLTIP_PRESENT,!1);if("api"==d)return a(this).data("qtip").interfaces[a(this).data("qtip").current];if("interfaces"==d)return a(this).data("qtip").interfaces}else{d||(d={});if("object"!==typeof d.content||d.content.jquery&&0<d.content.length)d.content={text:d.content};"object"!==typeof d.content.title&&(d.content.title={text:d.content.title});
"object"!==typeof d.position&&(d.position={corner:d.position});"object"!==typeof d.position.corner&&(d.position.corner={target:d.position.corner,tooltip:d.position.corner});"object"!==typeof d.show&&(d.show={when:d.show});"object"!==typeof d.show.when&&(d.show.when={event:d.show.when});"object"!==typeof d.show.effect&&(d.show.effect={type:d.show.effect});"object"!==typeof d.hide&&(d.hide={when:d.hide});"object"!==typeof d.hide.when&&(d.hide.when={event:d.hide.when});"object"!==typeof d.hide.effect&&
(d.hide.effect={type:d.hide.effect});"object"!==typeof d.style&&(d.style={name:d.style});d.style=p(d.style);k=a.extend(!0,{},a.fn.qtip.defaults,d);k.style=u.call({options:k},k.style);k.user=a.extend(!0,{},d)}return a(this).each(function(){if("string"==typeof d){if(n=d.toLowerCase(),h=a(this).qtip("interfaces"),"object"==typeof h)if(!0===e&&"destroy"==n)for(;0<h.length;)h[h.length-1].destroy();else for(!0!==e&&(h=[a(this).qtip("api")]),f=0;f<h.length;f++)"destroy"==n?h[f].destroy():!0===h[f].status.rendered&&
("show"==n?h[f].show():"hide"==n?h[f].hide():"focus"==n?h[f].focus():"disable"==n?h[f].disable(!0):"enable"==n&&h[f].disable(!1))}else{q=a.extend(!0,{},k);q.hide.effect.length=k.hide.effect.length;q.show.effect.length=k.show.effect.length;!1===q.position.container&&(q.position.container=a(document.body));!1===q.position.target&&(q.position.target=a(this));!1===q.show.when.target&&(q.show.when.target=a(this));!1===q.hide.when.target&&(q.hide.when.target=a(this));g=a.fn.qtip.interfaces.length;for(f=
0;f<g;f++)if("undefined"==typeof a.fn.qtip.interfaces[f]){g=f;break}m=new b(a(this),q,g);a.fn.qtip.interfaces[g]=m;"object"==typeof a(this).data("qtip")?("undefined"===typeof a(this).attr("qtip")&&(a(this).data("qtip").current=a(this).data("qtip").interfaces.length),a(this).data("qtip").interfaces.push(m)):a(this).data("qtip",{current:0,interfaces:[m]});!1===q.content.prerender&&!1!==q.show.when.event&&!0!==q.show.ready?q.show.when.target.bind(q.show.when.event+".qtip-"+g+"-create",{qtip:g},function(b){A=
a.fn.qtip.interfaces[b.data.qtip];A.options.show.when.target.unbind(A.options.show.when.event+".qtip-"+b.data.qtip+"-create");A.cache.mouse={x:b.pageX,y:b.pageY};c.call(A);A.options.show.when.target.trigger(A.options.show.when.event)}):(m.cache.mouse={x:q.show.when.target.offset().left,y:q.show.when.target.offset().top},c.call(m))}})};a(document).ready(function(){a.fn.qtip.cache={screen:{scroll:{left:a(window).scrollLeft(),top:a(window).scrollTop()},width:a(window).width(),height:a(window).height()}};
var b;a(window).bind("resize scroll",function(c){clearTimeout(b);b=setTimeout(function(){"scroll"===c.type?a.fn.qtip.cache.screen.scroll={left:a(window).scrollLeft(),top:a(window).scrollTop()}:(a.fn.qtip.cache.screen.width=a(window).width(),a.fn.qtip.cache.screen.height=a(window).height());for(i=0;i<a.fn.qtip.interfaces.length;i++){var b=a.fn.qtip.interfaces[i];!0===b.status.rendered&&("static"!==b.options.position.type||b.options.position.adjust.scroll&&"scroll"===c.type||b.options.position.adjust.resize&&
"resize"===c.type)&&b.updatePosition(c,!0)}},100)});a(document).bind("mousedown.qtip",function(b){0===a(b.target).parents("div.qtip").length&&a(".qtip[unfocus]").each(function(){var c=a(this).qtip("api");a(this).is(":visible")&&!c.status.disabled&&1<a(b.target).add(c.elements.target).length&&c.hide(b)})})});a.fn.qtip.interfaces=[];a.fn.qtip.log={error:function(){return this}};a.fn.qtip.constants={};a.fn.qtip.defaults={content:{prerender:!1,text:!1,url:!1,data:null,title:{text:!1,button:!1}},position:{target:!1,
corner:{target:"bottomRight",tooltip:"topLeft"},adjust:{x:0,y:0,mouse:!0,screen:!1,scroll:!0,resize:!0},type:"absolute",container:!1},show:{when:{target:!1,event:"mouseover"},effect:{type:"fade",length:100},delay:140,solo:!1,ready:!1},hide:{when:{target:!1,event:"mouseout"},effect:{type:"fade",length:100},delay:0,fixed:!1},api:{beforeRender:function(){},onRender:function(){},beforePositionUpdate:function(){},onPositionUpdate:function(){},beforeShow:function(){},onShow:function(){},beforeHide:function(){},
onHide:function(){},beforeContentUpdate:function(){},onContentUpdate:function(){},beforeContentLoad:function(){},onContentLoad:function(){},beforeTitleUpdate:function(){},onTitleUpdate:function(){},beforeDestroy:function(){},onDestroy:function(){},beforeFocus:function(){},onFocus:function(){}}};a.fn.qtip.styles={defaults:{background:"white",color:"#111",overflow:"hidden",textAlign:"left",width:{min:0,max:250},padding:"5px 9px",border:{width:1,radius:0,color:"#d3d3d3"},tip:{corner:!1,color:!1,size:{width:13,
height:13},opacity:1},title:{background:"#e1e1e1",fontWeight:"bold",padding:"7px 12px"},button:{cursor:"pointer"},classes:{target:"",tip:"qtip-tip",title:"qtip-title",button:"qtip-button",content:"qtip-content",active:"qtip-active"}},cream:{border:{width:3,radius:0,color:"#F9E98E"},title:{background:"#F0DE7D",color:"#A27D35"},background:"#FBF7AA",color:"#A27D35",classes:{tooltip:"qtip-cream"}},light:{border:{width:3,radius:0,color:"#E2E2E2"},title:{background:"#f1f1f1",color:"#454545"},background:"white",
color:"#454545",classes:{tooltip:"qtip-light"}},dark:{border:{width:3,radius:0,color:"#303030"},title:{background:"#404040",color:"#f3f3f3"},background:"#505050",color:"#f3f3f3",classes:{tooltip:"qtip-dark"}},red:{border:{width:3,radius:0,color:"#CE6F6F"},title:{background:"#f28279",color:"#9C2F2F"},background:"#F79992",color:"#9C2F2F",classes:{tooltip:"qtip-red"}},green:{border:{width:3,radius:0,color:"#A9DB66"},title:{background:"#b9db8c",color:"#58792E"},background:"#CDE6AC",color:"#58792E",classes:{tooltip:"qtip-green"}},
blue:{border:{width:3,radius:0,color:"#ADD9ED"},title:{background:"#D0E9F5",color:"#5E99BD"},background:"#E5F6FE",color:"#4D9FBF",classes:{tooltip:"qtip-blue"}}}})(jQuery);
(function(a){function b(b){if(a.facebox.settings.inited)return!0;a.facebox.settings.inited=!0;a(document).trigger("init.facebox");e();var c=a.facebox.settings.imageTypes.join("|");a.facebox.settings.imageTypesRegexp=new RegExp("\\.("+c+")(\\?.*)?$","i");b&&a.extend(a.facebox.settings,b);a("body").append(a.facebox.settings.faceboxHtml);var d=[new Image,new Image];d[1].src=a.facebox.settings.loadingImage;a("#facebox").find(".b:first, .bl").each(function(){d.push(new Image);d.slice(-1).src=a(this).css("background-image").replace(/url\((.+)\)/,
"$1")});a("#facebox .close").click(a.facebox.close)}function c(){var a,b;self.pageYOffset?(b=self.pageYOffset,a=self.pageXOffset):document.documentElement&&document.documentElement.scrollTop?(b=document.documentElement.scrollTop,a=document.documentElement.scrollLeft):document.body&&(b=document.body.scrollTop,a=document.body.scrollLeft);return[a,b]}function d(){var a;self.innerHeight?a=self.innerHeight:document.documentElement&&document.documentElement.clientHeight?a=document.documentElement.clientHeight:
document.body&&(a=document.body.clientHeight);return a}function e(){var b=a.facebox.settings;b.loadingImage=b.loading_image||b.loadingImage;b.imageTypes=b.image_types||b.imageTypes;b.faceboxHtml=b.facebox_html||b.faceboxHtml}function f(b,c){if(b.match(/#/)){var d=window.location.href.split("#")[0],d=b.replace(d,"");"#"!=d&&a.facebox.reveal(a(d).html(),c)}else b.match(a.facebox.settings.imageTypesRegexp)?h(b,c):g(b,c)}function h(b,c){var d=new Image;d.onload=function(){a.facebox.reveal('<div class="image"><img src="'+
d.src+'" /></div>',c)};d.src=b}function g(b,c){a.facebox.jqxhr=a.get(b,function(b){a.facebox.reveal(b,c)})}function k(){return 0==a.facebox.settings.overlay||null===a.facebox.settings.opacity}function n(){if(!k())return 0==a("#facebox_overlay").length&&a("body").append('<div id="facebox_overlay"></div>'),a("#facebox_overlay").hide().addClass("facebox_overlayBG").css("opacity",a.facebox.settings.opacity).click(function(){a(document).trigger("close.facebox")}).show(),!1}function q(){if(!k())return a("#facebox_overlay").removeClass("facebox_overlayBG"),
setTimeout(function(){a("#facebox_overlay").remove()},250),!1}a.facebox=function(b,c){a.facebox.loading(b.settings||[]);b.ajax?g(b.ajax,c):b.image?h(b.image,c):b.div?f(b.div,c):a.isFunction(b)?b.call(a):a.facebox.reveal(b,c)};a.extend(a.facebox,{settings:{opacity:.5,overlay:!0,loadingImage:"/images/ajax-loader-button-grey.gif",closeImage:"",imageTypes:["png","jpg","jpeg","gif"],faceboxHtml:'    <div id="facebox" class="facebox_container mecha--deprecated" style="display:none;">       <div class="popup">         <div class="content">         </div>         <a href="#" class="close"></a>       </div>     </div>'},
loading:function(){b();if(1==a("#facebox .loading").length)return!0;n();a("#facebox .content").empty().append('<div class="loading"><img src="'+a.facebox.settings.loadingImage+'"/></div>');a("#facebox").show().css({top:c()[1]+d()/10,left:a(window).width()/2-a("#facebox .popup").outerWidth()/2});a(document).bind("keydown.facebox",function(b){27==b.keyCode&&a.facebox.close();return!0});a(document).trigger("loading.facebox")},reveal:function(b,c){a(document).trigger("beforeReveal.facebox");c&&a("#facebox .content").addClass(c);
a("#facebox .content").empty().append(b);a("#facebox .popup").children().fadeIn("normal");a("#facebox").css("left",a(window).width()/2-a("#facebox .popup").outerWidth()/2);a(document).trigger("reveal.facebox").trigger("afterReveal.facebox")},close:function(){a(document).trigger("close.facebox");return!1}});a.fn.facebox=function(c){function d(){a.facebox.loading(!0);var b=this.rel.match(/facebox\[?\.(\w+)\]?/);b&&(b=b[1]);f(this.href,b);return!1}if(0!=a(this).length)return b(c),this.bind("click.facebox",
d)};a(document).bind("close.facebox",function(){a.facebox.jqxhr&&(a.facebox.jqxhr.abort(),a.facebox.jqxhr=null);a(document).unbind("keydown.facebox");a("#facebox").fadeOut(function(){a("#facebox .content").removeClass().addClass("content");a("#facebox .loading").remove();a(document).trigger("afterClose.facebox")});q()})})(jQuery);
(function(){var a=function(){var a={},c=function(c,e,f){c=c.split(".");for(var h=0;h<c.length-1;h++)f[c[h]]||(f[c[h]]={}),f=f[c[h]];f[c[h]]="function"===typeof e?e.isClass?e:function(){return e.apply(a,arguments)}:e};return{extend:function(d,e,f){"function"===typeof d&&(f=e,e=d,d="");d&&(d+=".");e=e.call(a);for(var h in e){var g=d+h,k=e[h],n=f;c(g,k,a);n&&c(g,k,window.filepicker)}},internal:function(c){c.apply(a,arguments)}}}();if(window.filepicker)for(attr in a)window.filepicker[attr]=a[attr];else window.filepicker=
a})();
filepicker.extend("ajax",function(){var a=this,b=function(c,d){var e=[],k;for(k in c){var n=c[k];d&&(k=d+"["+k+"]");var q;switch(a.util.typeOf(n)){case "object":q=b(n,k);break;case "array":q={};for(var m=0;m<n.length;m++)q[m]=n[m];q=b(q,k);break;default:q=k+"="+encodeURIComponent(n)}null!==n&&e.push(q)}return e.join("&")},c=function(){try{return new window.XMLHttpRequest}catch(a){try{return new window.ActiveXObject("Msxml2.XMLHTTP")}catch(b){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(c){return null}}}},d=
function(d,h){d=d||"";var g=h.method?h.method.toUpperCase():"POST",k=h.success||function(){},n=h.error||function(){},q=void 0===h.async?!0:h.async,m=h.data||null,p=void 0===h.processData?!0:h.processData,u=h.headers||{},v=a.util.parseUrl(d),A=window.location.protocol+"//"+window.location.host!==v.origin,D=!1;m&&p&&(m=b(h.data));var x;if(h.xhr)x=h.xhr;else if(x=c(),!x)return h.error("Ajax not allowed"),x;if(A&&window.XDomainRequest&&!("withCredentials"in x))return e(d,h);h.progress&&x.upload&&x.upload.addEventListener("progress",
function(a){a.lengthComputable&&h.progress(Math.round(95*a.loaded/a.total))},!1);x.onreadystatechange=function(){if(4==x.readyState&&!D){h.progress&&h.progress(100);if(200<=x.status&&300>x.status){var b=x.responseText;if(h.json)try{b=a.json.decode(b)}catch(c){B.call(x,"Invalid json: "+b);return}k(b,x.status,x)}else B.call(x,x.responseText);D=!0}};var B=function(a){D||(h.progress&&h.progress(100),D=!0,400==this.status?n("bad_params",this.status,this):403==this.status?n("not_authorized",this.status,
this):404==this.status?n("not_found",this.status,this):A?4==this.readyState&&0===this.status?n("CORS_not_allowed",this.status,this):n("CORS_error",this.status,this):n(a,this.status,this))};x.onerror=B;m&&"GET"==g&&(d+=(-1!=d.indexOf("?")?"&":"?")+m,m=null);x.open(g,d,q);h.json?x.setRequestHeader("Accept","application/json, text/javascript"):x.setRequestHeader("Accept","text/javascript, text/html, application/xml, text/xml, */*");q=u["Content-Type"]||u["content-type"];m&&p&&("POST"==g||"PUT"==g)&&
void 0==q&&x.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=utf-8");if(u)for(var s in u)x.setRequestHeader(s,u[s]);x.send(m);return x},e=function(c,d){if(!window.XDomainRequest)return null;var e=d.method?d.method.toUpperCase():"POST",k=d.success||function(){},n=d.error||function(){},q=d.data||{};"http:"==window.location.protocol?c=c.replace("https:","http:"):"https:"==window.location.protocol&&(c=c.replace("http:","https:"));if(d.async)throw new a.FilepickerException("Asyncronous Cross-domain requests are not supported");
"GET"!=e&&"POST"!=e&&(q._method=e,e="POST");!1!==d.processData&&(q=q?b(q):null);q&&"GET"==e&&(c+=(0<=c.indexOf("?")?"&":"?")+q,q=null);c+=(0<=c.indexOf("?")?"&":"?")+"_xdr=true&_cacheBust="+a.util.getId();var m=new window.XDomainRequest;m.onload=function(){var b=m.responseText;d.progress&&d.progress(100);if(d.json)try{b=a.json.decode(b)}catch(c){n("Invalid json: "+b,200,m);return}k(b,200,m)};m.onerror=function(){d.progress&&d.progress(100);n(m.responseText||"CORS_error",this.status||500,this)};m.onprogress=
function(){};m.ontimeout=function(){};m.timeout=3E4;m.open(e,c,!0);m.send(q);return m};return{get:function(a,b){b.method="GET";d(a,b)},post:function(b,c){c.method="POST";b+=(0<=b.indexOf("?")?"&":"?")+"_cacheBust="+a.util.getId();d(b,c)},request:d}});
filepicker.extend("base64",function(){_keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return{encode:function(a,b){var c="",d,e,f,h,g,k,n=0;if(b||void 0===b){e=a.replace(/\r\n/g,"\n");f="";for(h=0;h<e.length;h++)d=e.charCodeAt(h),128>d?f+=String.fromCharCode(d):(127<d&&2048>d?f+=String.fromCharCode(d>>6|192):(f+=String.fromCharCode(d>>12|224),f+=String.fromCharCode(d>>6&63|128)),f+=String.fromCharCode(d&63|128));a=f}for(;n<a.length;)d=a.charCodeAt(n),e=a.charCodeAt(n+1),
f=a.charCodeAt(n+2),n+=3,h=d>>2,d=(d&3)<<4|e>>4,g=(e&15)<<2|f>>6,k=f&63,isNaN(e)?g=k=64:isNaN(f)&&(k=64),c=c+_keyStr.charAt(h)+_keyStr.charAt(d)+_keyStr.charAt(g)+_keyStr.charAt(k);return c},decode:function(a,b){b=b||void 0===b;var c="",d,e,f,h,g,k=0;for(a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");k<a.length;)d=_keyStr.indexOf(a.charAt(k)),e=_keyStr.indexOf(a.charAt(k+1)),h=_keyStr.indexOf(a.charAt(k+2)),g=_keyStr.indexOf(a.charAt(k+3)),k+=4,d=d<<2|e>>4,e=(e&15)<<4|h>>2,f=(h&3)<<6|g,c+=String.fromCharCode(d),
64!=h&&(c+=String.fromCharCode(e)),64!=g&&(c+=String.fromCharCode(f));if(b){h="";for(k=c1=c2=g=0;g<c.length;)k=c.charCodeAt(g),128>k?(h+=String.fromCharCode(k),g++):191<k&&224>k?(c2=c.charCodeAt(g+1),h+=String.fromCharCode((k&31)<<6|c2&63),g+=2):(c2=c.charCodeAt(g+1),c3=c.charCodeAt(g+2),h+=String.fromCharCode((k&15)<<12|(c2&63)<<6|c3&63),g+=3);c=h}return c}}},!0);
filepicker.extend("browser",function(){return{isIOS:function(){return!!(navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/iPad/i))},isAndroid:function(){return!!navigator.userAgent.match(/Android/i)},isIE7:function(){return!!navigator.userAgent.match(/MSIE 7\.0/i)}}});
filepicker.extend("comm",function(){var a=this,b=function(b){b.origin==a.urls.BASE&&(b=a.json.parse(b.data),a.handlers.run(b))},c=!1;return{openChannel:function(){if(void 0===window.frames.filepicker_comm_iframe){if(!c)if(c=!0,window.addEventListener)window.addEventListener("message",b,!1);else if(window.attachEvent)window.attachEvent("onmessage",b);else throw new a.FilepickerException("Unsupported browser");var d;d=document.createElement("iframe");d.id=d.name="filepicker_comm_iframe";d.src=a.urls.COMM;
d.style.display="none";document.body.appendChild(d)}},closeChannel:function(){if(window.removeEventListener)window.removeEventListener("message",b,!1);else if(window.attachEvent)window.detachEvent("onmessage",b);else throw new a.FilepickerException("Unsupported browser");if(c){c=!1;for(var d=document.getElementsByName("filepicker_comm_iframe"),e=0;e<d.length;e++)d[e].parentNode.removeChild(d[e]);try{delete window.frames.filepicker_comm_iframe}catch(f){}}}}});
filepicker.extend("comm_fallback",function(){var a=this,b="",c=function(){d()},d=function(){if(void 0===window.frames.host_comm_iframe){var c;c=document.createElement("iframe");c.id=c.name="host_comm_iframe";b=c.src=a.urls.constructHostCommFallback();c.style.display="none";var d=function(){b=c.contentWindow.location.href;if(void 0===window.frames.filepicker_comm_iframe){var d;d=document.createElement("iframe");d.id=d.name="filepicker_comm_iframe";d.src=a.urls.FP_COMM_FALLBACK+"?host_url="+encodeURIComponent(b);
d.style.display="none";document.body.appendChild(d)}e||(e=!0,f=window.setInterval(g,200))};c.attachEvent?c.attachEvent("onload",d):c.onload=d;document.body.appendChild(c)}},e=!1,f=void 0,h="",g=function(){var b=window.frames.filepicker_comm_iframe;if(b&&(b=b.frames.host_comm_iframe)&&((b=b.location.hash)&&"#"==b.charAt(0)&&(b=b.substr(1)),b!==h&&(h=b))){var c;try{c=a.json.parse(b)}catch(d){}c&&a.handlers.run(c)}},k=function(){window.clearInterval(f);if(e){e=!1;for(var a=document.getElementsByName("filepicker_comm_iframe"),
b=0;b<a.length;b++)a[b].parentNode.removeChild(a[b]);try{delete window.frames.filepicker_comm_iframe}catch(c){}a=document.getElementsByName("host_comm_iframe");for(b=0;b<a.length;b++)a[b].parentNode.removeChild(a[b]);try{delete window.frames.host_comm_iframe}catch(d){}}},n=!("postMessage"in window);n&&(a.comm={openChannel:c,closeChannel:k});return{openChannel:c,closeChannel:k,isEnabled:n}});
filepicker.extend("conversions",function(){var a=this,b={width:"number",height:"number",fit:"string",format:"string",watermark:"string",watermark_size:"number",watermark_position:"string",align:"string",crop:"string or array",quality:"number",text:"string",text_font:"string",text_size:"number",text_color:"string",text_align:"string",text_padding:"number",policy:"string",signature:"string",storeLocation:"string",storePath:"string"},c=function(c){var e,f;for(f in c){e=!1;for(var h in b)if(f==h&&(e=
!0,-1===b[h].indexOf(a.util.typeOf(c[f]))))throw new a.FilepickerException("Conversion parameter "+f+" is not the right type: "+c[f]+". Should be a "+b[h]);if(!e)throw new a.FilepickerException("Conversion parameter "+f+" is not a valid parameter.");}};return{convert:function(b,e,f,h,g){c(e);e.crop&&a.util.isArray(e.crop)&&(e.crop=e.crop.join(","));a.ajax.post(b+"/convert",{data:e,json:!0,success:function(b){f(a.util.standardizeFPFile(b))},error:function(b,c,d){"not_found"==b?h(new a.errors.FPError(141)):
"bad_params"==b?h(new a.errors.FPError(142)):"not_authorized"==b?h(new a.errors.FPError(403)):h(new a.errors.FPError(143))},progress:g})}}});filepicker.extend("cookies",function(){var a=this,b=function(b){return function(d){"ThirdPartyCookies"===d.type&&(a.cookies.THIRD_PARTY_COOKIES=!!d.payload,b&&"function"===typeof b&&b(!!d.payload))}};return{checkThirdParty:function(c){c=b(c);a.handlers.attach("cookies",c);a.comm.openChannel()}}});
filepicker.extend("dragdrop",function(){var a=this,b=function(){return(!!window.FileReader||0<=navigator.userAgent.indexOf("Safari"))&&"draggable"in document.createElement("span")};return{enabled:b,makeDropPane:function(c,d){if(!c)throw new a.FilepickerException("No DOM element found to create drop pane");if(c.jquery){if(0===c.length)throw new a.FilepickerException("No DOM element found to create drop pane");c=c[0]}if(!b())return a.util.console.error("Your browser doesn't support drag-drop functionality"),
!1;d=d||{};var e=d.dragEnter||function(){},f=d.dragLeave||function(){},h=d.onStart||function(){},g=d.onSuccess||function(){},k=d.onError||function(){},n=d.onProgress||function(){},q=d.mimetypes;q||(q=d.mimetype?[d.mimetype]:["*/*"]);"string"==a.util.typeOf(q)&&(q=q.split(","));var m=d.extensions;m||d.extension&&(m=[d.extensions]);"string"==a.util.typeOf(m)&&(m=m.split(","));c.addEventListener("dragenter",function(a){e();a.stopPropagation();a.preventDefault();return!1},!1);c.addEventListener("dragleave",
function(a){f();a.stopPropagation();a.preventDefault();return!1},!1);c.addEventListener("dragover",function(a){a.preventDefault();return!1},!1);c.addEventListener("drop",function(b){b.stopPropagation();b.preventDefault();var c,d,e;if(b.dataTransfer.items)for(d=b.dataTransfer.items,c=0;c<d.length;c++)if((e=d[c]&&d[c].webkitGetAsEntry?d[c].webkitGetAsEntry():void 0)&&e.isDirectory){k("WrongType","Uploading a folder is not allowed");return}b=b.dataTransfer.files;d=b.length;if(B(b))for(h(b),c=0;c<b.length;c++)a.store(b[c],
v(c,d),A,D(c,d))});var p={},u=[],v=function(a,b){return function(c){d.multiple?(u.push(c),u.length==b?(g(u),u=[]):(p[a]=100,x(b))):g([c])}},A=function(a){k("UploadError",a.toString())},D=function(a,b){return function(c){p[a]=c;x(b)}},x=function(a){var b=0,c;for(c in p)b+=p[c];n(b/a)},B=function(b){if(0<b.length){if(1<b.length&&!d.multiple)return k("TooManyFiles","Only one file at a time"),!1;for(var c,e,f,g=0;g<b.length;g++){c=!1;e=b[g];f=e.name||e.fileName||'"Unknown file"';for(var h=0;h<q.length;h++){var n=
a.mimetypes.getMimetype(e);c=c||a.mimetypes.matchesMimetype(n,q[h])}if(!c)return k("WrongType",f+" isn't the right type of file"),!1;if(m){c=!1;for(h=0;h<m.length;h++)c=c||a.util.endsWith(f,m[h]);if(!c)return k("WrongType",f+" isn't the right type of file"),!1}if(e.size&&d.maxSize&&e.size>d.maxSize)return k("WrongSize",f+" is too large ("+e.size+" Bytes)"),!1}return!0}k("NoFilesFound","No files uploaded");return!1};return!0}}});
filepicker.extend("errors",function(){var a=this,b=function(a){if(this===window)return new b(a);this.code=a;filepicker.debug?(a=filepicker.error_map[this.code],this.message=a.message,this.moreInfo=a.moreInfo,this.toString=function(){return"FPError "+this.code+": "+this.message+". For help, see "+this.moreInfo}):this.toString=function(){return"FPError "+this.code+". Include filepicker_debug.js for more info"};return this};b.isClass=!0;return{FPError:b,handleError:function(b){filepicker.debug&&a.util.console.error(b.toString())}}},
!0);
filepicker.extend("exporter",function(){var a=this,b=function(b){if(b.mimetype&&b.extension)throw a.FilepickerException("Error: Cannot pass in both mimetype and extension parameters to the export function");b.services&&!a.util.isArray(b.services)?b.services=[b.services]:b.service&&(b.services=[b.service]);if(b.services)for(var c=0;c<b.services.length;c++){var d=(""+b.services[c]).replace(" ",""),g=a.services[d];b.services[c]=void 0===g?d:g}b.openTo&&(b.openTo=a.services[b.openTo]||b.openTo);a.util.setDefault(b,"container",
"modal")},c=function(b,c){return function(d){if("filepickerUrl"===d.type){if(d.error)a.util.console.error(d.error),c(a.errors.FPError(132));else{var g={};g.url=d.payload.url;g.filename=d.payload.data.filename;g.mimetype=d.payload.data.type;g.size=d.payload.data.size;g.isWriteable=!0;b(g)}a.modal.close()}}},d=function(e,f,h,g){b(f);if(f.debug)setTimeout(function(){h({url:"https://www.filepicker.io/api/file/-nBq2onTSemLBxlcBWn1",filename:"test.png",mimetype:"image/png",size:58979})},1);else if(void 0===
a.cookies.THIRD_PARTY_COOKIES)a.cookies.checkThirdParty(function(){d(e,f,h,g)});else{var k=a.util.getId(),n=!1;"modal"==f.container&&(f.mobile||a.window.shouldForce())&&(f.container="window");a.window.open(f.container,a.urls.constructExportUrl(e,f,k),function(){n||(n=!0,g(a.errors.FPError(131)))});a.handlers.attach(k,c(function(a){n=!0;h(a)},function(a){n=!0;g(a)}))}};return{createExporter:d}});
filepicker.extend("files",function(){var a=this,b=function(b,c,d,g,k){!0!==c.cache&&(c._cacheBust=a.util.getId());a.ajax.get(b,{data:c,headers:{"X-NO-STREAM":!0},success:d,error:function(b,c,d){"CORS_not_allowed"==b?g(new a.errors.FPError(113)):"CORS_error"==b?g(new a.errors.FPError(114)):"not_found"==b?g(new a.errors.FPError(115)):"bad_params"==b?g(new a.errors.FPError(400)):"not_authorized"==b?g(new a.errors.FPError(403)):g(new a.errors.FPError(118))},progress:k})},c=function(b,c,h,g,k){a.util.setDefault(c,
"storage","S3");c.filename||(c.filename=b.name||b.fileName);d(b,a.urls.constructStoreUrl(c),function(b){h(a.util.standardizeFPFile(b))},function(b,c,d){"not_found"==b?g(new a.errors.FPError(121)):"bad_params"==b?g(new a.errors.FPError(122)):"not_authorized"==b?g(new a.errors.FPError(403)):(a.util.console.error(b),g(new a.errors.FPError(123)))},k)},d=function(b,c,d,g,k){b.files&&(b=b.files[0]);window.FormData&&window.XMLHttpRequest?(data=new FormData,data.append("fileUpload",b),a.ajax.post(c,{json:!0,
processData:!1,data:data,success:d,error:g,progress:k})):a.iframeAjax.post(c,{data:b,json:!0,success:d,error:g})};return{readFromUrl:b,readFromFile:function(b,c,d,g,k){if(window.File&&window.FileReader&&window.FileList&&window.Blob){var n=!!c.base64encode,q=!!c.asText,m=new FileReader;m.onprogress=function(a){a.lengthComputable&&k(Math.round(a.loaded/a.total*100))};m.onload=function(b){k(100);n?d(a.base64.encode(b.target.result,q)):d(b.target.result)};m.onerror=function(b){switch(b.target.error.code){case b.target.error.NOT_FOUND_ERR:g(new a.errors.FPError(115));
break;case b.target.error.NOT_READABLE_ERR:g(new a.errors.FPError(116));break;case b.target.error.ABORT_ERR:g(new a.errors.FPError(117));break;default:g(new a.errors.FPError(118))}};q||!m.readAsBinaryString?m.readAsText(b):m.readAsBinaryString(b)}else k(10),a.files.storeFile(b,{},function(b){k(50);a.files.readFromFPUrl(b.url,c,d,g,function(a){k(50+a/2)})},g,function(a){k(a/2)})},readFromFPUrl:function(c,d,h,g,k){var n=void 0===d.base64encode;n&&(d.base64encode=!0);d.base64encode=!1!==d.base64encode;
b.call(this,c,d,function(b){n&&(b=a.base64.decode(b,!!d.asText));h(b)},g,k)},writeDataToFPUrl:function(b,c,d,g,k,n){var q=d.mimetype||"text/plain";a.ajax.post(a.urls.constructWriteUrl(b,d),{headers:{"Content-Type":q},data:c,processData:!1,json:!0,success:function(b){g(a.util.standardizeFPFile(b))},error:function(b,c,d){"not_found"==b?k(new a.errors.FPError(121)):"bad_params"==b?k(new a.errors.FPError(122)):"not_authorized"==b?k(new a.errors.FPError(403)):k(new a.errors.FPError(123))},progress:n})},
writeFileToFPUrl:function(b,c,h,g,k,n){h.mimetype=c.type;d(c,a.urls.constructWriteUrl(b,h),function(b){g(a.util.standardizeFPFile(b))},function(b,c,d){"not_found"==b?k(new a.errors.FPError(121)):"bad_params"==b?k(new a.errors.FPError(122)):"not_authorized"==b?k(new a.errors.FPError(403)):k(new a.errors.FPError(123))},n)},writeFileInputToFPUrl:function(b,c,h,g,k,n){d(c,a.urls.constructWriteUrl(b,h),function(b){g(a.util.standardizeFPFile(b))},function(b,c,d){"not_found"==b?k(new a.errors.FPError(121)):
"bad_params"==b?k(new a.errors.FPError(122)):"not_authorized"==b?k(new a.errors.FPError(403)):k(new a.errors.FPError(123))},n)},writeUrlToFPUrl:function(b,c,d,g,k,n){a.ajax.post(a.urls.constructWriteUrl(b,d),{data:{url:c},json:!0,success:function(b){g(a.util.standardizeFPFile(b))},error:function(b,c,d){"not_found"==b?k(new a.errors.FPError(121)):"bad_params"==b?k(new a.errors.FPError(122)):"not_authorized"==b?k(new a.errors.FPError(403)):k(new a.errors.FPError(123))},progress:n})},storeFileInput:function(b,
d,h,g,k){if(b.files)0===b.files.length?g(new a.errors.FPError(115)):c(b.files[0],d,h,g,k);else{a.util.setDefault(d,"storage","S3");d.filename||(d.filename=b.value.replace("C:\\fakepath\\","")||b.name);var n=b.name;b.name="fileUpload";a.iframeAjax.post(a.urls.constructStoreUrl(d),{data:b,processData:!1,json:!0,success:function(c){b.name=n;h(a.util.standardizeFPFile(c))},error:function(b,c,d){"not_found"==b?g(new a.errors.FPError(121)):"bad_params"==b?g(new a.errors.FPError(122)):"not_authorized"==
b?g(new a.errors.FPError(403)):g(new a.errors.FPError(123))}})}},storeFile:c,storeUrl:function(b,c,d,g,k){a.util.setDefault(c,"storage","S3");a.ajax.post(a.urls.constructStoreUrl(c),{data:{url:b},json:!0,success:function(b){d(a.util.standardizeFPFile(b))},error:function(b,c,d){"not_found"==b?g(new a.errors.FPError(151)):"bad_params"==b?g(new a.errors.FPError(152)):"not_authorized"==b?g(new a.errors.FPError(403)):g(new a.errors.FPError(153))},progress:k})},storeData:function(b,c,d,g,k){a.util.setDefault(c,
"storage","S3");a.util.setDefault(c,"mimetype","text/plain");a.ajax.post(a.urls.constructStoreUrl(c),{headers:{"Content-Type":c.mimetype},data:b,processData:!1,json:!0,success:function(b){d(a.util.standardizeFPFile(b))},error:function(b,c,d){"not_found"==b?g(new a.errors.FPError(121)):"bad_params"==b?g(new a.errors.FPError(122)):"not_authorized"==b?g(new a.errors.FPError(403)):g(new a.errors.FPError(123))},progress:k})},stat:function(b,c,d,g){var k=["uploaded","modified","created"];!0!==c.cache&&
(c._cacheBust=a.util.getId());a.ajax.get(b+"/metadata",{json:!0,data:c,success:function(a){for(var b=0;b<k.length;b++)a[k[b]]&&(a[k[b]]=new Date(a[k[b]]));d(a)},error:function(b,c,d){"not_found"==b?g(new a.errors.FPError(161)):"bad_params"==b?g(new a.errors.FPError(400)):"not_authorized"==b?g(new a.errors.FPError(403)):g(new a.errors.FPError(162))}})},remove:function(b,c,d,g){c.key=a.apikey;a.ajax.post(b+"/remove",{data:c,success:function(a){d()},error:function(b,c,d){"not_found"==b?g(new a.errors.FPError(171)):
"bad_params"==b?g(new a.errors.FPError(400)):"not_authorized"==b?g(new a.errors.FPError(403)):g(new a.errors.FPError(172))}})}}});filepicker.extend("handlers",function(){var a={};return{attach:function(b,c){a.hasOwnProperty(b)?a[b].push(c):a[b]=[c];return c},detach:function(b,c){var d=a[b];if(d)if(c){for(var e=0;e<d.length;e++)if(d[e]===c){d.splice(e,1);break}0===d.length&&delete a[b]}else delete a[b]},run:function(b){var c=b.id;if(a.hasOwnProperty(c)){for(var c=a[c],d=0;d<c.length;d++)c[d](b);return!0}return!1}}});
filepicker.extend("iframeAjax",function(){var a=this,b=[],c=!1,d=function(d,g){if(c)b.push({url:d,options:g});else{d+=(0<=d.indexOf("?")?"&":"?")+"_cacheBust="+a.util.getId();d+="&Content-Type=text%2Fhtml";a.comm.openChannel();var k;try{k=document.createElement('<iframe name="ajax_iframe">')}catch(n){k=document.createElement("iframe")}k.id=k.name="ajax_iframe";k.style.display="none";var q=function(){c=!1};k.attachEvent?(k.attachEvent("onload",q),k.attachEvent("onerror",q)):k.onerror=k.onload=q;k.id=
"ajax_iframe";k.name="ajax_iframe";k.style.display="none";k.onerror=k.onload=function(){c=!1};document.body.appendChild(k);a.handlers.attach("upload",e(g));var m=document.createElement("form");m.method=g.method||"GET";m.action=d;m.target="ajax_iframe";k=g.data;if(a.util.isFileInputElement(k)||a.util.isFile(k))m.encoding=m.enctype="multipart/form-data";document.body.appendChild(m);if(a.util.isFile(k)){k=f(k);if(!k)throw a.FilepickerException("Couldn't find corresponding file input.");k={fileUpload:k}}else a.util.isFileInputElement(k)?
(q=k,k={},k.fileUpload=q):k&&a.util.isElement(k)&&"INPUT"==k.tagName?(q=k,k={},k[q.name]=q):!1!==g.processData&&(k={data:k});k.format="iframe";var p={},u;for(u in k)if(q=k[u],a.util.isElement(q)&&"INPUT"==q.tagName)p[u]={par:q.parentNode,sib:q.nextSibling,name:q.name,input:q,focused:q==document.activeElement},q.name=u,m.appendChild(q);else{var v=document.createElement("input");v.name=u;v.value=q;m.appendChild(v)}c=!0;window.setTimeout(function(){m.submit();for(var a in p){var b=p[a];b.par.insertBefore(b.input,
b.sib);b.input.name=b.name;b.focused&&b.input.focus()}m.parentNode.removeChild(m)},1)}},e=function(e){var f=e.success||function(){},k=e.error||function(){};return function(e){"Upload"===e.type&&(c=!1,e=e.payload,e.error?k(e.error):f(e),a.handlers.detach("upload"),0<b.length&&(e=b.shift(),d(e.url,e.options)))}},f=function(a){for(var b=document.getElementsByTagName("input"),c=0;c<b.length;c++){var d=b[0];if("file"==d.type&&d.files&&d.files.length)for(var e=0;e<d.files.length;e++)if(d.files[e]===a)return d}return null};
return{get:function(a,b){b.method="GET";d(a,b)},post:function(b,c){c.method="POST";b+=(0<=b.indexOf("?")?"&":"?")+"_cacheBust="+a.util.getId();d(b,c)},request:d}});
filepicker.extend("json",function(){var a=this,b={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},c=function(a){return b[a]||"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)},d=function(a){a=a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"");return/^[\],:{}\s]*$/.test(a)},e=function(b){if(window.JSON&&window.JSON.stringify)return window.JSON.stringify(b);
b&&b.toJSON&&(b=b.toJSON());var d=[];switch(a.util.typeOf(b)){case "string":return'"'+b.replace(/[\x00-\x1f\\"]/g,c)+'"';case "array":for(var f=0;f<b.length;f++)d.push(e(b[f]));return"["+d+"]";case "object":case "hash":for(var n in b)(f=e(b[n]))&&d.push(e(n)+":"+f);return"{"+d+"}";case "number":case "boolean":return""+b;case "null":return"null";default:return"null"}},f=function(b,c){if(!b||"string"!=a.util.typeOf(b))return null;if(window.JSON&&window.JSON.parse)return window.JSON.parse(b);if(c&&!d(b))throw Error("JSON could not decode the input; security is enabled and the value is not secure.");
return eval("("+b+")")};return{validate:d,encode:e,stringify:e,decode:f,parse:f}});
filepicker.extend(function(){var a=this;a.API_VERSION="v1";var b=function(a){this.text=a;this.toString=function(){return"FilepickerException: "+this.text};return this};b.isClass=!0;var c=function(){if(!a.apikey)throw new a.FilepickerException("API Key not found");},d=function(b,c,d,e,f){f(10);a.store(b,function(b){f(50);a.read(b,c,d,e,function(a){f(50+a/2)})},e)},e=function(b,d,e,f){c();"function"===typeof d&&(f=e,e=d,d={});d=d?a.util.clone(d):{};e=e||function(){};f=f||a.errors.handleError;var q;
if("string"==typeof b&&a.util.isUrl(b))q=b;else if(b.url)q=b.url,d.mimetype||d.extension||(d.mimetype=b.mimetype),d.suggestedFilename||(d.suggestedFilename=b.filename);else throw new a.FilepickerException("Invalid file to export: "+b+". Not a valid url or FPFile object. You may want to use filepicker.store() to get an FPFile to export");a.exporter.createExporter(q,d,e,f)},f=function(b,d,e,f){c();"function"===typeof d&&(f=e,e=d,d={});d=d||{};e=e||function(){};f=f||a.errors.handleError;if(!a.util.isFPUrl(b))if(b.url)b=
b.url;else throw new a.FilepickerException("Invalid file to get metadata for: "+b+". Not a filepicker url or FPFile object.");a.files.stat(b,d,e,f)};return{setKey:function(b){a.apikey=b},pick:function(b,d,e){c();"function"===typeof b&&(e=d,d=b,b={});b=b||{};e=e||a.errors.handleError;a.picker.createPicker(b,d||function(){},e,!1)},pickMultiple:function(b,d,e){c();"function"===typeof b&&(e=d,d=b,b={});b=b||{};e=e||a.errors.handleError;a.picker.createPicker(b,d||function(){},e,!0)},pickAndStore:function(b,
d,e,f){c();if(!b||!d||"function"===typeof b||"function"===typeof b)throw new a.FilepickerException("Not all required parameters given, missing picker or store options");f=f||a.errors.handleError;var q=!!b.multiple;b=b?a.util.clone(b):{};b.storeLocation=d.location||"S3";b.storePath=d.path;if(q&&b.storePath&&"/"!=b.storePath.charAt(b.storePath.length-1))throw new a.FilepickerException("pickAndStore with multiple files requires a path that ends in '/'");d=e;q||(d=function(a){e([a])});a.picker.createPicker(b,
d,f,q)},read:function(b,e,f,n,q){c();if(!b)throw new a.FilepickerException("No input given - nothing to read!");"function"===typeof e&&(q=n,n=f,f=e,e={});e=e||{};f=f||function(){};n=n||a.errors.handleError;q=q||function(){};if("string"==typeof b)a.util.isFPUrl(b)?a.files.readFromFPUrl(b,e,f,n,q):a.files.readFromUrl(b,e,f,n,q);else if(a.util.isFileInputElement(b))b.files?0===b.files.length?n(new a.errors.FPError(115)):a.files.readFromFile(b.files[0],e,f,n,q):d(b,e,f,n,q);else if(a.util.isFile(b))a.files.readFromFile(b,
e,f,n,q);else if(b.url)a.files.readFromFPUrl(b.url,e,f,n,q);else throw new a.FilepickerException("Cannot read given input: "+b+". Not a url, file input, DOM File, or FPFile object.");},write:function(b,d,e,f,q,m){c();if(!b)throw new a.FilepickerException("No fpfile given - nothing to write to!");if(void 0===d||null===d)throw new a.FilepickerException("No input given - nothing to write!");"function"===typeof e&&(m=q,q=f,f=e,e={});e=e||{};f=f||function(){};q=q||a.errors.handleError;m=m||function(){};
if(!a.util.isFPUrl(b))if(b.url)b=b.url;else throw new a.FilepickerException("Invalid file to write to: "+b+". Not a filepicker url or FPFile object.");if("string"==typeof d)a.files.writeDataToFPUrl(b,d,e,f,q,m);else if(a.util.isFileInputElement(d))d.files?0===d.files.length?q(new a.errors.FPError(115)):a.files.writeFileToFPUrl(b,d.files[0],e,f,q,m):a.files.writeFileInputToFPUrl(b,d,e,f,q,m);else if(a.util.isFile(d))a.files.writeFileToFPUrl(b,d,e,f,q,m);else if(d.url)a.files.writeUrlToFPUrl(b,d.url,
e,f,q,m);else throw new a.FilepickerException("Cannot read from given input: "+d+". Not a string, file input, DOM File, or FPFile object.");},writeUrl:function(b,d,e,f,q,m){c();if(!b)throw new a.FilepickerException("No fpfile given - nothing to write to!");if(void 0===d||null===d)throw new a.FilepickerException("No input given - nothing to write!");"function"===typeof e&&(m=q,q=f,f=e,e={});e=e||{};f=f||function(){};q=q||a.errors.handleError;m=m||function(){};if(!a.util.isFPUrl(b))if(b.url)b=b.url;
else throw new a.FilepickerException("Invalid file to write to: "+b+". Not a filepicker url or FPFile object.");a.files.writeUrlToFPUrl(b,d,e,f,q,m)},"export":e,exportFile:e,store:function(b,d,e,f,q){c();"function"===typeof d&&(q=f,f=e,e=d,d={});d=d?a.util.clone(d):{};e=e||function(){};f=f||a.errors.handleError;q=q||function(){};if("string"==typeof b)a.files.storeData(b,d,e,f,q);else if(a.util.isFileInputElement(b))b.files?0===b.files.length?f(new a.errors.FPError(115)):a.files.storeFile(b.files[0],
d,e,f,q):a.files.storeFileInput(b,d,e,f,q);else if(a.util.isFile(b))a.files.storeFile(b,d,e,f,q);else if(b.url)d.filename||(d.filename=b.filename),a.files.storeUrl(b.url,d,e,f,q);else throw new a.FilepickerException("Cannot store given input: "+b+". Not a string, file input, DOM File, or FPFile object.");},storeUrl:function(b,d,e,f,q){c();"function"===typeof d&&(q=f,f=e,e=d,d={});d=d||{};f=f||a.errors.handleError;a.files.storeUrl(b,d,e||function(){},f,q||function(){})},stat:f,metadata:f,remove:function(b,
d,e,f){c();"function"===typeof d&&(f=e,e=d,d={});d=d||{};e=e||function(){};f=f||a.errors.handleError;if(!a.util.isFPUrl(b))if(b.url)b=b.url;else throw new a.FilepickerException("Invalid file to remove: "+b+". Not a filepicker url or FPFile object.");a.files.remove(b,d,e,f)},convert:function(b,d,e,f,q,m){c();if(!b)throw new a.FilepickerException("No fpfile given - nothing to convert!");"function"===typeof e&&(m=q,q=f,f=e,e={});options=d?a.util.clone(d):{};e=e||{};f=f||function(){};q=q||a.errors.handleError;
m=m||function(){};e.location&&(options.storeLocation=e.location);e.path&&(options.storePath=e.path);if(a.util.isFPUrl(b))d=b;else if(b.url){if(d=b.url,!a.mimetypes.matchesMimetype(b.mimetype,"image/*")){q(new a.errors.FPError(142));return}}else throw new a.FilepickerException("Invalid file to convert: "+b+". Not a filepicker url or FPFile object.");a.conversions.convert(d,options,f,q,m)},constructWidget:function(b){return a.widgets.constructWidget(b)},makeDropPane:function(b,c){return a.dragdrop.makeDropPane(b,
c)},FilepickerException:b}},!0);
filepicker.extend("mimetypes",function(){var a=this,b={".stl":"applicaiton/sla",".hbs":"text/html",".pdf":"application/pdf",".jpg":"image/jpeg",".jpeg":"image/jpeg",".jpe":"image/jpeg",".imp":"application/x-impressionist"},c="application/octet-stream application/download application/force-download octet/stream application/unknown application/x-download application/x-msdownload application/x-secure-download".split(" ");return{getMimetype:function(a){if(a.type){for(var e=a.type,e=e.toLowerCase(),f=
!1,h=0;h<c.length;h++)f=f||e==c[h];if(!f)return a.type}return(e=(a.name||a.fileName).match(/\.\w*$/))?b[e[0].toLowerCase()]||"":a.type?a.type:""},matchesMimetype:function(b,e){if(!b)return"*/*"==e;b=a.util.trim(b).toLowerCase();e=a.util.trim(e).toLowerCase();for(var f=0;f<c.length;f++)if(b==c[f])return!0;test_parts=b.split("/");against_parts=e.split("/");return"*"==against_parts[0]?!0:against_parts[0]!=test_parts[0]?!1:"*"==against_parts[1]?!0:against_parts[1]==test_parts[1]}}});
filepicker.extend("modal",function(){var a=this,b=function(b,d){d=!!d;return function(){if(!a.uploading||d||window.confirm("You are currently uploading. If you choose 'OK', the window will close and your upload will not finish. Do you want to stop uploading and close the window?")){a.uploading=!1;var e=document.getElementById("filepicker_shade");e&&document.body.removeChild(e);(e=document.getElementById("filepicker_dialog_container"))&&document.body.removeChild(e);try{delete window.frames[a.window.WINDOW_NAME]}catch(f){}b&&
b()}}};return{generate:function(c,d){var e=document.createElement("div");e.id="filepicker_shade";e.style.position="fixed";e.style.top=0;e.style.bottom=0;e.style.right=0;e.style.left=0;e.style.backgroundColor="#000000";e.style.opacity="0.5";e.style.filter="alpha(opacity=50)";e.style.zIndex=1E4;e.onclick=b(d);var f=document.createElement("div");f.id="filepicker_dialog_container";f.style.position="fixed";f.style.padding="10px";f.style.background='#ffffff url("https://www.filepicker.io/static/img/spinner.gif") no-repeat 50% 50%';
f.style.top="10px";f.style.bottom="auto";f.style.right="auto";var h=a.window.getSize(),g=Math.min(h[1]-40,500),k=Math.min(h[0]-40,800);f.style.left=(h[0]-k-40)/2+"px";f.style.height=g+"px";f.style.width=k+"px";f.style.overflow="hidden";f.style.webkitOverflowScrolling="touch";f.style.border="1px solid #999";f.style.webkitBorderRadius="3px";f.style.borderRadius="3px";f.style.margin="0";f.style.webkitBoxShadow="0 3px 7px rgba(0, 0, 0, 0.3)";f.style.boxShadow="0 3px 7px rgba(0, 0, 0, 0.3)";f.style.zIndex=
10001;f.style.boxSizing="content-box";f.style.webkitBoxSizing="content-box";f.style.mozBoxSizing="content-box";h=document.createElement("a");h.appendChild(document.createTextNode("\u00d7"));h.onclick=b(d);h.style.cssFloat="right";h.style.styleFloat="right";h.style.cursor="default";h.style.padding="0 5px 0 0px";h.style.fontSize="1.5em";h.style.color="#555555";h.style.textDecoration="none";g=document.createElement("iframe");g.name=a.window.WINDOW_NAME;g.id=a.window.WINDOW_NAME;k=a.window.getSize();
k=Math.min(k[1]-40,500);g.style.width="100%";g.style.height=k-32+"px";g.style.border="none";g.style.position="relative";g.setAttribute("border",0);g.setAttribute("frameborder",0);g.setAttribute("frameBorder",0);g.setAttribute("marginwidth",0);g.setAttribute("marginheight",0);g.src=c;document.body.appendChild(e);f.appendChild(h);f.appendChild(g);document.body.appendChild(f);return g},close:b(function(){})}});
filepicker.extend("picker",function(){var a=this,b=function(b){var c=function(c,d,e){b[d]?a.util.isArray(b[d])||(b[d]=[b[d]]):b[c]?b[d]=[b[c]]:e&&(b[d]=e)};c("service","services");c("mimetype","mimetypes");c("extension","extensions");if(b.services)for(c=0;c<b.services.length;c++){var d=(""+b.services[c]).replace(" ","");void 0!==a.services[d]&&(d=a.services[d]);b.services[c]=d}if(b.mimetypes&&b.extensions)throw a.FilepickerException("Error: Cannot pass in both mimetype and extension parameters to the pick function");
b.mimetypes||b.extensions||(b.mimetypes=["*/*"]);b.openTo&&(b.openTo=a.services[b.openTo]||b.openTo);a.util.setDefault(b,"container","modal")},c=function(b,c){return function(d){if("filepickerUrl"===d.type){a.uploading=!1;if(d.error)a.util.console.error(d.error),c(a.errors.FPError(102));else{var e={};e.url=d.payload.url;e.filename=d.payload.data.filename;e.mimetype=d.payload.data.type;e.size=d.payload.data.size;d.payload.data.key&&(e.key=d.payload.data.key);e.isWriteable=!0;b(e)}a.modal.close()}}},
d=function(b){b=b||function(){};return function(c){"uploading"===c.type&&(a.uploading=!!c.payload,b(a.uploading))}},e=function(b,c){return function(d){if("filepickerUrl"===d.type){a.uploading=!1;if(d.error)a.util.console.error(d.error),c(a.errors.FPError(102));else{var e=[];a.util.isArray(d.payload)||(d.payload=[d.payload]);for(var f=0;f<d.payload.length;f++){var m={},p=d.payload[f];m.url=p.url;m.filename=p.data.filename;m.mimetype=p.data.type;m.size=p.data.size;p.data.key&&(m.key=p.data.key);m.isWriteable=
!0;e.push(m)}b(e)}a.modal.close()}}},f=function(h,g,k,n){b(h);if(h.debug)setTimeout(function(){g({url:"https://www.filepicker.io/api/file/-nBq2onTSemLBxlcBWn1",filename:"test.png",mimetype:"image/png",size:58979})},1);else if(void 0===a.cookies.THIRD_PARTY_COOKIES)a.cookies.checkThirdParty(function(){f(h,g,k,!!n)});else{var q=a.util.getId(),m=!1,p=function(a){m=!0;g(a)},u=function(a){m=!0;k(a)};"modal"==h.container&&(h.mobile||a.window.shouldForce())&&(h.container="window");a.window.open(h.container,
a.urls.constructPickUrl(h,q,n),function(){m||(m=!0,k(a.errors.FPError(101)))});p=n?e(p,u):c(p,u);a.handlers.attach(q,p);var v=q+"-upload";a.handlers.attach(v,d(function(){a.handlers.detach(v)}))}};return{createPicker:f}});filepicker.extend("services",function(){return{COMPUTER:1,DROPBOX:2,FACEBOOK:3,GITHUB:4,GMAIL:5,IMAGE_SEARCH:6,URL:7,WEBCAM:8,GOOGLE_DRIVE:9,SEND_EMAIL:10,INSTAGRAM:11,FLICKR:12,VIDEO:13,EVERNOTE:14,PICASA:15,WEBDAV:16,FTP:17,ALFRESCO:18,BOX:19,SKYDRIVE:20}},!0);
filepicker.extend("util",function(){var a=/^(http|https)\:.*\/\//i;return{trim:function(a){return a.replace(/^\s+|\s+$/g,"")},parseUrl:function(a){a&&"/"!=a.charAt(0)||(a=window.location.protocol+"//"+window.location.host+a);var c=document.createElement("a");c.href=a;for(var d=-1==c.hostname.indexOf(":")?c.hostname:c.host,e=c.protocol.replace(":",""),f=c.port,h=c.search,g={},k=c.search.replace(/^\?/,"").split("&"),n=k.length,q=0,m;q<n;q++)k[q]&&(m=k[q].split("="),g[m[0]]=m[1]);c={source:a,protocol:e,
host:d,port:f,query:h,params:g,file:(c.pathname.match(/\/([^\/?#]+)$/i)||[,""])[1],hash:c.hash.replace("#",""),path:c.pathname.replace(/^([^\/])/,"/$1"),relative:(c.href.match(/tps?:\/\/[^\/]+(.+)/)||[,""])[1],segments:c.pathname.replace(/^\//,"").split("/")};c.origin=c.protocol+"://"+c.host+(c.port?":"+c.port:"");return c},isUrl:function(b){return!!b.match(a)},endsWith:function(a,c){return-1!==a.indexOf(c,a.length-c.length)}}});
filepicker.extend("urls",function(){var a=this,b="https://www.filepicker.io";window.filepicker.hostname&&(b=window.filepicker.hostname);var c=b+"/dialog/open/",d=b+"/dialog/save/",e=b+"/api/store/";return{BASE:b,COMM:b+"/dialog/comm_iframe/",FP_COMM_FALLBACK:b+"/dialog/comm_hash_iframe/",STORE:e,PICK:c,EXPORT:d,constructPickUrl:function(b,d,e){return c+"?key="+a.apikey+"&id="+d+"&referrer="+window.location.hostname+"&iframe="+("window"!=b.container)+"&version="+a.API_VERSION+(b.services?"&s="+b.services.join(","):
"")+(e?"&multi="+!!e:"")+(void 0!==b.mimetypes?"&m="+b.mimetypes.join(","):"")+(void 0!==b.extensions?"&ext="+b.extensions.join(","):"")+(void 0!==b.openTo?"&loc="+b.openTo:"")+(b.maxSize?"&maxsize="+b.maxSize:"")+(b.signature?"&signature="+b.signature:"")+(b.policy?"&policy="+b.policy:"")+(void 0!==b.mobile?"&mobile="+b.mobile:"")+(b.storeLocation?"&storeLocation="+b.storeLocation:"")+(b.storePath?"&storePath="+b.storePath:"")},constructExportUrl:function(b,c,e){if(0<=b.indexOf("&")||0<=b.indexOf("?"))b=
encodeURIComponent(b);return d+"?url="+b+"&key="+a.apikey+"&id="+e+"&referrer="+window.location.hostname+"&iframe="+("window"!=c.container)+"&version="+a.API_VERSION+(c.services?"&s="+c.services.join(","):"")+(void 0!==c.openTo?"&loc="+c.openTo:"")+(void 0!==c.mimetype?"&m="+c.mimetype:"")+(void 0!==c.extension?"&ext="+c.extension:"")+(void 0!==c.mobile?"&mobile="+c.mobile:"")+(void 0!==c.suggestedFilename?"&defaultSaveasName="+c.suggestedFilename:"")+(c.signature?"&signature="+c.signature:"")+(c.policy?
"&policy="+c.policy:"")},constructWriteUrl:function(a,b){return a+"?nonce=fp"+(b.base64decode?"&base64decode=true":"")+(b.mimetype?"&mimetype="+b.mimetype:"")+(b.signature?"&signature="+b.signature:"")+(b.policy?"&policy="+b.policy:"")},constructStoreUrl:function(b){return e+b.storage+"?key="+a.apikey+(b.base64decode?"&base64decode=true":"")+(b.mimetype?"&mimetype="+b.mimetype:"")+(b.filename?"&filename="+b.filename:"")+(b.path?"&path="+b.path:"")+(b.signature?"&signature="+b.signature:"")+(b.policy?
"&policy="+b.policy:"")},constructHostCommFallback:function(){return a.util.parseUrl(window.location.href).origin+"/404"}}});
filepicker.extend("util",function(){var a=function(a){return a&&"[object Array]"===Object.prototype.toString.call(a)},b=function(a){return a&&"[object File]"===Object.prototype.toString.call(a)},c=function(a){return"object"===typeof HTMLElement?a instanceof HTMLElement:a&&"object"===typeof a&&1===a.nodeType&&"string"===typeof a.nodeName},d=function(a){return function(){if(window.console&&"function"==typeof window.console[a])try{window.console[a].apply(window.console,arguments)}catch(b){alert(Array.prototype.join.call(arguments,
","))}}},e={};e.log=d("log");e.error=d("error");return{isArray:a,isFile:b,isElement:c,isFileInputElement:function(a){return c(a)&&"INPUT"==a.tagName&&"file"==a.type},getId:function(){return(new Date).getTime().toString()},setDefault:function(a,b,c){void 0===a[b]&&(a[b]=c)},typeOf:function(c){return null===c?"null":a(c)?"array":b(c)?"file":typeof c},addOnLoad:function(a){if(window.jQuery)window.jQuery(function(){a()});else if(window.addEventListener)window.addEventListener("load",a,!1);else if(window.attachEvent)window.attachEvent("onload",
a);else if(window.onload){var b=window.onload;window.onload=function(){b();a()}}else window.onload=a},isFPUrl:function(a){return"string"==typeof a&&a.match("www.filepicker.io/api/file/")},console:e,clone:function(a){var b={};for(key in a)b[key]=a[key];return b},standardizeFPFile:function(a){var b={};b.url=a.url;b.filename=a.filename||a.name;b.mimetype=a.mimetype||a.type;b.size=a.size;b.key=a.key||a.s3_key;b.isWriteable=!(!a.isWriteable&&!a.writeable);return b}}});
filepicker.extend("widgets",function(){var a=this,b=function(a,b,c,d){(c=d.getAttribute(c))&&(b[a]=c)},c=function(a,b){var c;if(document.createEvent)c=document.createEvent("Event"),c.initEvent("change",!0,!1),c.fpfile=b?b[0]:void 0,c.fpfiles=b,a.dispatchEvent(c);else if(document.createEventObject)c=document.createEventObject("Event"),c.eventPhase=2,c.currentTarget=c.srcElement=c.target=a,c.fpfile=b?b[0]:void 0,c.fpfiles=b,a.fireEvent("onchange",c);else if(a.onchange)a.onchange(b)},d=function(d){var e=
document.createElement("button");e.setAttribute("type","button");e.innerHTML=d.getAttribute("data-fp-button-text")||d.getAttribute("data-fp-text")||"Pick File";e.className=d.getAttribute("data-fp-button-class")||d.getAttribute("data-fp-class")||d.className;d.style.display="none";var f={};b("container",f,"data-fp-option-container",d);b("maxSize",f,"data-fp-option-maxsize",d);b("mimetype",f,"data-fp-mimetype",d);b("mimetypes",f,"data-fp-mimetypes",d);b("extension",f,"data-fp-extension",d);b("extensions",
f,"data-fp-extensions",d);b("container",f,"data-fp-container",d);b("maxSize",f,"data-fp-maxSize",d);b("openTo",f,"data-fp-openTo",d);b("debug",f,"data-fp-debug",d);b("signature",f,"data-fp-signature",d);b("policy",f,"data-fp-policy",d);b("storeLocation",f,"data-fp-store-location",d);var g=d.getAttribute("data-fp-services");g||(g=d.getAttribute("data-fp-option-services"));if(g){for(var g=g.split(","),h=0;h<g.length;h++)g[h]=a.services[g[h].replace(" ","")];f.services=g}if(g=d.getAttribute("data-fp-service"))f.service=
a.services[g.replace(" ","")];f.mimetypes&&(f.mimetypes=f.mimetypes.split(","));f.extensions&&(f.extensions=f.extensions.split(","));(g=d.getAttribute("data-fp-apikey"))&&a.setKey(g);"true"==(d.getAttribute("data-fp-multiple")||d.getAttribute("data-fp-option-multiple")||"false")?e.onclick=function(){e.blur();a.pickMultiple(f,function(a){for(var b=[],e=0;e<a.length;e++)b.push(a[e].url);d.value=b.join();c(d,a)});return!1}:e.onclick=function(){e.blur();a.pick(f,function(a){d.value=a.url;c(d,[a])});return!1};
d.parentNode.insertBefore(e,d)},e=function(d){var e=document.createElement("div");e.className=d.getAttribute("data-fp-class")||d.className;e.style.padding="1px";d.style.display="none";d.parentNode.insertBefore(e,d);var k=document.createElement("button");k.setAttribute("type","button");k.innerHTML=d.getAttribute("data-fp-button-text")||"Pick File";k.className=d.getAttribute("data-fp-button-class")||"";e.appendChild(k);var p=document.createElement("div");h(p);p.innerHTML=d.getAttribute("data-fp-drag-text")||
"Or drop files here";p.className=d.getAttribute("data-fp-drag-class")||"";e.appendChild(p);var u={};b("container",u,"data-fp-option-container",d);b("maxSize",u,"data-fp-option-maxsize",d);b("mimetype",u,"data-fp-mimetype",d);b("mimetypes",u,"data-fp-mimetypes",d);b("extension",u,"data-fp-extension",d);b("extensions",u,"data-fp-extensions",d);b("container",u,"data-fp-container",d);b("maxSize",u,"data-fp-maxSize",d);b("openTo",u,"data-fp-openTo",d);b("debug",u,"data-fp-debug",d);b("signature",u,"data-fp-signature",
d);b("policy",u,"data-fp-policy",d);b("storeLocation",u,"data-fp-store-location",d);(e=d.getAttribute("data-fp-services"))||(e=d.getAttribute("data-fp-option-services"));if(e){for(var e=e.split(","),v=0;v<e.length;v++)e[v]=a.services[e[v].replace(" ","")];u.services=e}if(e=d.getAttribute("data-fp-service"))u.service=a.services[e.replace(" ","")];u.mimetypes&&(u.mimetypes=u.mimetypes.split(","));u.extensions&&(u.extensions=u.extensions.split(","));(e=d.getAttribute("data-fp-apikey"))&&a.setKey(e);
e="true"==(d.getAttribute("data-fp-multiple")||d.getAttribute("data-fp-option-multiple")||"false");a.dragdrop.enabled()?g(p,e,u,d):p.innerHTML="&nbsp;";p.onclick=e?k.onclick=function(){k.blur();a.pickMultiple(u,function(a){for(var b=[],e=[],g=0;g<a.length;g++)b.push(a[g].url),e.push(a[g].filename);d.value=b.join();f(d,p,e.join(", "));c(d,a)});return!1}:k.onclick=function(){k.blur();a.pick(u,function(a){d.value=a.url;f(d,p,a.filename);c(d,[a])});return!1}},f=function(b,d,e){d.innerHTML=e;d.style.padding=
"2px 4px";d.style.cursor="default";d.style.width="";e=document.createElement("span");e.innerHTML="X";e.style.borderRadius="8px";e.style.fontSize="14px";e.style.cssFloat="right";e.style.padding="0 3px";e.style.color="#600";e.style.cursor="pointer";var f=function(e){e||(e=window.event);e.cancelBubble=!0;e.stopPropagation&&e.stopPropagation();h(d);d.innerHTML=a.dragdrop.enabled?b.getAttribute("data-fp-drag-text")||"Or drop files here":"&nbsp;";b.value="";c(b);return!1};e.addEventListener?e.addEventListener("click",
f,!1):e.attachEvent&&e.attachEvent("onclick",f);d.appendChild(e)},h=function(a){a.style.border="1px dashed #AAA";a.style.display="inline-block";a.style.margin="0 0 0 4px";a.style.borderRadius="3px";a.style.backgroundColor="#F3F3F3";a.style.color="#333";a.style.fontSize="14px";a.style.lineHeight="22px";a.style.padding="2px 4px";a.style.verticalAlign="middle";a.style.cursor="pointer";a.style.overflow="hidden"},g=function(b,d,e,g){var h=b.innerHTML,k;a.dragdrop.makeDropPane(b,{multiple:d,maxSize:e.maxSize,
mimetypes:e.mimetypes,mimetype:e.mimetype,extensions:e.extensions,extension:e.extension,dragEnter:function(){b.innerHTML="Drop to upload";b.style.backgroundColor="#E0E0E0";b.style.border="1px solid #000"},dragLeave:function(){b.innerHTML=h;b.style.backgroundColor="#F3F3F3";b.style.border="1px dashed #AAA"},onError:function(a,c){"TooManyFiles"==a?b.innerHTML=c:"WrongType"==a?b.innerHTML=c:"NoFilesFound"==a?b.innerHTML=c:"UploadError"==a&&(b.innerHTML="Oops! Had trouble uploading.")},onStart:function(a){a=
document.createElement("div");a.style.height=b.offsetHeight-2+"px";a.style.backgroundColor="#0E90D2";a.style.width="2%";a.style.borderRadius="3px";b.style.width=b.offsetWidth+"px";b.style.padding="0";b.style.border="1px solid #AAA";b.style.backgroundColor="#F3F3F3";b.style.boxShadow="inset 0 1px 2px rgba(0, 0, 0, 0.1)";b.innerHTML="";b.appendChild(a);k=a},onProgress:function(a){k&&(k.style.width=a+"%")},onSuccess:function(a){for(var d=[],e=[],h=0;h<a.length;h++)d.push(a[h].url),e.push(a[h].filename);
g.value=d.join();f(g,b,e.join(", "));c(g,a)}})},k=function(c){c.onclick=function(){var d=c.getAttribute("data-fp-url");if(!d)return!0;var e={};b("container",e,"data-fp-option-container",c);b("suggestedFilename",e,"data-fp-option-defaultSaveasName",c);b("container",e,"data-fp-container",c);b("suggestedFilename",e,"data-fp-suggestedFilename",c);b("mimetype",e,"data-fp-mimetype",c);b("extension",e,"data-fp-extension",c);var f=c.getAttribute("data-fp-services");f||(f=c.getAttribute("data-fp-option-services"));
if(f){for(var f=f.split(","),g=0;g<f.length;g++)f[g]=a.services[f[g].replace(" ","")];e.services=f}if(f=c.getAttribute("data-fp-service"))e.service=a.services[f.replace(" ","")];(apikey=c.getAttribute("data-fp-apikey"))&&a.setKey(apikey);a.exportFile(d,e);return!1}};return{constructPickWidget:d,constructDragWidget:e,constructExportWidget:k,buildWidgets:function(){if(document.querySelectorAll){var a,b=document.querySelectorAll('input[type="filepicker"]');for(a=0;a<b.length;a++)d(b[a]);b=document.querySelectorAll('input[type="filepicker-dragdrop"]');
for(a=0;a<b.length;a++)e(b[a]);var b=[],c=document.querySelectorAll("button[data-fp-url]");for(a=0;a<c.length;a++)b.push(c[a]);c=document.querySelectorAll("a[data-fp-url]");for(a=0;a<c.length;a++)b.push(c[a]);c=document.querySelectorAll('input[type="button"][data-fp-url]');for(a=0;a<c.length;a++)b.push(c[a]);for(a=0;a<b.length;a++)k(b[a])}},constructWidget:function(a){a.jquery&&(a=a[0]);var b=a.getAttribute("type");"filepicker"==b?d(a):"filepicker-dragdrop"==b?e(a):k(a)}}});
filepicker.extend("window",function(){var a=this,b=function(){document.body&&document.body.offsetWidth&&(winW=document.body.offsetWidth,winH=document.body.offsetHeight);"CSS1Compat"==document.compatMode&&document.documentElement&&document.documentElement.offsetWidth&&(winW=document.documentElement.offsetWidth,winH=document.documentElement.offsetHeight);window.innerWidth&&window.innerHeight&&(winW=window.innerWidth,winH=window.innerHeight);return[winW,winH]},c=function(){var c=768>b()[0],e=!1===a.cookies.THIRD_PARTY_COOKIES;
return a.browser.isIOS()||a.browser.isAndroid()||c||e};return{open:function(b,e,f){f=f||function(){};b||(b="modal");"modal"==b&&c()&&(b="window");if("window"==b){b="filepicker_dialog"+a.util.getId();var h=window.open(e,b,"left=100,top=100,height=600,width=800,menubar=no,toolbar=no,location=no,personalbar=no,status=no,resizable=yes,scrollbars=yes,dependent=yes,dialog=yes"),g=window.setInterval(function(){if(!h||h.closed)window.clearInterval(g),f()},1E3)}else if("modal"==b)a.modal.generate(e,f);else{var k=
document.getElementById(b);if(!k)throw new a.FilepickerException("Container '"+b+"' not found. This should either be set to 'window','modal', or the ID of an iframe that is currently in the document.");k.src=e}},WINDOW_NAME:"filepicker_dialog",getSize:b,shouldForce:c}});
(function(){filepicker.internal(function(){this.util.addOnLoad(this.cookies.checkThirdParty);this.util.addOnLoad(this.widgets.buildWidgets)});delete filepicker.internal;delete filepicker.extend;var a=filepicker._queue||[],b,c=a.length;if(c)for(var d=0;d<c;d++)b=a[d],filepicker[b[0]].apply(filepicker,b[1]);delete filepicker._queue})();
jQuery.effects||function(a){function b(b,c){var d=b[1]&&b[1].constructor==Object?b[1]:{};c&&(d.mode=c);var g=b[1]&&b[1].constructor!=Object?b[1]:d.duration?d.duration:b[2],g=a.fx.off?0:"number"===typeof g?g:a.fx.speeds[g]||a.fx.speeds._default,k=d.callback||a.isFunction(b[1])&&b[1]||a.isFunction(b[2])&&b[2]||a.isFunction(b[3])&&b[3];return[b[0],d,g,k]}function c(b){var c;return b&&b.constructor==Array&&3==b.length?b:(c=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(b))?[parseInt(c[1],
10),parseInt(c[2],10),parseInt(c[3],10)]:(c=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(b))?[2.55*parseFloat(c[1]),2.55*parseFloat(c[2]),2.55*parseFloat(c[3])]:(c=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(b))?[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]:(c=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(b))?[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]:/rgba\(0, 0, 0, 0\)/.exec(b)?d.transparent:
d[a.trim(b).toLowerCase()]}a.effects={version:"1.7.2",save:function(a,b){for(var c=0;c<b.length;c++)null!==b[c]&&a.data("ec.storage."+b[c],a[0].style[b[c]])},restore:function(a,b){for(var c=0;c<b.length;c++)null!==b[c]&&a.css(b[c],a.data("ec.storage."+b[c]))},setMode:function(a,b){"toggle"==b&&(b=a.is(":hidden")?"show":"hide");return b},getBaseline:function(a,b){var c,d;switch(a[0]){case "top":c=0;break;case "middle":c=.5;break;case "bottom":c=1;break;default:c=a[0]/b.height}switch(a[1]){case "left":d=
0;break;case "center":d=.5;break;case "right":d=1;break;default:d=a[1]/b.width}return{x:d,y:c}},createWrapper:function(a){if(a.parent().is(".ui-effects-wrapper"))return a.parent();var b={width:a.outerWidth(!0),height:a.outerHeight(!0),"float":a.css("float")};a.wrap('<div class="ui-effects-wrapper" style="font-size:100%;background:transparent;border:none;margin:0;padding:0"></div>');var c=a.parent();if("static"==a.css("position"))c.css({position:"relative"}),a.css({position:"relative"});else{var d=
a.css("top");isNaN(parseInt(d,10))&&(d="auto");var k=a.css("left");isNaN(parseInt(k,10))&&(k="auto");c.css({position:a.css("position"),top:d,left:k,zIndex:a.css("z-index")}).show();a.css({position:"relative",top:0,left:0})}c.css(b);return c},removeWrapper:function(a){return a.parent().is(".ui-effects-wrapper")?a.parent().replaceWith(a):a},setTransition:function(b,c,d,g){g=g||{};a.each(c,function(a,c){unit=b.cssUnit(c);0<unit[0]&&(g[c]=unit[0]*d+unit[1])});return g},animateClass:function(b,c,d,g){var k=
"function"==typeof d?d:g?g:null,n="string"==typeof d?d:null;return this.each(function(){var d={},g=a(this),h=g.attr("style")||"";"object"==typeof h&&(h=h.cssText);b.toggle&&(g.hasClass(b.toggle)?b.remove=b.toggle:b.add=b.toggle);var u=a.extend({},document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle);b.add&&g.addClass(b.add);b.remove&&g.removeClass(b.remove);var v=a.extend({},document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle);
b.add&&g.removeClass(b.add);b.remove&&g.addClass(b.remove);for(var A in v)"function"==typeof v[A]||!v[A]||-1!=A.indexOf("Moz")||-1!=A.indexOf("length")||v[A]==u[A]||!A.match(/color/i)&&(A.match(/color/i)||isNaN(parseInt(v[A],10)))||"static"==u.position&&("static"!=u.position||A.match(/left|top|bottom|right/))||(d[A]=v[A]);g.animate(d,c,n,function(){"object"==typeof a(this).attr("style")?(a(this).attr("style").cssText="",a(this).attr("style").cssText=h):a(this).attr("style",h);b.add&&a(this).addClass(b.add);
b.remove&&a(this).removeClass(b.remove);k&&k.apply(this,arguments)})})}};a.fn.extend({_show:a.fn.show,_hide:a.fn.hide,__toggle:a.fn.toggle,_addClass:a.fn.addClass,_removeClass:a.fn.removeClass,_toggleClass:a.fn.toggleClass,effect:function(b,c,d,g){return a.effects[b]?a.effects[b].call(this,{method:b,options:c||{},duration:d,callback:g}):null},show:function(){return!arguments[0]||arguments[0].constructor==Number||/(slow|normal|fast)/.test(arguments[0])?this._show.apply(this,arguments):this.effect.apply(this,
b(arguments,"show"))},hide:function(){return!arguments[0]||arguments[0].constructor==Number||/(slow|normal|fast)/.test(arguments[0])?this._hide.apply(this,arguments):this.effect.apply(this,b(arguments,"hide"))},toggle:function(){return!arguments[0]||arguments[0].constructor==Number||/(slow|normal|fast)/.test(arguments[0])||a.isFunction(arguments[0])||"boolean"==typeof arguments[0]?this.__toggle.apply(this,arguments):this.effect.apply(this,b(arguments,"toggle"))},addClass:function(b,c,d,g){return c?
a.effects.animateClass.apply(this,[{add:b},c,d,g]):this._addClass(b)},removeClass:function(b,c,d,g){return c?a.effects.animateClass.apply(this,[{remove:b},c,d,g]):this._removeClass(b)},toggleClass:function(b,c,d,g){return"boolean"!==typeof c&&c?a.effects.animateClass.apply(this,[{toggle:b},c,d,g]):this._toggleClass(b,c)},morph:function(b,c,d,g,k){return a.effects.animateClass.apply(this,[{add:c,remove:b},d,g,k])},switchClass:function(){return this.morph.apply(this,arguments)},cssUnit:function(b){var c=
this.css(b),d=[];a.each(["em","px","%","pt"],function(a,b){0<c.indexOf(b)&&(d=[parseFloat(c),b])});return d}});a.each("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color outlineColor".split(" "),function(b,d){a.fx.step[d]=function(b){if(0==b.state){var e;e=b.elem;var k=d,n;do{n=a.curCSS(e,k);if(""!=n&&"transparent"!=n||a.nodeName(e,"body"))break;k="backgroundColor"}while(e=e.parentNode);e=c(n);b.start=e;b.end=c(b.end)}b.elem.style[d]="rgb("+[Math.max(Math.min(parseInt(b.pos*
(b.end[0]-b.start[0])+b.start[0],10),255),0),Math.max(Math.min(parseInt(b.pos*(b.end[1]-b.start[1])+b.start[1],10),255),0),Math.max(Math.min(parseInt(b.pos*(b.end[2]-b.start[2])+b.start[2],10),255),0)].join()+")"}});var d={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],
darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,
0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]};a.easing.jswing=a.easing.swing;a.extend(a.easing,{def:"easeOutQuad",swing:function(b,c,d,g,k){return a.easing[a.easing.def](b,c,d,g,k)},easeInQuad:function(a,b,c,d,k){return d*(b/=k)*b+c},easeOutQuad:function(a,b,c,d,k){return-d*(b/=k)*(b-2)+c},easeInOutQuad:function(a,b,c,d,k){return 1>(b/=k/2)?d/2*b*b+c:-d/2*(--b*(b-2)-1)+c},easeInCubic:function(a,b,c,d,k){return d*(b/=k)*b*b+c},easeOutCubic:function(a,
b,c,d,k){return d*((b=b/k-1)*b*b+1)+c},easeInOutCubic:function(a,b,c,d,k){return 1>(b/=k/2)?d/2*b*b*b+c:d/2*((b-=2)*b*b+2)+c},easeInQuart:function(a,b,c,d,k){return d*(b/=k)*b*b*b+c},easeOutQuart:function(a,b,c,d,k){return-d*((b=b/k-1)*b*b*b-1)+c},easeInOutQuart:function(a,b,c,d,k){return 1>(b/=k/2)?d/2*b*b*b*b+c:-d/2*((b-=2)*b*b*b-2)+c},easeInQuint:function(a,b,c,d,k){return d*(b/=k)*b*b*b*b+c},easeOutQuint:function(a,b,c,d,k){return d*((b=b/k-1)*b*b*b*b+1)+c},easeInOutQuint:function(a,b,c,d,k){return 1>
(b/=k/2)?d/2*b*b*b*b*b+c:d/2*((b-=2)*b*b*b*b+2)+c},easeInSine:function(a,b,c,d,k){return-d*Math.cos(b/k*(Math.PI/2))+d+c},easeOutSine:function(a,b,c,d,k){return d*Math.sin(b/k*(Math.PI/2))+c},easeInOutSine:function(a,b,c,d,k){return-d/2*(Math.cos(Math.PI*b/k)-1)+c},easeInExpo:function(a,b,c,d,k){return 0==b?c:d*Math.pow(2,10*(b/k-1))+c},easeOutExpo:function(a,b,c,d,k){return b==k?c+d:d*(-Math.pow(2,-10*b/k)+1)+c},easeInOutExpo:function(a,b,c,d,k){return 0==b?c:b==k?c+d:1>(b/=k/2)?d/2*Math.pow(2,10*
(b-1))+c:d/2*(-Math.pow(2,-10*--b)+2)+c},easeInCirc:function(a,b,c,d,k){return-d*(Math.sqrt(1-(b/=k)*b)-1)+c},easeOutCirc:function(a,b,c,d,k){return d*Math.sqrt(1-(b=b/k-1)*b)+c},easeInOutCirc:function(a,b,c,d,k){return 1>(b/=k/2)?-d/2*(Math.sqrt(1-b*b)-1)+c:d/2*(Math.sqrt(1-(b-=2)*b)+1)+c},easeInElastic:function(a,b,c,d,k){a=1.70158;var n=0,q=d;if(0==b)return c;if(1==(b/=k))return c+d;n||(n=.3*k);q<Math.abs(d)?(q=d,a=n/4):a=n/(2*Math.PI)*Math.asin(d/q);return-(q*Math.pow(2,10*(b-=1))*Math.sin(2*
(b*k-a)*Math.PI/n))+c},easeOutElastic:function(a,b,c,d,k){a=1.70158;var n=0,q=d;if(0==b)return c;if(1==(b/=k))return c+d;n||(n=.3*k);q<Math.abs(d)?(q=d,a=n/4):a=n/(2*Math.PI)*Math.asin(d/q);return q*Math.pow(2,-10*b)*Math.sin(2*(b*k-a)*Math.PI/n)+d+c},easeInOutElastic:function(a,b,c,d,k){a=1.70158;var n=0,q=d;if(0==b)return c;if(2==(b/=k/2))return c+d;n||(n=.3*k*1.5);q<Math.abs(d)?(q=d,a=n/4):a=n/(2*Math.PI)*Math.asin(d/q);return 1>b?-.5*q*Math.pow(2,10*(b-=1))*Math.sin(2*(b*k-a)*Math.PI/n)+c:q*Math.pow(2,
-10*(b-=1))*Math.sin(2*(b*k-a)*Math.PI/n)*.5+d+c},easeInBack:function(a,b,c,d,k,n){void 0==n&&(n=1.70158);return d*(b/=k)*b*((n+1)*b-n)+c},easeOutBack:function(a,b,c,d,k,n){void 0==n&&(n=1.70158);return d*((b=b/k-1)*b*((n+1)*b+n)+1)+c},easeInOutBack:function(a,b,c,d,k,n){void 0==n&&(n=1.70158);return 1>(b/=k/2)?d/2*b*b*(((n*=1.525)+1)*b-n)+c:d/2*((b-=2)*b*(((n*=1.525)+1)*b+n)+2)+c},easeInBounce:function(b,c,d,g,k){return g-a.easing.easeOutBounce(b,k-c,0,g,k)+d},easeOutBounce:function(a,b,c,d,k){return(b/=
k)<1/2.75?7.5625*d*b*b+c:b<2/2.75?d*(7.5625*(b-=1.5/2.75)*b+.75)+c:b<2.5/2.75?d*(7.5625*(b-=2.25/2.75)*b+.9375)+c:d*(7.5625*(b-=2.625/2.75)*b+.984375)+c},easeInOutBounce:function(b,c,d,g,k){return c<k/2?.5*a.easing.easeInBounce(b,2*c,0,g,k)+d:.5*a.easing.easeOutBounce(b,2*c-k,0,g,k)+.5*g+d}})}(jQuery);
(function(a){a.effects.blind=function(b){return this.queue(function(){var c=a(this),d=["position","top","left"],e=a.effects.setMode(c,b.options.mode||"hide"),f=b.options.direction||"vertical";a.effects.save(c,d);c.show();var h=a.effects.createWrapper(c).css({overflow:"hidden"}),g="vertical"==f?"height":"width",f="vertical"==f?h.height():h.width();"show"==e&&h.css(g,0);var k={};k[g]="show"==e?f:0;h.animate(k,b.duration,b.options.easing,function(){"hide"==e&&c.hide();a.effects.restore(c,d);a.effects.removeWrapper(c);
b.callback&&b.callback.apply(c[0],arguments);c.dequeue()})})}})(jQuery);
(function(a){a.effects.bounce=function(b){return this.queue(function(){var c=a(this),d=["position","top","left"],e=a.effects.setMode(c,b.options.mode||"effect"),f=b.options.direction||"up",h=b.options.distance||20,g=b.options.times||5,k=b.duration||250;/show|hide/.test(e)&&d.push("opacity");a.effects.save(c,d);c.show();a.effects.createWrapper(c);var n="up"==f||"down"==f?"top":"left",f="up"==f||"left"==f?"pos":"neg",h=b.options.distance||("top"==n?c.outerHeight({margin:!0})/3:c.outerWidth({margin:!0})/
3);"show"==e&&c.css("opacity",0).css(n,"pos"==f?-h:h);"hide"==e&&(h/=2*g);"hide"!=e&&g--;if("show"==e){var q={opacity:1};q[n]=("pos"==f?"+=":"-=")+h;c.animate(q,k/2,b.options.easing);h/=2;g--}for(q=0;q<g;q++){var m={},p={};m[n]=("pos"==f?"-=":"+=")+h;p[n]=("pos"==f?"+=":"-=")+h;c.animate(m,k/2,b.options.easing).animate(p,k/2,b.options.easing);h="hide"==e?2*h:h/2}"hide"==e?(q={opacity:0},q[n]=("pos"==f?"-=":"+=")+h,c.animate(q,k/2,b.options.easing,function(){c.hide();a.effects.restore(c,d);a.effects.removeWrapper(c);
b.callback&&b.callback.apply(this,arguments)})):(m={},p={},m[n]=("pos"==f?"-=":"+=")+h,p[n]=("pos"==f?"+=":"-=")+h,c.animate(m,k/2,b.options.easing).animate(p,k/2,b.options.easing,function(){a.effects.restore(c,d);a.effects.removeWrapper(c);b.callback&&b.callback.apply(this,arguments)}));c.queue("fx",function(){c.dequeue()});c.dequeue()})}})(jQuery);
(function(a){a.effects.clip=function(b){return this.queue(function(){var c=a(this),d=["position","top","left","height","width"],e=a.effects.setMode(c,b.options.mode||"hide"),f=b.options.direction||"vertical";a.effects.save(c,d);c.show();var h=a.effects.createWrapper(c).css({overflow:"hidden"}),h="IMG"==c[0].tagName?h:c,g="vertical"==f?"height":"width",k="vertical"==f?"top":"left",f="vertical"==f?h.height():h.width();"show"==e&&(h.css(g,0),h.css(k,f/2));var n={};n[g]="show"==e?f:0;n[k]="show"==e?0:
f/2;h.animate(n,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){"hide"==e&&c.hide();a.effects.restore(c,d);a.effects.removeWrapper(c);b.callback&&b.callback.apply(c[0],arguments);c.dequeue()}})})}})(jQuery);
(function(a){a.effects.drop=function(b){return this.queue(function(){var c=a(this),d=["position","top","left","opacity"],e=a.effects.setMode(c,b.options.mode||"hide"),f=b.options.direction||"left";a.effects.save(c,d);c.show();a.effects.createWrapper(c);var h="up"==f||"down"==f?"top":"left",f="up"==f||"left"==f?"pos":"neg",g=b.options.distance||("top"==h?c.outerHeight({margin:!0})/2:c.outerWidth({margin:!0})/2);"show"==e&&c.css("opacity",0).css(h,"pos"==f?-g:g);var k={opacity:"show"==e?1:0};k[h]=("show"==
e?"pos"==f?"+=":"-=":"pos"==f?"-=":"+=")+g;c.animate(k,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){"hide"==e&&c.hide();a.effects.restore(c,d);a.effects.removeWrapper(c);b.callback&&b.callback.apply(this,arguments);c.dequeue()}})})}})(jQuery);
(function(a){a.effects.explode=function(b){return this.queue(function(){var c=b.options.pieces?Math.round(Math.sqrt(b.options.pieces)):3,d=b.options.pieces?Math.round(Math.sqrt(b.options.pieces)):3;b.options.mode="toggle"==b.options.mode?a(this).is(":visible")?"hide":"show":b.options.mode;var e=a(this).show().css("visibility","hidden"),f=e.offset();f.top-=parseInt(e.css("marginTop"),10)||0;f.left-=parseInt(e.css("marginLeft"),10)||0;for(var h=e.outerWidth(!0),g=e.outerHeight(!0),k=0;k<c;k++)for(var n=
0;n<d;n++)e.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:h/d*-n,top:g/c*-k}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:h/d,height:g/c,left:f.left+h/d*n+("show"==b.options.mode?h/d*(n-Math.floor(d/2)):0),top:f.top+g/c*k+("show"==b.options.mode?g/c*(k-Math.floor(c/2)):0),opacity:"show"==b.options.mode?0:1}).animate({left:f.left+h/d*n+("show"==b.options.mode?0:h/d*(n-Math.floor(d/2))),top:f.top+g/c*k+("show"==
b.options.mode?0:g/c*(k-Math.floor(c/2))),opacity:"show"==b.options.mode?1:0},b.duration||500);setTimeout(function(){"show"==b.options.mode?e.css({visibility:"visible"}):e.css({visibility:"visible"}).hide();b.callback&&b.callback.apply(e[0]);e.dequeue();a("div.ui-effects-explode").remove()},b.duration||500)})}})(jQuery);
(function(a){a.effects.fold=function(b){return this.queue(function(){var c=a(this),d=["position","top","left"],e=a.effects.setMode(c,b.options.mode||"hide"),f=b.options.size||15,h=!!b.options.horizFirst,g=b.duration?b.duration/2:a.fx.speeds._default/2;a.effects.save(c,d);c.show();var k=a.effects.createWrapper(c).css({overflow:"hidden"}),n="show"==e!=h,q=n?["width","height"]:["height","width"],n=n?[k.width(),k.height()]:[k.height(),k.width()],m=/([0-9]+)%/.exec(f);m&&(f=parseInt(m[1],10)/100*n["hide"==
e?0:1]);"show"==e&&k.css(h?{height:0,width:f}:{height:f,width:0});h={};m={};h[q[0]]="show"==e?n[0]:f;m[q[1]]="show"==e?n[1]:0;k.animate(h,g,b.options.easing).animate(m,g,b.options.easing,function(){"hide"==e&&c.hide();a.effects.restore(c,d);a.effects.removeWrapper(c);b.callback&&b.callback.apply(c[0],arguments);c.dequeue()})})}})(jQuery);
(function(a){a.effects.highlight=function(b){return this.queue(function(){var c=a(this),d=["backgroundImage","backgroundColor","opacity"],e=a.effects.setMode(c,b.options.mode||"show"),f=b.options.color||"#ffff99",h=c.css("backgroundColor");a.effects.save(c,d);c.show();c.css({backgroundImage:"none",backgroundColor:f});f={backgroundColor:h};"hide"==e&&(f.opacity=0);c.animate(f,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){"hide"==e&&c.hide();a.effects.restore(c,d);"show"==
e&&a.browser.msie&&this.style.removeAttribute("filter");b.callback&&b.callback.apply(this,arguments);c.dequeue()}})})}})(jQuery);
(function(a){a.effects.pulsate=function(b){return this.queue(function(){var c=a(this),d=a.effects.setMode(c,b.options.mode||"show"),e=b.options.times||5,f=b.duration?b.duration/2:a.fx.speeds._default/2;"hide"==d&&e--;c.is(":hidden")&&(c.css("opacity",0),c.show(),c.animate({opacity:1},f,b.options.easing),e-=2);for(var h=0;h<e;h++)c.animate({opacity:0},f,b.options.easing).animate({opacity:1},f,b.options.easing);"hide"==d?c.animate({opacity:0},f,b.options.easing,function(){c.hide();b.callback&&b.callback.apply(this,
arguments)}):c.animate({opacity:0},f,b.options.easing).animate({opacity:1},f,b.options.easing,function(){b.callback&&b.callback.apply(this,arguments)});c.queue("fx",function(){c.dequeue()});c.dequeue()})}})(jQuery);
(function(a){a.effects.puff=function(b){return this.queue(function(){var c=a(this),d=a.extend(!0,{},b.options),e=a.effects.setMode(c,b.options.mode||"hide"),f=parseInt(b.options.percent,10)||150;d.fade=!0;var h={height:c.height(),width:c.width()},g=f/100;c.from="hide"==e?h:{height:h.height*g,width:h.width*g};d.from=c.from;d.percent="hide"==e?f:100;d.mode=e;c.effect("scale",d,b.duration,b.callback);c.dequeue()})};a.effects.scale=function(b){return this.queue(function(){var c=a(this),d=a.extend(!0,
{},b.options),e=a.effects.setMode(c,b.options.mode||"effect"),f=parseInt(b.options.percent,10)||(0==parseInt(b.options.percent,10)?0:"hide"==e?0:100),h=b.options.direction||"both",g=b.options.origin;"effect"!=e&&(d.origin=g||["middle","center"],d.restore=!0);g={height:c.height(),width:c.width()};c.from=b.options.from||("show"==e?{height:0,width:0}:g);c.to={height:g.height*("horizontal"!=h?f/100:1),width:g.width*("vertical"!=h?f/100:1)};b.options.fade&&("show"==e&&(c.from.opacity=0,c.to.opacity=1),
"hide"==e&&(c.from.opacity=1,c.to.opacity=0));d.from=c.from;d.to=c.to;d.mode=e;c.effect("size",d,b.duration,b.callback);c.dequeue()})};a.effects.size=function(b){return this.queue(function(){var c=a(this),d="position top left width height overflow opacity".split(" "),e=["position","top","left","overflow","opacity"],f=["width","height","overflow"],h=["fontSize"],g=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],k=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],
n=a.effects.setMode(c,b.options.mode||"effect"),q=b.options.restore||!1,m=b.options.scale||"both",p=b.options.origin,u={height:c.height(),width:c.width()};c.from=b.options.from||u;c.to=b.options.to||u;p&&(p=a.effects.getBaseline(p,u),c.from.top=(u.height-c.from.height)*p.y,c.from.left=(u.width-c.from.width)*p.x,c.to.top=(u.height-c.to.height)*p.y,c.to.left=(u.width-c.to.width)*p.x);var v=c.from.height/u.height,A=c.from.width/u.width,D=c.to.height/u.height,x=c.to.width/u.width;if("box"==m||"both"==
m)v!=D&&(d=d.concat(g),c.from=a.effects.setTransition(c,g,v,c.from),c.to=a.effects.setTransition(c,g,D,c.to)),A!=x&&(d=d.concat(k),c.from=a.effects.setTransition(c,k,A,c.from),c.to=a.effects.setTransition(c,k,x,c.to));"content"!=m&&"both"!=m||v==D||(d=d.concat(h),c.from=a.effects.setTransition(c,h,v,c.from),c.to=a.effects.setTransition(c,h,D,c.to));a.effects.save(c,q?d:e);c.show();a.effects.createWrapper(c);c.css("overflow","hidden").css(c.from);if("content"==m||"both"==m)g=g.concat(["marginTop",
"marginBottom"]).concat(h),k=k.concat(["marginLeft","marginRight"]),f=d.concat(g).concat(k),c.find("*[width]").each(function(){child=a(this);q&&a.effects.save(child,f);var c=child.height(),d=child.width();child.from={height:c*v,width:d*A};child.to={height:c*D,width:d*x};v!=D&&(child.from=a.effects.setTransition(child,g,v,child.from),child.to=a.effects.setTransition(child,g,D,child.to));A!=x&&(child.from=a.effects.setTransition(child,k,A,child.from),child.to=a.effects.setTransition(child,k,x,child.to));
child.css(child.from);child.animate(child.to,b.duration,b.options.easing,function(){q&&a.effects.restore(child,f)})});c.animate(c.to,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){"hide"==n&&c.hide();a.effects.restore(c,q?d:e);a.effects.removeWrapper(c);b.callback&&b.callback.apply(this,arguments);c.dequeue()}})})}})(jQuery);
(function(a){a.effects.shake=function(b){return this.queue(function(){var c=a(this),d=["position","top","left"];a.effects.setMode(c,b.options.mode||"effect");var e=b.options.direction||"left",f=b.options.distance||20,h=b.options.times||3,g=b.duration||b.options.duration||140;a.effects.save(c,d);c.show();a.effects.createWrapper(c);var k="up"==e||"down"==e?"top":"left",n="up"==e||"left"==e?"pos":"neg",e={},q={},m={};e[k]=("pos"==n?"-=":"+=")+f;q[k]=("pos"==n?"+=":"-=")+2*f;m[k]=("pos"==n?"-=":"+=")+
2*f;c.animate(e,g,b.options.easing);for(f=1;f<h;f++)c.animate(q,g,b.options.easing).animate(m,g,b.options.easing);c.animate(q,g,b.options.easing).animate(e,g/2,b.options.easing,function(){a.effects.restore(c,d);a.effects.removeWrapper(c);b.callback&&b.callback.apply(this,arguments)});c.queue("fx",function(){c.dequeue()});c.dequeue()})}})(jQuery);
(function(a){a.effects.slide=function(b){return this.queue(function(){var c=a(this),d=["position","top","left"],e=a.effects.setMode(c,b.options.mode||"show"),f=b.options.direction||"left";a.effects.save(c,d);c.show();a.effects.createWrapper(c).css({overflow:"hidden"});var h="up"==f||"down"==f?"top":"left",f="up"==f||"left"==f?"pos":"neg",g=b.options.distance||("top"==h?c.outerHeight({margin:!0}):c.outerWidth({margin:!0}));"show"==e&&c.css(h,"pos"==f?-g:g);var k={};k[h]=("show"==e?"pos"==f?"+=":"-=":
"pos"==f?"-=":"+=")+g;c.animate(k,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){"hide"==e&&c.hide();a.effects.restore(c,d);a.effects.removeWrapper(c);b.callback&&b.callback.apply(this,arguments);c.dequeue()}})})}})(jQuery);
(function(a){a.effects.transfer=function(b){return this.queue(function(){var c=a(this),d=a(b.options.to),e=d.offset(),d={top:e.top,left:e.left,height:d.innerHeight(),width:d.innerWidth()},e=c.offset(),f=a('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(b.options.className).css({top:e.top,left:e.left,height:c.innerHeight(),width:c.innerWidth(),position:"absolute"}).animate(d,b.duration,b.options.easing,function(){f.remove();b.callback&&b.callback.apply(c[0],arguments);c.dequeue()})})}})(jQuery);
(function(a){a.fn.autogrow=function(b){return this.each(function(){new a.autogrow(this,b)})};a.autogrow=function(b,c){this.options=c||{};this.interval=this.dummy=null;this.line_height=this.options.lineHeight||parseInt(a(b).css("line-height"));this.min_height=this.options.minHeight||parseInt(a(b).css("min-height"));this.max_height=this.options.maxHeight||parseInt(a(b).css("max-height"));this.textarea=a(b);isNaN(this.line_height)&&(this.line_height=0);this.init()};a.autogrow.fn=a.autogrow.prototype=
{autogrow:"1.2.2"};a.autogrow.fn.extend=a.autogrow.extend=a.extend;a.autogrow.fn.extend({init:function(){var a=this;this.textarea.css({overflow:"hidden",display:"block"});this.textarea.bind("focus",function(){a.startExpand()}).bind("blur",function(){a.stopExpand()});this.checkExpand()},startExpand:function(){var a=this;this.interval=window.setInterval(function(){a.checkExpand()},400)},stopExpand:function(){clearInterval(this.interval)},checkExpand:function(){null==this.dummy&&(this.dummy=a("<div></div>"),
this.dummy.css({"font-size":this.textarea.css("font-size"),"font-family":this.textarea.css("font-family"),width:this.textarea.css("width"),padding:this.textarea.css("padding"),"line-height":this.line_height+"px","overflow-x":"hidden",position:"absolute",top:0,left:-9999}).appendTo("body"));var b=this.textarea.val().replace(/(<|>)/g,""),b=$.browser.msie?b.replace(/\n/g,"<BR>new"):b.replace(/\n/g,"<br>new");this.dummy.html()!=b&&(this.dummy.html(b),0<this.max_height&&this.dummy.height()+this.line_height>
this.max_height?this.textarea.css("overflow-y","auto"):(this.textarea.css("overflow-y","hidden"),(this.textarea.height()<this.dummy.height()+this.line_height||this.dummy.height()+250<this.textarea.height())&&this.textarea.height(this.dummy.height()+this.line_height+75+"px")))}})})(jQuery);
(function(a){a.fn.editable=function(b,c){if("disable"==b)a(this).data("disabled.editable",!0);else if("enable"==b)a(this).data("disabled.editable",!1);else if("destroy"==b)a(this).unbind(a(this).data("event.editable")).removeData("disabled.editable").removeData("event.editable");else{var d=a.extend({},a.fn.editable.defaults,{target:b},c),e=a.editable.types[d.type].plugin||function(){},f=a.editable.types[d.type].submit||function(){},h=a.editable.types[d.type].buttons||a.editable.types.defaults.buttons,
g=a.editable.types[d.type].content||a.editable.types.defaults.content,k=a.editable.types[d.type].element||a.editable.types.defaults.element,n=a.editable.types[d.type].reset||a.editable.types.defaults.reset,q=d.callback||function(){},m=d.onedit||function(){},p=d.onsubmit||function(){},u=d.onreset||function(){},v=d.onerror||n;d.tooltip&&a(this).attr("title",d.tooltip);d.autowidth="auto"==d.width;d.autoheight="auto"==d.height;return this.each(function(){var b=this,c=a(b).width(),x=a(b).height();a(this).data("event.editable",
d.event);a.trim(a(this).html())||a(this).html(d.placeholder);a(this).bind(d.event,function(B){if(!0!==a(this).data("disabled.editable")&&!b.editing&&!1!==m.apply(this,[d,b])){B.preventDefault();B.stopPropagation();d.tooltip&&a(b).removeAttr("title");0==a(b).width()?(d.width=c,d.height=x):("none"!=d.width&&(d.width=d.autowidth?a(b).width():d.width),"none"!=d.height&&(d.height=d.autoheight?a(b).height():d.height));a(this).html().toLowerCase().replace(/(;|")/g,"")==d.placeholder.toLowerCase().replace(/(;|")/g,
"")&&a(this).html("");b.editing=!0;b.revert=a(b).html();a(b).html("");var s=a("<form />");d.cssclass&&("inherit"==d.cssclass?s.attr("class",a(b).attr("class")):s.attr("class",d.cssclass));d.style&&("inherit"==d.style?(s.attr("style",a(b).attr("style")),s.css("display",a(b).css("display"))):s.attr("style",d.style));var u=k.apply(s,[d,b]),K;if(d.loadurl){var J=setTimeout(function(){u.disabled=!0;g.apply(s,[d.loadtext,d,b])},100);B={};B[d.id]=b.id;a.isFunction(d.loaddata)?a.extend(B,d.loaddata.apply(b,
[b.revert,d])):a.extend(B,d.loaddata);a.ajax({type:d.loadtype,url:d.loadurl,data:B,async:!1,success:function(a){window.clearTimeout(J);K=a;u.disabled=!1}})}else d.data?(K=d.data,a.isFunction(d.data)&&(K=d.data.apply(b,[b.revert,d]))):K=b.revert;g.apply(s,[K,d,b]);u.attr("name",d.name);h.apply(s,[d,b]);a(b).append(s);e.apply(s,[d,b]);d.focus&&a(":not(button):input:visible:enabled:first",s).focus();d.select&&u.select();u.keydown(function(a){27==a.keyCode&&(a.preventDefault(),n.apply(s,[d,b]))});"cancel"==
d.onblur?u.blur(function(a){J=setTimeout(function(){n.apply(s,[d,b])},500)}):"submit"==d.onblur?u.blur(function(a){J=setTimeout(function(){s.submit()},200)}):a.isFunction(d.onblur)?u.blur(function(a){d.onblur.apply(b,[u.val(),d])}):u.blur(function(a){});s.submit(function(c){J&&clearTimeout(J);c.preventDefault();if(!1!==p.apply(s,[d,b])&&!1!==f.apply(s,[d,b]))if(a.isFunction(d.target))c=d.target.apply(b,[u.val(),d]),a(b).html(c),b.editing=!1,q.apply(b,[b.innerHTML,d]),a.trim(a(b).html())||a(b).html(d.placeholder);
else{c={};c[d.name]=u.val();c[d.id]=b.id;a.isFunction(d.submitdata)?a.extend(c,d.submitdata.apply(b,[b.revert,d])):a.extend(c,d.submitdata);"PUT"==d.method&&(c._method="put");a(b).html(d.indicator);var e={type:"POST",data:c,dataType:"html",url:d.target,success:function(c,f){"html"==e.dataType&&a(b).html(c);b.editing=!1;q.apply(b,[c,d]);a.trim(a(b).html())||a(b).html(d.placeholder)},error:function(a,c,e){v.apply(s,[d,b,a])}};a.extend(e,d.ajaxoptions);a.ajax(e)}a(b).attr("title",d.tooltip);return!1})}});
this.reset=function(c){this.editing&&!1!==u.apply(c,[d,b])&&(a(b).html(b.revert),b.editing=!1,a.trim(a(b).html())||a(b).html(d.placeholder),d.tooltip&&a(b).attr("title",d.tooltip))}})}};a.editable={types:{defaults:{element:function(b,c){var d=a('<input type="hidden"></input>');a(this).append(d);return d},content:function(b,c,d){a(":input:first",this).val(b)},reset:function(a,c){c.reset(this)},buttons:function(b,c){var d=this;if(b.submit){if(b.submit.match(/>$/))var e=a(b.submit).click(function(){"submit"!=
e.attr("type")&&d.submit()});else e=a('<button type="submit" />'),e.html(b.submit);a(this).append(e)}if(b.cancel){if(b.cancel.match(/>$/))var f=a(b.cancel);else f=a('<button type="cancel" />'),f.html(b.cancel);a(this).append(f);a(f).click(function(e){(a.isFunction(a.editable.types[b.type].reset)?a.editable.types[b.type].reset:a.editable.types.defaults.reset).apply(d,[b,c]);return!1})}}},text:{element:function(b,c){var d=a("<input />");"none"!=b.width&&d.width(b.width);"none"!=b.height&&d.height(b.height);
d.attr("autocomplete","off");a(this).append(d);return d}},textarea:{element:function(b,c){var d=a("<textarea />");b.rows?d.attr("rows",b.rows):"none"!=b.height&&d.height(b.height);b.cols?d.attr("cols",b.cols):"none"!=b.width&&d.width(b.width);a(this).append(d);return d}},select:{element:function(b,c){var d=a("<select />");a(this).append(d);return d},content:function(b,c,d){if(String==b.constructor)eval("var json = "+b);else var e=b;for(var f in e)e.hasOwnProperty(f)&&"selected"!=f&&(b=a("<option />").val(f).append(e[f]),
a("select",this).append(b));a("select",this).children().each(function(){a(this).val()!=e.selected&&a(this).text()!=a.trim(d.revert)||a(this).attr("selected","selected")})}}},addInputType:function(b,c){a.editable.types[b]=c}};a.fn.editable.defaults={name:"value",id:"id",type:"text",width:"auto",height:"auto",event:"click.editable",onblur:"cancel",loadtype:"GET",loadtext:"Loading...",placeholder:"Click to edit",focus:!0,loaddata:{},submitdata:{},ajaxoptions:{}}})(jQuery);
$.editable.addInputType("autogrow",{element:function(a,b){var c=$("<textarea />");a.rows?c.attr("rows",a.rows):c.height(a.height);a.cols?c.attr("cols",a.cols):c.width(a.width);$(this).append(c);return c},plugin:function(a,b){$("textarea",this).autogrow(a.autogrow);a.duplicate_buttons&&($(this).prepend($(this).find("button").clone()),$(this).find('button[type="cancel"]:first').click(function(c){($.isFunction($.editable.types[a.type].reset)?$.editable.types[a.type].reset:$.editable.types.defaults.reset).apply(b.form,
[a,b]);return!1}))}});
(function(a){function b(a){return"object"==typeof a?a:{top:a,left:a}}var c=a.scrollTo=function(b,c,f){a(window).scrollTo(b,c,f)};c.defaults={axis:"xy",duration:1.3<=parseFloat(a.fn.jquery)?0:1};c.window=function(b){return a(window)._scrollable()};a.fn._scrollable=function(){return this.map(function(){if(this.nodeName&&-1==a.inArray(this.nodeName.toLowerCase(),["iframe","#document","html","body"]))return this;var b=(this.contentWindow||this).document||this.ownerDocument||this;return a.browser.safari||
"BackCompat"==b.compatMode?b.body:b.documentElement})};a.fn.scrollTo=function(d,e,f){"object"==typeof e&&(f=e,e=0);"function"==typeof f&&(f={onAfter:f});"max"==d&&(d=9E9);f=a.extend({},c.defaults,f);e=e||f.speed||f.duration;f.queue=f.queue&&1<f.axis.length;f.queue&&(e/=2);f.offset=b(f.offset);f.over=b(f.over);return this._scrollable().each(function(){function h(a){k.animate(m,e,f.easing,a&&function(){a.call(this,d,f)})}var g=this,k=a(g),n=d,q,m={},p=k.is("html,body");switch(typeof n){case "number":case "string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(n)){n=
b(n);break}n=a(n,this);case "object":if(n.is||n.style)q=(n=a(n)).offset()}a.each(f.axis.split(""),function(a,b){var d="x"==b?"Left":"Top",e=d.toLowerCase(),x="scroll"+d,B=g[x],s=c.max(g,b);q?(m[x]=q[e]+(p?0:B-k.offset()[e]),f.margin&&(m[x]-=parseInt(n.css("margin"+d))||0,m[x]-=parseInt(n.css("border"+d+"Width"))||0),m[x]+=f.offset[e]||0,f.over[e]&&(m[x]+=n["x"==b?"width":"height"]()*f.over[e])):(d=n[e],m[x]=d.slice&&"%"==d.slice(-1)?parseFloat(d)/100*s:d);/^\d+$/.test(m[x])&&(m[x]=0>=m[x]?0:Math.min(m[x],
s));!a&&f.queue&&(B!=m[x]&&h(f.onAfterFirst),delete m[x])});h(f.onAfter)}).end()};c.max=function(b,c){var f="x"==c?"Width":"Height",h="scroll"+f;if(!a(b).is("html,body"))return b[h]-a(b)[f.toLowerCase()]();var f="client"+f,g=b.ownerDocument.documentElement,k=b.ownerDocument.body;return Math.max(g[h],k[h])-Math.min(g[f],k[f])}})(jQuery);
(function(a){function b(b){var c=this.form;c.clk=this;if("image"==this.type)if(void 0!=b.offsetX)c.clk_x=b.offsetX,c.clk_y=b.offsetY;else if("function"==typeof a.fn.offset){var f=a(this).offset();c.clk_x=b.pageX-f.left;c.clk_y=b.pageY-f.top}else c.clk_x=b.pageX-this.offsetLeft,c.clk_y=b.pageY-this.offsetTop;setTimeout(function(){c.clk=c.clk_x=c.clk_y=null},10)}function c(){var b=a.fn.ajaxForm.optionHash[this.formPluginId];a(this).ajaxSubmit(b);return!1}a.fn.ajaxSubmit=function(b){function c(){function e(){if(!K++){x.detachEvent?
x.detachEvent("onload",e):x.removeEventListener("load",e,!1);var b=!0;try{if(J)throw"timeout";var c,d;d=x.contentWindow?x.contentWindow.document:x.contentDocument?x.contentDocument:x.document;s.responseText=d.body?d.body.innerHTML:null;s.responseXML=d.XMLDocument?d.XMLDocument:d;if("json"==h.dataType||"script"==h.dataType){var g=d.getElementsByTagName("textarea")[0];c=g?g.value:s.responseText;"json"==h.dataType?eval("data = "+c):a.globalEval(c)}else"xml"==h.dataType?(c=s.responseXML)||null==s.responseText||
(c=f(s.responseText)):c=s.responseText}catch(k){b=!1,a.handleError(h,s,"error",k)}b&&(h.success(c,"success"),G&&a.event.trigger("ajaxSuccess",[s,h]));G&&a.event.trigger("ajaxComplete",[s,h]);G&&!--a.active&&a.event.trigger("ajaxStop");h.complete&&h.complete(s,b?"success":"error");setTimeout(function(){q.remove();s.responseXML=null},100)}}function f(a,b){window.ActiveXObject?(b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a)):b=(new DOMParser).parseFromString(a,"text/xml");return b&&
b.documentElement&&"parsererror"!=b.documentElement.tagName?b:null}var g=k[0],h=a.extend({},a.ajaxSettings,b),n="jqFormIO"+a.fn.ajaxSubmit.counter++,q=a('<iframe id="'+n+'" name="'+n+'" />'),x=q[0],B=a.browser.opera&&9>window.opera.version();if(a.browser.msie||B)x.src='javascript:false;document.write("");';q.css({position:"absolute",top:"-1000px",left:"-1000px"});var s={responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){}},
G=h.global;G&&!a.active++&&a.event.trigger("ajaxStart");G&&a.event.trigger("ajaxSend",[s,h]);var K=0,J=0;setTimeout(function(){q.appendTo("body");x.attachEvent?x.attachEvent("onload",e):x.addEventListener("load",e,!1);var a=g.encoding?"encoding":"enctype",b=k.attr("target");k.attr({target:n,method:"POST",action:h.url});g[a]="multipart/form-data";h.timeout&&setTimeout(function(){J=!0;e()},h.timeout);g.submit();k.attr("target",b)},10)}"function"==typeof b&&(b={success:b});b=a.extend({url:this.attr("action")||
window.location,type:this.attr("method")||"GET"},b||{});var f={};a.event.trigger("form.pre.serialize",[this,b,f]);if(f.veto)return this;var h=this.formToArray(b.semantic);if(b.data)for(var g in b.data)h.push({name:g,value:b.data[g]});if(b.beforeSubmit&&!1===b.beforeSubmit(h,this,b))return this;a.event.trigger("form.submit.validate",[h,this,b,f]);if(f.veto)return this;f=a.param(h);"GET"==b.type.toUpperCase()?(b.url+=(0<=b.url.indexOf("?")?"&":"?")+f,b.data=null):b.data=f;var k=this,n=[];b.resetForm&&
n.push(function(){k.resetForm()});b.clearForm&&n.push(function(){k.clearForm()});if(!b.dataType&&b.target){var q=b.success||function(){};n.push(function(c){this.evalScripts?a(b.target).attr("innerHTML",c).evalScripts().each(q,arguments):a(b.target).html(c).each(q,arguments)})}else b.success&&n.push(b.success);b.success=function(a,b){for(var c=0,d=n.length;c<d;c++)n[c](a,b,k)};f=a("input:file",this).fieldValue();h=!1;for(g=0;g<f.length;g++)f[g]&&(h=!0);b.iframe||h?c():a.ajax(b);a.event.trigger("form.submit.notify",
[this,b]);return this};a.fn.ajaxSubmit.counter=0;a.fn.ajaxForm=function(d){return this.ajaxFormUnbind().submit(c).each(function(){this.formPluginId=a.fn.ajaxForm.counter++;a.fn.ajaxForm.optionHash[this.formPluginId]=d;a(":submit,input:image",this).click(b)})};a.fn.ajaxForm.counter=1;a.fn.ajaxForm.optionHash={};a.fn.ajaxFormUnbind=function(){this.unbind("submit",c);return this.each(function(){a(":submit,input:image",this).unbind("click",b)})};a.fn.formToArray=function(b){var c=[];if(0==this.length)return c;
var f=this[0],h=b?f.getElementsByTagName("*"):f.elements;if(!h)return c;for(var g=0,k=h.length;g<k;g++){var n=h[g],q=n.name;if(q)if(b&&f.clk&&"image"==n.type)n.disabled||f.clk!=n||c.push({name:q+".x",value:f.clk_x},{name:q+".y",value:f.clk_y});else if((n=a.fieldValue(n,!0))&&n.constructor==Array)for(var m=0,p=n.length;m<p;m++)c.push({name:q,value:n[m]});else null!==n&&"undefined"!=typeof n&&c.push({name:q,value:n})}if(!b&&f.clk)for(b=f.getElementsByTagName("input"),g=0,k=b.length;g<k;g++)h=b[g],(q=
h.name)&&!h.disabled&&"image"==h.type&&f.clk==h&&c.push({name:q+".x",value:f.clk_x},{name:q+".y",value:f.clk_y});return c};a.fn.formSerialize=function(b){return a.param(this.formToArray(b))};a.fn.fieldSerialize=function(b){var c=[];this.each(function(){var f=this.name;if(f){var h=a.fieldValue(this,b);if(h&&h.constructor==Array)for(var g=0,k=h.length;g<k;g++)c.push({name:f,value:h[g]});else null!==h&&"undefined"!=typeof h&&c.push({name:this.name,value:h})}});return a.param(c)};a.fn.fieldValue=function(b){for(var c=
[],f=0,h=this.length;f<h;f++){var g=a.fieldValue(this[f],b);null===g||"undefined"==typeof g||g.constructor==Array&&!g.length||(g.constructor==Array?a.merge(c,g):c.push(g))}return c};a.fieldValue=function(b,c){var f=b.name,h=b.type,g=b.tagName.toLowerCase();"undefined"==typeof c&&(c=!0);if(c&&(!f||b.disabled||"reset"==h||"button"==h||("checkbox"==h||"radio"==h)&&!b.checked||("submit"==h||"image"==h)&&b.form&&b.form.clk!=b||"select"==g&&-1==b.selectedIndex))return null;if("select"==g){var k=b.selectedIndex;
if(0>k)return null;for(var f=[],g=b.options,n=(h="select-one"==h)?k+1:g.length,k=h?k:0;k<n;k++){var q=g[k];if(q.selected){q=a.browser.msie&&!q.attributes.value.specified?q.text:q.value;if(h)return q;f.push(q)}}return f}return b.value};a.fn.clearForm=function(){return this.each(function(){a("input,select,textarea",this).clearFields()})};a.fn.clearFields=a.fn.clearInputs=function(){return this.each(function(){var a=this.type,b=this.tagName.toLowerCase();"text"==a||"password"==a||"textarea"==b?this.value=
"":"checkbox"==a||"radio"==a?this.checked=!1:"select"==b&&(this.selectedIndex=-1)})};a.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})}})(jQuery);
var swfobject=function(){function a(){if(!aa){try{var a=s.getElementsByTagName("body")[0].appendChild(s.createElement("span"));a.parentNode.removeChild(a)}catch(b){return}aa=!0;for(var a=J.length,c=0;c<a;c++)J[c]()}}function b(a){aa?a():J[J.length]=a}function c(a){if("undefined"!=typeof B.addEventListener)B.addEventListener("load",a,!1);else if("undefined"!=typeof s.addEventListener)s.addEventListener("load",a,!1);else if("undefined"!=typeof B.attachEvent)u(B,"onload",a);else if("function"==typeof B.onload){var b=
B.onload;B.onload=function(){b();a()}}else B.onload=a}function d(){var a=s.getElementsByTagName("body")[0],b=s.createElement("object");b.setAttribute("type","application/x-shockwave-flash");var c=a.appendChild(b);if(c){var d=0;(function(){if("undefined"!=typeof c.GetVariable){var f=c.GetVariable("$version");f&&(f=f.split(" ")[1].split(","),w.pv=[parseInt(f[0],10),parseInt(f[1],10),parseInt(f[2],10)])}else if(10>d){d++;setTimeout(arguments.callee,10);return}a.removeChild(b);c=null;e()})()}else e()}
function e(){var a=C.length;if(0<a)for(var b=0;b<a;b++){var c=C[b].id,d=C[b].callbackFn,e={success:!1,id:c};if(0<w.pv[0]){var m=p(c);if(m)if(!v(C[b].swfVersion)||w.wk&&312>w.wk)if(C[b].expressInstall&&h()){e={};e.data=C[b].expressInstall;e.width=m.getAttribute("width")||"0";e.height=m.getAttribute("height")||"0";m.getAttribute("class")&&(e.styleclass=m.getAttribute("class"));m.getAttribute("align")&&(e.align=m.getAttribute("align"));for(var n={},m=m.getElementsByTagName("param"),q=m.length,r=0;r<
q;r++)"movie"!=m[r].getAttribute("name").toLowerCase()&&(n[m[r].getAttribute("name")]=m[r].getAttribute("value"));g(e,n,c,d)}else k(m),d&&d(e);else D(c,!0),d&&(e.success=!0,e.ref=f(c),d(e))}else D(c,!0),d&&((c=f(c))&&"undefined"!=typeof c.SetVariable&&(e.success=!0,e.ref=c),d(e))}}function f(a){var b=null;(a=p(a))&&"OBJECT"==a.nodeName&&("undefined"!=typeof a.SetVariable?b=a:(a=a.getElementsByTagName("object")[0])&&(b=a));return b}function h(){return!r&&v("6.0.65")&&(w.win||w.mac)&&!(w.wk&&312>w.wk)}
function g(a,b,c,d){r=!0;E=d||null;X={success:!1,id:c};var e=p(c);if(e){"OBJECT"==e.nodeName?(Q=n(e),T=null):(Q=e,T=c);a.id="SWFObjectExprInst";if("undefined"==typeof a.width||!/%$/.test(a.width)&&310>parseInt(a.width,10))a.width="310";if("undefined"==typeof a.height||!/%$/.test(a.height)&&137>parseInt(a.height,10))a.height="137";s.title=s.title.slice(0,47)+" - Flash Player Installation";d=w.ie&&w.win?"ActiveX":"PlugIn";d="MMredirectURL="+B.location.toString().replace(/&/g,"%26")+"&MMplayerType="+
d+"&MMdoctitle="+s.title;b.flashvars="undefined"!=typeof b.flashvars?b.flashvars+("&"+d):d;w.ie&&w.win&&4!=e.readyState&&(d=s.createElement("div"),c+="SWFObjectNew",d.setAttribute("id",c),e.parentNode.insertBefore(d,e),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}());q(a,b,c)}}function k(a){if(w.ie&&w.win&&4!=a.readyState){var b=s.createElement("div");a.parentNode.insertBefore(b,a);b.parentNode.replaceChild(n(a),b);a.style.display="none";
(function(){4==a.readyState?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)})()}else a.parentNode.replaceChild(n(a),a)}function n(a){var b=s.createElement("div");if(w.win&&w.ie)b.innerHTML=a.innerHTML;else if(a=a.getElementsByTagName("object")[0])if(a=a.childNodes)for(var c=a.length,d=0;d<c;d++)1==a[d].nodeType&&"PARAM"==a[d].nodeName||8==a[d].nodeType||b.appendChild(a[d].cloneNode(!0));return b}function q(a,b,c){var d,e=p(c);if(w.wk&&312>w.wk)return d;if(e)if("undefined"==typeof a.id&&
(a.id=c),w.ie&&w.win){var f="",g;for(g in a)a[g]!=Object.prototype[g]&&("data"==g.toLowerCase()?b.movie=a[g]:"styleclass"==g.toLowerCase()?f+=' class="'+a[g]+'"':"classid"!=g.toLowerCase()&&(f+=" "+g+'="'+a[g]+'"'));g="";for(var h in b)b[h]!=Object.prototype[h]&&(g+='<param name="'+h+'" value="'+b[h]+'" />');e.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+f+">"+g+"</object>";L[L.length]=a.id;d=p(a.id)}else{h=s.createElement("object");h.setAttribute("type","application/x-shockwave-flash");
for(var k in a)a[k]!=Object.prototype[k]&&("styleclass"==k.toLowerCase()?h.setAttribute("class",a[k]):"classid"!=k.toLowerCase()&&h.setAttribute(k,a[k]));for(f in b)b[f]!=Object.prototype[f]&&"movie"!=f.toLowerCase()&&(a=h,g=f,k=b[f],c=s.createElement("param"),c.setAttribute("name",g),c.setAttribute("value",k),a.appendChild(c));e.parentNode.replaceChild(h,e);d=h}return d}function m(a){var b=p(a);b&&"OBJECT"==b.nodeName&&(w.ie&&w.win?(b.style.display="none",function(){if(4==b.readyState){var c=p(a);
if(c){for(var d in c)"function"==typeof c[d]&&(c[d]=null);c.parentNode.removeChild(c)}}else setTimeout(arguments.callee,10)}()):b.parentNode.removeChild(b))}function p(a){var b=null;try{b=s.getElementById(a)}catch(c){}return b}function u(a,b,c){a.attachEvent(b,c);N[N.length]=[a,b,c]}function v(a){var b=w.pv;a=a.split(".");a[0]=parseInt(a[0],10);a[1]=parseInt(a[1],10)||0;a[2]=parseInt(a[2],10)||0;return b[0]>a[0]||b[0]==a[0]&&b[1]>a[1]||b[0]==a[0]&&b[1]==a[1]&&b[2]>=a[2]?!0:!1}function A(a,b,c,d){if(!w.ie||
!w.mac){var e=s.getElementsByTagName("head")[0];e&&(c=c&&"string"==typeof c?c:"screen",d&&(ba=W=null),W&&ba==c||(d=s.createElement("style"),d.setAttribute("type","text/css"),d.setAttribute("media",c),W=e.appendChild(d),w.ie&&w.win&&"undefined"!=typeof s.styleSheets&&0<s.styleSheets.length&&(W=s.styleSheets[s.styleSheets.length-1]),ba=c),w.ie&&w.win?W&&"object"==typeof W.addRule&&W.addRule(a,b):W&&"undefined"!=typeof s.createTextNode&&W.appendChild(s.createTextNode(a+" {"+b+"}")))}}function D(a,b){if(la){var c=
b?"visible":"hidden";aa&&p(a)?p(a).style.visibility=c:A("#"+a,"visibility:"+c)}}function x(a){return null!=/[\\\"<>\.;]/.exec(a)&&"undefined"!=typeof encodeURIComponent?encodeURIComponent(a):a}var B=window,s=document,G=navigator,K=!1,J=[function(){K?d():e()}],C=[],L=[],N=[],Q,T,E,X,aa=!1,r=!1,W,ba,la=!0,w=function(){var a="undefined"!=typeof s.getElementById&&"undefined"!=typeof s.getElementsByTagName&&"undefined"!=typeof s.createElement,b=G.userAgent.toLowerCase(),c=G.platform.toLowerCase(),d=c?
/win/.test(c):/win/.test(b),c=c?/mac/.test(c):/mac/.test(b),b=/webkit/.test(b)?parseFloat(b.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,e=!+"\v1",f=[0,0,0],g=null;if("undefined"!=typeof G.plugins&&"object"==typeof G.plugins["Shockwave Flash"])!(g=G.plugins["Shockwave Flash"].description)||"undefined"!=typeof G.mimeTypes&&G.mimeTypes["application/x-shockwave-flash"]&&!G.mimeTypes["application/x-shockwave-flash"].enabledPlugin||(K=!0,e=!1,g=g.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),f[0]=parseInt(g.replace(/^(.*)\..*$/,
"$1"),10),f[1]=parseInt(g.replace(/^.*\.(.*)\s.*$/,"$1"),10),f[2]=/[a-zA-Z]/.test(g)?parseInt(g.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if("undefined"!=typeof B.ActiveXObject)try{var h=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");h&&(g=h.GetVariable("$version"))&&(e=!0,g=g.split(" ")[1].split(","),f=[parseInt(g[0],10),parseInt(g[1],10),parseInt(g[2],10)])}catch(k){}return{w3:a,pv:f,wk:b,ie:e,win:d,mac:c}}();(function(){w.w3&&(("undefined"!=typeof s.readyState&&"complete"==s.readyState||
"undefined"==typeof s.readyState&&(s.getElementsByTagName("body")[0]||s.body))&&a(),aa||("undefined"!=typeof s.addEventListener&&s.addEventListener("DOMContentLoaded",a,!1),w.ie&&w.win&&(s.attachEvent("onreadystatechange",function(){"complete"==s.readyState&&(s.detachEvent("onreadystatechange",arguments.callee),a())}),B==top&&function(){if(!aa){try{s.documentElement.doScroll("left")}catch(b){setTimeout(arguments.callee,0);return}a()}}()),w.wk&&function(){aa||(/loaded|complete/.test(s.readyState)?
a():setTimeout(arguments.callee,0))}(),c(a)))})();(function(){w.ie&&w.win&&window.attachEvent("onunload",function(){for(var a=N.length,b=0;b<a;b++)N[b][0].detachEvent(N[b][1],N[b][2]);a=L.length;for(b=0;b<a;b++)m(L[b]);for(var c in w)w[c]=null;w=null;for(var d in swfobject)swfobject[d]=null;swfobject=null})})();return{registerObject:function(a,b,c,d){if(w.w3&&a&&b){var e={};e.id=a;e.swfVersion=b;e.expressInstall=c;e.callbackFn=d;C[C.length]=e;D(a,!1)}else d&&d({success:!1,id:a})},getObjectById:function(a){if(w.w3)return f(a)},
embedSWF:function(a,c,d,e,f,k,m,n,p,r){var s={success:!1,id:c};w.w3&&!(w.wk&&312>w.wk)&&a&&c&&d&&e&&f?(D(c,!1),b(function(){d+="";e+="";var b={};if(p&&"object"===typeof p)for(var w in p)b[w]=p[w];b.data=a;b.width=d;b.height=e;w={};if(n&&"object"===typeof n)for(var x in n)w[x]=n[x];if(m&&"object"===typeof m)for(var B in m)w.flashvars="undefined"!=typeof w.flashvars?w.flashvars+("&"+B+"="+m[B]):B+"="+m[B];if(v(f))x=q(b,w,c),b.id==c&&D(c,!0),s.success=!0,s.ref=x;else{if(k&&h()){b.data=k;g(b,w,c,r);return}D(c,
!0)}r&&r(s)})):r&&r(s)},switchOffAutoHideShow:function(){la=!1},ua:w,getFlashPlayerVersion:function(){return{major:w.pv[0],minor:w.pv[1],release:w.pv[2]}},hasFlashPlayerVersion:v,createSWF:function(a,b,c){if(w.w3)return q(a,b,c)},showExpressInstall:function(a,b,c,d){w.w3&&h()&&g(a,b,c,d)},removeSWF:function(a){w.w3&&m(a)},createCSS:function(a,b,c,d){w.w3&&A(a,b,c,d)},addDomLoadEvent:b,addLoadEvent:c,getQueryParamValue:function(a){var b=s.location.search||s.location.hash;if(b){/\?/.test(b)&&(b=b.split("?")[1]);
if(null==a)return x(b);for(var b=b.split("&"),c=0;c<b.length;c++)if(b[c].substring(0,b[c].indexOf("="))==a)return x(b[c].substring(b[c].indexOf("=")+1))}return""},expressInstallCallback:function(){if(r){var a=p("SWFObjectExprInst");a&&Q&&(a.parentNode.replaceChild(Q,a),T&&(D(T,!0),w.ie&&w.win&&(Q.style.display="block")),E&&E(X));r=!1}}}}();
(function(a){function b(a){var b=f.call(arguments,1);return function(){return a.apply(this,b.concat(f.call(arguments)))}}function c(a,b){return this.filter(":"+a+(b?"("+b+")":""))}function d(a,b,c,d){return(c=d[3]||n()[(b.nodeName||"").toLowerCase()]||"")?!!a(b.getAttribute(c)):!1}"$:nomunge";var e=window.location,f=Array.prototype.slice,h=e.href.match(/^((https?:\/\/.*?\/)?[^#]*)#?.*$/),g=h[1]+"#",k=h[2],n,q,m,p,u,v={};a.isUrlInternal=m=function(a){return!a||p(a)?void 0:u.test(a)?!0:/^(?:https?:)?\/\//i.test(a)?
!1:/^[a-z\d.-]+:/i.test(a)?void 0:!0};a.isUrlExternal=h=function(a){a=m(a);return"boolean"===typeof a?!a:a};a.isUrlFragment=p=function(b){var c=(b||"").match(/^([^#]?)([^#]*#).*$/);return!!c&&("#"===c[2]||0===b.indexOf(g)||("/"===c[1]?k+c[2]===g:!/^https?:\/\//i.test(b)&&0===a('<a href="'+b+'"/>')[0].href.indexOf(g)))};a.fn.urlInternal=b(c,"urlInternal");a.fn.urlExternal=b(c,"urlExternal");a.fn.urlFragment=b(c,"urlFragment");a.expr[":"].urlInternal=b(d,m);a.expr[":"].urlExternal=b(d,h);a.expr[":"].urlFragment=
b(d,p);a.elemUrlAttr||(a.elemUrlAttr=function(b){return a.extend(v,b)})({a:"href",base:"href",iframe:"src",img:"src",input:"src",form:"action",link:"href",script:"src"});n=a.elemUrlAttr;a.urlInternalHost=h=function(a){a=a?"(?:(?:"+Array.prototype.join.call(arguments,"|")+")\\.)?":"";var b=e.hostname.split(".");b.length>CANONICAL_DOMAIN_PARTS_LENGTH&&b.shift();var b=b.join("."),c=new RegExp("^"+a+"(.*)","i"),b="^(?:"+e.protocol+")?//(?:(?:"+VALID_SUBDOMAINS.join("|")+").)?"+b.replace(c,a+"$1").replace(/\\?\./g,
"\\.")+(e.port?":"+e.port:"")+"/";return q(b)};a.urlInternalRegExp=q=function(a){a&&(u="string"===typeof a?new RegExp(a,"i"):a);return u};h("www")})(jQuery);
(function(a,b){function c(a){return"string"===typeof a}function d(a){var b=k.call(arguments,1);return function(){return a.apply(this,b.concat(k.call(arguments)))}}function e(d,e,f,h,k){var m;h!==g?(e=f.match(d?/^([^#]*)\#?(.*)$/:/^([^#?]*)\??([^#]*)(#?.*)/),f=e[3]||"",2===k&&c(h)?h=h.replace(d?G:s,""):(m=p(e[2]),h=c(h)?p[d?"fragment":"querystring"](h):h,h=2===k?h:1===k?a.extend({},h,m):a.extend({},m,h),h=q(h),d&&(h=h.replace(K,n))),d=e[1]+(d?"#":h||!e[1]?"?":"")+h+f):d=e(f!==g?f:b.location.href);
return d}function f(a,b,d){b===g||"boolean"===typeof b?(d=b,b=q[a?"fragment":"querystring"]()):b=c(b)?b.replace(a?G:s,""):b;return p(b,d)}function h(b,d,e,f){c(e)||"object"===typeof e||(f=e,e=d,d=g);return this.each(function(){var c=a(this),g=d||x()[(this.nodeName||"").toLowerCase()]||"",h=g&&c.attr(g)||"";c.attr(g,q[b](h,e,f))})}var g,k=Array.prototype.slice,n=decodeURIComponent,q=a.param,m,p,u,v=a.bbq=a.bbq||{},A,D,x,B=a.event.special,s=/^.*\?|#.*$/g,G=/^.*\#/,K,J={};q.querystring=d(e,0,function(a){return a.replace(/(?:^[^?#]*\?([^#]*).*$)?.*/,
"$1")});q.fragment=m=d(e,1,function(a){return a.replace(/^[^#]*#?(.*)$/,"$1")});m.noEscape=function(b){b=a.map((b||"").split(""),encodeURIComponent);K=new RegExp(b.join("|"),"g")};m.noEscape(",/");a.deparam=p=function(b,c){var d={},e={"true":!0,"false":!1,"null":null};a.each(b.replace(/\+/g," ").split("&"),function(b,f){var h=f.split("="),k=n(h[0]),m=d,p=0,q=k.split("]["),s=q.length-1;/\[/.test(q[0])&&/\]$/.test(q[s])?(q[s]=q[s].replace(/\]$/,""),q=q.shift().split("[").concat(q),s=q.length-1):s=0;
if(2===h.length)if(h=n(h[1]),c&&(h=h&&!isNaN(h)?+h:"undefined"===h?g:e[h]!==g?e[h]:h),s)for(;p<=s;p++)k=""===q[p]?m.length:q[p],m=m[k]=p<s?m[k]||(q[p+1]&&isNaN(q[p+1])?{}:[]):h;else a.isArray(d[k])?d[k].push(h):d[k]=d[k]!==g?[d[k],h]:h;else k&&(d[k]=c?g:"")});return d};p.querystring=d(f,0);p.fragment=u=d(f,1);a.elemUrlAttr||(a.elemUrlAttr=function(b){return a.extend(J,b)})({a:"href",base:"href",iframe:"src",img:"src",input:"src",form:"action",link:"href",script:"src"});x=a.elemUrlAttr;a.fn.querystring=
d(h,"querystring");a.fn.fragment=d(h,"fragment");v.pushState=A=function(a,d){c(a)&&/^#/.test(a)&&d===g&&(d=2);var e=a!==g,e=m(b.location.href,e?a:{},e?d:2);b.location.href=e+(/#/.test(e)?"":"#")};v.getState=D=function(a,b){return a===g||"boolean"===typeof a?u(a):u(b)[a]};v.removeState=function(b){var c={};b!==g&&(c=D(),a.each(a.isArray(b)?b:arguments,function(a,b){delete c[b]}));A(c,2)};B.hashchange=a.extend(B.hashchange,{add:function(b){function c(a){var b=a.fragment=m();a.getState=function(a,c){return a===
g||"boolean"===typeof a?p(b,a):p(b,c)[a]};d.apply(this,arguments)}var d;if(a.isFunction(b))return d=b,c;d=b.handler;b.handler=c}})})(jQuery,this);
(function(a,b,c){function d(a,b){var c=(a[0]||0)-(b[0]||0);return 0<c||!c&&0<a.length&&d(a.slice(1),b.slice(1))}function e(a){if(typeof a!=h)return a;var b=[],c="",d;for(d in a)c=typeof a[d]==h?e(a[d]):[d,g?encodeURI(a[d]):a[d]].join("="),b.push(c);return b.join("&")}function f(a){var b=[],c;for(c in a)b.push(['<param name="',c,'" value="',e(a[c]),'" />'].join(""));return b.join("")}var h="object",g=!0;try{var k=c.description||(new c("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version")}catch(n){k=
"Unavailable"}var q=k.match(/\d+/g)||[0];a[b]={available:0<q[0],activeX:c&&!c.name,version:{original:k,array:q,string:q.join("."),major:parseInt(q[0],10)||0,minor:parseInt(q[1],10)||0,release:parseInt(q[2],10)||0},hasVersion:function(a){a=/string|number/.test(typeof a)?a.toString().split("."):/object/.test(typeof a)?[a.major,a.minor]:a||[0,0];return d(q,a)},encodeParams:!0,expressInstall:"expressInstall.swf",expressInstallIsActive:!1,create:function(a){if(!a.swf||this.expressInstallIsActive||!this.available&&
!a.hasVersionFail)return!1;if(!this.hasVersion(a.hasVersion||1)){this.expressInstallIsActive=!0;if("function"==typeof a.hasVersionFail&&!a.hasVersionFail.apply(a))return!1;a={swf:a.expressInstall||this.expressInstall,height:137,width:214,flashvars:{MMredirectURL:location.href,MMplayerType:this.activeX?"ActiveX":"PlugIn",MMdoctitle:document.title.slice(0,47)+" - Flash Player Installation"}}}attrs={data:a.swf,type:"application/x-shockwave-flash",id:a.id||"flash_"+Math.floor(999999999*Math.random()),
width:a.width||320,height:a.height||180,style:a.style||""};g="undefined"!==typeof a.useEncode?a.useEncode:this.encodeParams;a.movie=a.swf;a.wmode=a.wmode||"opaque";delete a.fallback;delete a.hasVersion;delete a.hasVersionFail;delete a.height;delete a.id;delete a.swf;delete a.useEncode;delete a.width;var b=document.createElement("div"),c;c=attrs;var d=[],e;for(e in c)c[e]&&d.push([e,'="',c[e],'"'].join(""));c=d.join(" ");b.innerHTML=["<object ",c,">",f(a),"</object>"].join("");return b.firstChild}};
a.fn[b]=function(c){var d=this.find(h).andSelf().filter(h);/string|object/.test(typeof c)&&this.each(function(){var d=a(this),e;c=typeof c==h?c:{swf:c};c.fallback=this;if(e=a[b].create(c))d.children().remove(),d.html(e)});"function"==typeof c&&d.each(function(){var d=this;d.jsInteractionTimeoutMs=d.jsInteractionTimeoutMs||0;660>d.jsInteractionTimeoutMs&&(d.clientWidth||d.clientHeight?c.call(d):setTimeout(function(){a(d)[b](c)},d.jsInteractionTimeoutMs+66))});return d}})(jQuery,"flash",navigator.plugins["Shockwave Flash"]||
window.ActiveXObject);(function(a,b){var c=a.History=a.History||{},d=a.jQuery;if("undefined"!==typeof c.Adapter)throw Error("History.js Adapter has already been loaded...");c.Adapter={bind:function(a,b,c){d(a).bind(b,c)},trigger:function(a,b,c){d(a).trigger(b,c)},extractEventData:function(a,c,d){return c&&c.originalEvent&&c.originalEvent[a]||d&&d[a]||b},onDomLoad:function(a){d(a)}};"undefined"!==typeof c.init&&c.init()})(window);
(function(a,b){var c=a.console||b,d=a.document,e=a.navigator,f=!1,h=a.setTimeout,g=a.clearTimeout,k=a.setInterval,n=a.clearInterval,q=a.JSON,m=a.alert,p=a.History=a.History||{},u=a.history;try{f=a.sessionStorage,f.setItem("TEST","1"),f.removeItem("TEST")}catch(v){f=!1}q.stringify=q.stringify||q.encode;q.parse=q.parse||q.decode;if("undefined"!==typeof p.init)throw Error("History.js Core has already been loaded...");p.init=function(a){if("undefined"===typeof p.Adapter)return!1;"undefined"!==typeof p.initCore&&
p.initCore();"undefined"!==typeof p.initHtml4&&p.initHtml4();return!0};p.initCore=function(v){if("undefined"!==typeof p.initCore.initialized)return!1;p.initCore.initialized=!0;p.options=p.options||{};p.options.hashChangeInterval=p.options.hashChangeInterval||100;p.options.safariPollInterval=p.options.safariPollInterval||500;p.options.doubleCheckInterval=p.options.doubleCheckInterval||500;p.options.disableSuid=p.options.disableSuid||!1;p.options.storeInterval=p.options.storeInterval||1E3;p.options.busyDelay=
p.options.busyDelay||250;p.options.debug=p.options.debug||!1;p.options.initialTitle=p.options.initialTitle||d.title;p.options.html4Mode=p.options.html4Mode||!1;p.options.delayInit=p.options.delayInit||!1;p.intervalList=[];p.clearAllIntervals=function(){var a,b=p.intervalList;if("undefined"!==typeof b&&null!==b){for(a=0;a<b.length;a++)n(b[a]);p.intervalList=null}};p.debug=function(){p.options.debug&&p.log.apply(p,arguments)};p.log=function(){var a=!("undefined"===typeof c||"undefined"===typeof c.log||
"undefined"===typeof c.log.apply),b=d.getElementById("log"),e,f,g,h;a?(f=Array.prototype.slice.call(arguments),e=f.shift(),"undefined"!==typeof c.debug?c.debug.apply(c,[e,f]):c.log.apply(c,[e,f])):e="\n"+arguments[0]+"\n";f=1;for(g=arguments.length;f<g;++f){h=arguments[f];if("object"===typeof h&&"undefined"!==typeof q)try{h=q.stringify(h)}catch(k){}e+="\n"+h+"\n"}b?(b.value+=e+"\n-----\n",b.scrollTop=b.scrollHeight-b.clientHeight):a||m(e);return!0};p.getInternetExplorerMajorVersion=function(){var a=
p.getInternetExplorerMajorVersion,b;if("undefined"!==typeof p.getInternetExplorerMajorVersion.cached)b=p.getInternetExplorerMajorVersion.cached;else{b=3;for(var c=d.createElement("div"),e=c.getElementsByTagName("i");(c.innerHTML="\x3c!--[if gt IE "+ ++b+"]><i></i><![endif]--\x3e")&&e[0];);b=4<b?b:!1}return a.cached=b};p.isInternetExplorer=function(){return p.isInternetExplorer.cached="undefined"!==typeof p.isInternetExplorer.cached?p.isInternetExplorer.cached:Boolean(p.getInternetExplorerMajorVersion())};
p.emulated=p.options.html4Mode?{pushState:!0,hashChange:!0}:{pushState:!Boolean(a.history&&a.history.pushState&&a.history.replaceState&&!(/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(e.userAgent)||/AppleWebKit\/5([0-2]|3[0-2])/i.test(e.userAgent))),hashChange:Boolean(!("onhashchange"in a||"onhashchange"in d)||p.isInternetExplorer()&&8>p.getInternetExplorerMajorVersion())};p.enabled=!p.emulated.pushState;p.bugs={setHash:Boolean(!p.emulated.pushState&&"Apple Computer, Inc."===e.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(e.userAgent)),
safariPoll:Boolean(!p.emulated.pushState&&"Apple Computer, Inc."===e.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(e.userAgent)),ieDoubleCheck:Boolean(p.isInternetExplorer()&&8>p.getInternetExplorerMajorVersion()),hashEscape:Boolean(p.isInternetExplorer()&&7>p.getInternetExplorerMajorVersion())};p.isEmptyObject=function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0};p.cloneObject=function(a){a?(a=q.stringify(a),a=q.parse(a)):a={};return a};p.getRootUrl=function(){var a=d.location.protocol+
"//"+(d.location.hostname||d.location.host);d.location.port&&(a+=":"+d.location.port);return a+"/"};p.getBaseHref=function(){var a=d.getElementsByTagName("base"),b=null,b="";1===a.length&&(b=a[0],b=b.href.replace(/[^\/]+$/,""));(b=b.replace(/\/+$/,""))&&(b+="/");return b};p.getBaseUrl=function(){return p.getBaseHref()||p.getBasePageUrl()||p.getRootUrl()};p.getPageUrl=function(){return((p.getState(!1,!1)||{}).url||p.getLocationHref()).replace(/\/+$/,"").replace(/[^\/]+$/,function(a,b,c){return/\./.test(a)?
a:a+"/"})};p.getBasePageUrl=function(){return p.getLocationHref().replace(/[#\?].*/,"").replace(/[^\/]+$/,function(a,b,c){return/[^\/]$/.test(a)?"":a}).replace(/\/+$/,"")+"/"};p.getFullUrl=function(a,b){var c=a,d=a.substring(0,1);b="undefined"===typeof b?!0:b;/[a-z]+\:\/\//.test(a)||(c="/"===d?p.getRootUrl()+a.replace(/^\/+/,""):"#"===d?p.getPageUrl().replace(/#.*/,"")+a:"?"===d?p.getPageUrl().replace(/[\?#].*/,"")+a:b?p.getBaseUrl()+a.replace(/^(\.\/)+/,""):p.getBasePageUrl()+a.replace(/^(\.\/)+/,
""));return c.replace(/\#$/,"")};p.getShortUrl=function(a){var b=p.getBaseUrl(),c=p.getRootUrl();p.emulated.pushState&&(a=a.replace(b,""));a=a.replace(c,"/");p.isTraditionalAnchor(a)&&(a="./"+a);return a=a.replace(/^(\.\/)+/g,"./").replace(/\#$/,"")};p.getLocationHref=function(a){a=a||d;return a.URL===a.location.href?a.location.href:a.location.href===decodeURIComponent(a.URL)?a.URL:a.location.hash&&decodeURIComponent(a.location.href.replace(/^[^#]+/,""))===a.location.hash||-1==a.URL.indexOf("#")&&
-1!=a.location.href.indexOf("#")?a.location.href:a.URL||a.location.href};p.store={};p.idToState=p.idToState||{};p.stateToId=p.stateToId||{};p.urlToId=p.urlToId||{};p.storedStates=p.storedStates||[];p.savedStates=p.savedStates||[];p.normalizeStore=function(){p.store.idToState=p.store.idToState||{};p.store.urlToId=p.store.urlToId||{};p.store.stateToId=p.store.stateToId||{}};p.getState=function(a,b){"undefined"===typeof a&&(a=!0);"undefined"===typeof b&&(b=!0);var c=p.getLastSavedState();!c&&b&&(c=p.createStateObject());
a&&(c=p.cloneObject(c),c.url=c.cleanUrl||c.url);return c};p.getIdByState=function(a){var b=p.extractId(a.url),c;if(!b)if(c=p.getStateString(a),"undefined"!==typeof p.stateToId[c])b=p.stateToId[c];else if("undefined"!==typeof p.store.stateToId[c])b=p.store.stateToId[c];else{for(;b=(new Date).getTime()+String(Math.random()).replace(/\D/g,""),"undefined"!==typeof p.idToState[b]||"undefined"!==typeof p.store.idToState[b];);p.stateToId[c]=b;p.idToState[b]=a}return b};p.normalizeState=function(a){var b;
a&&"object"===typeof a||(a={});if("undefined"!==typeof a.normalized)return a;a.data&&"object"===typeof a.data||(a.data={});b={normalized:!0};b.title=a.title||"";b.url=p.getFullUrl(a.url?a.url:p.getLocationHref());b.hash=p.getShortUrl(b.url);b.data=p.cloneObject(a.data);b.id=p.getIdByState(b);b.cleanUrl=b.url.replace(/\??\&_suid.*/,"");b.url=b.cleanUrl;a=!p.isEmptyObject(b.data);(b.title||a)&&!0!==p.options.disableSuid&&(b.hash=p.getShortUrl(b.url).replace(/\??\&_suid.*/,""),/\?/.test(b.hash)||(b.hash+=
"?"),b.hash+="&_suid="+b.id);b.hashedUrl=p.getFullUrl(b.hash);(p.emulated.pushState||p.bugs.safariPoll)&&p.hasUrlDuplicate(b)&&(b.url=b.hashedUrl);return b};p.createStateObject=function(a,b,c){a={data:a,title:b,url:c};return a=p.normalizeState(a)};p.getStateById=function(a){a=String(a);return p.idToState[a]||p.store.idToState[a]||b};p.getStateString=function(a){a={data:p.normalizeState(a).data,title:a.title,url:a.url};return q.stringify(a)};p.getStateId=function(a){return p.normalizeState(a).id};
p.getHashByState=function(a){return p.normalizeState(a).hash};p.extractId=function(a){a=-1!=a.indexOf("#")?a.split("#")[0]:a;return((a=/(.*)\&_suid=([0-9]+)$/.exec(a))?String(a[2]||""):"")||!1};p.isTraditionalAnchor=function(a){return!/[\/\?\.]/.test(a)};p.extractState=function(a,b){var c=null,d,e;b=b||!1;(d=p.extractId(a))&&(c=p.getStateById(d));c||(e=p.getFullUrl(a),(d=p.getIdByUrl(e)||!1)&&(c=p.getStateById(d)),c||!b||p.isTraditionalAnchor(a)||(c=p.createStateObject(null,null,e)));return c};p.getIdByUrl=
function(a){return p.urlToId[a]||p.store.urlToId[a]||b};p.getLastSavedState=function(){return p.savedStates[p.savedStates.length-1]||b};p.getLastStoredState=function(){return p.storedStates[p.storedStates.length-1]||b};p.hasUrlDuplicate=function(a){var b=!1;return b=(b=p.extractState(a.url))&&b.id!==a.id};p.storeState=function(a){p.urlToId[a.url]=a.id;p.storedStates.push(p.cloneObject(a));return a};p.isLastSavedState=function(a){var b=!1;p.savedStates.length&&(a=a.id,b=p.getLastSavedState(),b=b.id,
b=a===b);return b};p.saveState=function(a){if(p.isLastSavedState(a))return!1;p.savedStates.push(p.cloneObject(a));return!0};p.getStateByIndex=function(a){var b=null;return b="undefined"===typeof a?p.savedStates[p.savedStates.length-1]:0>a?p.savedStates[p.savedStates.length+a]:p.savedStates[a]};p.getCurrentIndex=function(){var a=null;return a=1>p.savedStates.length?0:p.savedStates.length-1};p.getHash=function(a){a=p.getLocationHref(a);return p.getHashByUrl(a)};p.unescapeHash=function(a){a=p.normalizeHash(a);
return a=decodeURIComponent(a)};p.normalizeHash=function(a){return a.replace(/[^#]*#/,"").replace(/#.*/,"")};p.setHash=function(a,b){var c;if(!1!==b&&p.busy())return p.pushQueue({scope:p,callback:p.setHash,args:arguments,queue:b}),!1;p.busy(!0);(c=p.extractState(a,!0))&&!p.emulated.pushState?p.pushState(c.data,c.title,c.url,!1):p.getHash()!==a&&(p.bugs.setHash?(c=p.getPageUrl(),p.pushState(null,null,c+"#"+a,!1)):d.location.hash=a);return p};p.escapeHash=function(b){b=p.normalizeHash(b);b=a.encodeURIComponent(b);
p.bugs.hashEscape||(b=b.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?"));return b};p.getHashByUrl=function(a){a=String(a).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return a=p.unescapeHash(a)};p.setTitle=function(a){var b=a.title,c;b||(c=p.getStateByIndex(0))&&c.url===a.url&&(b=c.title||p.options.initialTitle);try{d.getElementsByTagName("title")[0].innerHTML=b.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(e){}d.title=b;return p};p.queues=[];
p.busy=function(a){"undefined"!==typeof a?p.busy.flag=a:"undefined"===typeof p.busy.flag&&(p.busy.flag=!1);if(!p.busy.flag){g(p.busy.timeout);var b=function(){var a,c;if(!p.busy.flag)for(a=p.queues.length-1;0<=a;--a)c=p.queues[a],0!==c.length&&(c=c.shift(),p.fireQueueItem(c),p.busy.timeout=h(b,p.options.busyDelay))};p.busy.timeout=h(b,p.options.busyDelay)}return p.busy.flag};p.busy.flag=!1;p.fireQueueItem=function(a){return a.callback.apply(a.scope||p,a.args||[])};p.pushQueue=function(a){p.queues[a.queue||
0]=p.queues[a.queue||0]||[];p.queues[a.queue||0].push(a);return p};p.queue=function(a,b){"function"===typeof a&&(a={callback:a});"undefined"!==typeof b&&(a.queue=b);p.busy()?p.pushQueue(a):p.fireQueueItem(a);return p};p.clearQueue=function(){p.busy.flag=!1;p.queues=[];return p};p.stateChanged=!1;p.doubleChecker=!1;p.doubleCheckComplete=function(){p.stateChanged=!0;p.doubleCheckClear();return p};p.doubleCheckClear=function(){p.doubleChecker&&(g(p.doubleChecker),p.doubleChecker=!1);return p};p.doubleCheck=
function(a){p.stateChanged=!1;p.doubleCheckClear();p.bugs.ieDoubleCheck&&(p.doubleChecker=h(function(){p.doubleCheckClear();p.stateChanged||a();return!0},p.options.doubleCheckInterval));return p};p.safariStatePoll=function(){var b=p.extractState(p.getLocationHref());if(!p.isLastSavedState(b))return b||p.createStateObject(),p.Adapter.trigger(a,"popstate"),p};p.back=function(a){if(!1!==a&&p.busy())return p.pushQueue({scope:p,callback:p.back,args:arguments,queue:a}),!1;p.busy(!0);p.doubleCheck(function(){p.back(!1)});
u.go(-1);return!0};p.forward=function(a){if(!1!==a&&p.busy())return p.pushQueue({scope:p,callback:p.forward,args:arguments,queue:a}),!1;p.busy(!0);p.doubleCheck(function(){p.forward(!1)});u.go(1);return!0};p.go=function(a,b){var c;if(0<a)for(c=1;c<=a;++c)p.forward(b);else if(0>a)for(c=-1;c>=a;--c)p.back(b);else throw Error("History.go: History.go requires a positive or negative integer passed.");return p};p.emulated.pushState?(v=function(){},p.pushState=p.pushState||v,p.replaceState=p.replaceState||
v):(p.onPopState=function(b,c){var d=!1,d=!1;p.doubleCheckComplete();if(d=p.getHash())return(d=p.extractState(d||p.getLocationHref(),!0))?p.replaceState(d.data,d.title,d.url,!1):(p.Adapter.trigger(a,"anchorchange"),p.busy(!1)),p.expectedStateId=!1;(d=(d=p.Adapter.extractEventData("state",b,c)||!1)?p.getStateById(d):p.expectedStateId?p.getStateById(p.expectedStateId):p.extractState(p.getLocationHref()))||(d=p.createStateObject(null,null,p.getLocationHref()));p.expectedStateId=!1;if(p.isLastSavedState(d))return p.busy(!1),
!1;p.storeState(d);p.saveState(d);p.setTitle(d);p.Adapter.trigger(a,"statechange");p.busy(!1);return!0},p.Adapter.bind(a,"popstate",p.onPopState),p.pushState=function(b,c,d,e){if(p.getHashByUrl(d)&&p.emulated.pushState)throw Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==e&&p.busy())return p.pushQueue({scope:p,callback:p.pushState,args:arguments,queue:e}),!1;p.busy(!0);var f=p.createStateObject(b,c,d);p.isLastSavedState(f)?p.busy(!1):(p.storeState(f),
p.expectedStateId=f.id,u.pushState(f.id,f.title,f.url),p.Adapter.trigger(a,"popstate"));return!0},p.replaceState=function(b,c,d,e){if(p.getHashByUrl(d)&&p.emulated.pushState)throw Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==e&&p.busy())return p.pushQueue({scope:p,callback:p.replaceState,args:arguments,queue:e}),!1;p.busy(!0);var f=p.createStateObject(b,c,d);p.isLastSavedState(f)?p.busy(!1):(p.storeState(f),p.expectedStateId=f.id,u.replaceState(f.id,
f.title,f.url),p.Adapter.trigger(a,"popstate"));return!0});if(f)try{p.store=q.parse(f.getItem("History.store"))||{}}catch(D){p.store={}}else p.store={};p.normalizeStore();p.Adapter.bind(a,"unload",p.clearAllIntervals);p.saveState(p.storeState(p.extractState(p.getLocationHref(),!0)));f&&(p.onUnload=function(){var a,b;try{a=q.parse(f.getItem("History.store"))||{}}catch(c){a={}}a.idToState=a.idToState||{};a.urlToId=a.urlToId||{};a.stateToId=a.stateToId||{};for(b in p.idToState)p.idToState.hasOwnProperty(b)&&
(a.idToState[b]=p.idToState[b]);for(b in p.urlToId)p.urlToId.hasOwnProperty(b)&&(a.urlToId[b]=p.urlToId[b]);for(b in p.stateToId)p.stateToId.hasOwnProperty(b)&&(a.stateToId[b]=p.stateToId[b]);p.store=a;p.normalizeStore();a=q.stringify(a);try{f.setItem("History.store",a)}catch(d){if(d.code===DOMException.QUOTA_EXCEEDED_ERR)f.length&&(f.removeItem("History.store"),f.setItem("History.store",a));else throw d;}},p.intervalList.push(k(p.onUnload,p.options.storeInterval)),p.Adapter.bind(a,"beforeunload",
p.onUnload),p.Adapter.bind(a,"unload",p.onUnload));if(!p.emulated.pushState&&(p.bugs.safariPoll&&p.intervalList.push(k(p.safariStatePoll,p.options.safariPollInterval)),"Apple Computer, Inc."===e.vendor||"Mozilla"===(e.appCodeName||""))&&(p.Adapter.bind(a,"hashchange",function(){p.Adapter.trigger(a,"popstate")}),p.getHash()))p.Adapter.onDomLoad(function(){p.Adapter.trigger(a,"hashchange")})};p.options&&p.options.delayInit||p.init()})(window);
(function(a){function b(b){var d=a.contains,e=document.documentElement;if(d)return d(e,b);for(;b=b.parentNode;)if(b===e)return!0;return!1}"$:nomunge";a.extend(a.expr[":"],{attached:b,detached:function(a){return!b(a)}})})(jQuery);
(function(a){a.fn.fitVids=function(b){var c={customSelector:null,ignore:null};if(!document.getElementById("fit-vids-style")){var d=document.head||document.getElementsByTagName("head")[0],e=document.createElement("div");e.innerHTML='<p>x</p><style id="fit-vids-style">.fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}</style>';d.appendChild(e.childNodes[1])}b&&
a.extend(c,b);return this.each(function(){var b='iframe[src*="player.vimeo.com"] iframe[src*="youtube.com"] iframe[src*="youtube-nocookie.com"] iframe[src*="kickstarter.com"][src*="video.html"] object embed'.split(" ");c.customSelector&&b.push(c.customSelector);var d=".fitvidsignore";c.ignore&&(d=d+", "+c.ignore);b=a(this).find(b.join(","));b=b.not("object object");b=b.not(d);b.each(function(b){var c=a(this);if(!(0<c.parents(d).length||"embed"===this.tagName.toLowerCase()&&c.parent("object").length||
c.parent(".fluid-width-video-wrapper").length)){c.css("height")||c.css("width")||!isNaN(c.attr("height"))&&!isNaN(c.attr("width"))||(c.attr("height",9),c.attr("width",16));var e="object"===this.tagName.toLowerCase()||c.attr("height")&&!isNaN(parseInt(c.attr("height"),10))?parseInt(c.attr("height"),10):c.height(),f=isNaN(parseInt(c.attr("width"),10))?c.width():parseInt(c.attr("width"),10),e=e/f;c.attr("id")||c.attr("id","fitvid"+b);c.wrap('<div class="fluid-width-video-wrapper"></div>').parent(".fluid-width-video-wrapper").css("padding-top",
100*e+"%");c.removeAttr("height").removeAttr("width")}})})}})(window.jQuery||window.Zepto);
CameraTag=new function(){var a=this;a.version="2.1";var b;b="CAMERATAG_APPSERVER"in window?CAMERATAG_APPSERVER:"cameratag.com";a.cameras={};a.players={};a.uploaders={};var c={},d=!1,e,f=null,h=window.jQuery&&jQuery.fn&&/^[1-9]/.test(jQuery.fn.jquery)||!1,g=!1,k=!1,n,q=!1,m,p=!1;a.setup=function(){u()?d?raise("called setup while camera already setting up"):(d=!0,B(),s(),G(),d=!1):setTimeout(a.setup,30)};var u=function(){if(h)return e=f=jQuery,!0;if(f)return!0;if(window.jQuery&&jQuery.fn&&/^[1-9]/.test(jQuery.fn.jquery))return e=
f=jQuery.noConflict(!0),!0;if(!f&&!g){var a=document.createElement("script");a.src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js";document.body.insertBefore(a,document.body.firstChild);g=!0}return!1},v=function(){if("object"==typeof swfobject)return!0;if(k)return!1;var a=document.createElement("script");a.src="//ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js";document.body.insertBefore(a,document.body.firstChild);k=!0},A=function(){if("object"==typeof plupload)return n=plupload,
!0;if(!q){var c=document.createElement("script");c.src="//"+b+"/"+a.version+"/plupload/plupload.full.min.js";document.body.insertBefore(c,document.body.firstChild);q=!0}return!1},D=function(){if("function"==typeof videojs)return m=videojs,!0;if(!p){var c=document.createElement("script");c.src="//"+b+"/"+a.version+"/video.js";var d=document.createElement("link");d.href="//"+b+"/"+a.version+"/video-js.css";d.rel="stylesheet";d.type="text/css";document.body.insertBefore(c,document.body.firstChild);document.body.insertBefore(d,
document.body.firstChild);p=!0}return!1},x=function(a,c){e.ajax({url:"//"+b+"/videos.json",type:"get",dataType:"jsonp",data:{referer:window.location.toString(),camera_id:a},success:function(a){void 0!=a.camera?(a.video.formats={},a.camera.formats&&e(a.camera.formats).each(function(b,c){a.video.formats[c.name]={}}),c({success:!0,camera:a.camera,video:a.video,plan:a.plan,videoServer:a.videoServer,ul_policy:a.amazon_ul_policy,ul_signature:a.amazon_ul_signature})):c({success:!1,message:a.error})},error:function(a,
b,d){sendStat("authorization_error",{code:a.status});c({success:!1,message:"error initializing recorder"})}})},B=function(){e("camera").each(function(a,b){new Recorder(b)})},s=function(){e("video").each(function(a,b){(e(b).attr("data-uuid")||e(b).attr("data-video-id"))&&new Player(b)})},G=function(){e("uploader").each(function(a,b){new Uploader(e(b))})};a.observe=function(a,b,d,e){c[a]||(c[a]={});c[a][b]||(c[a][b]=[]);e?c[a][b].splice(0,0,d):c[a][b].push(d)};a.fire=function(a,b,d){c[a]||(c[a]={});
c[a][b]||(c[a][b]=[]);setTimeout(function(){for(i=0;i<c[a][b].length;i++)try{c[a][b][i](d)}catch(e){}},1)};a.stopObserving=function(a,b,d){c[a]||(c[a]={});c[a][b]||(c[a][b]=[]);var e=[];for(i=0;i<c[a][b].length;i++)c[a][b][i]!=d&&e.push(d);c[a][b]=e};var K=function(c,d,f){e.ajax({url:"//"+b+"/videos/"+c+"/publish.json",data:{publish_type:d,server:f},type:"get",dataType:"jsonp",success:function(b){b.uuid?a.fire(c,"published",b):a.fire(c,"publishFailed",{success:!1,video_uuid:c,message:b})},error:function(){a.fire(c,
"publishFailed",{success:!1,video_uuid:c,message:"unkown error"})}})};a.prototype=a;Recorder=function(a){var c=this,d=e(a).attr("data-uuid")||e(a).attr("data-app-id")||e(a).attr("id"),f={},g={},h=e(a).attr("id")||e(a).attr("data-uuid"),k,m,p,q,s=0,u=0,B,w,R=parseInt(1E8*Math.random()),U=e(a).attr("data-video-uuid"),ua,D,G,pb,V,Da,qa,Jb,qb,hb,ha,ea,Kb,vb,Bb,wb,Oa,ib,rb,jb,kb,Ya,Ta,Y,fa,z,Ua,va,da,xa,ec,Va,ca,ra,Pa,lb,za,Wa,Aa,O,mb,ma,nb;c.connect=function(){};c.play=function(){};c.record=function(){};
c.stopRecording=function(){};c.stopPlayback=function(){};c.showFlashSettings=function(){};var Ba,Ja=!1,lc=!1,Qa=0,db=[],Ma=!1,Hb=!1;CameraTag.cameras[h]=c;var fc=function(){v()?A()?(clearTimeout(ua),clearTimeout(D),clearInterval(q),s=Qa=0,db=[],Ma=!1,x(d,function(d){d.success?(f=d.camera,g=d.video,U&&(g.uuid=U),qb=d.videoServer,B=d.ul_policy,w=d.ul_signature,CameraTag.observe(g.uuid,"published",function(a){g.uuid==a.uuid&&(Ba="published",Za(),c.loadInterface(za),Ja&&c.disconnect(),ga("publish_success"),
CameraTag.fire(h,"published",g),Ya&&dd())},!0),CameraTag.observe(g.uuid,"publishFailed",function(a){g.uuid==a.video_uuid&&oa("Publish Failed:"+a.message.message)},!0)):(db.push(d.message),ga("authorization_error",{message:d.message,code:200}));Hb||(m=e(a).attr("name")||h,inline_styles=e(a).attr("style"),Jb=e(a).attr("class")||f.className||"",qa=f.formats&&f.formats[0].fps||24,f.formats?(ha=360>f.formats[0].height?f.formats[0].width:f.formats[0].width/2,hb=360>f.formats[0].height?f.formats[0].height:
f.formats[0].height/2,ea=f.formats[0].width,Kb=f.formats[0].height):(ha=300,hb=200,ea=300,Kb=200),Da=e(a).attr("data-sources")||"record,upload,sms",Da=Da.replace(" ","").split(","),vb=e(a).attr("data-maxlength")||e(a).attr("data-max-length")||f.maxLength||30,p=e(a).attr("data-cssurl")||f.cssURL||"//"+b+"/"+CameraTag.version+"/cameratag.css",wb=e(a).attr("data-videobitrate"),f.formats&&(wb=wb||f.formats[0].videoBitRate),G=navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||
navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)?!0:!1,pb=Fa(),V=G&&pb&&f.allowMobileUploads,k=e(a).attr("data-txt-message")||f.txtMessage||"To record this video using your mobile phone please visit <<url>> in your mobile browser",Bb="false"==e(a).attr("data-autopreview")||"false"==e(a).attr("data-preview-on-recording")||0==f.autoPreview||!1,jb="false"!=
e(a).attr("data-publish-on-upload"),e(a).attr("data-upload-on-select"),rb="false"!=e(a).attr("data-record-on-connect"),Oa="true"==e(a).attr("data-skip-auto-detect")||"false"==e(a).attr("data-detect-camera"),kb="false"!=e(a).attr("data-mirror-recording"),Ya="true"==e(a).attr("data-poll-for-processed")||f.poll_for_processed,ib=e(a).attr("data-pre-roll-length")?parseInt(e(a).attr("data-pre-roll-length")):5,xb(),wc(),G&&!V&&(db.push("Your mobile device does not support video uploading"),ga("unsupported_device_error")),
0<db.length?oa(db.join("\n")):G&&CameraTag.fire(h,"initialized"));!V&&Hb&&(fa.setUUID(g.uuid),fa.showNothing());0<db.length?oa(db[0]):c.loadInterface(z,!0)})):setTimeout(fc,30):setTimeout(fc,30)},Nc=function(a){fa=e("#"+h+"_swf")[0];void 0==fa&&1==a.success&&(a=swfobject.getFlashPlayerVersion().major+"."+swfobject.getFlashPlayerVersion().minor,ga("no_flash_error",{flash_version:a,source:"post embed check"}),db.push("Please make sure you have Flash Player 11 or higher installed"))};c.getState=function(){return Ba};
c.embed_callback=function(a){fa=e("#"+h+"_swf")[0];void 0==fa&&(ga("no_flash_error",{flash_version:flash_ver,source:"swfobject callback"}),db.push("Unable to embed video recorder. Please make sure you have Flash Player 11 or higher installed"))};var xb=function(){if(document.createStyleSheet)document.createStyleSheet(p),document.createStyleSheet("//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css");else{var d=e('<link href="'+p+'" media="all" rel="stylesheet" type="text/css" />');e("head").append(d);
d=e('<link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" media="all" rel="stylesheet" type="text/css" />');e("head").append(d)}Y=e('<div id="'+h+'" class="camera_tag"></div>');Y.css({width:ha+"px",height:hb+"px"});Y.attr("style",inline_styles);Y.addClass(Jb);e(a).replaceWith(Y);G||(Y.append("<div id='"+h+"_swf_placeholder'></div>"),swfobject.embedSWF("//"+b+"/"+CameraTag.version+"/camera.swf?"+R,h+"_swf_placeholder","100%","100%","11.1.0","https://"+b+"/"+CameraTag.version+
"/expressInstall.swf",{videoServer:qb,videoUUID:g.uuid,cameraUUID:f.uuid,domID:h,maxLength:vb,hResolution:ea,vResolution:Kb,fps:qa,videoBitRate:wb,skipAutoDetect:Oa,flipRecordPreview:kb},{allowfullscreen:"true",allowscriptaccess:"always",wmode:"transparent"},{id:h+"_swf",name:h+"_swf"},Nc),11>swfobject.getFlashPlayerVersion().major&&db.push("Please make sure you have Flash Player 11 or higher installed"),de());Ta=parseInt(e(Y).height()/14);12>Ta&&(Ta=12);z=e("#"+h+"-start-screen").addClass("cameratag_screen");
if(0==z.length){z=e('<div id="'+h+'_start_screen" style="font-size:'+Ta+'px" class="cameratag_screen cameratag_start"></div>');d=e('<a class="cameratag_select_prompt">choose a method below to submit your video</a>');z.append(d);-1==Da.indexOf("record")||V||(d=e('<a class="cameratag_primary_link cameratag_record_link cameratag_record"><span class="cameratag_action_icon">&#61501;</span><br><span class="cameratag_prompt_label">record from webcam</span></a>'),z.append(d));-1==Da.indexOf("upload")||V||
(d=e('<a id="'+h+'_upload_link" class="cameratag_primary_link cameratag_upload_link cameratag_upload"><span class="cameratag_action_icon">&#61678;</span><br><span class="cameratag_prompt_label">upload a file</span></a>'),z.append(d));if(-1!=Da.indexOf("sms")||V)d=e('<a class="cameratag_primary_link cameratag_sms_link"><span class="cameratag_action_icon">&#61707;</span><br><span class="cameratag_prompt_label">record from phone</span></a>'),z.append(d);V||(d=e('<img class="cameratag_settings_btn" src="//cameratag.com/assets/gear.png">'),
z.append(d))}Y.append(z);d=z.find(".cameratag_upload");c.uploader=eb(d.attr("id"));e(z).css("position","absolute");Wa=e("#"+h+"-error-screen").addClass("cameratag_screen");0==Wa.length&&(Wa=e('<div class="cameratag_screen cameratag_error"></div>'),Aa=e('<div class="cameratag_error_message"></div>'),Wa.append(Aa),d=e('<img class="cameratag_settings_btn" src="//cameratag.com/assets/gear.png">'),Wa.append(d));Y.append(Wa);da=e("#"+h+"-camera-detection-screen").addClass("cameratag_screen");0==da.length&&
(da=e("#"+h+"camera-detection-screen").addClass("cameratag_screen"));0==da.length&&(da=e('<div class="cameratag_screen cameratag_detect"></div>'),d=e('<div class="cameratag_prompt">wave to the camera</div>'),da.append(d));Y.append(da);xa=e("#"+h+"-countdown-screen").addClass("cameratag_screen");ec=xa.find(".cameratag_countdown_status");0==xa.length&&(xa=e('<div class="cameratag_screen cameratag_count"></div>'),d=e('<div class="cameratag_prompt">recording in </div>'),ec=e('<div class="cameratag_countdown_status"></div>'),
xa.append(ec),xa.append(d));Y.append(xa);Va=e("#"+h+"-upload-screen").addClass("cameratag_screen");ca=Va.find(".cameratag_upload_status");0==Va.length&&(Va=e('<div class="cameratag_screen cameratag_upload"></div>'),d=e('<div class="cameratag_prompt">uploading...</div>'),ca=e('<div class="cameratag_upload_status"></div>'),Va.append(ca),Va.append(d));Y.append(Va);va=e("#"+h+"-recording-screen").addClass("cameratag_screen");u=va.find(".cameratag_record_timer_prompt");if(0==va.length){va=e('<div class="cameratag_screen cameratag_recording cameratag_stop_recording"></div>');
d=e('<div class="cameratag_prompt">click to stop recording </div>');u=e('<span class="cameratag_record_timer_prompt">('+vb+")</span>");var k=e('<img src="//'+b+'/assets/recording.gif"/>');d.append(u);va.append(d);va.append(k)}Y.append(va);Ua=e("#"+h+"-playback-screen").addClass("cameratag_screen");0==Ua.length&&(Ua=e('<div class="cameratag_screen cameratag_playback cameratag_stop_playback"></div>'),d=e('<div class="cameratag_prompt">click to skip review</div>'),Ua.append(d));Y.append(Ua);ra=e("#"+
h+"-accept-screen").addClass("cameratag_screen");if(0==ra.length){ra=e('<div class="cameratag_screen cameratag_accept"></div>');var d=e('<a class="cameratag_accept_btn cameratag_publish"><span class="button_label">&#10003; Accept</span></a>'),k=e('<a class="cameratag_rerecord_btn cameratag_record"><span class="button_label">&#9851; Re-record</span></a>'),n=e('<a class="cameratag_play_btn cameratag_play"><span class="button_label">&#8629; Review Recording</span></a>');ra.append(d);ra.append(k);ra.append(n)}Y.append(ra);
Pa=e("#"+h+"-wait-screen").addClass("cameratag_screen");lb=Pa.find(".cameratag_wait_message");0==Pa.length&&(Pa=e('<div class="cameratag_screen cameratag_wait"></div>'),d=e('<div class="cameratag_spinner"><img src="//'+b+'/assets/loading.gif"/><br/><span class="cameratag_wait_message">please wait while we push pixels</span></div>'),Pa.append(d),lb=Pa.find(".cameratag_wait_message"));Y.append(Pa);za=e("#"+h+"-completed-screen").addClass("cameratag_screen");0==za.length&&(za=e('<div class="cameratag_screen cameratag_completed"></div>'),
ma=e('<div class="cameratag_thumb_bg"></div>'),d=e('<div class="cameratag_checkmark"><span class="check">&#10004;</span> published</div>'),za.append(ma),za.append(d));Y.append(za);O=e("#"+h+"-sms-screen").addClass("cameratag_screen");mb=O.find(".cameratag_sms_input");0==O.length&&(O=e('<div class="cameratag_screen cameratag_sms"></div>'),d=e('<div class="cameratag_sms_prompt">Enter your <b>mobile phone number</b> below and we will text you a link for mobile recording<br/></div>'),mb=e('<input class="cameratag_sms_input" type="text"/>'),
k=e('<br/><a href="javascript:" class="cameratag_send_sms">Send Mobile Link</a>&nbsp;&nbsp;<a href="javascript:" class="cameratag_goto_start">cancel</a>'),d.append(mb),d.append(k),O.append(d));Y.append(O);nb=e("#"+h+"-check-phone-screen").addClass("cameratag_screen");0==nb.length&&(nb=e('<div class="cameratag_screen cameratag_check_phone"><div class="cameratag_check_phone_prompt">Check your phone for mobile recording instructions</div><div class="cameratag_check_phone_url">or vsist http://'+b+"/m/"+
g.short_code+" your mobile browser</div></div>"));Y.append(nb);V&&(c.uploader=eb(z.attr("id")));Y.append("<input id='"+m+"_video_uuid' type='hidden' name='"+m+"[video_uuid]' value=''>");e(f.formats).each(function(a,b){Y.append("<input id='"+m+"_"+b.name+"_video' type='hidden' name='"+m+"["+b.name+"][video]' value=''>");Y.append("<input id='"+m+"_"+b.name+"_mp4' type='hidden' name='"+m+"["+b.name+"][mp4]' value=''>");Y.append("<input id='"+m+"_"+b.name+"_webm' type='hidden' name='"+m+"["+b.name+"][webm]' value=''>");
Y.append("<input id='"+m+"_"+b.name+"_thumb' type='hidden' name='"+m+"["+b.name+"][thumb]' value=''>");Y.append("<input id='"+m+"_"+b.name+"_small_thumb' type='hidden' name='"+m+"["+b.name+"][small_thumb]' value=''>")});c.loadInterface(z,!0);G||(Y.find(".cameratag_record").click(function(){c.record()}),Y.find(".cameratag_stop_recording").click(function(){c.stopRecording()}),Y.find(".cameratag_stop_playback").click(function(){c.stopPlayback()}),Y.find(".cameratag_play").click(function(){c.play()}),
Y.find(".cameratag_publish").click(function(){c.publish()}),Y.find(".cameratag_goto_start").click(function(){c.loadInterface(z,!0)}),Y.find(".cameratag_send_sms").click(function(){c.send_sms(mb.val())}),Y.find(".cameratag_sms_link").click(function(){c.loadInterface(O)}),Y.find(".cameratag_settings_btn").click(function(a){a.stopPropagation();c.showFlashSettings()}))},Fa=function(){if(navigator.userAgent.match(/(Android (1.0|1.1|1.5|1.6|2.0|2.1))|(Windows Phone (OS 7|8.0))|(XBLWP)|(ZuneWP)|(w(eb)?OSBrowser)|(webOS)|(Kindle\/(1.0|2.0|2.5|3.0))/))return!1;
var a=document.createElement("input");a.type="file";return!a.disabled},mc=function(a,b){Qa>=a?(Qa=0,xa.hide(),b(),CameraTag.fire(h,"countdownFinished")):(ec.html(a-Qa),Qa+=1,setTimeout(function(){mc(a,b)},1E3))};c.loadInterface=function(a,b,c){Y.find(".cameratag_screen").hide();b?Y.find(".cameratag_alternatives").show():Y.find(".cameratag_alternatives").hide();"none"!=a&&a.css("display","block")};var oa=function(a){Aa.html(a);c.loadInterface(Wa,!0)};c.publish=function(){if(!Ma)throw ga("premature_publish"),
"Camera not ready to publish. Please wait for the 'readyToPublish' event.";CameraTag.fire(h,"publishing");Xa("publishing");K(g.uuid,"webcam",qb)};var ga=function(a,c){c=c||{};c.name=a;c.camera_uuid=d;c.video_uuid=g.uuid;c.url=window.location.toString();c.host=window.location.hostname;c.agent=navigator.userAgent;c.state=Ba;c.client_version=CameraTag.version;e.ajax({url:"//"+b+"/stats",data:{stat:c},type:"get",dataType:"jsonp"})},Xa=function(a){lb.html(a||"please wait");c.loadInterface(Pa)},Za=function(){e("#"+
m+"_video_uuid").val(g.uuid);e(f.formats).each(function(a,c){var d="//"+b+"/videos/"+g.uuid+"/"+c.name+"/mp4",h=f.create_webm?"//"+b+"/videos/"+g.uuid+"/"+c.name+"/webm":"";e("#"+m+"_"+c.name+"_video").val(d);g.formats[c.name].video_url=d;e("#"+m+"_"+c.name+"_mp4").val(d);g.formats[c.name].mp4_url=d;e("#"+m+"_"+c.name+"_webm").val(h);g.formats[c.name].webm_url=h;d="//"+b+"/videos/"+g.uuid+"/"+c.name+"/thumb";e("#"+m+"_"+c.name+"_thumb").val(d);g.formats[c.name].thumb_url=d;d="//"+b+"/videos/"+g.uuid+
"/"+c.name+"/small_thumb";e("#"+m+"_"+c.name+"_small_thumb").val(d);g.formats[c.name].small_thumb_url=d})};c.addVideoData=function(a){"object"==typeof a&&(a=JSON.stringify(a),e.ajax({url:"//"+b+"/videos/"+g.uuid+"/form_data.json",data:{form_data:a},type:"get",dataType:"jsonp",success:function(a){return!0},error:function(){oa("Unable to submit form data.");ga("video_data_error");return!1}}))};c.reset=function(){fc()};c.setLength=function(a){vb=a;u.html("("+a+")")};c.send_sms=function(a){""==a?alert("please eneter your phone number!"):
(Xa("sending your message"),e.ajax({url:"//"+b+"/videos/"+g.uuid+"/sms",data:{number:a,message:k},type:"get",dataType:"jsonp",success:function(a){a.success?(c.loadInterface(nb),CameraTag.fire(h,"smsSent")):(c.loadInterface(O),alert("that does not appear to be a valid phone number"))},error:function(){oa("Unable to send SMS.");ga("sms_error",{number:a,message:k});return!1}}))};c.getVideo=function(){return g};c.restart_upload=function(){c.uploader.restart_upload()};c.destroy=function(){Ba="disconnecting";
fa&&Ja&&fa.disconnect();delete CameraTag.cameras[h];Y.remove()};var eb=function(a){var d=new n.Uploader({runtimes:"html5,flash,html4",url:"https://s3.amazonaws.com/assets.cameratag.com",browse_button:a,browse_button_hover:"selected",multi_selection:!1,drop_element:h+"_start_screen",max_retries:2,filters:[{title:"Videos",extensions:"mov,mpg,mpeg,mp4,m4v,avi,3gp,3gp2,webm,flv,f4v,wmv"}],multipart_params:{key:"",acl:"public-read",success_action_status:"201",AWSAccessKeyId:"AKIAJCHWZMZ35EB62V2A",policy:B,
signature:w,filename:"this is for flash runtime compatability"},file_data_name:"file",flash_swf_url:"//"+b+"/"+CameraTag.version+"/plupload/Moxie.swf"});d.total_upload_size=function(){var a=0;e(d.files).each(function(b,c){a+=c.size});return a};d.validate_and_upload=function(){2147483648<=d.total_upload_size()?(alert("You may only upload files up to 2GB in size."),ga("file_too_big_error")):(Ba="uploading",CameraTag.fire(h,"uploadStarted"),setTimeout(function(){d.start()},10),Va.show(),z.css("left",
"-10000px"),z.css("right","10000px"),-1<navigator.userAgent.toLowerCase().indexOf("android")?ca.html("..."):ca.html("0%"))};d.restart_upload=function(){d.stop();d.start()};d.bind("FilesAdded",function(a,b){e(b).each(function(a,b){b.s3_key="recordings/"+g.uuid+".flv"});d.validate_and_upload()});d.bind("UploadFile",function(a,b){d.settings.multipart_params.key=b.s3_key});d.bind("FilesRemoved",function(a,b){});d.bind("UploadProgress",function(a,b){CameraTag.fire(h,"UploadProgress",b);ca.html(b.percent+
"%")});d.bind("FileUploaded",function(a,b,d){Ma=!0;CameraTag.fire(h,"readyToPublish");ga("upload_success",{message:d.response,status:d.status});z.css("left","0px");z.css("right","0px");jb?(Xa("publishing"),K(g.uuid,"upload")):c.loadInterface(za)});d.bind("UploadComplete",function(a,b){});d.bind("Error",function(a,b){CameraTag.fire(h,"uploadAborted",b);c.loadInterface(z,!0);ga("upload_error",b)});e("#"+h+"_start_screen").bind("dragenter",function(){e(this).find(".cameratag_select_prompt").html("drop file to upload");
e(".cameratag_primary_link").hide();e(".cameratag_upload_link").show()});e("#"+h+"_start_screen").bind("dragleave",function(a){e(this).find(".cameratag_select_prompt").html("choose a method below to submit your video");e(".cameratag_primary_link").show()});d.init();return d},dd=function(){Ya&&e.ajax({url:"//"+b+"/videos/"+g.uuid+".json",type:"get",dataType:"jsonp",data:{referer:window.location.toString()},success:function(a){"COMPLETED"==a.formats[0].state?CameraTag.fire(h,"processed"):ua=setTimeout(dd,
2E3)},error:function(){ga("processed_poll_error")}})},xd=function(){e.ajax({url:"//"+b+"/videos/"+g.uuid+".json",type:"get",dataType:"jsonp",data:{referer:window.location.toString()},success:function(a){"published"==a.state?(CameraTag.fire(g.uuid,"published",a),clearInterval(D)):D=setTimeout(function(){xd()},4E3)},error:function(){ga("published_poll_error")}})},de=function(){c.play=function(){Ja&&fa.startPlayback()};c.showFlashSettings=function(){c.loadInterface("none");fa.showFlashSettings()};c.record=
function(){Ja?(CameraTag.fire(h,"countdownStarted"),fa.showRecorder(),mc(ib,c.record_without_countdown)):(c.loadInterface("none"),c.connect())};c.showRecorder=function(){fa.showRecorder()};c.showPlayer=function(){fa.showPlayer()};c.record_without_countdown=function(){if(!lc)throw ga("premature_record"),"Camera not ready to record. Please observe 'readyToRecord' event before recording";Ba="recording";fa.showRecorder();fa.startRecording()};c.stopPlayback=function(){Ja&&fa.stopPlayback()};c.stopRecording=
function(){Ja&&(clearInterval(q),fa.stopRecording())};c.connect=function(){fa.connect()};c.disconnect=function(){Ba="disconnecting";fa.disconnect()}},wc=function(){CameraTag.observe(h,"initialized",function(){Hb=!0;Ba="initialized"},!0);CameraTag.observe(h,"securityDialogOpen",function(){c.loadInterface("none")},!0);CameraTag.observe(h,"securityDialogClosed",function(){c.loadInterface(da)},!0);CameraTag.observe(h,"settingsDialogClosed",function(){c.loadInterface(z,!0)},!0);CameraTag.observe(h,"detectingCamera",
function(){c.loadInterface(da)},!0);CameraTag.observe(h,"noCamera",function(){oa("No Camera Detected");ga("no_camera_error")},!0);CameraTag.observe(h,"noMic",function(){oa("No Microphone Detected");ga("no_mic_error")},!0);CameraTag.observe(h,"readyToRecord",function(){lc=!0;rb&&c.record()},!0);CameraTag.observe(h,"cameraDenied",function(){oa("Camera Access Denied")},!0);CameraTag.observe(h,"serverConnected",function(){Ja=!0},!0);CameraTag.observe(h,"serverDisconnected",function(){lc=Ja=!1;"disconnecting"!=
Ba&&"published"!=Ba&&"readyToPublish"!=Ba&&(c.stopRecording(),fa.showNothing(),oa("Lost connection to server"),setTimeout(function(){c.loadInterface(z)},2E3),ga("pre_record_disconnect_error"))},!0);CameraTag.observe(h,"playbackFailed",function(){oa("Playback failed");ga("playback_error")},!0);CameraTag.observe(h,"serverError",function(){oa("Unable To Connect");ga("no_server_error")},!0);CameraTag.observe(h,"waitingForCameraActivity",function(){},!0);CameraTag.observe(h,"countdownStarted",function(){c.loadInterface(xa)},
!0);CameraTag.observe(h,"countdownFinished",function(){},!0);CameraTag.observe(h,"recordingStarted",function(){s=0;q=setInterval(function(){s+=1;var a=vb-s;u.html("("+a+")");0==a&&(clearInterval(q),c.stopRecording())},1E3);c.loadInterface(va)},!0);CameraTag.observe(h,"recordingStopped",function(){clearInterval(q);Bb?(fa.showPlayer(),c.loadInterface(ra)):c.play()},!0);CameraTag.observe(h,"bufferingUp",function(){Xa("uploading your video")},!0);CameraTag.observe(h,"bufferingDown",function(){Xa("buffering video playback")},
!0);CameraTag.observe(h,"recordingTimeOut",function(){},!0);CameraTag.observe(h,"playbackStarted",function(){c.loadInterface(Ua)},!0);CameraTag.observe(h,"playbackStopped",function(){c.loadInterface(ra)},!0);CameraTag.observe(h,"publishing",function(){Ba="publishing"},!0);CameraTag.observe(h,"uploadStarted",function(){},!0);CameraTag.observe(h,"uploadAborted",function(){},!0);CameraTag.observe(h,"readyToPublish",function(){Ma=!0;Ba="readyToPublish"},!0);CameraTag.observe(h,"smsSent",function(){xd()},
!0);CameraTag.observe(h,"published",function(){},!0);CameraTag.observe(h,"publishFailed",function(a){oa("Unable to publish your recording.");ga("publish_error",a)},!0);CameraTag.observe(h,"processed",function(){Ba="processed";e(".cameratag_thumb_bg").css({backgroundImage:"url(//"+b+"/videos/"+g.uuid+"/"+f.formats[0].name+"/thumb)"})},!0)};fc()};Player=function(a){a=e(a);var c,d=a.attr("data-uuid")||a.attr("data-video-id"),f={},g=a.attr("id")||d,h,k,n,q,p=function(){D()?e.ajax({url:"//"+b+"/videos/"+
d+".json",type:"get",dataType:"jsonp",data:{referer:window.location.toString()},success:function(b){f=b;h=s(a.attr("data-format"))||f.formats[0];k=a.attr("height")?a.attr("height"):h.height/2;n=a.attr("width")?a.attr("width"):h.width/2;if(h.flv_url||"COMPLETED"==h.state)c=e("<video></video>"),c.attr("id",g),c.addClass("video-js"),c.addClass("vjs-default-skin"),c.attr("height",k),c.attr("width",n),c.attr("poster",h.thumbnail_url),b=h,"COMPLETED"==b.state?(b=e('<source src="'+b.mp4_url+'" type="video/mp4" />'),
c.append(b)):b.flv_url&&(b=e('<source src="'+b.flv_url+'" type="video/flv" />'),c.append(b)),a.replaceWith(c),v();else{b=e('<div class="cameratag_placeholder"></div>');var d=e('<div class="cameratag_player_error">This video is processing. <br/> It will be available soon.</div>');b.append(d);b.width(n);b.height(k);a.replaceWith(b)}},error:function(){}}):setTimeout(p,30)},s=function(a){return e.grep(f.formats,function(b){return b.name==a})[0]},v=function(){for(vid in _V_.players)vid.toString()==g&&
delete _V_.players[vid];_V_.options.flash.swf="//"+b+"/"+CameraTag.version+"/video-js.swf";_V_.options.flash.params={allowfullscreen:"true",wmode:"transparent",allowscriptaccess:"always"};q=m(g,{controls:!0,techOrder:["flash","html5"]},function(){});CameraTag.players[g]=q;u()},u=function(){q.on("durationchange",function(a){CameraTag.fire(g,"durationchange",a)});q.on("ended",function(a){CameraTag.fire(g,"ended",a)});q.on("error",function(a){CameraTag.fire(g,"error",a)});q.on("firstplay",function(a){CameraTag.fire(g,
"firstplay",a)});q.on("fullscreenchange",function(a){CameraTag.fire(g,"fullscreenchange",a)});q.on("loadedalldata",function(a){CameraTag.fire(g,"loadedalldata",a)});q.on("loadeddata",function(a){CameraTag.fire(g,"loadeddata",a)});q.on("loadedmetadata",function(a){CameraTag.fire(g,"loadedmetadata",a)});q.on("loadstart",function(a){CameraTag.fire(g,"loadstart",a)});q.on("pause",function(a){CameraTag.fire(g,"pause",a)});q.on("play",function(a){CameraTag.fire(g,"play",a)});q.on("progress",function(a){CameraTag.fire(g,
"progress",a)});q.on("timeupdate",function(a){CameraTag.fire(g,"timeupdate",a)});q.on("volumechange",function(a){CameraTag.fire(g,"volumechange",a)});q.on("resize",function(a){CameraTag.fire(g,"resize",a)})};p()}};Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){var c=this.length>>>0,d=Number(b)||0,d=0>d?Math.ceil(d):Math.floor(d);for(0>d&&(d+=c);d<c;d++)if(d in this&&this[d]===a)return d;return-1});
function addLoadEvent(a){var b=window.onload;window.onload="function"!=typeof window.onload?a:function(){b&&b();a()}}addLoadEvent(function(){CameraTag.setup()});window.CameratagRecorder=window.Recorder;
window.Modernizr=function(a,b,c){function d(a,b){for(var d in a){var e=a[d];if(!~(""+e).indexOf("-")&&k[e]!==c)return"pfx"==b?e:!0}return!1}function e(a,b,e){var f=a.charAt(0).toUpperCase()+a.slice(1),g=(a+" "+q.join(f+" ")+f).split(" ");if("string"===typeof b||"undefined"===typeof b)b=d(g,b);else a:{g=(a+" "+m.join(f+" ")+f).split(" "),a=g;for(var h in a)if(f=b[a[h]],f!==c){b=!1===e?a[h]:"function"===typeof f?f.bind(e||b):f;break a}b=!1}return b}var f={},h=b.documentElement,g=b.createElement("modernizr"),
k=g.style,n=" -webkit- -moz- -o- -ms- ".split(" "),q=["Webkit","Moz","O","ms"],m=["webkit","moz","o","ms"],g={},p=[],u=p.slice,v,A=function(a,c,d,e){var f,g,k,m,n=b.createElement("div"),q=b.body,p=q||b.createElement("body");if(parseInt(d,10))for(;d--;)k=b.createElement("div"),k.id=e?e[d]:"modernizr"+(d+1),n.appendChild(k);return f=['&#173;<style id="smodernizr">',a,"</style>"].join(""),n.id="modernizr",(q?n:p).innerHTML+=f,p.appendChild(n),q||(p.style.background="",p.style.overflow="hidden",m=h.style.overflow,
h.style.overflow="hidden",h.appendChild(p)),g=c(n,a),q?n.parentNode.removeChild(n):(p.parentNode.removeChild(p),h.style.overflow=m),!!g},D={}.hasOwnProperty,x;"undefined"===typeof D||"undefined"===typeof D.call?x=function(a,b){return b in a&&"undefined"===typeof a.constructor.prototype[b]}:x=function(a,b){return D.call(a,b)};Function.prototype.bind||(Function.prototype.bind=function(a){var b=this;if("function"!=typeof b)throw new TypeError;var c=u.call(arguments,1),d=function(){if(this instanceof
d){var e=function(){};e.prototype=b.prototype;var e=new e,f=b.apply(e,c.concat(u.call(arguments)));return Object(f)===f?f:e}return b.apply(a,c.concat(u.call(arguments)))};return d});g.flexbox=function(){return e("flexWrap")};g.flexboxlegacy=function(){return e("boxDirection")};g.touch=function(){var c;return"ontouchstart"in a||a.DocumentTouch&&b instanceof DocumentTouch?c=!0:A(["@media (",n.join("touch-enabled),("),"modernizr){#modernizr{top:9px;position:absolute}}"].join(""),function(a){c=9===a.offsetTop}),
c};g.history=function(){return!!a.history&&!!history.pushState};g.csstransforms=function(){return!!e("transform")};g.csstransforms3d=function(){var a=!!e("perspective");return a&&"webkitPerspective"in h.style&&A("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(b,c){a=9===b.offsetLeft&&3===b.offsetHeight}),a};for(var B in g)x(g,B)&&(v=B.toLowerCase(),f[v]=g[B](),p.push((f[v]?"":"no-")+v));f.addTest=function(a,b){if("object"==typeof a)for(var d in a)x(a,
d)&&f.addTest(d,a[d]);else{a=a.toLowerCase();if(f[a]!==c)return f;b="function"==typeof b?b():b;h.className+=" "+(b?"":"no-")+a;f[a]=b}return f};k.cssText="";return g=null,function(a,b){function c(){var a=B.elements;return"string"==typeof a?a.split(" "):a}function d(a){var b=v[a[q]];return b||(b={},p++,a[q]=p,v[p]=b),b}function e(a,c,f){c||(c=b);if(u)return c.createElement(a);f||(f=d(c));var g;return f.cache[a]?g=f.cache[a].cloneNode():m.test(a)?g=(f.cache[a]=f.createElem(a)).cloneNode():g=f.createElem(a),
!g.canHaveChildren||k.test(a)||g.tagUrn?g:f.frag.appendChild(g)}function f(a,b){b.cache||(b.cache={},b.createElem=a.createElement,b.createFrag=a.createDocumentFragment,b.frag=b.createFrag());a.createElement=function(c){return B.shivMethods?e(c,a,b):b.createElem(c)};a.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+c().join().replace(/[\w\-]+/g,function(a){return b.createElem(a),b.frag.createElement(a),'c("'+a+'")'})+");return n}")(B,
b.frag)}function g(a){a||(a=b);var c=d(a);if(B.shivCSS&&!n&&!c.hasCSS){var e,h=a;e=h.createElement("p");h=h.getElementsByTagName("head")[0]||h.documentElement;e=(e.innerHTML="x<style>article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}</style>",h.insertBefore(e.lastChild,h.firstChild));c.hasCSS=!!e}return u||f(a,c),a}var h=a.html5||{},k=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,
m=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,n,q="_html5shiv",p=0,v={},u;(function(){try{var a=b.createElement("a");a.innerHTML="<xyz></xyz>";n="hidden"in a;var c;if(!(c=1==a.childNodes.length)){b.createElement("a");var d=b.createDocumentFragment();c="undefined"==typeof d.cloneNode||"undefined"==typeof d.createDocumentFragment||"undefined"==typeof d.createElement}u=c}catch(e){u=n=!0}})();var B={elements:h.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",
version:"3.7.0",shivCSS:!1!==h.shivCSS,supportsUnknownElements:u,shivMethods:!1!==h.shivMethods,type:"default",shivDocument:g,createElement:e,createDocumentFragment:function(a,e){a||(a=b);if(u)return a.createDocumentFragment();e=e||d(a);for(var f=e.frag.cloneNode(),g=0,h=c(),k=h.length;g<k;g++)f.createElement(h[g]);return f}};a.html5=B;g(b)}(this,b),f._version="2.8.3",f._prefixes=n,f._domPrefixes=m,f._cssomPrefixes=q,f.testProp=function(a){return d([a])},f.testAllProps=e,f.testStyles=A,h.className=
h.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(" js "+p.join(" ")),f}(this,this.document);
(function(a,b,c){function d(a){return"[object Function]"==v.call(a)}function e(a){return"string"==typeof a}function f(){}function h(a){return!a||"loaded"==a||"complete"==a||"uninitialized"==a}function g(){var a=A.shift();D=1;a?a.t?p(function(){("c"==a.t?T.injectCss:T.injectJs)(a.s,0,a.a,a.x,a.e,1)},0):(a(),g()):D=0}function k(a,c,d,e,f,k,m){function n(b){if(!v&&h(q.readyState)&&(C.r=v=1,!D&&g(),q.onload=q.onreadystatechange=null,b)){"img"!=a&&p(function(){s.removeChild(q)},50);for(var d in L[c])L[c].hasOwnProperty(d)&&
L[c][d].onload()}}m=m||T.errorTimeout;var q=b.createElement(a),v=0,x=0,C={t:d,s:c,e:f,a:k,x:m};1===L[c]&&(x=1,L[c]=[]);"object"==a?q.data=c:(q.src=c,q.type=a);q.width=q.height="0";q.onerror=q.onload=q.onreadystatechange=function(){n.call(this,x)};A.splice(e,0,C);"img"!=a&&(x||2===L[c]?(s.insertBefore(q,B?null:u),p(n,m)):L[c].push(q))}function n(a,b,c,d,f){return D=0,b=b||"j",e(a)?k("c"==b?K:G,a,b,this.i++,c,d,f):(A.splice(this.i++,0,a),1==A.length&&g()),this}function q(){var a=T;return a.loader={load:n,
i:0},a}var m=b.documentElement,p=a.setTimeout,u=b.getElementsByTagName("script")[0],v={}.toString,A=[],D=0,x="MozAppearance"in m.style,B=x&&!!b.createRange().compareNode,s=B?m:u.parentNode,m=a.opera&&"[object Opera]"==v.call(a.opera),m=!!b.attachEvent&&!m,G=x?"object":m?"script":"img",K=m?"script":G,J=Array.isArray||function(a){return"[object Array]"==v.call(a)},C=[],L={},N={timeout:function(a,b){return b.length&&(a.timeout=b[0]),a}},Q,T;T=function(a){function b(a){a=a.split("!");var c=C.length,d=
a.pop(),e=a.length,d={url:d,origUrl:d,prefixes:a},f,g,h;for(g=0;g<e;g++)h=a[g].split("="),(f=N[h.shift()])&&(d=f(d,h));for(g=0;g<c;g++)d=C[g](d);return d}function g(a,e,f,h,k){var m=b(a),n=m.autoCallback;m.url.split(".").pop().split("?").shift();m.bypass||(e&&(e=d(e)?e:e[a]||e[h]||e[a.split("/").pop().split("?")[0]]),m.instead?m.instead(a,e,f,h,k):(L[m.url]?m.noexec=!0:L[m.url]=1,f.load(m.url,m.forceCSS||!m.forceJS&&"css"==m.url.split(".").pop().split("?").shift()?"c":c,m.noexec,m.attrs,m.timeout),
(d(e)||d(n))&&f.load(function(){q();e&&e(m.origUrl,k,h);n&&n(m.origUrl,k,h);L[m.url]=2})))}function h(a,b){function c(a,f){if(a)if(e(a))f||(n=function(){var a=[].slice.call(arguments);q.apply(this,a);p()}),g(a,n,b,0,k);else{if(Object(a)===a)for(s in r=function(){var b=0,c;for(c in a)a.hasOwnProperty(c)&&b++;return b}(),a)a.hasOwnProperty(s)&&(!f&&!--r&&(d(n)?n=function(){var a=[].slice.call(arguments);q.apply(this,a);p()}:n[s]=function(a){return function(){var b=[].slice.call(arguments);a&&a.apply(this,
b);p()}}(q[s])),g(a[s],n,b,s,k))}else!f&&p()}var k=!!a.test,m=a.load||a.both,n=a.callback||f,q=n,p=a.complete||f,r,s;c(k?a.yep:a.nope,!!m);m&&c(m)}var k,m,n=this.yepnope.loader;if(e(a))g(a,0,n,0);else if(J(a))for(k=0;k<a.length;k++)m=a[k],e(m)?g(m,0,n,0):J(m)?T(m):Object(m)===m&&h(m,n);else Object(a)===a&&h(a,n)};T.addPrefix=function(a,b){N[a]=b};T.addFilter=function(a){C.push(a)};T.errorTimeout=1E4;null==b.readyState&&b.addEventListener&&(b.readyState="loading",b.addEventListener("DOMContentLoaded",
Q=function(){b.removeEventListener("DOMContentLoaded",Q,0);b.readyState="complete"},0));a.yepnope=q();a.yepnope.executeStack=g;a.yepnope.injectJs=function(a,c,d,e,k,m){var n=b.createElement("script"),q,s;e=e||T.errorTimeout;n.src=a;for(s in d)n.setAttribute(s,d[s]);c=m?g:c||f;n.onreadystatechange=n.onload=function(){!q&&h(n.readyState)&&(q=1,c(),n.onload=n.onreadystatechange=null)};p(function(){q||(q=1,c(1))},e);k?n.onload():u.parentNode.insertBefore(n,u)};a.yepnope.injectCss=function(a,c,d,e,h,k){e=
b.createElement("link");var m;c=k?g:c||f;e.href=a;e.rel="stylesheet";e.type="text/css";for(m in d)e.setAttribute(m,d[m]);h||(u.parentNode.insertBefore(e,u),p(c,0))}})(this,document);Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))};Modernizr.addTest("cssfilters",function(){var a=document.createElement("div");return a.style.cssText=Modernizr._prefixes.join("filter:blur(2px); "),!!a.style.length&&(void 0===document.documentMode||9<document.documentMode)});
!function(){function a(d){if(!d)throw Error("No options passed to Waypoint constructor");if(!d.element)throw Error("No element option passed to Waypoint constructor");if(!d.handler)throw Error("No handler option passed to Waypoint constructor");this.key="waypoint-"+b;this.options=a.Adapter.extend({},a.defaults,d);this.element=this.options.element;this.adapter=new a.Adapter(this.element);this.callback=d.handler;this.axis=this.options.horizontal?"horizontal":"vertical";this.enabled=this.options.enabled;
this.triggerPoint=null;this.group=a.Group.findOrCreate({name:this.options.group,axis:this.axis});this.context=a.Context.findOrCreateByElement(this.options.context);a.offsetAliases[this.options.offset]&&(this.options.offset=a.offsetAliases[this.options.offset]);this.group.add(this);this.context.add(this);c[this.key]=this;b+=1}var b=0,c={};a.prototype.queueTrigger=function(a){this.group.queueTrigger(this,a)};a.prototype.trigger=function(a){this.enabled&&this.callback&&this.callback.apply(this,a)};a.prototype.destroy=
function(){this.context.remove(this);this.group.remove(this);delete c[this.key]};a.prototype.disable=function(){return this.enabled=!1,this};a.prototype.enable=function(){return this.context.refresh(),this.enabled=!0,this};a.prototype.next=function(){return this.group.next(this)};a.prototype.previous=function(){return this.group.previous(this)};a.invokeAll=function(a){var b=[],f;for(f in c)b.push(c[f]);f=0;for(var h=b.length;h>f;f++)b[f][a]()};a.destroyAll=function(){a.invokeAll("destroy")};a.disableAll=
function(){a.invokeAll("disable")};a.enableAll=function(){a.invokeAll("enable")};a.refreshAll=function(){a.Context.refreshAll()};a.viewportHeight=function(){return window.innerHeight||document.documentElement.clientHeight};a.viewportWidth=function(){return document.documentElement.clientWidth};a.adapters=[];a.defaults={context:window,continuous:!0,enabled:!0,group:"default",horizontal:!1,offset:0};a.offsetAliases={"bottom-in-view":function(){return this.context.innerHeight()-this.adapter.outerHeight()},
"right-in-view":function(){return this.context.innerWidth()-this.adapter.outerWidth()}};window.Waypoint=a}();
(function(){function a(a){window.setTimeout(a,1E3/60)}function b(a){this.element=a;this.Adapter=e.Adapter;this.adapter=new this.Adapter(a);this.key="waypoint-context-"+c;this.didResize=this.didScroll=!1;this.oldScroll={x:this.adapter.scrollLeft(),y:this.adapter.scrollTop()};this.waypoints={vertical:{},horizontal:{}};a.waypointContextKey=this.key;d[a.waypointContextKey]=this;c+=1;this.createThrottledScrollHandler();this.createThrottledResizeHandler()}var c=0,d={},e=window.Waypoint,f=window.onload;
b.prototype.add=function(a){this.waypoints[a.options.horizontal?"horizontal":"vertical"][a.key]=a;this.refresh()};b.prototype.checkEmpty=function(){var a=this.Adapter.isEmptyObject(this.waypoints.horizontal),b=this.Adapter.isEmptyObject(this.waypoints.vertical);a&&b&&(this.adapter.off(".waypoints"),delete d[this.key])};b.prototype.createThrottledResizeHandler=function(){function a(){b.handleResize();b.didResize=!1}var b=this;this.adapter.on("resize.waypoints",function(){b.didResize||(b.didResize=
!0,e.requestAnimationFrame(a))})};b.prototype.createThrottledScrollHandler=function(){function a(){b.handleScroll();b.didScroll=!1}var b=this;this.adapter.on("scroll.waypoints",function(){b.didScroll&&!e.isTouch||(b.didScroll=!0,e.requestAnimationFrame(a))})};b.prototype.handleResize=function(){e.Context.refreshAll()};b.prototype.handleScroll=function(){var a={},b={horizontal:{newScroll:this.adapter.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.adapter.scrollTop(),
oldScroll:this.oldScroll.y,forward:"down",backward:"up"}},c;for(c in b){var d=b[c],e=d.newScroll>d.oldScroll?d.forward:d.backward,f;for(f in this.waypoints[c]){var p=this.waypoints[c][f],u=d.oldScroll<p.triggerPoint,v=d.newScroll>=p.triggerPoint,A=!u&&!v;(u&&v||A)&&(p.queueTrigger(e),a[p.group.id]=p.group)}}for(var D in a)a[D].flushTriggers();this.oldScroll={x:b.horizontal.newScroll,y:b.vertical.newScroll}};b.prototype.innerHeight=function(){return this.element==this.element.window?e.viewportHeight():
this.adapter.innerHeight()};b.prototype.remove=function(a){delete this.waypoints[a.axis][a.key];this.checkEmpty()};b.prototype.innerWidth=function(){return this.element==this.element.window?e.viewportWidth():this.adapter.innerWidth()};b.prototype.destroy=function(){var a=[],b;for(b in this.waypoints)for(var c in this.waypoints[b])a.push(this.waypoints[b][c]);b=0;for(c=a.length;c>b;b++)a[b].destroy()};b.prototype.refresh=function(){var a,b=(a=this.element==this.element.window)?void 0:this.adapter.offset(),
c={};this.handleScroll();a={horizontal:{contextOffset:a?0:b.left,contextScroll:a?0:this.oldScroll.x,contextDimension:this.innerWidth(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:a?0:b.top,contextScroll:a?0:this.oldScroll.y,contextDimension:this.innerHeight(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}};for(var d in a){var b=a[d],f;for(f in this.waypoints[d]){var m,p,u,v=this.waypoints[d][f];u=v.options.offset;
m=v.triggerPoint;p=0;var A=null==m;v.element!==v.element.window&&(p=v.adapter.offset()[b.offsetProp]);"function"==typeof u?u=u.apply(v):"string"==typeof u&&(u=parseFloat(u),-1<v.options.offset.indexOf("%")&&(u=Math.ceil(b.contextDimension*u/100)));v.triggerPoint=p+(b.contextScroll-b.contextOffset)-u;m=m<b.oldScroll;p=v.triggerPoint>=b.oldScroll;u=m&&p;m=!m&&!p;!A&&u?(v.queueTrigger(b.backward),c[v.group.id]=v.group):!A&&m?(v.queueTrigger(b.forward),c[v.group.id]=v.group):A&&b.oldScroll>=v.triggerPoint&&
(v.queueTrigger(b.forward),c[v.group.id]=v.group)}}return e.requestAnimationFrame(function(){for(var a in c)c[a].flushTriggers()}),this};b.findOrCreateByElement=function(a){return b.findByElement(a)||new b(a)};b.refreshAll=function(){for(var a in d)d[a].refresh()};b.findByElement=function(a){return d[a.waypointContextKey]};window.onload=function(){f&&f();b.refreshAll()};e.requestAnimationFrame=function(b){(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||
a).call(window,b)};e.Context=b})();
(function(){function a(a,b){return a.triggerPoint-b.triggerPoint}function b(a,b){return b.triggerPoint-a.triggerPoint}function c(a){this.name=a.name;this.axis=a.axis;this.id=this.name+"-"+this.axis;this.waypoints=[];this.clearTriggerQueues();d[this.axis][this.name]=this}var d={vertical:{},horizontal:{}},e=window.Waypoint;c.prototype.add=function(a){this.waypoints.push(a)};c.prototype.clearTriggerQueues=function(){this.triggerQueues={up:[],down:[],left:[],right:[]}};c.prototype.flushTriggers=function(){for(var c in this.triggerQueues){var d=
this.triggerQueues[c];d.sort("up"===c||"left"===c?b:a);for(var e=0,k=d.length;k>e;e+=1){var n=d[e];(n.options.continuous||e===d.length-1)&&n.trigger([c])}}this.clearTriggerQueues()};c.prototype.next=function(b){this.waypoints.sort(a);b=e.Adapter.inArray(b,this.waypoints);return b===this.waypoints.length-1?null:this.waypoints[b+1]};c.prototype.previous=function(b){this.waypoints.sort(a);return(b=e.Adapter.inArray(b,this.waypoints))?this.waypoints[b-1]:null};c.prototype.queueTrigger=function(a,b){this.triggerQueues[b].push(a)};
c.prototype.remove=function(a){a=e.Adapter.inArray(a,this.waypoints);-1<a&&this.waypoints.splice(a,1)};c.prototype.first=function(){return this.waypoints[0]};c.prototype.last=function(){return this.waypoints[this.waypoints.length-1]};c.findOrCreate=function(a){return d[a.axis][a.name]||new c(a)};e.Group=c})();
(function(){function a(a){this.$element=b(a)}var b=window.jQuery,c=window.Waypoint;b.each("innerHeight innerWidth off offset on outerHeight outerWidth scrollLeft scrollTop".split(" "),function(b,c){a.prototype[c]=function(){var a=Array.prototype.slice.call(arguments);return this.$element[c].apply(this.$element,a)}});b.each(["extend","inArray","isEmptyObject"],function(c,e){a[e]=b[e]});c.adapters.push({name:"jquery",Adapter:a});c.Adapter=a})();
(function(){function a(a){return function(d,e){var f=[],h=d;return a.isFunction(d)&&(h=a.extend({},e),h.handler=d),this.each(function(){var d=a.extend({},h,{element:this});"string"==typeof d.context&&(d.context=a(this).closest(d.context)[0]);f.push(new b(d))}),f}}var b=window.Waypoint;window.jQuery&&(window.jQuery.fn.waypoint=a(window.jQuery));window.Zepto&&(window.Zepto.fn.waypoint=a(window.Zepto))})();
!function(){function a(d){this.options=b.extend({},c.defaults,a.defaults,d);this.element=this.options.element;this.$element=b(this.element);this.createWrapper();this.createWaypoint()}var b=window.jQuery,c=window.Waypoint;a.prototype.createWaypoint=function(){var a=this.options.handler;this.waypoint=new c(b.extend({},this.options,{element:this.wrapper,handler:b.proxy(function(b){var c=-1<this.options.direction.indexOf(b),h=c?this.$element.outerHeight(!0):"";this.$wrapper.height(h);this.$element.toggleClass(this.options.stuckClass,
c);a&&a.call(this,b)},this)}))};a.prototype.createWrapper=function(){this.options.wrapper&&this.$element.wrap(this.options.wrapper);this.$wrapper=this.$element.parent();this.wrapper=this.$wrapper[0]};a.prototype.destroy=function(){this.$element.parent()[0]===this.wrapper&&(this.waypoint.destroy(),this.$element.removeClass(this.options.stuckClass),this.options.wrapper&&this.$element.unwrap())};a.defaults={wrapper:'<div class="sticky-wrapper" />',stuckClass:"stuck",direction:"down right"};c.Sticky=
a}();
(function(){var a;a=function(){function a(){this.options_index=0;this.parsed=[]}a.prototype.add_node=function(a){return"OPTGROUP"===a.nodeName.toUpperCase()?this.add_group(a):this.add_option(a)};a.prototype.add_group=function(a){var b,e,f,h,g,k;b=this.parsed.length;this.parsed.push({array_index:b,group:!0,label:a.label,children:0,disabled:a.disabled});g=a.childNodes;k=[];f=0;for(h=g.length;f<h;f++)e=g[f],k.push(this.add_option(e,b,a.disabled));return k};a.prototype.add_option=function(a,b,e){if("OPTION"===a.nodeName.toUpperCase())return""!==
a.text?(null!=b&&(this.parsed[b].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:a.value,text:a.text,html:a.innerHTML,selected:a.selected,disabled:!0===e?e:a.disabled,group_array_index:b,classes:a.className,style:a.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1};return a}();a.select_to_array=function(b){var c,d,e,f;c=new a;f=b.childNodes;d=0;for(e=f.length;d<e;d++)b=
f[d],c.add_node(b);return c.parsed};this.SelectParser=a}).call(this);
(function(){this.AbstractChosen=function(){function a(b,c){this.form_field=b;this.options=null!=c?c:{};a.browser_is_supported()&&(this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers(),this.finish_setup())}a.prototype.set_default_values=function(){var a=this;this.click_test_action=function(c){return a.test_active_click(c)};this.activate_action=function(c){return a.activate_field(c)};this.results_showing=
this.mouse_on_container=this.active_field=!1;this.result_single_selected=this.result_highlighted=null;this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text?this.options.allow_single_deselect:!1;this.disable_search_threshold=this.options.disable_search_threshold||0;this.disable_search=this.options.disable_search||!1;this.enable_split_word_search=null!=this.options.enable_split_word_search?this.options.enable_split_word_search:
!0;this.search_contains=this.options.search_contains||!1;this.choices=0;this.single_backstroke_delete=this.options.single_backstroke_delete||!1;this.max_selected_options=this.options.max_selected_options||Infinity;return this.inherit_select_classes=this.options.inherit_select_classes||!1};a.prototype.set_default_text=function(){this.form_field.getAttribute("data-placeholder")?this.default_text=this.form_field.getAttribute("data-placeholder"):this.default_text=this.is_multiple?this.options.placeholder_text_multiple||
this.options.placeholder_text||a.default_multiple_text:this.options.placeholder_text_single||this.options.placeholder_text||a.default_single_text;return this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||a.default_no_result_text};a.prototype.mouse_enter=function(){return this.mouse_on_container=!0};a.prototype.mouse_leave=function(){return this.mouse_on_container=!1};a.prototype.input_focus=function(a){var c=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return c.container_mousedown()},
50)}else if(!this.active_field)return this.activate_field()};a.prototype.input_blur=function(a){var c=this;if(!this.mouse_on_container)return this.active_field=!1,setTimeout(function(){return c.blur_test()},100)};a.prototype.result_add_option=function(a){var c,d;if(a.disabled)return"";a.dom_id=this.container_id+"_o_"+a.array_index;c=a.selected&&this.is_multiple?[]:["active-result"];a.selected&&c.push("result-selected");null!=a.group_array_index&&c.push("group-option");""!==a.classes&&c.push(a.classes);
d=""!==a.style.cssText?' style="'+a.style+'"':"";return'<li id="'+a.dom_id+'" class="'+c.join(" ")+'"'+d+">"+a.html+"</li>"};a.prototype.results_update_field=function(){this.set_default_text();this.is_multiple||this.results_reset_cleanup();this.result_clear_highlight();this.result_single_selected=null;return this.results_build()};a.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()};a.prototype.results_search=function(a){return this.results_showing?
this.winnow_results():this.results_show()};a.prototype.keyup_checker=function(a){var c,d;c=null!=(d=a.which)?d:a.keyCode;this.search_field_scale();switch(c){case 8:if(this.is_multiple&&1>this.backstroke_length&&0<this.choices)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:a.preventDefault();if(this.results_showing)return this.result_select(a);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;
default:return this.results_search()}};a.prototype.generate_field_id=function(){var a;a=this.generate_random_id();return this.form_field.id=a};a.prototype.generate_random_char=function(){var a;a=Math.floor(36*Math.random());return"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".substring(a,a+1)};a.prototype.container_width=function(){return null!=this.options.width?this.options.width:(null!=window.getComputedStyle?parseFloat(window.getComputedStyle(this.form_field).getPropertyValue("width")):"undefined"!==
typeof jQuery&&null!==jQuery?this.form_field_jq.outerWidth():this.form_field.getWidth())+"px"};a.browser_is_supported=function(){var a;return"Microsoft Internet Explorer"===window.navigator.appName?null!==(a=document.documentMode)&&8<=a:!0};a.default_multiple_text="Select Some Options";a.default_single_text="Select an Option";a.default_no_result_text="No results match";return a}()}).call(this);
(function(){var a,b,c,d={}.hasOwnProperty,e=function(a,b){function c(){this.constructor=a}for(var e in b)d.call(b,e)&&(a[e]=b[e]);c.prototype=b.prototype;a.prototype=new c;a.__super__=b.prototype;return a};c=this;a=jQuery;a.fn.extend({chosen:function(c){return AbstractChosen.browser_is_supported()?this.each(function(d){d=a(this);if(!d.hasClass("chzn-done"))return d.data("chosen",new b(this,c))}):this}});b=function(b){function d(){return d.__super__.constructor.apply(this,arguments)}e(d,b);d.prototype.setup=
function(){this.form_field_jq=a(this.form_field);this.current_selectedIndex=this.form_field.selectedIndex;return this.is_rtl=this.form_field_jq.hasClass("chzn-rtl")};d.prototype.finish_setup=function(){return this.form_field_jq.addClass("chzn-done")};d.prototype.set_up_html=function(){var b;this.container_id=this.form_field.id.length?this.form_field.id.replace(/[^\w]/g,"_"):this.generate_field_id();this.container_id+="_chzn";b=["chzn-container"];b.push("chzn-container-"+(this.is_multiple?"multi":
"single"));this.inherit_select_classes&&this.form_field.className&&b.push(this.form_field.className);this.is_rtl&&b.push("chzn-rtl");b={id:this.container_id,"class":b.join(" "),style:"width: "+this.container_width()+";",title:this.form_field.title};this.container=a("<div />",b);this.is_multiple?this.container.html('<ul class="chzn-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chzn-drop" style="left:-9000px;"><ul class="chzn-results"></ul></div>'):
this.container.html('<a href="javascript:void(0)" class="chzn-single chzn-default" tabindex="-1"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chzn-drop" style="left:-9000px;"><div class="chzn-search"><input type="text" autocomplete="off" /></div><ul class="chzn-results"></ul></div>');this.form_field_jq.hide().after(this.container);this.dropdown=this.container.find("div.chzn-drop").first();this.search_field=this.container.find("input").first();this.search_results=this.container.find("ul.chzn-results").first();
this.search_field_scale();this.search_no_results=this.container.find("li.no-results").first();this.is_multiple?(this.search_choices=this.container.find("ul.chzn-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chzn-search").first(),this.selected_item=this.container.find(".chzn-single").first());this.results_build();this.set_tab_index();return this.form_field_jq.trigger("liszt:ready",{chosen:this})};d.prototype.register_observers=
function(){var a=this;this.container.mousedown(function(b){a.container_mousedown(b)});this.container.mouseup(function(b){a.container_mouseup(b)});this.container.mouseenter(function(b){a.mouse_enter(b)});this.container.mouseleave(function(b){a.mouse_leave(b)});this.search_results.mouseup(function(b){a.search_results_mouseup(b)});this.search_results.mouseover(function(b){a.search_results_mouseover(b)});this.search_results.mouseout(function(b){a.search_results_mouseout(b)});this.form_field_jq.bind("liszt:updated",
function(b){a.results_update_field(b)});this.form_field_jq.bind("liszt:activate",function(b){a.activate_field(b)});this.form_field_jq.bind("liszt:open",function(b){a.container_mousedown(b)});this.search_field.blur(function(b){a.input_blur(b)});this.search_field.keyup(function(b){a.keyup_checker(b)});this.search_field.keydown(function(b){a.keydown_checker(b)});this.search_field.focus(function(b){a.input_focus(b)});return this.is_multiple?this.search_choices.click(function(b){a.choices_click(b)}):this.container.click(function(a){a.preventDefault()})};
d.prototype.search_field_disabled=function(){if(this.is_disabled=this.form_field_jq[0].disabled)return this.container.addClass("chzn-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus",this.activate_action),this.close_field();this.container.removeClass("chzn-disabled");this.search_field[0].disabled=!1;if(!this.is_multiple)return this.selected_item.bind("focus",this.activate_action)};d.prototype.container_mousedown=function(b){if(!this.is_disabled&&(b&&"mousedown"===
b.type&&!this.results_showing&&b.preventDefault(),null==b||!a(b.target).hasClass("search-choice-close")))return this.active_field?this.is_multiple||!b||a(b.target)[0]!==this.selected_item[0]&&!a(b.target).parents("a.chzn-single").length||(b.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),a(document).click(this.click_test_action),this.results_show()),this.activate_field()};d.prototype.container_mouseup=function(a){if("ABBR"===a.target.nodeName&&!this.is_disabled)return this.results_reset(a)};
d.prototype.blur_test=function(a){if(!this.active_field&&this.container.hasClass("chzn-container-active"))return this.close_field()};d.prototype.close_field=function(){a(document).unbind("click",this.click_test_action);this.active_field=!1;this.results_hide();this.container.removeClass("chzn-container-active");this.winnow_results_clear();this.clear_backstroke();this.show_search_field_default();return this.search_field_scale()};d.prototype.activate_field=function(){this.container.addClass("chzn-container-active");
this.active_field=!0;this.search_field.val(this.search_field.val());return this.search_field.focus()};d.prototype.test_active_click=function(b){return a(b.target).parents("#"+this.container_id).length?this.active_field=!0:this.close_field()};d.prototype.results_build=function(){var a,b,d,e,f;this.parsing=!0;this.results_data=c.SelectParser.select_to_array(this.form_field);this.is_multiple&&0<this.choices?(this.search_choices.find("li.search-choice").remove(),this.choices=0):this.is_multiple||(this.selected_item.addClass("chzn-default").find("span").text(this.default_text),
this.disable_search||this.form_field.options.length<=this.disable_search_threshold?this.container.addClass("chzn-container-single-nosearch"):this.container.removeClass("chzn-container-single-nosearch"));a="";f=this.results_data;d=0;for(e=f.length;d<e;d++)b=f[d],b.group?a+=this.result_add_group(b):b.empty||(a+=this.result_add_option(b),b.selected&&this.is_multiple?this.choice_build(b):b.selected&&!this.is_multiple&&(this.selected_item.removeClass("chzn-default").find("span").text(b.text),this.allow_single_deselect&&
this.single_deselect_control_build()));this.search_field_disabled();this.show_search_field_default();this.search_field_scale();this.search_results.html(a);return this.parsing=!1};d.prototype.result_add_group=function(b){if(b.disabled)return"";b.dom_id=this.container_id+"_g_"+b.array_index;return'<li id="'+b.dom_id+'" class="group-result">'+a("<div />").text(b.label).html()+"</li>"};d.prototype.result_do_highlight=function(a){var b,c,d,e;if(a.length){this.result_clear_highlight();this.result_highlight=
a;this.result_highlight.addClass("highlighted");c=parseInt(this.search_results.css("maxHeight"),10);e=this.search_results.scrollTop();d=c+e;b=this.result_highlight.position().top+this.search_results.scrollTop();a=b+this.result_highlight.outerHeight();if(a>=d)return this.search_results.scrollTop(0<a-c?a-c:0);if(b<e)return this.search_results.scrollTop(b)}};d.prototype.result_clear_highlight=function(){this.result_highlight&&this.result_highlight.removeClass("highlighted");return this.result_highlight=
null};d.prototype.results_show=function(){if(!this.is_multiple)this.selected_item.addClass("chzn-single-with-drop"),this.result_single_selected&&this.result_do_highlight(this.result_single_selected);else if(this.max_selected_options<=this.choices)return this.form_field_jq.trigger("liszt:maxselected",{chosen:this}),!1;this.form_field_jq.trigger("liszt:showing_dropdown",{chosen:this});this.dropdown.css({left:0});this.results_showing=!0;this.search_field.focus();this.search_field.val(this.search_field.val());
return this.winnow_results()};d.prototype.results_hide=function(){this.is_multiple||this.selected_item.removeClass("chzn-single-with-drop");this.result_clear_highlight();this.form_field_jq.trigger("liszt:hiding_dropdown",{chosen:this});this.dropdown.css({left:"-9000px"});return this.results_showing=!1};d.prototype.set_tab_index=function(a){if(this.form_field_jq.attr("tabindex"))return a=this.form_field_jq.attr("tabindex"),this.form_field_jq.attr("tabindex",-1),this.search_field.attr("tabindex",a)};
d.prototype.show_search_field_default=function(){if(this.is_multiple&&1>this.choices&&!this.active_field)return this.search_field.val(this.default_text),this.search_field.addClass("default");this.search_field.val("");return this.search_field.removeClass("default")};d.prototype.search_results_mouseup=function(b){var c;c=a(b.target).hasClass("active-result")?a(b.target):a(b.target).parents(".active-result").first();if(c.length)return this.result_highlight=c,this.result_select(b),this.search_field.focus()};
d.prototype.search_results_mouseover=function(b){if(b=a(b.target).hasClass("active-result")?a(b.target):a(b.target).parents(".active-result").first())return this.result_do_highlight(b)};d.prototype.search_results_mouseout=function(b){if(a(b.target).hasClass("active-result"))return this.result_clear_highlight()};d.prototype.choices_click=function(b){b.preventDefault();if(this.active_field&&!a(b.target).hasClass("search-choice")&&!this.results_showing)return this.results_show()};d.prototype.choice_build=
function(b){var c,d=this;if(this.is_multiple&&this.max_selected_options<=this.choices)return this.form_field_jq.trigger("liszt:maxselected",{chosen:this}),!1;c=this.container_id+"_c_"+b.array_index;this.choices+=1;this.search_container.before(b.disabled?'<li class="search-choice search-choice-disabled" id="'+c+'"><span>'+b.html+"</span></li>":'<li class="search-choice" id="'+c+'"><span>'+b.html+'</span><a href="javascript:void(0)" class="search-choice-close" rel="'+b.array_index+'"></a></li>');return a("#"+
c).find("a").first().click(function(a){return d.choice_destroy_link_click(a)})};d.prototype.choice_destroy_link_click=function(b){b.preventDefault();b.stopPropagation();if(!this.is_disabled)return this.choice_destroy(a(b.target))};d.prototype.choice_destroy=function(a){if(this.result_deselect(a.attr("rel")))return this.choices-=1,this.show_search_field_default(),this.is_multiple&&0<this.choices&&1>this.search_field.val().length&&this.results_hide(),a.parents("li").first().remove(),this.search_field_scale()};
d.prototype.results_reset=function(){this.form_field.options[0].selected=!0;this.selected_item.find("span").text(this.default_text);this.is_multiple||this.selected_item.addClass("chzn-default");this.show_search_field_default();this.results_reset_cleanup();this.form_field_jq.trigger("change");if(this.active_field)return this.results_hide()};d.prototype.results_reset_cleanup=function(){this.current_selectedIndex=this.form_field.selectedIndex;return this.selected_item.find("abbr").remove()};d.prototype.result_select=
function(a){var b,c;if(this.result_highlight)return b=this.result_highlight,c=b.attr("id"),this.result_clear_highlight(),this.is_multiple?this.result_deactivate(b):(this.search_results.find(".result-selected").removeClass("result-selected"),this.result_single_selected=b,this.selected_item.removeClass("chzn-default")),b.addClass("result-selected"),b=c.substr(c.lastIndexOf("_")+1),b=this.results_data[b],b.selected=!0,this.form_field.options[b.options_index].selected=!0,this.is_multiple?this.choice_build(b):
(this.selected_item.find("span").first().text(b.text),this.allow_single_deselect&&this.single_deselect_control_build()),(a.metaKey||a.ctrlKey)&&this.is_multiple||this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[b.options_index].value}),this.current_selectedIndex=this.form_field.selectedIndex,this.search_field_scale()};d.prototype.result_activate=function(a){return a.addClass("active-result")};
d.prototype.result_deactivate=function(a){return a.removeClass("active-result")};d.prototype.result_deselect=function(b){var c;c=this.results_data[b];if(this.form_field.options[c.options_index].disabled)return!1;c.selected=!1;this.form_field.options[c.options_index].selected=!1;a("#"+this.container_id+"_o_"+b).removeClass("result-selected").addClass("active-result").show();this.result_clear_highlight();this.winnow_results();this.form_field_jq.trigger("change",{deselected:this.form_field.options[c.options_index].value});
this.search_field_scale();return!0};d.prototype.single_deselect_control_build=function(){if(this.allow_single_deselect&&1>this.selected_item.find("abbr").length)return this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>')};d.prototype.winnow_results=function(){var b,c,d,e,f,h,u,v,A,D,x,B,s,G,K;this.no_results_clear();v=0;A=this.search_field.val()===this.default_text?"":a("<div/>").text(a.trim(this.search_field.val())).html();f=new RegExp((this.search_contains?
"":"^")+A.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i");D=new RegExp(A.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i");K=this.results_data;x=0;for(s=K.length;x<s;x++)if(c=K[x],!c.disabled&&!c.empty)if(c.group)a("#"+c.dom_id).css("display","none");else if(!this.is_multiple||!c.selected){b=!1;u=c.dom_id;h=a("#"+u);if(f.test(c.html))b=!0,v+=1;else if(this.enable_split_word_search&&(0<=c.html.indexOf(" ")||0===c.html.indexOf("["))&&(e=c.html.replace(/\[|\]/g,"").split(" "),e.length))for(B=0,G=e.length;B<
G;B++)d=e[B],f.test(d)&&(b=!0,v+=1);b?(A.length?(b=c.html.search(D),d=c.html.substr(0,b+A.length)+"</em>"+c.html.substr(b+A.length),d=d.substr(0,b)+"<em>"+d.substr(b)):d=c.html,h.html(d),this.result_activate(h),null!=c.group_array_index&&a("#"+this.results_data[c.group_array_index].dom_id).css("display","list-item")):(this.result_highlight&&u===this.result_highlight.attr("id")&&this.result_clear_highlight(),this.result_deactivate(h))}return 1>v&&A.length?this.no_results(A):this.winnow_results_set_highlight()};
d.prototype.winnow_results_clear=function(){var b,c,d,e,f;this.search_field.val("");c=this.search_results.find("li");f=[];d=0;for(e=c.length;d<e;d++)b=c[d],b=a(b),b.hasClass("group-result")?f.push(b.css("display","auto")):this.is_multiple&&b.hasClass("result-selected")?f.push(void 0):f.push(this.result_activate(b));return f};d.prototype.winnow_results_set_highlight=function(){var a;if(!this.result_highlight&&(a=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),a=a.length?
a.first():this.search_results.find(".active-result").first(),null!=a))return this.result_do_highlight(a)};d.prototype.no_results=function(b){var c;c=a('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>');c.find("span").first().html(b);return this.search_results.append(c)};d.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()};d.prototype.keydown_arrow=function(){var b;this.result_highlight?this.results_showing&&(b=this.result_highlight.nextAll("li.active-result").first())&&
this.result_do_highlight(b):(b=this.search_results.find("li.active-result").first())&&this.result_do_highlight(a(b));if(!this.results_showing)return this.results_show()};d.prototype.keyup_arrow=function(){var a;if(!this.results_showing&&!this.is_multiple)return this.results_show();if(this.result_highlight){a=this.result_highlight.prevAll("li.active-result");if(a.length)return this.result_do_highlight(a.first());0<this.choices&&this.results_hide();return this.result_clear_highlight()}};d.prototype.keydown_backstroke=
function(){var a;if(this.pending_backstroke)return this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke();a=this.search_container.siblings("li.search-choice").last();if(a.length&&!a.hasClass("search-choice-disabled"))return this.pending_backstroke=a,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")};d.prototype.clear_backstroke=function(){this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus");
return this.pending_backstroke=null};d.prototype.keydown_checker=function(a){var b,c;b=null!=(c=a.which)?c:a.keyCode;this.search_field_scale();8!==b&&this.pending_backstroke&&this.clear_backstroke();switch(b){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(a);this.mouse_on_container=!1;break;case 13:a.preventDefault();break;case 38:a.preventDefault();this.keyup_arrow();break;case 40:this.keydown_arrow()}};d.prototype.search_field_scale=
function(){var b,c,d,e,f;if(this.is_multiple){c="position:absolute; left: -1000px; top: -1000px; display:none;";d="font-size font-style font-weight font-family line-height text-transform letter-spacing".split(" ");e=0;for(f=d.length;e<f;e++)b=d[e],c+=b+":"+this.search_field.css(b)+";";b=a("<div />",{style:c});b.text(this.search_field.val());a("body").append(b);c=b.width()+25;b.remove();this.f_width||(this.f_width=this.container.outerWidth());c>this.f_width-10&&(c=this.f_width-10);return this.search_field.css({width:c+
"px"})}};d.prototype.generate_random_id=function(){var b;for(b="sel"+this.generate_random_char()+this.generate_random_char()+this.generate_random_char();0<a("#"+b).length;)b+=this.generate_random_char();return b};return d}(AbstractChosen);c.Chosen=b;c.get_side_border_padding=function(a){return a.outerWidth()-a.width()}}).call(this);
(function(){function a(){this.Diff_Timeout=1;this.Diff_EditCost=4;this.Match_Threshold=.5;this.Match_Distance=1E3;this.Patch_DeleteThreshold=.5;this.Patch_Margin=4;this.Match_MaxBits=32}a.prototype.diff_main=function(a,c,d,e){"undefined"==typeof e&&(e=0>=this.Diff_Timeout?Number.MAX_VALUE:(new Date).getTime()+1E3*this.Diff_Timeout);if(null==a||null==c)throw Error("Null input. (diff_main)");if(a==c)return a?[[0,a]]:[];"undefined"==typeof d&&(d=!0);var f=d,h=this.diff_commonPrefix(a,c);d=a.substring(0,
h);a=a.substring(h);c=c.substring(h);var h=this.diff_commonSuffix(a,c),g=a.substring(a.length-h);a=a.substring(0,a.length-h);c=c.substring(0,c.length-h);a=this.diff_compute_(a,c,f,e);d&&a.unshift([0,d]);g&&a.push([0,g]);this.diff_cleanupMerge(a);return a};a.prototype.diff_compute_=function(a,c,d,e){if(!a)return[[1,c]];if(!c)return[[-1,a]];var f=a.length>c.length?a:c,h=a.length>c.length?c:a,g=f.indexOf(h);return-1!=g?(d=[[1,f.substring(0,g)],[0,h],[1,f.substring(g+h.length)]],a.length>c.length&&(d[0][0]=
d[2][0]=-1),d):1==h.length?[[-1,a],[1,c]]:(f=this.diff_halfMatch_(a,c))?(h=f[0],a=f[1],g=f[2],c=f[3],f=f[4],h=this.diff_main(h,g,d,e),d=this.diff_main(a,c,d,e),h.concat([[0,f]],d)):d&&100<a.length&&100<c.length?this.diff_lineMode_(a,c,e):this.diff_bisect_(a,c,e)};a.prototype.diff_lineMode_=function(a,c,d){var e=this.diff_linesToChars_(a,c);a=e.chars1;c=e.chars2;e=e.lineArray;a=this.diff_main(a,c,!1,d);this.diff_charsToLines_(a,e);this.diff_cleanupSemantic(a);a.push([0,""]);for(var f=e=c=0,h="",g=
"";c<a.length;){switch(a[c][0]){case 1:f++;g+=a[c][1];break;case -1:e++;h+=a[c][1];break;case 0:if(1<=e&&1<=f){a.splice(c-e-f,e+f);c=c-e-f;e=this.diff_main(h,g,!1,d);for(f=e.length-1;0<=f;f--)a.splice(c,0,e[f]);c+=e.length}e=f=0;g=h=""}c++}a.pop();return a};a.prototype.diff_bisect_=function(a,c,d){for(var e=a.length,f=c.length,h=Math.ceil((e+f)/2),g=2*h,k=Array(g),n=Array(g),q=0;q<g;q++)k[q]=-1,n[q]=-1;k[h+1]=0;n[h+1]=0;for(var q=e-f,m=0!=q%2,p=0,u=0,v=0,A=0,D=0;D<h&&!((new Date).getTime()>d);D++){for(var x=
-D+p;x<=D-u;x+=2){var B=h+x,s;s=x==-D||x!=D&&k[B-1]<k[B+1]?k[B+1]:k[B-1]+1;for(var G=s-x;s<e&&G<f&&a.charAt(s)==c.charAt(G);)s++,G++;k[B]=s;if(s>e)u+=2;else if(G>f)p+=2;else if(m&&(B=h+q-x,0<=B&&B<g&&-1!=n[B])){var K=e-n[B];if(s>=K)return this.diff_bisectSplit_(a,c,s,G,d)}}for(x=-D+v;x<=D-A;x+=2){B=h+x;K=x==-D||x!=D&&n[B-1]<n[B+1]?n[B+1]:n[B-1]+1;for(s=K-x;K<e&&s<f&&a.charAt(e-K-1)==c.charAt(f-s-1);)K++,s++;n[B]=K;if(K>e)A+=2;else if(s>f)v+=2;else if(!m&&(B=h+q-x,0<=B&&B<g&&-1!=k[B]&&(s=k[B],G=h+
s-B,K=e-K,s>=K)))return this.diff_bisectSplit_(a,c,s,G,d)}}return[[-1,a],[1,c]]};a.prototype.diff_bisectSplit_=function(a,c,d,e,f){var h=a.substring(0,d),g=c.substring(0,e);a=a.substring(d);c=c.substring(e);h=this.diff_main(h,g,!1,f);f=this.diff_main(a,c,!1,f);return h.concat(f)};a.prototype.diff_linesToChars_=function(a,c){function d(a){for(var b="",c=0,d=-1,g=e.length;d<a.length-1;){d=a.indexOf("\n",c);-1==d&&(d=a.length-1);var h=a.substring(c,d+1),c=d+1;(f.hasOwnProperty?f.hasOwnProperty(h):void 0!==
f[h])?b+=String.fromCharCode(f[h]):(b+=String.fromCharCode(g),f[h]=g,e[g++]=h)}return b}var e=[],f={};e[0]="";var h=d(a),g=d(c);return{chars1:h,chars2:g,lineArray:e}};a.prototype.diff_charsToLines_=function(a,c){for(var d=0;d<a.length;d++){for(var e=a[d][1],f=[],h=0;h<e.length;h++)f[h]=c[e.charCodeAt(h)];a[d][1]=f.join("")}};a.prototype.diff_commonPrefix=function(a,c){if(!a||!c||a.charAt(0)!=c.charAt(0))return 0;for(var d=0,e=Math.min(a.length,c.length),f=e,h=0;d<f;)a.substring(h,f)==c.substring(h,
f)?h=d=f:e=f,f=Math.floor((e-d)/2+d);return f};a.prototype.diff_commonSuffix=function(a,c){if(!a||!c||a.charAt(a.length-1)!=c.charAt(c.length-1))return 0;for(var d=0,e=Math.min(a.length,c.length),f=e,h=0;d<f;)a.substring(a.length-f,a.length-h)==c.substring(c.length-f,c.length-h)?h=d=f:e=f,f=Math.floor((e-d)/2+d);return f};a.prototype.diff_commonOverlap_=function(a,c){var d=a.length,e=c.length;if(0==d||0==e)return 0;d>e?a=a.substring(d-e):d<e&&(c=c.substring(0,d));d=Math.min(d,e);if(a==c)return d;
for(var e=0,f=1;;){var h=a.substring(d-f),h=c.indexOf(h);if(-1==h)return e;f+=h;if(0==h||a.substring(d-f)==c.substring(0,f))e=f,f++}};a.prototype.diff_halfMatch_=function(a,c){function d(a,b,c){for(var d=a.substring(c,c+Math.floor(a.length/4)),e=-1,f="",g,k,n,s;-1!=(e=b.indexOf(d,e+1));){var G=h.diff_commonPrefix(a.substring(c),b.substring(e)),K=h.diff_commonSuffix(a.substring(0,c),b.substring(0,e));f.length<K+G&&(f=b.substring(e-K,e)+b.substring(e,e+G),g=a.substring(0,c-K),k=a.substring(c+G),n=b.substring(0,
e-K),s=b.substring(e+G))}return 2*f.length>=a.length?[g,k,n,s,f]:null}if(0>=this.Diff_Timeout)return null;var e=a.length>c.length?a:c,f=a.length>c.length?c:a;if(4>e.length||2*f.length<e.length)return null;var h=this,g=d(e,f,Math.ceil(e.length/4)),e=d(e,f,Math.ceil(e.length/2)),k;if(!g&&!e)return null;k=e?g?g[4].length>e[4].length?g:e:e:g;var n;a.length>c.length?(g=k[0],e=k[1],f=k[2],n=k[3]):(f=k[0],n=k[1],g=k[2],e=k[3]);k=k[4];return[g,e,f,n,k]};a.prototype.diff_cleanupSemantic=function(a){for(var c=
!1,d=[],e=0,f=null,h=0,g=0,k=0,n=0,q=0;h<a.length;)0==a[h][0]?(d[e++]=h,g=n,k=q,q=n=0,f=a[h][1]):(1==a[h][0]?n+=a[h][1].length:q+=a[h][1].length,f&&f.length<=Math.max(g,k)&&f.length<=Math.max(n,q)&&(a.splice(d[e-1],0,[-1,f]),a[d[e-1]+1][0]=1,e--,e--,h=0<e?d[e-1]:-1,q=n=k=g=0,f=null,c=!0)),h++;c&&this.diff_cleanupMerge(a);this.diff_cleanupSemanticLossless(a);for(h=1;h<a.length;){if(-1==a[h-1][0]&&1==a[h][0]){c=a[h-1][1];d=a[h][1];e=this.diff_commonOverlap_(c,d);f=this.diff_commonOverlap_(d,c);if(e>=
f){if(e>=c.length/2||e>=d.length/2)a.splice(h,0,[0,d.substring(0,e)]),a[h-1][1]=c.substring(0,c.length-e),a[h+1][1]=d.substring(e),h++}else if(f>=c.length/2||f>=d.length/2)a.splice(h,0,[0,c.substring(0,f)]),a[h-1][0]=1,a[h-1][1]=d.substring(0,d.length-f),a[h+1][0]=-1,a[h+1][1]=c.substring(f),h++;h++}h++}};a.prototype.diff_cleanupSemanticLossless=function(b){function c(b,c){if(!b||!c)return 6;var d=b.charAt(b.length-1),e=c.charAt(0),f=d.match(a.nonAlphaNumericRegex_),g=e.match(a.nonAlphaNumericRegex_),
h=f&&d.match(a.whitespaceRegex_),k=g&&e.match(a.whitespaceRegex_),d=h&&d.match(a.linebreakRegex_),e=k&&e.match(a.linebreakRegex_),m=d&&b.match(a.blanklineEndRegex_),n=e&&c.match(a.blanklineStartRegex_);return m||n?5:d||e?4:f&&!h&&k?3:h||k?2:f||g?1:0}for(var d=1;d<b.length-1;){if(0==b[d-1][0]&&0==b[d+1][0]){var e=b[d-1][1],f=b[d][1],h=b[d+1][1],g=this.diff_commonSuffix(e,f);if(g)var k=f.substring(f.length-g),e=e.substring(0,e.length-g),f=k+f.substring(0,f.length-g),h=k+h;for(var g=e,k=f,n=h,q=c(e,
f)+c(f,h);f.charAt(0)===h.charAt(0);){var e=e+f.charAt(0),f=f.substring(1)+h.charAt(0),h=h.substring(1),m=c(e,f)+c(f,h);m>=q&&(q=m,g=e,k=f,n=h)}b[d-1][1]!=g&&(g?b[d-1][1]=g:(b.splice(d-1,1),d--),b[d][1]=k,n?b[d+1][1]=n:(b.splice(d+1,1),d--))}d++}};a.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/;a.whitespaceRegex_=/\s/;a.linebreakRegex_=/[\r\n]/;a.blanklineEndRegex_=/\n\r?\n$/;a.blanklineStartRegex_=/^\r?\n\r?\n/;a.prototype.diff_cleanupEfficiency=function(a){for(var c=!1,d=[],e=0,f=null,h=0,g=!1,k=!1,n=!1,
q=!1;h<a.length;){if(0==a[h][0])a[h][1].length<this.Diff_EditCost&&(n||q)?(d[e++]=h,g=n,k=q,f=a[h][1]):(e=0,f=null),n=q=!1;else if(-1==a[h][0]?q=!0:n=!0,f&&(g&&k&&n&&q||f.length<this.Diff_EditCost/2&&3==g+k+n+q))a.splice(d[e-1],0,[-1,f]),a[d[e-1]+1][0]=1,e--,f=null,g&&k?(n=q=!0,e=0):(e--,h=0<e?d[e-1]:-1,n=q=!1),c=!0;h++}c&&this.diff_cleanupMerge(a)};a.prototype.diff_cleanupMerge=function(a){a.push([0,""]);for(var c=0,d=0,e=0,f="",h="",g;c<a.length;)switch(a[c][0]){case 1:e++;h+=a[c][1];c++;break;
case -1:d++;f+=a[c][1];c++;break;case 0:1<d+e?(0!==d&&0!==e&&(g=this.diff_commonPrefix(h,f),0!==g&&(0<c-d-e&&0==a[c-d-e-1][0]?a[c-d-e-1][1]+=h.substring(0,g):(a.splice(0,0,[0,h.substring(0,g)]),c++),h=h.substring(g),f=f.substring(g)),g=this.diff_commonSuffix(h,f),0!==g&&(a[c][1]=h.substring(h.length-g)+a[c][1],h=h.substring(0,h.length-g),f=f.substring(0,f.length-g))),0===d?a.splice(c-e,d+e,[1,h]):0===e?a.splice(c-d,d+e,[-1,f]):a.splice(c-d-e,d+e,[-1,f],[1,h]),c=c-d-e+(d?1:0)+(e?1:0)+1):0!==c&&0==
a[c-1][0]?(a[c-1][1]+=a[c][1],a.splice(c,1)):c++,d=e=0,h=f=""}""===a[a.length-1][1]&&a.pop();d=!1;for(c=1;c<a.length-1;)0==a[c-1][0]&&0==a[c+1][0]&&(a[c][1].substring(a[c][1].length-a[c-1][1].length)==a[c-1][1]?(a[c][1]=a[c-1][1]+a[c][1].substring(0,a[c][1].length-a[c-1][1].length),a[c+1][1]=a[c-1][1]+a[c+1][1],a.splice(c-1,1),d=!0):a[c][1].substring(0,a[c+1][1].length)==a[c+1][1]&&(a[c-1][1]+=a[c+1][1],a[c][1]=a[c][1].substring(a[c+1][1].length)+a[c+1][1],a.splice(c+1,1),d=!0)),c++;d&&this.diff_cleanupMerge(a)};
a.prototype.diff_xIndex=function(a,c){var d=0,e=0,f=0,h=0,g;for(g=0;g<a.length;g++){1!==a[g][0]&&(d+=a[g][1].length);-1!==a[g][0]&&(e+=a[g][1].length);if(d>c)break;f=d;h=e}return a.length!=g&&-1===a[g][0]?h:h+(c-f)};a.prototype.diff_prettyHtml=function(a){for(var c=[],d=/&/g,e=/</g,f=/>/g,h=/\n/g,g=0;g<a.length;g++){var k=a[g][0],n=a[g][1],n=n.replace(d,"&amp;").replace(e,"&lt;").replace(f,"&gt;").replace(h,"&para;<br>");switch(k){case 1:c[g]='<ins style="background:#e6ffe6;">'+n+"</ins>";break;case -1:c[g]=
'<del style="background:#ffe6e6;">'+n+"</del>";break;case 0:c[g]="<span>"+n+"</span>"}}return c.join("")};a.prototype.diff_text1=function(a){for(var c=[],d=0;d<a.length;d++)1!==a[d][0]&&(c[d]=a[d][1]);return c.join("")};a.prototype.diff_text2=function(a){for(var c=[],d=0;d<a.length;d++)-1!==a[d][0]&&(c[d]=a[d][1]);return c.join("")};a.prototype.diff_levenshtein=function(a){for(var c=0,d=0,e=0,f=0;f<a.length;f++){var h=a[f][1];switch(a[f][0]){case 1:d+=h.length;break;case -1:e+=h.length;break;case 0:c+=
Math.max(d,e),e=d=0}}return c+Math.max(d,e)};a.prototype.diff_toDelta=function(a){for(var c=[],d=0;d<a.length;d++)switch(a[d][0]){case 1:c[d]="+"+encodeURI(a[d][1]);break;case -1:c[d]="-"+a[d][1].length;break;case 0:c[d]="="+a[d][1].length}return c.join("\t").replace(/%20/g," ")};a.prototype.diff_fromDelta=function(a,c){for(var d=[],e=0,f=0,h=c.split(/\t/g),g=0;g<h.length;g++){var k=h[g].substring(1);switch(h[g].charAt(0)){case "+":try{d[e++]=[1,decodeURI(k)]}catch(n){throw Error("Illegal escape in diff_fromDelta: "+
k);}break;case "-":case "=":var q=parseInt(k,10);if(isNaN(q)||0>q)throw Error("Invalid number in diff_fromDelta: "+k);k=a.substring(f,f+=q);"="==h[g].charAt(0)?d[e++]=[0,k]:d[e++]=[-1,k];break;default:if(h[g])throw Error("Invalid diff operation in diff_fromDelta: "+h[g]);}}if(f!=a.length)throw Error("Delta length ("+f+") does not equal source text length ("+a.length+").");return d};a.prototype.match_main=function(a,c,d){if(null==a||null==c||null==d)throw Error("Null input. (match_main)");d=Math.max(0,
Math.min(d,a.length));return a==c?0:a.length?a.substring(d,d+c.length)==c?d:this.match_bitap_(a,c,d):-1};a.prototype.match_bitap_=function(a,c,d){function e(a,b){var e=a/c.length,f=Math.abs(d-b);return h.Match_Distance?e+f/h.Match_Distance:f?1:e}if(c.length>this.Match_MaxBits)throw Error("Pattern too long for this browser.");var f=this.match_alphabet_(c),h=this,g=this.Match_Threshold,k=a.indexOf(c,d);-1!=k&&(g=Math.min(e(0,k),g),k=a.lastIndexOf(c,d+c.length),-1!=k&&(g=Math.min(e(0,k),g)));for(var n=
1<<c.length-1,k=-1,q,m,p=c.length+a.length,u,v=0;v<c.length;v++){q=0;for(m=p;q<m;)e(v,d+m)<=g?q=m:p=m,m=Math.floor((p-q)/2+q);p=m;q=Math.max(1,d-m+1);var A=Math.min(d+m,a.length)+c.length;m=Array(A+2);for(m[A+1]=(1<<v)-1;A>=q;A--){var D=f[a.charAt(A-1)];m[A]=0===v?(m[A+1]<<1|1)&D:(m[A+1]<<1|1)&D|(u[A+1]|u[A])<<1|1|u[A+1];if(m[A]&n&&(D=e(v,A-1),D<=g))if(g=D,k=A-1,k>d)q=Math.max(1,2*d-k);else break}if(e(v+1,d)>g)break;u=m}return k};a.prototype.match_alphabet_=function(a){for(var c={},d=0;d<a.length;d++)c[a.charAt(d)]=
0;for(d=0;d<a.length;d++)c[a.charAt(d)]|=1<<a.length-d-1;return c};a.prototype.patch_addContext_=function(a,c){if(0!=c.length){for(var d=c.substring(a.start2,a.start2+a.length1),e=0;c.indexOf(d)!=c.lastIndexOf(d)&&d.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)e+=this.Patch_Margin,d=c.substring(a.start2-e,a.start2+a.length1+e);e+=this.Patch_Margin;(d=c.substring(a.start2-e,a.start2))&&a.diffs.unshift([0,d]);(e=c.substring(a.start2+a.length1,a.start2+a.length1+e))&&a.diffs.push([0,
e]);a.start1-=d.length;a.start2-=d.length;a.length1+=d.length+e.length;a.length2+=d.length+e.length}};a.prototype.patch_make=function(b,c,d){var e;if("string"==typeof b&&"string"==typeof c&&"undefined"==typeof d)e=b,c=this.diff_main(e,c,!0),2<c.length&&(this.diff_cleanupSemantic(c),this.diff_cleanupEfficiency(c));else if(b&&"object"==typeof b&&"undefined"==typeof c&&"undefined"==typeof d)c=b,e=this.diff_text1(c);else if("string"==typeof b&&c&&"object"==typeof c&&"undefined"==typeof d)e=b;else if("string"==
typeof b&&"string"==typeof c&&d&&"object"==typeof d)e=b,c=d;else throw Error("Unknown call format to patch_make.");if(0===c.length)return[];d=[];b=new a.patch_obj;for(var f=0,h=0,g=0,k=e,n=0;n<c.length;n++){var q=c[n][0],m=c[n][1];!f&&0!==q&&(b.start1=h,b.start2=g);switch(q){case 1:b.diffs[f++]=c[n];b.length2+=m.length;e=e.substring(0,g)+m+e.substring(g);break;case -1:b.length1+=m.length;b.diffs[f++]=c[n];e=e.substring(0,g)+e.substring(g+m.length);break;case 0:m.length<=2*this.Patch_Margin&&f&&c.length!=
n+1?(b.diffs[f++]=c[n],b.length1+=m.length,b.length2+=m.length):m.length>=2*this.Patch_Margin&&f&&(this.patch_addContext_(b,k),d.push(b),b=new a.patch_obj,f=0,k=e,h=g)}1!==q&&(h+=m.length);-1!==q&&(g+=m.length)}f&&(this.patch_addContext_(b,k),d.push(b));return d};a.prototype.patch_deepCopy=function(b){for(var c=[],d=0;d<b.length;d++){var e=b[d],f=new a.patch_obj;f.diffs=[];for(var h=0;h<e.diffs.length;h++)f.diffs[h]=e.diffs[h].slice();f.start1=e.start1;f.start2=e.start2;f.length1=e.length1;f.length2=
e.length2;c[d]=f}return c};a.prototype.patch_apply=function(a,c){if(0==a.length)return[c,[]];a=this.patch_deepCopy(a);var d=this.patch_addPadding(a);c=d+c+d;this.patch_splitMax(a);for(var e=0,f=[],h=0;h<a.length;h++){var g=a[h].start2+e,k=this.diff_text1(a[h].diffs),n,q=-1;if(k.length>this.Match_MaxBits){if(n=this.match_main(c,k.substring(0,this.Match_MaxBits),g),-1!=n&&(q=this.match_main(c,k.substring(k.length-this.Match_MaxBits),g+k.length-this.Match_MaxBits),-1==q||n>=q))n=-1}else n=this.match_main(c,
k,g);if(-1==n)f[h]=!1,e-=a[h].length2-a[h].length1;else if(f[h]=!0,e=n-g,g=-1==q?c.substring(n,n+k.length):c.substring(n,q+this.Match_MaxBits),k==g)c=c.substring(0,n)+this.diff_text2(a[h].diffs)+c.substring(n+k.length);else if(g=this.diff_main(k,g,!1),k.length>this.Match_MaxBits&&this.diff_levenshtein(g)/k.length>this.Patch_DeleteThreshold)f[h]=!1;else{this.diff_cleanupSemanticLossless(g);for(var k=0,m,q=0;q<a[h].diffs.length;q++){var p=a[h].diffs[q];0!==p[0]&&(m=this.diff_xIndex(g,k));1===p[0]?c=
c.substring(0,n+m)+p[1]+c.substring(n+m):-1===p[0]&&(c=c.substring(0,n+m)+c.substring(n+this.diff_xIndex(g,k+p[1].length)));-1!==p[0]&&(k+=p[1].length)}}}c=c.substring(d.length,c.length-d.length);return[c,f]};a.prototype.patch_addPadding=function(a){for(var c=this.Patch_Margin,d="",e=1;e<=c;e++)d+=String.fromCharCode(e);for(e=0;e<a.length;e++)a[e].start1+=c,a[e].start2+=c;var e=a[0],f=e.diffs;if(0==f.length||0!=f[0][0])f.unshift([0,d]),e.start1-=c,e.start2-=c,e.length1+=c,e.length2+=c;else if(c>f[0][1].length){var h=
c-f[0][1].length;f[0][1]=d.substring(f[0][1].length)+f[0][1];e.start1-=h;e.start2-=h;e.length1+=h;e.length2+=h}e=a[a.length-1];f=e.diffs;0==f.length||0!=f[f.length-1][0]?(f.push([0,d]),e.length1+=c,e.length2+=c):c>f[f.length-1][1].length&&(h=c-f[f.length-1][1].length,f[f.length-1][1]+=d.substring(0,h),e.length1+=h,e.length2+=h);return d};a.prototype.patch_splitMax=function(b){for(var c=this.Match_MaxBits,d=0;d<b.length;d++)if(!(b[d].length1<=c)){var e=b[d];b.splice(d--,1);for(var f=e.start1,h=e.start2,
g="";0!==e.diffs.length;){var k=new a.patch_obj,n=!0;k.start1=f-g.length;k.start2=h-g.length;for(""!==g&&(k.length1=k.length2=g.length,k.diffs.push([0,g]));0!==e.diffs.length&&k.length1<c-this.Patch_Margin;){var g=e.diffs[0][0],q=e.diffs[0][1];1===g?(k.length2+=q.length,h+=q.length,k.diffs.push(e.diffs.shift()),n=!1):-1===g&&1==k.diffs.length&&0==k.diffs[0][0]&&q.length>2*c?(k.length1+=q.length,f+=q.length,n=!1,k.diffs.push([g,q]),e.diffs.shift()):(q=q.substring(0,c-k.length1-this.Patch_Margin),k.length1+=
q.length,f+=q.length,0===g?(k.length2+=q.length,h+=q.length):n=!1,k.diffs.push([g,q]),q==e.diffs[0][1]?e.diffs.shift():e.diffs[0][1]=e.diffs[0][1].substring(q.length))}g=this.diff_text2(k.diffs);g=g.substring(g.length-this.Patch_Margin);q=this.diff_text1(e.diffs).substring(0,this.Patch_Margin);""!==q&&(k.length1+=q.length,k.length2+=q.length,0!==k.diffs.length&&0===k.diffs[k.diffs.length-1][0]?k.diffs[k.diffs.length-1][1]+=q:k.diffs.push([0,q]));n||b.splice(++d,0,k)}}};a.prototype.patch_toText=function(a){for(var c=
[],d=0;d<a.length;d++)c[d]=a[d];return c.join("")};a.prototype.patch_fromText=function(b){var c=[];if(!b)return c;b=b.split("\n");for(var d=0,e=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;d<b.length;){var f=b[d].match(e);if(!f)throw Error("Invalid patch string: "+b[d]);var h=new a.patch_obj;c.push(h);h.start1=parseInt(f[1],10);""===f[2]?(h.start1--,h.length1=1):"0"==f[2]?h.length1=0:(h.start1--,h.length1=parseInt(f[2],10));h.start2=parseInt(f[3],10);""===f[4]?(h.start2--,h.length2=1):"0"==f[4]?h.length2=
0:(h.start2--,h.length2=parseInt(f[4],10));for(d++;d<b.length;){f=b[d].charAt(0);try{var g=decodeURI(b[d].substring(1))}catch(k){throw Error("Illegal escape in patch_fromText: "+g);}if("-"==f)h.diffs.push([-1,g]);else if("+"==f)h.diffs.push([1,g]);else if(" "==f)h.diffs.push([0,g]);else if("@"==f)break;else if(""!==f)throw Error('Invalid patch mode "'+f+'" in: '+g);d++}}return c};a.patch_obj=function(){this.diffs=[];this.start2=this.start1=null;this.length2=this.length1=0};a.patch_obj.prototype.toString=
function(){var a,c;a=0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1;c=0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2;a=["@@ -"+a+" +"+c+" @@\n"];var d;for(c=0;c<this.diffs.length;c++){switch(this.diffs[c][0]){case 1:d="+";break;case -1:d="-";break;case 0:d=" "}a[c+1]=d+encodeURI(this.diffs[c][1])+"\n"}return a.join("").replace(/%20/g," ")};this.diff_match_patch=a;this.DIFF_DELETE=-1;this.DIFF_INSERT=1;
this.DIFF_EQUAL=0})();
var Recorder={swfObject:null,_callbacks:{},_events:{},_initialized:!1,options:{},initialize:function(a){this.options=a||{};this.options.flashContainer||this._setupFlashContainer();this.bind("initialized",function(){Recorder._initialized=!0;a.initialized()});this.bind("showFlash",this.options.onFlashSecurity||this._defaultOnShowFlash);this._loadFlash()},clear:function(){Recorder._events={}},record:function(a){a=a||{};this.clearBindings("recordingStart");this.clearBindings("recordingProgress");this.clearBindings("recordingCancel");
this.bind("recordingStart",this._defaultOnHideFlash);this.bind("recordingCancel",this._defaultOnHideFlash);this.bind("recordingCancel",this._loadFlash);this.bind("recordingStart",a.start);this.bind("recordingProgress",a.progress);this.bind("recordingCancel",a.cancel);this.flashInterface().record()},stop:function(){return this.flashInterface()._stop()},play:function(a){a=a||{};this.clearBindings("playingProgress");this.bind("playingProgress",a.progress);this.bind("playingStop",a.finished);this.flashInterface()._play()},
upload:function(a){a.audioParam=a.audioParam||"audio";a.params=a.params||{};this.clearBindings("uploadSuccess");this.bind("uploadSuccess",function(b){a.success(Recorder._externalInterfaceDecode(b))});this.flashInterface().upload(a.url,a.audioParam,a.params)},audioData:function(){return this.flashInterface().audioData().split(";")},request:function(a,b,c,d,e){e=this.registerCallback(e);this.flashInterface().request(a,b,c,d,e)},clearBindings:function(a){Recorder._events[a]=[]},bind:function(a,b){Recorder._events[a]||
(Recorder._events[a]=[]);Recorder._events[a].push(b)},triggerEvent:function(a,b,c){Recorder._executeInWindowContext(function(){for(var d in Recorder._events[a])Recorder._events[a][d]&&Recorder._events[a][d].apply(Recorder,[b,c])})},triggerCallback:function(a,b){Recorder._executeInWindowContext(function(){Recorder._callbacks[a].apply(null,b)})},registerCallback:function(a){var b="CB"+parseInt(999999*Math.random(),10);Recorder._callbacks[b]=a;return b},flashInterface:function(){if(this.swfObject){if(this.swfObject.record)return this.swfObject;
if(this.swfObject.children[3].record)return this.swfObject.children[3]}else return null},_executeInWindowContext:function(a){window.setTimeout(a,1)},_setupFlashContainer:function(){this.options.flashContainer=document.createElement("div");this.options.flashContainer.setAttribute("id","recorderFlashContainer");this.options.flashContainer.setAttribute("style","position: fixed; left: -9999px; top: -9999px; width: 230px; height: 140px; margin-left: 10px; border-top: 6px solid rgba(128, 128, 128, 0.6); border-bottom: 6px solid rgba(128, 128, 128, 0.6); border-radius: 5px 5px; padding-bottom: 1px; padding-right: 1px;");
document.body.appendChild(this.options.flashContainer)},_clearFlash:function(){var a=this.options.flashContainer.children[0];a&&this.options.flashContainer.removeChild(a)},_loadFlash:function(){this._clearFlash();var a=document.createElement("div");a.setAttribute("id","recorderFlashObject");this.options.flashContainer.appendChild(a);swfobject.embedSWF(this.options.swfSrc,"recorderFlashObject","231","141","10.1.0",void 0,void 0,{allowscriptaccess:"always"},void 0,function(a){a.success?(Recorder.swfObject=
a.ref,Recorder._checkForFlashBlock()):Recorder._showFlashRequiredDialog()})},_defaultOnShowFlash:function(){var a=Recorder.options.flashContainer;a.style.left=(window.innerWidth||document.body.offsetWidth)/2-115+"px";a.style.top=(window.innerHeight||document.body.offsetHeight)/2-70+"px"},_defaultOnHideFlash:function(){var a=Recorder.options.flashContainer;a.style.left="-9999px";a.style.top="-9999px"},_checkForFlashBlock:function(){window.setTimeout(function(){Recorder._initialized||Recorder.triggerEvent("showFlash")},
500)},_showFlashRequiredDialog:function(){Recorder.options.flashContainer.innerHTML="<p>Adobe Flash Player 10.1 or newer is required to use this feature.</p><p><a href='http://get.adobe.com/flashplayer' target='_top'>Get it on Adobe.com.</a></p>";Recorder.options.flashContainer.style.color="white";Recorder.options.flashContainer.style.backgroundColor="#777";Recorder.options.flashContainer.style.textAlign="center";Recorder.triggerEvent("showFlash")},_externalInterfaceDecode:function(a){return a.replace(/%22/g,
'"').replace(/%5c/g,"\\").replace(/%26/g,"&").replace(/%25/g,"%")}};
void 0==swfobject&&(swfobject=function(){function a(){if(!aa){try{var a=s.getElementsByTagName("body")[0].appendChild(s.createElement("span"));a.parentNode.removeChild(a)}catch(b){return}aa=!0;for(var a=J.length,c=0;c<a;c++)J[c]()}}function b(a){aa?a():J[J.length]=a}function c(a){if("undefined"!=typeof B.addEventListener)B.addEventListener("load",a,!1);else if("undefined"!=typeof s.addEventListener)s.addEventListener("load",a,!1);else if("undefined"!=typeof B.attachEvent)u(B,"onload",a);else if("function"==
typeof B.onload){var b=B.onload;B.onload=function(){b();a()}}else B.onload=a}function d(){var a=s.getElementsByTagName("body")[0],b=s.createElement("object");b.setAttribute("type","application/x-shockwave-flash");var c=a.appendChild(b);if(c){var d=0;!function(){if("undefined"!=typeof c.GetVariable){var f=c.GetVariable("$version");f&&(f=f.split(" ")[1].split(","),w.pv=[parseInt(f[0],10),parseInt(f[1],10),parseInt(f[2],10)])}else if(10>d){d++;setTimeout(arguments.callee,10);return}a.removeChild(b);
c=null;e()}()}else e()}function e(){var a=C.length;if(0<a)for(var b=0;b<a;b++){var c=C[b].id,d=C[b].callbackFn,e={success:!1,id:c};if(0<w.pv[0]){var m=p(c);if(m)if(!v(C[b].swfVersion)||w.wk&&312>w.wk)if(C[b].expressInstall&&h()){e={};e.data=C[b].expressInstall;e.width=m.getAttribute("width")||"0";e.height=m.getAttribute("height")||"0";m.getAttribute("class")&&(e.styleclass=m.getAttribute("class"));m.getAttribute("align")&&(e.align=m.getAttribute("align"));for(var n={},m=m.getElementsByTagName("param"),
q=m.length,r=0;r<q;r++)"movie"!=m[r].getAttribute("name").toLowerCase()&&(n[m[r].getAttribute("name")]=m[r].getAttribute("value"));g(e,n,c,d)}else k(m),d&&d(e);else D(c,!0),d&&(e.success=!0,e.ref=f(c),d(e))}else D(c,!0),d&&((c=f(c))&&"undefined"!=typeof c.SetVariable&&(e.success=!0,e.ref=c),d(e))}}function f(a){var b=null;(a=p(a))&&"OBJECT"==a.nodeName&&("undefined"!=typeof a.SetVariable?b=a:(a=a.getElementsByTagName("object")[0])&&(b=a));return b}function h(){return!r&&v("6.0.65")&&(w.win||w.mac)&&
!(w.wk&&312>w.wk)}function g(a,b,c,d){r=!0;E=d||null;X={success:!1,id:c};var e=p(c);if(e){"OBJECT"==e.nodeName?(Q=n(e),T=null):(Q=e,T=c);a.id="SWFObjectExprInst";if("undefined"==typeof a.width||!/%$/.test(a.width)&&310>parseInt(a.width,10))a.width="310";if("undefined"==typeof a.height||!/%$/.test(a.height)&&137>parseInt(a.height,10))a.height="137";s.title=s.title.slice(0,47)+" - Flash Player Installation";d=w.ie&&w.win?"ActiveX":"PlugIn";d="MMredirectURL="+encodeURI(B.location).toString().replace(/&/g,
"%26")+"&MMplayerType="+d+"&MMdoctitle="+s.title;b.flashvars="undefined"!=typeof b.flashvars?b.flashvars+("&"+d):d;w.ie&&w.win&&4!=e.readyState&&(d=s.createElement("div"),c+="SWFObjectNew",d.setAttribute("id",c),e.parentNode.insertBefore(d,e),e.style.display="none",!function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}());q(a,b,c)}}function k(a){if(w.ie&&w.win&&4!=a.readyState){var b=s.createElement("div");a.parentNode.insertBefore(b,a);b.parentNode.replaceChild(n(a),
b);a.style.display="none";!function(){4==a.readyState?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)}()}else a.parentNode.replaceChild(n(a),a)}function n(a){var b=s.createElement("div");if(w.win&&w.ie)b.innerHTML=a.innerHTML;else if(a=a.getElementsByTagName("object")[0])if(a=a.childNodes)for(var c=a.length,d=0;d<c;d++)1==a[d].nodeType&&"PARAM"==a[d].nodeName||8==a[d].nodeType||b.appendChild(a[d].cloneNode(!0));return b}function q(a,b,c){var d,e=p(c);if(w.wk&&312>w.wk)return d;if(e)if("undefined"==
typeof a.id&&(a.id=c),w.ie&&w.win){var f="",g;for(g in a)a[g]!=Object.prototype[g]&&("data"==g.toLowerCase()?b.movie=a[g]:"styleclass"==g.toLowerCase()?f+=' class="'+a[g]+'"':"classid"!=g.toLowerCase()&&(f+=" "+g+'="'+a[g]+'"'));g="";for(var h in b)b[h]!=Object.prototype[h]&&(g+='<param name="'+h+'" value="'+b[h]+'" />');e.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+f+">"+g+"</object>";L[L.length]=a.id;d=p(a.id)}else{h=s.createElement("object");h.setAttribute("type","application/x-shockwave-flash");
for(var k in a)a[k]!=Object.prototype[k]&&("styleclass"==k.toLowerCase()?h.setAttribute("class",a[k]):"classid"!=k.toLowerCase()&&h.setAttribute(k,a[k]));for(f in b)b[f]!=Object.prototype[f]&&"movie"!=f.toLowerCase()&&(a=h,g=f,k=b[f],c=s.createElement("param"),c.setAttribute("name",g),c.setAttribute("value",k),a.appendChild(c));e.parentNode.replaceChild(h,e);d=h}return d}function m(a){var b=p(a);b&&"OBJECT"==b.nodeName&&(w.ie&&w.win?(b.style.display="none",!function(){if(4==b.readyState){var c=p(a);
if(c){for(var d in c)"function"==typeof c[d]&&(c[d]=null);c.parentNode.removeChild(c)}}else setTimeout(arguments.callee,10)}()):b.parentNode.removeChild(b))}function p(a){var b=null;try{b=s.getElementById(a)}catch(c){}return b}function u(a,b,c){a.attachEvent(b,c);N[N.length]=[a,b,c]}function v(a){var b=w.pv;a=a.split(".");a[0]=parseInt(a[0],10);a[1]=parseInt(a[1],10)||0;a[2]=parseInt(a[2],10)||0;return b[0]>a[0]||b[0]==a[0]&&b[1]>a[1]||b[0]==a[0]&&b[1]==a[1]&&b[2]>=a[2]?!0:!1}function A(a,b,c,d){if(!w.ie||
!w.mac){var e=s.getElementsByTagName("head")[0];e&&(c=c&&"string"==typeof c?c:"screen",d&&(ba=W=null),W&&ba==c||(d=s.createElement("style"),d.setAttribute("type","text/css"),d.setAttribute("media",c),W=e.appendChild(d),w.ie&&w.win&&"undefined"!=typeof s.styleSheets&&0<s.styleSheets.length&&(W=s.styleSheets[s.styleSheets.length-1]),ba=c),w.ie&&w.win?W&&"object"==typeof W.addRule&&W.addRule(a,b):W&&"undefined"!=typeof s.createTextNode&&W.appendChild(s.createTextNode(a+" {"+b+"}")))}}function D(a,b){if(la){var c=
b?"visible":"hidden";aa&&p(a)?p(a).style.visibility=c:A("#"+a,"visibility:"+c)}}function x(a){return null!=/[\\\"<>\.;]/.exec(a)&&"undefined"!=typeof encodeURIComponent?encodeURIComponent(a):a}var B=window,s=document,G=navigator,K=!1,J=[function(){K?d():e()}],C=[],L=[],N=[],Q,T,E,X,aa=!1,r=!1,W,ba,la=!0,w=function(){var a="undefined"!=typeof s.getElementById&&"undefined"!=typeof s.getElementsByTagName&&"undefined"!=typeof s.createElement,b=G.userAgent.toLowerCase(),c=G.platform.toLowerCase(),d=c?
/win/.test(c):/win/.test(b),c=c?/mac/.test(c):/mac/.test(b),b=/webkit/.test(b)?parseFloat(b.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,e=!+"\x0B1",f=[0,0,0],g=null;if("undefined"!=typeof G.plugins&&"object"==typeof G.plugins["Shockwave Flash"])!(g=G.plugins["Shockwave Flash"].description)||"undefined"!=typeof G.mimeTypes&&G.mimeTypes["application/x-shockwave-flash"]&&!G.mimeTypes["application/x-shockwave-flash"].enabledPlugin||(K=!0,e=!1,g=g.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),f[0]=parseInt(g.replace(/^(.*)\..*$/,
"$1"),10),f[1]=parseInt(g.replace(/^.*\.(.*)\s.*$/,"$1"),10),f[2]=/[a-zA-Z]/.test(g)?parseInt(g.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if("undefined"!=typeof B.ActiveXObject)try{var h=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");h&&(g=h.GetVariable("$version"))&&(e=!0,g=g.split(" ")[1].split(","),f=[parseInt(g[0],10),parseInt(g[1],10),parseInt(g[2],10)])}catch(k){}return{w3:a,pv:f,wk:b,ie:e,win:d,mac:c}}();(function(){w.w3&&(("undefined"!=typeof s.readyState&&"complete"==s.readyState||
"undefined"==typeof s.readyState&&(s.getElementsByTagName("body")[0]||s.body))&&a(),aa||("undefined"!=typeof s.addEventListener&&s.addEventListener("DOMContentLoaded",a,!1),w.ie&&w.win&&(s.attachEvent("onreadystatechange",function(){"complete"==s.readyState&&(s.detachEvent("onreadystatechange",arguments.callee),a())}),B==top&&!function(){if(!aa){try{s.documentElement.doScroll("left")}catch(b){setTimeout(arguments.callee,0);return}a()}}()),w.wk&&!function(){aa||(/loaded|complete/.test(s.readyState)?
a():setTimeout(arguments.callee,0))}(),c(a)))})();(function(){w.ie&&w.win&&window.attachEvent("onunload",function(){for(var a=N.length,b=0;b<a;b++)N[b][0].detachEvent(N[b][1],N[b][2]);a=L.length;for(b=0;b<a;b++)m(L[b]);for(var c in w)w[c]=null;w=null;for(var d in swfobject)swfobject[d]=null;swfobject=null})})();return{registerObject:function(a,b,c,d){if(w.w3&&a&&b){var e={};e.id=a;e.swfVersion=b;e.expressInstall=c;e.callbackFn=d;C[C.length]=e;D(a,!1)}else d&&d({success:!1,id:a})},getObjectById:function(a){if(w.w3)return f(a)},
embedSWF:function(a,c,d,e,f,k,m,n,p,r){var s={success:!1,id:c};w.w3&&!(w.wk&&312>w.wk)&&a&&c&&d&&e&&f?(D(c,!1),b(function(){d+="";e+="";var b={};if(p&&"object"===typeof p)for(var w in p)b[w]=p[w];b.data=a;b.width=d;b.height=e;w={};if(n&&"object"===typeof n)for(var u in n)w[u]=n[u];if(m&&"object"===typeof m)for(var B in m)w.flashvars="undefined"!=typeof w.flashvars?w.flashvars+("&"+B+"="+m[B]):B+"="+m[B];if(v(f))u=q(b,w,c),b.id==c&&D(c,!0),s.success=!0,s.ref=u;else{if(k&&h()){b.data=k;g(b,w,c,r);return}D(c,
!0)}r&&r(s)})):r&&r(s)},switchOffAutoHideShow:function(){la=!1},ua:w,getFlashPlayerVersion:function(){return{major:w.pv[0],minor:w.pv[1],release:w.pv[2]}},hasFlashPlayerVersion:v,createSWF:function(a,b,c){if(w.w3)return q(a,b,c)},showExpressInstall:function(a,b,c,d){w.w3&&h()&&g(a,b,c,d)},removeSWF:function(a){w.w3&&m(a)},createCSS:function(a,b,c,d){w.w3&&A(a,b,c,d)},addDomLoadEvent:b,addLoadEvent:c,getQueryParamValue:function(a){var b=s.location.search||s.location.hash;if(b){/\?/.test(b)&&(b=b.split("?")[1]);
if(null==a)return x(b);for(var b=b.split("&"),c=0;c<b.length;c++)if(b[c].substring(0,b[c].indexOf("="))==a)return x(b[c].substring(b[c].indexOf("=")+1))}return""},expressInstallCallback:function(){if(r){var a=p("SWFObjectExprInst");a&&Q&&(a.parentNode.replaceChild(Q,a),T&&(D(T,!0),w.ie&&w.win&&(Q.style.display="block")),E&&E(X));r=!1}}}}());var __hasProp=Object.prototype.hasOwnProperty;window.SC=window.SC||{};
window.SC.URI=function(a,b){var c,d;null==a&&(a="");null==b&&(b={});d=/^(?:([^:\/?\#]+):)?(?:\/\/([^\/?\#]*))?([^?\#]*)(?:\?([^\#]*))?(?:\#(.*))?/;c=/^(?:([^@]*)@)?([^:]*)(?::(\d*))?/;this.scheme=this.user=this.password=this.host=this.port=this.path=this.query=this.fragment=null;this.toString=function(){var a;a="";this.isAbsolute()&&(a+=this.scheme,a+="://",null!=this.user&&(a+=this.user+":"+this.password+"@"),a+=this.host,null!=this.port&&(a+=":"+this.port));a+=this.path;""!==this.path||null==this.query&&
null==this.fragment||(a+="/");null!=this.query&&(a+=this.encodeParamsWithPrepend(this.query,"?"));null!=this.fragment&&(a+=this.encodeParamsWithPrepend(this.fragment,"#"));return a};this.isRelative=function(){return!this.isAbsolute()};this.isAbsolute=function(){return null!=this.host};this.decodeParams=function(a){var b,c,d,k,n;null==a&&(a="");c={};n=a.split("&");a=0;for(k=n.length;a<k;a++)b=n[a],""!==b&&(d=b.split("="),b=decodeURIComponent(d[0]),d=decodeURIComponent(d[1]||"").replace(/\+/g," "),
this.normalizeParams(c,b,d));return c};this.normalizeParams=function(a,b,c){var d,k;null==c&&(c=NULL);d=b.match(/^[\[\]]*([^\[\]]+)\]*(.*)/);b=d[1]||"";d=d[2]||"";""===d?a[b]=c:"[]"===d?(a[b]||(a[b]=[]),a[b].push(c)):(k=d.match(/^\[\]\[([^\[\]]+)\]$/)||(k=d.match(/^\[\](.+)$/)))?(d=k[1],a[b]||(a[b]=[]),k=a[b][a[b].length-1],null!=k&&k.constructor===Object&&null==k[d]?this.normalizeParams(k,d,c):a[b].push(this.normalizeParams({},d,c))):(a[b]||(a[b]={}),a[b]=this.normalizeParams(a[b],d,c));return a};
this.encodeParamsWithPrepend=function(a,b){var c;c=this.encodeParams(a);return""!==c?b+c:""};this.encodeParams=function(a){var b,c,d,k,n;if(a.constructor===String)return a;a=this.flattenParams(a);c=[];k=0;for(n=a.length;k<n;k++)d=a[k],b=d[0],d=d[1],null===d?c.push(b):c.push(b+"="+encodeURIComponent(d));return c.join("&")};this.flattenParams=function(a,b,c){var d,k,n;null==b&&(b="");null==c&&(c=[]);if(null==a)null!=b&&c.push([b,null]);else if(a.constructor===Object)for(d in a)__hasProp.call(a,d)&&
(n=a[d],k=""!==b?b+"["+d+"]":d,this.flattenParams(n,k,c));else if(a.constructor===Array)for(d=0,k=a.length;d<k;d++)n=a[d],this.flattenParams(n,b+"[]",c);else""!==b&&c.push([b,a]);return c};this.parse=function(a,b){var h,g,k,n;null==a&&(a="");null==b&&(b={});g=function(a){return""===a?null:a};k=a.match(d);this.scheme=g(k[1]);h=k[2];null!=h&&(h=h.match(c),n=g(h[1]),null!=n&&(this.user=n.split(":")[0],this.password=n.split(":")[1]),this.host=g(h[2]),this.port=parseInt(h[3],10)||null);this.path=k[3];
this.query=g(k[4]);b.decodeQuery&&(this.query=this.decodeParams(this.query));this.fragment=g(k[5]);if(b.decodeFragment)return this.fragment=this.decodeParams(this.fragment)};this.parse(a.toString(),b);return this};
!function(){var a,b,c,d,e={}.hasOwnProperty,f=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);c.prototype=b.prototype;a.prototype=new c;a.__super__=b.prototype;return a};window.SC||(window.SC={});SC.Helper={merge:function(a,b){var c,d,f,m;if(a.constructor===Array)for(d=Array.apply(null,a),c=0,m=b.length;c<m;c++)f=b[c],d.push(f);else{d={};for(c in a)e.call(a,c)&&(f=a[c],d[c]=f);for(c in b)e.call(b,c)&&(f=b[c],d[c]=f)}return d},groupBy:function(a,b){var c,d,e,f,
p;c={};e=0;for(f=a.length;e<f;e++)d=a[e],d[b]&&(c[p=d[b]]||(c[p]=[]),c[d[b]].push(d));return c},loadJavascript:function(a,b){var c;c=document.createElement("script");c.async=!0;c.src=a;SC.Helper.attachLoadEvent(c,b);document.body.appendChild(c);return c},extractOptionsAndCallbackArguments:function(a,b){var c;c={};null!=b?(c.callback=b,c.options=a):"function"===typeof a?(c.callback=a,c.options={}):c.options=a||{};return c},openCenteredPopup:function(a,b,c){var d;d={};null!=c?(d.width=b,d.height=c):
d=b;d=SC.Helper.merge(d,{location:1,left:window.screenX+(window.outerWidth-d.width)/2,top:window.screenY+(window.outerHeight-d.height)/2,toolbar:"no",scrollbars:"yes"});return window.open(a,d.name,this._optionsToString(d))},_optionsToString:function(a){var b,c,d;c=[];for(b in a)e.call(a,b)&&(d=a[b],c.push(b+"="+d));return c.join(", ")},attachLoadEvent:function(a,b){return a.addEventListener?a.addEventListener("load",b,!1):a.onreadystatechange=function(){if("complete"===this.readyState)return b()}},
millisecondsToHMS:function(a){var b,c,d,e,f;b=Math.floor(a/36E5);c=Math.floor(a/6E4%60);a=Math.floor(a/1E3%60);f=[];0<b&&f.push(b);e=d="";10>c&&0<b&&(d="0");10>a&&(e="0");f.push(d+c);f.push(e+a);return f.join(".")},setFlashStatusCodeMaps:function(a){a["_status_code_map[400]"]=200;a["_status_code_map[401]"]=200;a["_status_code_map[403]"]=200;a["_status_code_map[404]"]=200;a["_status_code_map[422]"]=200;a["_status_code_map[500]"]=200;a["_status_code_map[503]"]=200;return a["_status_code_map[504]"]=
200},responseHandler:function(a,b){var c,d;d=SC.Helper.JSON.parse(a);c=null;d?d.errors&&(c={message:d.errors&&d.errors[0].error_message}):c=b?{message:"HTTP Error: "+b.status}:{message:"Unknown error"};return{json:d,error:c}},FakeStorage:function(){return{_store:{},getItem:function(a){return this._store[a]||null},setItem:function(a,b){return this._store[a]=b.toString()},removeItem:function(a){return delete this._store[a]}}},JSON:{parse:function(a){return"{"!==a[0]&&"["!==a[0]?null:null!=window.JSON?
window.JSON.parse(a):eval(a)}}};window.SC=SC.Helper.merge(SC||{},{_version:"1.1.5",_baseUrl:"//connect.soundcloud.com",options:{site:"soundcloud.com",baseUrl:"//connect.soundcloud.com"},connectCallbacks:{},_popupWindow:void 0,initialize:function(a){var b,c,d;null==a&&(a={});this.accessToken(a.access_token);for(b in a)e.call(a,b)&&(c=a[b],this.options[b]=c);(d=this.options).flashXHR||(d.flashXHR=void 0===(new XMLHttpRequest).withCredentials);return this},hostname:function(a){var b;b="";null!=a&&(b+=
a+".");return b+=this.options.site}});window.SC=SC.Helper.merge(SC||{},{_apiRequest:function(a,b,c,d){var e;null==d&&(d=c,c=void 0);c||(c={});b=SC.prepareRequestURI(b,c);b.query.format="json";SC.options.flashXHR?SC.Helper.setFlashStatusCodeMaps(b.query):b.query["_status_code_map[302]"]=200;if("PUT"===a||"DELETE"===a)b.query._method=a,a="POST";"GET"!==a&&(e=b.encodeParams(b.query),b.query={});return this._request(a,b,"application/x-www-form-urlencoded",e,function(a,b){var c;c=SC.Helper.responseHandler(a,
b);return c.json&&"302 - Found"===c.json.status?SC._apiRequest("GET",c.json.location,d):d(c.json,c.error)})},_request:function(a,b,c,d,e){return SC.options.flashXHR?this._flashRequest(a,b,c,d,e):this._xhrRequest(a,b,c,d,e)},_xhrRequest:function(a,b,c,d,e){var f;f=new XMLHttpRequest;f.open(a,b.toString(),!0);f.setRequestHeader("Content-Type",c);f.onreadystatechange=function(a){if(4===a.target.readyState)return e(a.target.responseText,a.target)};return f.send(d)},_flashRequest:function(a,b,c,d,e){return this.whenRecordingReady(function(){return Recorder.request(a,
b.toString(),c,d,function(a,b){return e(Recorder._externalInterfaceDecode(a),b)})})},post:function(a,b,c){return this._apiRequest("POST",a,b,c)},put:function(a,b,c){return this._apiRequest("PUT",a,b,c)},get:function(a,b,c){return this._apiRequest("GET",a,b,c)},"delete":function(a,b){return this._apiRequest("DELETE",a,{},b)},prepareRequestURI:function(a,b){var c,d,f;null==b&&(b={});d=new SC.URI(a,{decodeQuery:!0});for(c in b)e.call(b,c)&&(f=b[c],d.query[c]=f);d.isRelative()&&(d.host=this.hostname("api"),
d.scheme=window.location.protocol.slice(0,-1));null!=this.accessToken()?(d.query.oauth_token=this.accessToken(),d.scheme="https"):d.query.client_id=this.options.client_id;return d},_getAll:function(a,b,c,d){null==d&&(d=[]);null==c&&(c=b,b=void 0);b||(b={});b.offset||(b.offset=0);b.limit||(b.limit=50);return this.get(a,b,function(e,f){return e.constructor===Array&&0<e.length?(d=SC.Helper.merge(d,e),b.offset+=b.limit,SC._getAll(a,b,c,d)):c(d,null)})}});window.SC=SC.Helper.merge(SC||{},{_connectWindow:null,
connect:function(a){var b;b="function"===typeof a?{connected:a}:a;a={client_id:b.client_id||SC.options.client_id,redirect_uri:b.redirect_uri||SC.options.redirect_uri,response_type:"code_and_token",scope:b.scope||"non-expiring",display:"popup",window:b.window,retainWindow:b.retainWindow};if(a.client_id&&a.redirect_uri)return a=SC.dialog(SC.Dialog.CONNECT,a,function(a){if(null!=a.error)throw Error("SC OAuth2 Error: "+a.error_description);SC.accessToken(a.access_token);null!=b.connected&&b.connected();
if(null!=b.callback)return b.callback()}),this._connectWindow=a.options.window,a;throw"Options client_id and redirect_uri must be passed";},connectCallback:function(){return SC.Dialog._handleDialogReturn(SC._connectWindow)},disconnect:function(){return this.accessToken(null)},_trigger:function(a,b){if(null!=this.connectCallbacks[a])return this.connectCallbacks[a](b)},accessToken:function(a){var b;b=this.storage();return void 0===a?b.getItem("SC.accessToken"):null===a?b.removeItem("SC.accessToken"):
b.setItem("SC.accessToken",a)},isConnected:function(){return null!=this.accessToken()}});window.SC=SC.Helper.merge(SC||{},{_dialogsPath:"/dialogs",dialog:function(a,b,c){c=SC.Helper.extractOptionsAndCallbackArguments(b,c);b=c.options;c=c.callback;b.callback=c;b.redirect_uri=this.options.redirect_uri;a=new SC.Dialog[a+"Dialog"](b);SC.Dialog._dialogs[a.id]=a;a.open();return a},Dialog:{ECHO:"Echo",CONNECT:"Connect",PICKER:"Picker",ID_PREFIX:"SoundCloud_Dialog",_dialogs:{},_isDialogId:function(a){return(a||
"").match(new RegExp("^"+this.ID_PREFIX))},_getDialogIdFromWindow:function(a){a=new SC.URI(a.location,{decodeQuery:!0,decodeFragment:!0});a=a.query.state||a.fragment.state;return this._isDialogId(a)?a:null},_handleDialogReturn:function(a){var b;b=this._getDialogIdFromWindow(a);a=this._dialogs[b];if(null!=a&&a.handleReturn())return delete this._dialogs[b]},_handleInPopupContext:function(){var a;if(this._getDialogIdFromWindow(window)&&!window.location.pathname.match(/\/dialogs\//)){if(a=navigator.userAgent.match(/OS 5(_\d)+ like Mac OS X/i))return window.opener.SC.Dialog._handleDialogReturn(window);
if(window.opener)return window.opener.setTimeout(function(){return window.opener.SC.Dialog._handleDialogReturn(window)},1);if(window.top)return window.top.setTimeout(function(){return window.top.SC.Dialog._handleDialogReturn(window)},1)}},AbstractDialog:a=function(){function a(b){this.options=null!=b?b:{};this.id=this.generateId()}a.prototype.WIDTH=456;a.prototype.HEIGHT=510;a.prototype.ID_PREFIX="SoundCloud_Dialog";a.prototype.PARAM_KEYS=["redirect_uri"];a.prototype.requiresAuthentication=!1;a.prototype.generateId=
function(){return[this.ID_PREFIX,Math.ceil(1E6*Math.random()).toString(16)].join("_")};a.prototype.buildURI=function(a){var b,c,d,e;null==a&&(a=new SC.URI(SC._baseUrl));a.scheme=window.location.protocol.slice(0,-1);a.path+=SC._dialogsPath+"/"+this.name+"/";a.fragment={state:this.id};this.requiresAuthentication&&(a.fragment.access_token=SC.accessToken());e=this.PARAM_KEYS;c=0;for(d=e.length;c<d;c++)b=e[c],null!=this.options[b]&&(a.fragment[b]=this.options[b]);a.port=null;return a};a.prototype.open=
function(){var a;if(this.requiresAuthentication&&null==SC.accessToken())return this.authenticateAndOpen();a=this.buildURI();return null!=this.options.window?this.options.window.location=a:this.options.window=SC.Helper.openCenteredPopup(a,{width:this.WIDTH,height:this.HEIGHT})};a.prototype.authenticateAndOpen=function(){var a,b=this;return a=SC.connect({retainWindow:!0,window:this.options.window,connected:function(){b.options.window=a.options.window;return b.open()}})};a.prototype.paramsFromWindow=
function(){var a;a=new SC.URI(this.options.window.location,{decodeFragment:!0,decodeQuery:!0});return SC.Helper.merge(a.query,a.fragment)};a.prototype.handleReturn=function(){var a;a=this.paramsFromWindow();this.options.retainWindow||this.options.window.close();return this.options.callback(a)};return a}(),EchoDialog:function(a){function c(){return b=c.__super__.constructor.apply(this,arguments)}f(c,a);c.prototype.PARAM_KEYS=["client_id","redirect_uri","hello"];c.prototype.name="echo";return c}(a),
PickerDialog:function(a){function b(){return c=b.__super__.constructor.apply(this,arguments)}f(b,a);b.prototype.PARAM_KEYS=["client_id","redirect_uri"];b.prototype.name="picker";b.prototype.requiresAuthentication=!0;b.prototype.handleReturn=function(){var a,b=this;a=this.paramsFromWindow();if("logout"===a.action)return SC.accessToken(null),this.open(),!1;if(null!=a.track_uri)return this.options.retainWindow||this.options.window.close(),SC.get(a.track_uri,function(a){return b.options.callback({track:a})}),
!0};return b}(a),ConnectDialog:function(a){function b(){return d=b.__super__.constructor.apply(this,arguments)}f(b,a);b.prototype.PARAM_KEYS="client_id redirect_uri client_secret response_type scope display".split(" ");b.prototype.name="connect";b.prototype.buildURI=function(){var a;a=b.__super__.buildURI.apply(this,arguments);a.scheme="https";a.host="soundcloud.com";a.path="/connect";a.query=a.fragment;a.fragment={};return a};return b}(a)}});SC.Dialog._handleInPopupContext();window.SC=SC.Helper.merge(SC||
{},{Loader:{States:{UNLOADED:1,LOADING:2,READY:3},Package:function(a,b){return{name:a,callbacks:[],loadFunction:b,state:SC.Loader.States.UNLOADED,addCallback:function(a){return this.callbacks.push(a)},runCallbacks:function(){var a,b,c,d;d=this.callbacks;b=0;for(c=d.length;b<c;b++)a=d[b],a.apply(this);return this.callbacks=[]},setReady:function(){this.state=SC.Loader.States.READY;return this.runCallbacks()},load:function(){this.state=SC.Loader.States.LOADING;return this.loadFunction.apply(this)},whenReady:function(a){switch(this.state){case SC.Loader.States.UNLOADED:return this.addCallback(a),
this.load();case SC.Loader.States.LOADING:return this.addCallback(a);case SC.Loader.States.READY:return a()}}}},packages:{},registerPackage:function(a){return this.packages[a.name]=a}}});window.SC=SC.Helper.merge(SC||{},{oEmbed:function(a,b,c){var d;null==c&&(c=b,b=void 0);b||(b={});b.url=a;a=new SC.URI(window.location.protocol+"//"+SC.hostname()+"/oembed.json");a.query=b;void 0!==c.nodeType&&1===c.nodeType&&(d=c,c=function(a){return d.innerHTML=a.html});return this._request("GET",a.toString(),null,
null,function(a,b){var d;d=SC.Helper.responseHandler(a,b);return c(d.json,d.error)})}});window.SC=SC.Helper.merge(SC||{},{_recorderSwfPath:"/recorder.js/recorder-0.9.0.swf",whenRecordingReady:function(a){return SC.Loader.packages.recording.whenReady(a)},record:function(a){null==a&&(a={});return this.whenRecordingReady(function(){return Recorder.record(a)})},recordStop:function(a){return Recorder.stop()},recordPlay:function(a){null==a&&(a={});return Recorder.play(a)},recordUpload:function(a,b){var c;
null==a&&(a={});c=SC.prepareRequestURI("/tracks",a);c.query.format="json";SC.Helper.setFlashStatusCodeMaps(c.query);c=c.flattenParams(c.query);return Recorder.upload({method:"POST",url:"https://"+this.hostname("api")+"/tracks",audioParam:"track[asset_data]",params:c,success:function(a){a=SC.Helper.responseHandler(a);return b(a.json,a.error)}})}});SC.Loader.registerPackage(new SC.Loader.Package("recording",function(){return Recorder.flashInterface()?SC.Loader.packages.recording.setReady():Recorder.initialize({swfSrc:SC._baseUrl+
SC._recorderSwfPath+"?"+SC._version,initialized:function(){return SC.Loader.packages.recording.setReady()}})}));window.SC=SC.Helper.merge(SC||{},{storage:function(){return this._fakeStorage||(this._fakeStorage=new SC.Helper.FakeStorage)}});window.SC=SC.Helper.merge(SC||{},{_soundmanagerPath:"/soundmanager2",_soundmanagerScriptPath:"/soundmanager2.js",whenStreamingReady:function(a){return SC.Loader.packages.streaming.whenReady(a)},_prepareStreamUrl:function(a){a=a.toString().match(/^\d.*$/)?"/tracks/"+
a:a;a=SC.prepareRequestURI(a);a.path.match(/\/stream/)||(a.path+="/stream");return a.toString()},_setOnPositionListenersForComments:function(a,b,c){var d,e,f;d=SC.Helper.groupBy(b,"timestamp");f=[];for(e in d)b=d[e],f.push(function(b,c,d){return a.onposition(parseInt(b,10),function(){return d(c)})}(e,b,c));return f},stream:function(a,b,c){var d,e=this;b=SC.Helper.extractOptionsAndCallbackArguments(b,c);d=b.options;c=b.callback;return SC.whenStreamingReady(function(){var b,f;d.id="T"+a+"-"+Math.random();
d.url=e._prepareStreamUrl(a);b=function(a){a=soundManager.createSound(a);null!=c&&c(a);return a};return(f=d.ontimedcomments)?(delete d.ontimedcomments,SC._getAll(d.url.replace("/stream","/comments"),function(a){var c;c=b(d);return e._setOnPositionListenersForComments(c,a,f)})):b(d)})},streamStopAll:function(){if(null!=window.soundManager)return window.soundManager.stopAll()}});SC.Loader.registerPackage(new SC.Loader.Package("streaming",function(){var a;if(null!=window.soundManager)return SC.Loader.packages.streaming.setReady();
a=SC._baseUrl+SC._soundmanagerPath;window.SM2_DEFER=!0;return SC.Helper.loadJavascript(a+SC._soundmanagerScriptPath,function(){window.soundManager=new SoundManager;soundManager.url=a;soundManager.flashVersion=9;soundManager.useFlashBlock=!1;soundManager.useHTML5Audio=!1;soundManager.beginDelayedInit();return soundManager.onready(function(){return SC.Loader.packages.streaming.setReady()})})}))}.call(this);
(function(){var a,b,c;(function(d){function e(a,b){var c=b&&b.split("/"),d=u.map,e=d&&d["*"]||{},f,g,h,k,m,n;if(a&&"."===a.charAt(0)&&b){c=c.slice(0,c.length-1);a=c.concat(a.split("/"));for(m=0;f=a[m];m++)if("."===f)a.splice(m,1),m-=1;else if(".."===f){if(1===m&&(".."===a[2]||".."===a[0]))return!0;0<m&&(a.splice(m-1,2),m-=2)}a=a.join("/")}if((c||e)&&d)for(f=a.split("/"),m=f.length;0<m;m-=1){g=f.slice(0,m).join("/");if(c)for(n=c.length;0<n;n-=1)if(h=d[c.slice(0,n).join("/")])if(h=h[g]){k=h;break}if(k=
k||e[g]){f.splice(0,m,k);a=f.join("/");break}}return a}function f(a,b){return function(){return x.apply(d,A.call(arguments,0).concat([a,b]))}}function h(a){return function(b){return e(b,a)}}function g(a){return function(b){m[a]=b}}function k(a){if(p.hasOwnProperty(a)){var b=p[a];delete p[a];v[a]=!0;D.apply(d,b)}if(!m.hasOwnProperty(a))throw Error("No "+a);return m[a]}function n(a,b){var c,d,f=a.indexOf("!");return-1!==f?(c=e(a.slice(0,f),b),a=a.slice(f+1),d=k(c),d&&d.normalize?a=d.normalize(a,h(b)):
a=e(a,b)):a=e(a,b),{f:c?c+"!"+a:a,n:a,p:d}}function q(a){return function(){return u&&u.config&&u.config[a]||{}}}var m={},p={},u={},v={},A=[].slice,D,x;D=function(a,b,e,h){var u=[],A,x,D,Q,T;h=h||a;"string"==typeof e&&(e=c(a,e));if("function"==typeof e){b=!b.length&&e.length?["require","exports","module"]:b;for(T=0;T<b.length;T++)if(Q=n(b[T],h),D=Q.f,"require"===D)u[T]=f(a);else if("exports"===D)u[T]=m[a]={},A=!0;else if("module"===D)x=u[T]={id:a,uri:"",exports:m[a],config:q(a)};else if(m.hasOwnProperty(D)||
p.hasOwnProperty(D))u[T]=k(D);else if(Q.p)Q.p.load(Q.n,f(h,!0),g(D),{}),u[T]=m[D];else if(!v[D])throw Error(a+" missing "+D);b=e.apply(m[a],u);a&&(x&&x.exports!==d&&x.exports!==m[a]?m[a]=x.exports:b===d&&A||(m[a]=b))}else a&&(m[a]=e)};a=x=function(a,b,c,e){return"string"==typeof a?k(n(a,b).f):(a.splice||(u=a,b.splice?(a=b,b=c,c=null):a=d),b=b||function(){},e?D(d,a,b,c):setTimeout(function(){D(d,a,b,c)},15),x)};x.config=function(a){return u=a,x};b=function(a,b,c){b.splice||(c=b,b=[]);p[a]=[a,b,c]};
b.amd={jQuery:!0}})();c=function(a,b){return eval(["r = function(a,b,c){","\n};\n//@ sourceURL="+a+"\n"].join(b)),void 0};b("lib/api/events",["require","exports","module"],function(a,b,c){b.api={LOAD_PROGRESS:"loadProgress",PLAY_PROGRESS:"playProgress",PLAY:"play",PAUSE:"pause",FINISH:"finish",SEEK:"seek",READY:"ready",OPEN_SHARE_PANEL:"sharePanelOpened",CLICK_DOWNLOAD:"downloadClicked",CLICK_BUY:"buyClicked",ERROR:"error"};b.bridge={REMOVE_LISTENER:"removeEventListener",ADD_LISTENER:"addEventListener"}});
b("lib/api/getters",["require","exports","module"],function(a,b,c){c.exports={GET_VOLUME:"getVolume",GET_DURATION:"getDuration",GET_POSITION:"getPosition",GET_SOUNDS:"getSounds",GET_CURRENT_SOUND:"getCurrentSound",GET_CURRENT_SOUND_INDEX:"getCurrentSoundIndex",IS_PAUSED:"isPaused"}});b("lib/api/setters",["require","exports","module"],function(a,b,c){c.exports={PLAY:"play",PAUSE:"pause",TOGGLE:"toggle",SEEK_TO:"seekTo",SET_VOLUME:"setVolume",NEXT:"next",PREV:"prev",SKIP:"skip"}});b("lib/api/api","require exports module lib/api/events lib/api/getters lib/api/setters".split(" "),
function(a,b,c){function h(a){var b,c,d;b=0;for(c=C.length;b<c&&(d=a(C[b]),!1!==d);b++);}function g(a){return a.contentWindow?a.contentWindow:a.contentDocument&&"parentWindow"in a.contentDocument?a.contentDocument.parentWindow:null}function k(a){var b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push(a[c]);return b}function n(a,b,c){c.callbacks[a]=c.callbacks[a]||[];c.callbacks[a].push(b)}function q(a,b){var c=!0,d;return b.callbacks[a]=[],h(function(b){d=b.callbacks[a]||[];if(d.length)return c=!1,!1}),
c}function m(a,b,c){var d=g(c);if(!d.postMessage)return!1;c=c.getAttribute("src").split("?")[0];a=JSON.stringify({method:a,value:b});"//"===c.substr(0,2)&&(c=window.location.protocol+c);c=c.replace(/http:\/\/(w|wt).soundcloud.com/,"https://$1.soundcloud.com");d.postMessage(a,c)}function p(a){var b;return h(function(c){if(c.instance===a)return b=c,!1}),b}function u(a){var b;return h(function(c){if(g(c.element)===a)return b=c,!1}),b}function v(a,b){return function(c){var d=!!(c&&c.constructor&&c.call&&
c.apply),e=p(this),f=!d&&b?c:null;c=d&&!b?c:null;return c&&n(a,c,e),m(a,f,e.element),this}}function A(a,b,c){var d,e,f;d=0;for(e=b.length;d<e;d++)f=b[d],a[f]=v(f,c)}function D(a){var b,c,d=[];for(b in a)a.hasOwnProperty(b)&&(c=a[b],d.push(b+"="+("start_track"===b?parseInt(c,10):c?"true":"false")));return d.join("&")}function x(a,b,c){var d=a.callbacks[b]||[],e,f;e=0;for(f=d.length;e<f;e++)d[e].apply(a.instance,c);c=!1;for(var g in s)if(s.hasOwnProperty(g)&&s[g]===b){c=!0;break}if(c||b===G.READY)a.callbacks[b]=
[]}function B(a){var b,c,d;try{c=JSON.parse(a.data)}catch(e){return!1}b=u(a.source);d=c.method;c=c.value;if(b&&a.origin.replace(N,"")!==b.domain.replace(N,""))return!1;if(!b)return d===G.READY&&J.push(a.source),!1;d===G.READY&&(b.isReady=!0,x(b,L),q(L,b));d===G.PLAY&&!b.playEventFired&&(b.playEventFired=!0);d===G.PLAY_PROGRESS&&!b.playEventFired&&(b.playEventFired=!0,x(b,G.PLAY,[c]));a=[];void 0!==c&&a.push(c);x(b,d,a)}b=a("lib/api/events");var s=a("lib/api/getters");a=a("lib/api/setters");var G=
b.api,K=b.bridge,J=[],C=[],L="__LATE_BINDING__",N=/^http(?:s?)/,Q,T;window.addEventListener?window.addEventListener("message",B,!1):window.attachEvent("onmessage",B);c.exports=c=function(a,b,c){(""===a||a&&a.charCodeAt&&a.substr)&&(a=document.getElementById(a));if(!a||1!==a.nodeType||"IFRAME"!==a.nodeName.toUpperCase())throw Error("SC.Widget function should be given either iframe element or a string specifying id attribute of iframe element.");b&&(c=c||{},a.src="http://wt.soundcloud.dev:9200/?url="+
b+"&"+D(c));b=u(g(a));var d,e;return b&&b.instance?b.instance:(d=-1<J.indexOf(g(a)),e=new Q(a),C.push(new T(e,a,d)),e)};c.Events=G;window.SC=window.SC||{};window.SC.Widget=c;T=function(a,b,c){this.instance=a;this.element=b;b=b.getAttribute("src");a="";var d,e;"//"===b.substr(0,2)&&(b=window.location.protocol+b);e=b.split("/");b=0;for(d=e.length;b<d&&3>b;b++)a+=e[b],2>b&&(a+="/");this.domain=a;this.isReady=!!c;this.callbacks={}};Q=function(){};Q.prototype={constructor:Q,load:function(a,b){if(a){b=
b||{};var c=this,d=p(this),e=d.element,f=e.src,f=f.substr(0,f.indexOf("?"));d.isReady=!1;d.playEventFired=!1;e.onload=function(){c.bind(G.READY,function(){var a,c=d.callbacks;for(a in c)c.hasOwnProperty(a)&&a!==G.READY&&m(K.ADD_LISTENER,a,d.element);b.callback&&b.callback()})};e.src=f+"?url="+a+"&"+D(b)}},bind:function(a,b){var c=this,d=p(this);return d&&d.element&&(a===G.READY&&d.isReady?setTimeout(b,1):d.isReady?(n(a,b,d),m(K.ADD_LISTENER,a,d.element)):n(L,function(){c.bind(a,b)},d)),this},unbind:function(a){var b=
p(this),c;b&&b.element&&(c=q(a,b),a!==G.READY&&c&&m(K.REMOVE_LISTENER,a,b.element))}};A(Q.prototype,k(s));A(Q.prototype,k(a),!0)});window.SC=window.SC||{};window.SC.Widget=a("lib/api/api")})();window.SoundCloudRecorder=window.Recorder;
(function(a){a.titleAlert=function(b,c){a.titleAlert._running&&a.titleAlert.stop();a.titleAlert._settings=c=a.extend({},a.titleAlert.defaults,c);if(!c.requireBlur||!a.titleAlert.hasFocus){c.originalTitleInterval=c.originalTitleInterval||c.interval;a.titleAlert._running=!0;a.titleAlert._initialText=document.title;document.title=b;var d=!0,e=function(){a.titleAlert._running&&(d=!d,document.title=d?b:a.titleAlert._initialText,a.titleAlert._intervalToken=setTimeout(e,d?c.interval:c.originalTitleInterval))};
a.titleAlert._intervalToken=setTimeout(e,c.interval);c.stopOnMouseMove&&a(document).mousemove(function(b){a(this).unbind(b);a.titleAlert.stop()});0<c.duration&&(a.titleAlert._timeoutToken=setTimeout(function(){a.titleAlert.stop()},c.duration))}};a.titleAlert.defaults={interval:500,originalTitleInterval:null,duration:0,stopOnFocus:!0,requireBlur:!1,stopOnMouseMove:!1};a.titleAlert.stop=function(){a.titleAlert._running&&(clearTimeout(a.titleAlert._intervalToken),clearTimeout(a.titleAlert._timeoutToken),
document.title=a.titleAlert._initialText,a.titleAlert._timeoutToken=null,a.titleAlert._intervalToken=null,a.titleAlert._initialText=null,a.titleAlert._running=!1,a.titleAlert._settings=null)};a.titleAlert.hasFocus=!0;a.titleAlert._running=!1;a.titleAlert._intervalToken=null;a.titleAlert._timeoutToken=null;a.titleAlert._initialText=null;a.titleAlert._settings=null;a.titleAlert._focus=function(){a.titleAlert.hasFocus=!0;if(a.titleAlert._running&&a.titleAlert._settings.stopOnFocus){var b=a.titleAlert._initialText;
a.titleAlert.stop();setTimeout(function(){a.titleAlert._running||(document.title=".",document.title=b)},1E3)}};a.titleAlert._blur=function(){a.titleAlert.hasFocus=!1};a(window).bind("focus",a.titleAlert._focus);a(window).bind("blur",a.titleAlert._blur)})(jQuery);
$(function(){var a=$(".demo-animation").find("video");$(".actions-search_box").on("click",function(){$(this).addClass("focused").find("input").focus()});$(".landing_page-featured").fitVids();$(".actions-search_box form").on("submit",function(){var a=$(this).find("input").val().trim();a&&(window.location="http://"+WRAP_GENIUS_HOST+"/"+a);return!1});$(".landing_page-demo").on("click",".demo-animation",function(){$(".demo-animation").addClass("animation--playing");a.length&&a.get(0).play();$(".demo-clickjacker").addClass("clickjacker--active")}).on("click",
".animation--playing, .demo-clickjacker",function(){$(".demo-animation").removeClass("animation--playing");if(a.length){var b=a.get(0);b.pause();b.currentTime=0}$(".demo-clickjacker").removeClass("clickjacker--active")});if(window.chrome&&chrome.app)if(chrome.app.isInstalled)$(".actions-extension").addClass("installed");else $(".actions-extension").on("click",function(){chrome.webstore.install(CHROME_EXTENSION_STORE_URL,function(){$(".actions-extension").addClass("installed")},function(){window.location=
CHROME_EXTENSION_STORE_URL});return!1})});var mejs=mejs||{};mejs.version="2.10.3";mejs.meIndex=0;
mejs.plugins={silverlight:[{version:[3,0],types:"video/mp4 video/m4v video/mov video/wmv audio/wma audio/m4a audio/mp3 audio/wav audio/mpeg".split(" ")}],flash:[{version:[9,0,124],types:"video/mp4 video/m4v video/mov video/flv video/rtmp video/x-flv audio/flv audio/x-flv audio/mp3 audio/m4a audio/mpeg video/youtube video/x-youtube".split(" ")}],youtube:[{version:null,types:["video/youtube","video/x-youtube"]}],vimeo:[{version:null,types:["video/vimeo","video/x-vimeo"]}]};
mejs.Utility={encodeUrl:function(a){return encodeURIComponent(a)},escapeHTML:function(a){return a.toString().split("&").join("&amp;").split("<").join("&lt;").split('"').join("&quot;")},absolutizeUrl:function(a){var b=document.createElement("div");b.innerHTML='<a href="'+this.escapeHTML(a)+'">x</a>';return b.firstChild.href},getScriptPath:function(a){for(var b=0,c,d="",e="",f,h=document.getElementsByTagName("script"),g=h.length,k=a.length;b<g;b++){f=h[b].src;for(c=0;c<k;c++)if(e=a[c],-1<f.indexOf(e)){d=
f.substring(0,f.indexOf(e));break}if(""!==d)break}return d},secondsToTimeCode:function(a,b,c,d){"undefined"==typeof c?c=!1:"undefined"==typeof d&&(d=25);var e=Math.floor(a/3600)%24,f=Math.floor(a/60)%60,h=Math.floor(a%60);a=Math.floor((a%1*d).toFixed(3));return(b||0<e?(10>e?"0"+e:e)+":":"")+(10>f?"0"+f:f)+":"+(10>h?"0"+h:h)+(c?":"+(10>a?"0"+a:a):"")},timeCodeToSeconds:function(a,b,c,d){"undefined"==typeof c?c=!1:"undefined"==typeof d&&(d=25);a=a.split(":");b=parseInt(a[0],10);var e=parseInt(a[1],
10),f=parseInt(a[2],10),h=0;c&&(h=parseInt(a[3])/d);return 3600*b+60*e+f+h},convertSMPTEtoSeconds:function(a){if("string"!=typeof a)return!1;a=a.replace(",",".");var b=0,c=-1!=a.indexOf(".")?a.split(".")[1].length:0,d=1;a=a.split(":").reverse();for(var e=0;e<a.length;e++)d=1,0<e&&(d=Math.pow(60,e)),b+=Number(a[e])*d;return Number(b.toFixed(c))},removeSwf:function(a){var b=document.getElementById(a);b&&"OBJECT"==b.nodeName&&(mejs.MediaFeatures.isIE?(b.style.display="none",function(){4==b.readyState?
mejs.Utility.removeObjectInIE(a):setTimeout(arguments.callee,10)}()):b.parentNode.removeChild(b))},removeObjectInIE:function(a){if(a=document.getElementById(a)){for(var b in a)"function"==typeof a[b]&&(a[b]=null);a.parentNode.removeChild(a)}}};
mejs.PluginDetector={hasPluginVersion:function(a,b){var c=this.plugins[a];b[1]=b[1]||0;b[2]=b[2]||0;return c[0]>b[0]||c[0]==b[0]&&c[1]>b[1]||c[0]==b[0]&&c[1]==b[1]&&c[2]>=b[2]?!0:!1},nav:window.navigator,ua:window.navigator.userAgent.toLowerCase(),plugins:[],addPlugin:function(a,b,c,d,e){this.plugins[a]=this.detectPlugin(b,c,d,e)},detectPlugin:function(a,b,c,d){var e=[0,0,0],f;if("undefined"!=typeof this.nav.plugins&&"object"==typeof this.nav.plugins[a]){if((c=this.nav.plugins[a].description)&&("undefined"==
typeof this.nav.mimeTypes||!this.nav.mimeTypes[b]||this.nav.mimeTypes[b].enabledPlugin))for(e=c.replace(a,"").replace(/^\s+/,"").replace(/\sr/gi,".").split("."),a=0;a<e.length;a++)e[a]=parseInt(e[a].match(/\d+/),10)}else if("undefined"!=typeof window.ActiveXObject)try{if(f=new ActiveXObject(c))e=d(f)}catch(h){}return e}};
mejs.PluginDetector.addPlugin("flash","Shockwave Flash","application/x-shockwave-flash","ShockwaveFlash.ShockwaveFlash",function(a){var b=[];if(a=a.GetVariable("$version"))a=a.split(" ")[1].split(","),b=[parseInt(a[0],10),parseInt(a[1],10),parseInt(a[2],10)];return b});
mejs.PluginDetector.addPlugin("silverlight","Silverlight Plug-In","application/x-silverlight-2","AgControl.AgControl",function(a){var b=[0,0,0,0],c=function(a,b,c,h){for(;a.isVersionSupported(b[0]+"."+b[1]+"."+b[2]+"."+b[3]);)b[c]+=h;b[c]-=h};c(a,b,0,1);c(a,b,1,1);c(a,b,2,1E4);c(a,b,2,1E3);c(a,b,2,100);c(a,b,2,10);c(a,b,2,1);c(a,b,3,1);return b});
mejs.MediaFeatures={init:function(){var a=this,b=document,c=mejs.PluginDetector.nav,d=mejs.PluginDetector.ua.toLowerCase(),e,f=["source","track","audio","video"];a.isiPad=null!==d.match(/ipad/i);a.isiPhone=null!==d.match(/iphone/i);a.isiOS=a.isiPhone||a.isiPad;a.isAndroid=null!==d.match(/android/i);a.isBustedAndroid=null!==d.match(/android 2\.[12]/);a.isIE=-1!=c.appName.toLowerCase().indexOf("microsoft");a.isChrome=null!==d.match(/chrome/gi);a.isFirefox=null!==d.match(/firefox/gi);a.isWebkit=null!==
d.match(/webkit/gi);a.isGecko=null!==d.match(/gecko/gi)&&!a.isWebkit;a.isOpera=null!==d.match(/opera/gi);a.hasTouch="ontouchstart"in window;a.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect;for(c=0;c<f.length;c++)e=document.createElement(f[c]);a.supportsMediaTag="undefined"!==typeof e.canPlayType||a.isBustedAndroid;a.hasSemiNativeFullScreen="undefined"!==typeof e.webkitEnterFullscreen;a.hasWebkitNativeFullScreen="undefined"!==typeof e.webkitRequestFullScreen;
a.hasMozNativeFullScreen="undefined"!==typeof e.mozRequestFullScreen;a.hasTrueNativeFullScreen=a.hasWebkitNativeFullScreen||a.hasMozNativeFullScreen;a.nativeFullScreenEnabled=a.hasTrueNativeFullScreen;a.hasMozNativeFullScreen&&(a.nativeFullScreenEnabled=e.mozFullScreenEnabled);this.isChrome&&(a.hasSemiNativeFullScreen=!1);a.hasTrueNativeFullScreen&&(a.fullScreenEventName=a.hasWebkitNativeFullScreen?"webkitfullscreenchange":"mozfullscreenchange",a.isFullScreen=function(){if(e.mozRequestFullScreen)return b.mozFullScreen;
if(e.webkitRequestFullScreen)return b.webkitIsFullScreen},a.requestFullScreen=function(b){a.hasWebkitNativeFullScreen?b.webkitRequestFullScreen():a.hasMozNativeFullScreen&&b.mozRequestFullScreen()},a.cancelFullScreen=function(){a.hasWebkitNativeFullScreen?document.webkitCancelFullScreen():a.hasMozNativeFullScreen&&document.mozCancelFullScreen()});a.hasSemiNativeFullScreen&&d.match(/mac os x 10_5/i)&&(a.hasNativeFullScreen=!1,a.hasSemiNativeFullScreen=!1)}};mejs.MediaFeatures.init();
mejs.HtmlMediaElement={pluginType:"native",isFullScreen:!1,setCurrentTime:function(a){this.currentTime=a},setMuted:function(a){this.muted=a},setVolume:function(a){this.volume=a},stop:function(){this.pause()},setSrc:function(a){for(var b=this.getElementsByTagName("source");0<b.length;)this.removeChild(b[0]);if("string"==typeof a)this.src=a;else for(var c,b=0;b<a.length;b++)if(c=a[b],this.canPlayType(c.type)){this.src=c.src;break}},setVideoSize:function(a,b){this.width=a;this.height=b}};
mejs.PluginMediaElement=function(a,b,c){this.id=a;this.pluginType=b;this.src=c;this.events={};this.attributes={}};
mejs.PluginMediaElement.prototype={pluginElement:null,pluginType:"",isFullScreen:!1,playbackRate:-1,defaultPlaybackRate:-1,seekable:[],played:[],paused:!0,ended:!1,seeking:!1,duration:0,error:null,tagName:"",muted:!1,volume:1,currentTime:0,play:function(){null!=this.pluginApi&&("youtube"==this.pluginType?this.pluginApi.playVideo():this.pluginApi.playMedia(),this.paused=!1)},load:function(){null!=this.pluginApi&&("youtube"!=this.pluginType&&this.pluginApi.loadMedia(),this.paused=!1)},pause:function(){null!=
this.pluginApi&&("youtube"==this.pluginType?this.pluginApi.pauseVideo():this.pluginApi.pauseMedia(),this.paused=!0)},stop:function(){null!=this.pluginApi&&("youtube"==this.pluginType?this.pluginApi.stopVideo():this.pluginApi.stopMedia(),this.paused=!0)},canPlayType:function(a){var b,c,d,e=mejs.plugins[this.pluginType];for(b=0;b<e.length;b++)if(d=e[b],mejs.PluginDetector.hasPluginVersion(this.pluginType,d.version))for(c=0;c<d.types.length;c++)if(a==d.types[c])return!0;return!1},positionFullscreenButton:function(a,
b,c){null!=this.pluginApi&&this.pluginApi.positionFullscreenButton&&this.pluginApi.positionFullscreenButton(a,b,c)},hideFullscreenButton:function(){null!=this.pluginApi&&this.pluginApi.hideFullscreenButton&&this.pluginApi.hideFullscreenButton()},setSrc:function(a){if("string"==typeof a)this.pluginApi.setSrc(mejs.Utility.absolutizeUrl(a)),this.src=mejs.Utility.absolutizeUrl(a);else{var b,c;for(b=0;b<a.length;b++)if(c=a[b],this.canPlayType(c.type)){this.pluginApi.setSrc(mejs.Utility.absolutizeUrl(c.src));
this.src=mejs.Utility.absolutizeUrl(a);break}}},setCurrentTime:function(a){null!=this.pluginApi&&("youtube"==this.pluginType?this.pluginApi.seekTo(a):this.pluginApi.setCurrentTime(a),this.currentTime=a)},setVolume:function(a){null!=this.pluginApi&&("youtube"==this.pluginType?this.pluginApi.setVolume(100*a):this.pluginApi.setVolume(a),this.volume=a)},setMuted:function(a){null!=this.pluginApi&&("youtube"==this.pluginType?(a?this.pluginApi.mute():this.pluginApi.unMute(),this.muted=a,this.dispatchEvent("volumechange")):
this.pluginApi.setMuted(a),this.muted=a)},setVideoSize:function(a,b){this.pluginElement.style&&(this.pluginElement.style.width=a+"px",this.pluginElement.style.height=b+"px");null!=this.pluginApi&&this.pluginApi.setVideoSize&&this.pluginApi.setVideoSize(a,b)},setFullscreen:function(a){null!=this.pluginApi&&this.pluginApi.setFullscreen&&this.pluginApi.setFullscreen(a)},enterFullScreen:function(){null!=this.pluginApi&&this.pluginApi.setFullscreen&&this.setFullscreen(!0)},exitFullScreen:function(){null!=
this.pluginApi&&this.pluginApi.setFullscreen&&this.setFullscreen(!1)},addEventListener:function(a,b){this.events[a]=this.events[a]||[];this.events[a].push(b)},removeEventListener:function(a,b){if(!a)return this.events={},!0;var c=this.events[a];if(!c)return!0;if(!b)return this.events[a]=[],!0;for(i=0;i<c.length;i++)if(c[i]===b)return this.events[a].splice(i,1),!0;return!1},dispatchEvent:function(a){var b,c,d=this.events[a];if(d)for(c=Array.prototype.slice.call(arguments,1),b=0;b<d.length;b++)d[b].apply(null,
c)},hasAttribute:function(a){return a in this.attributes},removeAttribute:function(a){delete this.attributes[a]},getAttribute:function(a){return this.hasAttribute(a)?this.attributes[a]:""},setAttribute:function(a,b){this.attributes[a]=b},remove:function(){mejs.Utility.removeSwf(this.pluginElement.id)}};
mejs.MediaPluginBridge={pluginMediaElements:{},htmlMediaElements:{},registerPluginElement:function(a,b,c){this.pluginMediaElements[a]=b;this.htmlMediaElements[a]=c},initPlugin:function(a){var b=this.pluginMediaElements[a],c=this.htmlMediaElements[a];if(b){switch(b.pluginType){case "flash":b.pluginElement=b.pluginApi=document.getElementById(a);break;case "silverlight":b.pluginElement=document.getElementById(b.id),b.pluginApi=b.pluginElement.Content.MediaElementJS}null!=b.pluginApi&&b.success&&b.success(b,
c)}},fireEvent:function(a,b,c){var d,e;a=this.pluginMediaElements[a];b={type:b,target:a};for(d in c)a[d]=c[d],b[d]=c[d];e=c.bufferedTime||0;b.target.buffered=b.buffered={start:function(){return 0},end:function(){return e},length:1};a.dispatchEvent(b.type,b)}};
mejs.MediaElementDefaults={mode:"auto",plugins:["flash","silverlight","youtube","vimeo"],enablePluginDebug:!1,type:"",pluginPath:mejs.Utility.getScriptPath(["mediaelement.js","mediaelement.min.js","mediaelement-and-player.js","mediaelement-and-player.min.js"]),flashName:"flashmediaelement.swf",flashStreamer:"",enablePluginSmoothing:!1,silverlightName:"silverlightmediaelement.xap",defaultVideoWidth:480,defaultVideoHeight:270,pluginWidth:-1,pluginHeight:-1,pluginVars:[],timerRate:250,startVolume:.8,
success:function(){},error:function(){}};mejs.MediaElement=function(a,b){return mejs.HtmlMediaElementShim.create(a,b)};
mejs.HtmlMediaElementShim={create:function(a,b){var c=mejs.MediaElementDefaults,d="string"==typeof a?document.getElementById(a):a,e=d.tagName.toLowerCase(),f="audio"===e||"video"===e,h=f?d.getAttribute("src"):d.getAttribute("href"),e=d.getAttribute("poster"),g=d.getAttribute("autoplay"),k=d.getAttribute("preload"),n=d.getAttribute("controls"),q;for(q in b)c[q]=b[q];e="undefined"==typeof e||null===e?"":e;k="undefined"==typeof k||null===k||"false"===k?"none":k;g=!("undefined"==typeof g||null===g||"false"===
g);n=!("undefined"==typeof n||null===n||"false"===n);q=this.determinePlayback(d,c,mejs.MediaFeatures.supportsMediaTag,f,"undefined"==typeof h||null===h||""==h?null:h);q.url=null!==q.url?mejs.Utility.absolutizeUrl(q.url):"";if("native"==q.method)return mejs.MediaFeatures.isBustedAndroid&&(d.src=q.url,d.addEventListener("click",function(){d.play()},!1)),this.updateNative(q,c,g,k);if(""!==q.method)return this.createPlugin(q,c,e,g,k,n);this.createErrorMessage(q,c,e);return this},determinePlayback:function(a,
b,c,d,e){var f=[],h,g,k,n={method:"",url:"",htmlMediaElement:a,isVideo:"audio"!=a.tagName.toLowerCase()},q;if("undefined"!=typeof b.type&&""!==b.type)if("string"==typeof b.type)f.push({type:b.type,url:e});else for(h=0;h<b.type.length;h++)f.push({type:b.type[h],url:e});else if(null!==e)k=this.formatType(e,a.getAttribute("type")),f.push({type:k,url:e});else for(h=0;h<a.childNodes.length;h++)g=a.childNodes[h],1==g.nodeType&&"source"==g.tagName.toLowerCase()&&(e=g.getAttribute("src"),k=this.formatType(e,
g.getAttribute("type")),g=g.getAttribute("media"),(!g||!window.matchMedia||window.matchMedia&&window.matchMedia(g).matches)&&f.push({type:k,url:e}));!d&&0<f.length&&null!==f[0].url&&-1<this.getTypeFromFile(f[0].url).indexOf("audio")&&(n.isVideo=!1);mejs.MediaFeatures.isBustedAndroid&&(a.canPlayType=function(a){return null!==a.match(/video\/(mp4|m4v)/gi)?"maybe":""});if(c&&("auto"===b.mode||"auto_plugin"===b.mode||"native"===b.mode)){d||(h=document.createElement(n.isVideo?"video":"audio"),a.parentNode.insertBefore(h,
a),a.style.display="none",n.htmlMediaElement=a=h);for(h=0;h<f.length;h++)if(""!==a.canPlayType(f[h].type).replace(/no/,"")||""!==a.canPlayType(f[h].type.replace(/mp3/,"mpeg")).replace(/no/,"")){n.method="native";n.url=f[h].url;break}if("native"===n.method&&(null!==n.url&&(a.src=n.url),"auto_plugin"!==b.mode))return n}if("auto"===b.mode||"auto_plugin"===b.mode||"shim"===b.mode)for(h=0;h<f.length;h++)for(k=f[h].type,a=0;a<b.plugins.length;a++)for(e=b.plugins[a],g=mejs.plugins[e],c=0;c<g.length;c++)if(q=
g[c],null==q.version||mejs.PluginDetector.hasPluginVersion(e,q.version))for(d=0;d<q.types.length;d++)if(k==q.types[d])return n.method=e,n.url=f[h].url,n;if("auto_plugin"===b.mode&&"native"===n.method)return n;""===n.method&&0<f.length&&(n.url=f[0].url);return n},formatType:function(a,b){return a&&!b?this.getTypeFromFile(a):b&&~b.indexOf(";")?b.substr(0,b.indexOf(";")):b},getTypeFromFile:function(a){a=a.split("?")[0];a=a.substring(a.lastIndexOf(".")+1);return(/(mp4|m4v|ogg|ogv|webm|webmv|flv|wmv|mpeg|mov)/gi.test(a)?
"video":"audio")+"/"+this.getTypeFromExtension(a)},getTypeFromExtension:function(a){switch(a){case "mp4":case "m4v":return"mp4";case "webm":case "webma":case "webmv":return"webm";case "ogg":case "oga":case "ogv":return"ogg";default:return a}},createErrorMessage:function(a,b,c){var d=a.htmlMediaElement,e=document.createElement("div");e.className="me-cannotplay";try{e.style.width=d.width+"px",e.style.height=d.height+"px"}catch(f){}e.innerHTML=""!==c?'<a href="'+a.url+'"><img src="'+c+'" width="100%" height="100%" /></a>':
'<a href="'+a.url+'"><span>'+mejs.i18n.t("Download File")+"</span></a>";d.parentNode.insertBefore(e,d);d.style.display="none";b.error(d)},createPlugin:function(a,b,c,d,e,f){c=a.htmlMediaElement;var h=1,g=1,k="me_"+a.method+"_"+mejs.meIndex++,n=new mejs.PluginMediaElement(k,a.method,a.url),q=document.createElement("div"),m;n.tagName=c.tagName;for(m=0;m<c.attributes.length;m++){var p=c.attributes[m];1==p.specified&&n.setAttribute(p.name,p.value)}for(m=c.parentNode;null!==m&&"body"!=m.tagName.toLowerCase();){if("p"==
m.parentNode.tagName.toLowerCase()){m.parentNode.parentNode.insertBefore(m,m.parentNode);break}m=m.parentNode}a.isVideo?(h=0<b.videoWidth?b.videoWidth:null!==c.getAttribute("width")?c.getAttribute("width"):b.defaultVideoWidth,g=0<b.videoHeight?b.videoHeight:null!==c.getAttribute("height")?c.getAttribute("height"):b.defaultVideoHeight,h=mejs.Utility.encodeUrl(h),g=mejs.Utility.encodeUrl(g)):b.enablePluginDebug&&(h=320,g=240);n.success=b.success;mejs.MediaPluginBridge.registerPluginElement(k,n,c);q.className=
"me-plugin";q.id=k+"_container";a.isVideo?c.parentNode.insertBefore(q,c):document.body.insertBefore(q,document.body.childNodes[0]);d=["id="+k,"isvideo="+(a.isVideo?"true":"false"),"autoplay="+(d?"true":"false"),"preload="+e,"width="+h,"startvolume="+b.startVolume,"timerrate="+b.timerRate,"flashstreamer="+b.flashStreamer,"height="+g];null!==a.url&&("flash"==a.method?d.push("file="+mejs.Utility.encodeUrl(a.url)):d.push("file="+a.url));b.enablePluginDebug&&d.push("debug=true");b.enablePluginSmoothing&&
d.push("smoothing=true");f&&d.push("controls=true");b.pluginVars&&(d=d.concat(b.pluginVars));switch(a.method){case "silverlight":q.innerHTML='<object data="data:application/x-silverlight-2," type="application/x-silverlight-2" id="'+k+'" name="'+k+'" width="'+h+'" height="'+g+'"><param name="initParams" value="'+d.join(",")+'" /><param name="windowless" value="true" /><param name="background" value="black" /><param name="minRuntimeVersion" value="3.0.0.0" /><param name="autoUpgrade" value="true" /><param name="source" value="'+
b.pluginPath+b.silverlightName+'" /></object>';break;case "flash":mejs.MediaFeatures.isIE?(a=document.createElement("div"),q.appendChild(a),a.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab" id="'+k+'" width="'+h+'" height="'+g+'"><param name="movie" value="'+b.pluginPath+b.flashName+"?x="+new Date+'" /><param name="flashvars" value="'+d.join("&amp;")+'" /><param name="quality" value="high" /><param name="bgcolor" value="#000000" /><param name="wmode" value="transparent" /><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="true" /></object>'):
q.innerHTML='<embed id="'+k+'" name="'+k+'" play="true" loop="false" quality="high" bgcolor="#000000" wmode="transparent" allowScriptAccess="always" allowFullScreen="true" type="application/x-shockwave-flash" pluginspage="//www.macromedia.com/go/getflashplayer" src="'+b.pluginPath+b.flashName+'" flashvars="'+d.join("&")+'" width="'+h+'" height="'+g+'"></embed>';break;case "youtube":b=a.url.substr(a.url.lastIndexOf("=")+1);youtubeSettings={container:q,containerId:q.id,pluginMediaElement:n,pluginId:k,
videoId:b,height:g,width:h};mejs.PluginDetector.hasPluginVersion("flash",[10,0,0])?mejs.YouTubeApi.createFlash(youtubeSettings):mejs.YouTubeApi.enqueueIframe(youtubeSettings);break;case "vimeo":n.vimeoid=a.url.substr(a.url.lastIndexOf("/")+1),q.innerHTML='<iframe src="http://player.vimeo.com/video/'+n.vimeoid+'?portrait=0&byline=0&title=0" width="'+h+'" height="'+g+'" frameborder="0"></iframe>'}c.style.display="none";return n},updateNative:function(a,b){var c=a.htmlMediaElement,d;for(d in mejs.HtmlMediaElement)c[d]=
mejs.HtmlMediaElement[d];b.success(c,c);return c}};
mejs.YouTubeApi={isIframeStarted:!1,isIframeLoaded:!1,loadIframeApi:function(){if(!this.isIframeStarted){var a=document.createElement("script");a.src="http://www.youtube.com/player_api";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b);this.isIframeStarted=!0}},iframeQueue:[],enqueueIframe:function(a){this.isLoaded?this.createIframe(a):(this.loadIframeApi(),this.iframeQueue.push(a))},createIframe:function(a){var b=a.pluginMediaElement,c=new YT.Player(a.containerId,{height:a.height,
width:a.width,videoId:a.videoId,playerVars:{controls:0},events:{onReady:function(){a.pluginMediaElement.pluginApi=c;mejs.MediaPluginBridge.initPlugin(a.pluginId);setInterval(function(){mejs.YouTubeApi.createEvent(c,b,"timeupdate")},250)},onStateChange:function(a){mejs.YouTubeApi.handleStateChange(a.data,c,b)}}})},createEvent:function(a,b,c){c={type:c,target:b};if(a&&a.getDuration){b.currentTime=c.currentTime=a.getCurrentTime();b.duration=c.duration=a.getDuration();c.paused=b.paused;c.ended=b.ended;
c.muted=a.isMuted();c.volume=a.getVolume()/100;c.bytesTotal=a.getVideoBytesTotal();c.bufferedBytes=a.getVideoBytesLoaded();var d=c.bufferedBytes/c.bytesTotal*c.duration;c.target.buffered=c.buffered={start:function(){return 0},end:function(){return d},length:1}}b.dispatchEvent(c.type,c)},iFrameReady:function(){for(this.isIframeLoaded=this.isLoaded=!0;0<this.iframeQueue.length;)this.createIframe(this.iframeQueue.pop())},flashPlayers:{},createFlash:function(a){this.flashPlayers[a.pluginId]=a;var b,c=
"http://www.youtube.com/apiplayer?enablejsapi=1&amp;playerapiid="+a.pluginId+"&amp;version=3&amp;autoplay=0&amp;controls=0&amp;modestbranding=1&loop=0";mejs.MediaFeatures.isIE?(b=document.createElement("div"),a.container.appendChild(b),b.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab" id="'+a.pluginId+'" width="'+a.width+'" height="'+a.height+'"><param name="movie" value="'+c+'" /><param name="wmode" value="transparent" /><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="true" /></object>'):
a.container.innerHTML='<object type="application/x-shockwave-flash" id="'+a.pluginId+'" data="'+c+'" width="'+a.width+'" height="'+a.height+'" style="visibility: visible; "><param name="allowScriptAccess" value="always"><param name="wmode" value="transparent"></object>'},flashReady:function(a){var b=this.flashPlayers[a],c=document.getElementById(a),d=b.pluginMediaElement;d.pluginApi=d.pluginElement=c;mejs.MediaPluginBridge.initPlugin(a);c.cueVideoById(b.videoId);a=b.containerId+"_callback";window[a]=
function(a){mejs.YouTubeApi.handleStateChange(a,c,d)};c.addEventListener("onStateChange",a);setInterval(function(){mejs.YouTubeApi.createEvent(c,d,"timeupdate")},250)},handleStateChange:function(a,b,c){switch(a){case -1:c.paused=!0;c.ended=!0;mejs.YouTubeApi.createEvent(b,c,"loadedmetadata");break;case 0:c.paused=!1;c.ended=!0;mejs.YouTubeApi.createEvent(b,c,"ended");break;case 1:c.paused=!1;c.ended=!1;mejs.YouTubeApi.createEvent(b,c,"play");mejs.YouTubeApi.createEvent(b,c,"playing");break;case 2:c.paused=
!0;c.ended=!1;mejs.YouTubeApi.createEvent(b,c,"pause");break;case 3:mejs.YouTubeApi.createEvent(b,c,"progress")}}};function onYouTubePlayerAPIReady(){mejs.YouTubeApi.iFrameReady()}function onYouTubePlayerReady(a){mejs.YouTubeApi.flashReady(a)}window.mejs=mejs;window.MediaElement=mejs.MediaElement;
(function(a,b,c){var d={locale:{strings:{}},methods:{}};d.locale.getLanguage=function(){return{language:navigator.language}};d.locale.INIT_LANGUAGE=d.locale.getLanguage();d.methods.checkPlain=function(a){var b,c,d={"&":"&amp;",'"':"&quot;","<":"&lt;",">":"&gt;"};a=String(a);for(b in d)d.hasOwnProperty(b)&&(c=RegExp(b,"g"),a=a.replace(c,d[b]));return a};d.methods.formatString=function(a,b){for(var c in b){switch(c.charAt(0)){case "@":b[c]=d.methods.checkPlain(b[c]);break;case "!":break;default:b[c]=
'<em class="placeholder">'+d.methods.checkPlain(b[c])+"</em>"}a=a.replace(c,b[c])}return a};d.methods.t=function(a,b,c){d.locale.strings&&d.locale.strings[c.context]&&d.locale.strings[c.context][a]&&(a=d.locale.strings[c.context][a]);b&&(a=d.methods.formatString(a,b));return a};d.t=function(a,b,c){if("string"===typeof a&&0<a.length){var g=d.locale.getLanguage();c=c||{context:g.language};return d.methods.t(a,b,c)}throw{name:"InvalidArgumentException",message:"First argument is either not a string or empty."};
};c.i18n=d})(jQuery,document,mejs);(function(a){a.de={Fullscreen:"Vollbild","Go Fullscreen":"Vollbild an","Turn off Fullscreen":"Vollbild aus",Close:"Schlie\u00dfen"}})(mejs.i18n.locale.strings);"undefined"!=typeof jQuery?mejs.$=jQuery:"undefined"!=typeof ender&&(mejs.$=ender);
(function(a){mejs.MepDefaults={poster:"",defaultVideoWidth:480,defaultVideoHeight:270,videoWidth:-1,videoHeight:-1,defaultAudioWidth:400,defaultAudioHeight:30,defaultSeekBackwardInterval:function(a){return.05*a.duration},defaultSeekForwardInterval:function(a){return.05*a.duration},audioWidth:-1,audioHeight:-1,startVolume:.8,loop:!1,autoRewind:!0,enableAutosize:!0,alwaysShowHours:!1,showTimecodeFrameCount:!1,framesPerSecond:25,autosizeProgress:!0,alwaysShowControls:!1,clickToPlayPause:!0,iPadUseNativeControls:!1,
iPhoneUseNativeControls:!1,AndroidUseNativeControls:!1,features:"playpause current progress duration tracks volume fullscreen".split(" "),isVideo:!0,enableKeyboard:!0,pauseOtherPlayers:!0,keyActions:[{keys:[32,179],action:function(a,c){c.paused||c.ended?c.play():c.pause()}},{keys:[38],action:function(a,c){c.setVolume(Math.min(c.volume+.1,1))}},{keys:[40],action:function(a,c){c.setVolume(Math.max(c.volume-.1,0))}},{keys:[37,227],action:function(a,c){if(!isNaN(c.duration)&&0<c.duration){a.isVideo&&
(a.showControls(),a.startControlsTimer());var d=Math.max(c.currentTime-a.options.defaultSeekBackwardInterval(c),0);c.setCurrentTime(d)}}},{keys:[39,228],action:function(a,c){if(!isNaN(c.duration)&&0<c.duration){a.isVideo&&(a.showControls(),a.startControlsTimer());var d=Math.min(c.currentTime+a.options.defaultSeekForwardInterval(c),c.duration);c.setCurrentTime(d)}}},{keys:[70],action:function(a){"undefined"!=typeof a.enterFullScreen&&(a.isFullScreen?a.exitFullScreen():a.enterFullScreen())}}]};mejs.mepIndex=
0;mejs.players=[];mejs.MediaElementPlayer=function(b,c){if(!(this instanceof mejs.MediaElementPlayer))return new mejs.MediaElementPlayer(b,c);this.$media=this.$node=a(b);this.node=this.media=this.$media[0];if("undefined"!=typeof this.node.player)return this.node.player;this.node.player=this;"undefined"==typeof c&&(c=this.$node.data("mejsoptions"));this.options=a.extend({},mejs.MepDefaults,c);mejs.players.push(this);this.init();return this};mejs.MediaElementPlayer.prototype={hasFocus:!1,controlsAreVisible:!0,
init:function(){var b=this,c=mejs.MediaFeatures,d=a.extend(!0,{},b.options,{success:function(a,c){b.meReady(a,c)},error:function(a){b.handleError(a)}}),e=b.media.tagName.toLowerCase();b.isDynamic="audio"!==e&&"video"!==e;b.isVideo=b.isDynamic?b.options.isVideo:"audio"!==e&&b.options.isVideo;c.isiPad&&b.options.iPadUseNativeControls||c.isiPhone&&b.options.iPhoneUseNativeControls?(b.$media.attr("controls","controls"),c.isiPad&&null!==b.media.getAttribute("autoplay")&&(b.media.load(),b.media.play())):
c.isAndroid&&b.options.AndroidUseNativeControls||(b.$media.removeAttr("controls"),b.id="mep_"+mejs.mepIndex++,b.container=a('<div id="'+b.id+'" class="mejs-container '+(mejs.MediaFeatures.svg?"svg":"no-svg")+'"><div class="mejs-inner"><div class="mejs-mediaelement"></div><div class="mejs-layers"></div><div class="mejs-controls"></div><div class="mejs-clear"></div></div></div>').addClass(b.$media[0].className).insertBefore(b.$media),b.container.addClass((c.isAndroid?"mejs-android ":"")+(c.isiOS?"mejs-ios ":
"")+(c.isiPad?"mejs-ipad ":"")+(c.isiPhone?"mejs-iphone ":"")+(b.isVideo?"mejs-video ":"mejs-audio ")),c.isiOS?(c=b.$media.clone(),b.container.find(".mejs-mediaelement").append(c),b.$media.remove(),b.$node=b.$media=c,b.node=b.media=c[0]):b.container.find(".mejs-mediaelement").append(b.$media),b.controls=b.container.find(".mejs-controls"),b.layers=b.container.find(".mejs-layers"),c=b.isVideo?"video":"audio",e=c.substring(0,1).toUpperCase()+c.substring(1),b.width=0<b.options[c+"Width"]||-1<b.options[c+
"Width"].toString().indexOf("%")?b.options[c+"Width"]:""!==b.media.style.width&&null!==b.media.style.width?b.media.style.width:null!==b.media.getAttribute("width")?b.$media.attr("width"):b.options["default"+e+"Width"],b.height=0<b.options[c+"Height"]||-1<b.options[c+"Height"].toString().indexOf("%")?b.options[c+"Height"]:""!==b.media.style.height&&null!==b.media.style.height?b.media.style.height:null!==b.$media[0].getAttribute("height")?b.$media.attr("height"):b.options["default"+e+"Height"],b.setPlayerSize(b.width,
b.height),d.pluginWidth=b.height,d.pluginHeight=b.width);mejs.MediaElement(b.$media[0],d);b.container.trigger("controlsshown")},showControls:function(a){var c=this;c.controlsAreVisible||("undefined"==typeof a||a?(c.controls.css("visibility","visible").stop(!0,!0).fadeIn(200,function(){c.controlsAreVisible=!0;c.container.trigger("controlsshown")}),c.container.find(".mejs-control").css("visibility","visible").stop(!0,!0).fadeIn(200,function(){c.controlsAreVisible=!0})):(c.controls.css("visibility",
"visible").css("display","block"),c.container.find(".mejs-control").css("visibility","visible").css("display","block"),c.controlsAreVisible=!0,c.container.trigger("controlsshown")),c.setControlsSize())},hideControls:function(b){var c=this;c.controlsAreVisible&&("undefined"==typeof b||b?(c.controls.stop(!0,!0).fadeOut(200,function(){a(this).css("visibility","hidden").css("display","block");c.controlsAreVisible=!1;c.container.trigger("controlshidden")}),c.container.find(".mejs-control").stop(!0,!0).fadeOut(200,
function(){a(this).css("visibility","hidden").css("display","block")})):(c.controls.css("visibility","hidden").css("display","block"),c.container.find(".mejs-control").css("visibility","hidden").css("display","block"),c.controlsAreVisible=!1,c.container.trigger("controlshidden")))},controlsTimer:null,startControlsTimer:function(a){var c=this;a="undefined"!=typeof a?a:1500;c.killControlsTimer("start");c.controlsTimer=setTimeout(function(){c.hideControls();c.killControlsTimer("hide")},a)},killControlsTimer:function(){null!==
this.controlsTimer&&(clearTimeout(this.controlsTimer),delete this.controlsTimer,this.controlsTimer=null)},controlsEnabled:!0,disableControls:function(){this.killControlsTimer();this.hideControls(!1);this.controlsEnabled=!1},enableControls:function(){this.showControls(!1);this.controlsEnabled=!0},meReady:function(b,c){var d=this,e=mejs.MediaFeatures,f=c.getAttribute("autoplay"),f=!("undefined"==typeof f||null===f||"false"===f),h;if(!d.created){d.created=!0;d.media=b;d.domNode=c;if(!(e.isAndroid&&d.options.AndroidUseNativeControls||
e.isiPad&&d.options.iPadUseNativeControls||e.isiPhone&&d.options.iPhoneUseNativeControls)){d.buildposter(d,d.controls,d.layers,d.media);d.buildkeyboard(d,d.controls,d.layers,d.media);d.buildoverlays(d,d.controls,d.layers,d.media);d.findTracks();for(h in d.options.features)if(e=d.options.features[h],d["build"+e])try{d["build"+e](d,d.controls,d.layers,d.media)}catch(g){}d.container.trigger("controlsready");d.setPlayerSize(d.width,d.height);d.setControlsSize();d.isVideo&&(mejs.MediaFeatures.hasTouch?
d.$media.bind("touchstart",function(){d.controlsAreVisible?d.hideControls(!1):d.controlsEnabled&&d.showControls(!1)}):(d.media.addEventListener("click",function(){d.options.clickToPlayPause&&(d.media.paused?d.media.play():d.media.pause())}),d.container.bind("mouseenter mouseover",function(){d.controlsEnabled&&!d.options.alwaysShowControls&&(d.killControlsTimer("enter"),d.showControls(),d.startControlsTimer(2500))}).bind("mousemove",function(){d.controlsEnabled&&(d.controlsAreVisible||d.showControls(),
d.options.alwaysShowControls||d.startControlsTimer(2500))}).bind("mouseleave",function(){d.controlsEnabled&&!d.media.paused&&!d.options.alwaysShowControls&&d.startControlsTimer(1E3)})),f&&!d.options.alwaysShowControls&&d.hideControls(),d.options.enableAutosize&&d.media.addEventListener("loadedmetadata",function(a){0>=d.options.videoHeight&&null===d.domNode.getAttribute("height")&&!isNaN(a.target.videoHeight)&&(d.setPlayerSize(a.target.videoWidth,a.target.videoHeight),d.setControlsSize(),d.media.setVideoSize(a.target.videoWidth,
a.target.videoHeight))},!1));b.addEventListener("play",function(){for(var a=0,b=mejs.players.length;a<b;a++){var c=mejs.players[a];c.id!=d.id&&d.options.pauseOtherPlayers&&!c.paused&&!c.ended&&c.pause();c.hasFocus=!1}d.hasFocus=!0},!1);d.media.addEventListener("ended",function(){if(d.options.autoRewind)try{d.media.setCurrentTime(0)}catch(a){}d.media.pause();d.setProgressRail&&d.setProgressRail();d.setCurrentRail&&d.setCurrentRail();d.options.loop?d.media.play():!d.options.alwaysShowControls&&d.controlsEnabled&&
d.showControls()},!1);d.media.addEventListener("loadedmetadata",function(){d.updateDuration&&d.updateDuration();d.updateCurrent&&d.updateCurrent();d.isFullScreen||(d.setPlayerSize(d.width,d.height),d.setControlsSize())},!1);setTimeout(function(){d.setPlayerSize(d.width,d.height);d.setControlsSize()},50);a(window).resize(function(){d.isFullScreen||mejs.MediaFeatures.hasTrueNativeFullScreen&&document.webkitIsFullScreen||d.setPlayerSize(d.width,d.height);d.setControlsSize()});"youtube"==d.media.pluginType&&
d.container.find(".mejs-overlay-play").hide()}f&&"native"==b.pluginType&&(b.load(),b.play());d.options.success&&("string"==typeof d.options.success?window[d.options.success](d.media,d.domNode,d):d.options.success(d.media,d.domNode,d))}},handleError:function(a){this.controls.hide();this.options.error&&this.options.error(a)},setPlayerSize:function(b,c){"undefined"!=typeof b&&(this.width=b);"undefined"!=typeof c&&(this.height=c);if(0<this.height.toString().indexOf("%")||"100%"===this.$node.css("max-width")||
this.$node[0].currentStyle&&"100%"===this.$node[0].currentStyle.maxWidth){var d=this.isVideo?this.media.videoWidth&&0<this.media.videoWidth?this.media.videoWidth:this.options.defaultVideoWidth:this.options.defaultAudioWidth,e=this.isVideo?this.media.videoHeight&&0<this.media.videoHeight?this.media.videoHeight:this.options.defaultVideoHeight:this.options.defaultAudioHeight,f=this.container.parent().closest(":visible").width(),d=this.isVideo||!this.options.autosizeProgress?parseInt(f*e/d,10):e;"body"===
this.container.parent()[0].tagName.toLowerCase()&&(f=a(window).width(),d=a(window).height());0!=d&&0!=f&&(this.container.width(f).height(d),this.$media.width("100%").height("100%"),this.container.find("object, embed, iframe").width("100%").height("100%"),this.isVideo&&this.media.setVideoSize&&this.media.setVideoSize(f,d),this.layers.children(".mejs-layer").width("100%").height("100%"))}else this.container.width(this.width).height(this.height),this.layers.children(".mejs-layer").width(this.width).height(this.height)},
setControlsSize:function(){var b=0,c=0,d=this.controls.find(".mejs-time-rail"),e=this.controls.find(".mejs-time-total");this.controls.find(".mejs-time-current");this.controls.find(".mejs-time-loaded");var f=d.siblings();this.options&&!this.options.autosizeProgress&&(c=parseInt(d.css("width")));0!==c&&c||(f.each(function(){"absolute"!=a(this).css("position")&&(b+=a(this).outerWidth(!0))}),c=this.controls.width()-b-(d.outerWidth(!0)-d.width()));d.width(c);e.width(c-(e.outerWidth(!0)-e.width()));this.setProgressRail&&
this.setProgressRail();this.setCurrentRail&&this.setCurrentRail()},buildposter:function(b,c,d,e){var f=a('<div class="mejs-poster mejs-layer"></div>').appendTo(d);c=b.$media.attr("poster");""!==b.options.poster&&(c=b.options.poster);""!==c&&null!=c?this.setPoster(c):f.hide();e.addEventListener("play",function(){f.hide()},!1)},setPoster:function(b){var c=this.container.find(".mejs-poster"),d=c.find("img");0==d.length&&(d=a('<img width="100%" height="100%" />').appendTo(c));d.attr("src",b)},buildoverlays:function(b,
c,d,e){var f=this;if(b.isVideo){var h=a('<div class="mejs-overlay mejs-layer"><div class="mejs-overlay-loading"><span></span></div></div>').hide().appendTo(d),g=a('<div class="mejs-overlay mejs-layer"><div class="mejs-overlay-error"></div></div>').hide().appendTo(d),k=a('<div class="mejs-overlay mejs-layer mejs-overlay-play"><div class="mejs-overlay-button"></div></div>').appendTo(d).click(function(){f.options.clickToPlayPause&&(e.paused?e.play():e.pause())});e.addEventListener("play",function(){k.hide();
h.hide();c.find(".mejs-time-buffering").hide();g.hide()},!1);e.addEventListener("playing",function(){k.hide();h.hide();c.find(".mejs-time-buffering").hide();g.hide()},!1);e.addEventListener("seeking",function(){h.show();c.find(".mejs-time-buffering").show()},!1);e.addEventListener("seeked",function(){h.hide();c.find(".mejs-time-buffering").hide()},!1);e.addEventListener("pause",function(){mejs.MediaFeatures.isiPhone||k.show()},!1);e.addEventListener("waiting",function(){h.show();c.find(".mejs-time-buffering").show()},
!1);e.addEventListener("loadeddata",function(){h.show();c.find(".mejs-time-buffering").show()},!1);e.addEventListener("canplay",function(){h.hide();c.find(".mejs-time-buffering").hide()},!1);e.addEventListener("error",function(){h.hide();c.find(".mejs-time-buffering").hide();g.show();g.find("mejs-overlay-error").html("Error loading this resource")},!1)}},buildkeyboard:function(b,c,d,e){a(document).keydown(function(a){if(b.hasFocus&&b.options.enableKeyboard)for(var c=0,d=b.options.keyActions.length;c<
d;c++)for(var k=b.options.keyActions[c],n=0,q=k.keys.length;n<q;n++)if(a.keyCode==k.keys[n])return a.preventDefault(),k.action(b,e,a.keyCode),!1;return!0});a(document).click(function(c){0==a(c.target).closest(".mejs-container").length&&(b.hasFocus=!1)})},findTracks:function(){var b=this,c=b.$media.find("track");b.tracks=[];c.each(function(c,e){e=a(e);b.tracks.push({srclang:e.attr("srclang").toLowerCase(),src:e.attr("src"),kind:e.attr("kind"),label:e.attr("label")||"",entries:[],isLoaded:!1})})},changeSkin:function(a){this.container[0].className=
"mejs-container "+a;this.setPlayerSize(this.width,this.height);this.setControlsSize()},play:function(){this.media.play()},pause:function(){this.media.pause()},load:function(){this.media.load()},setMuted:function(a){this.media.setMuted(a)},setCurrentTime:function(a){this.media.setCurrentTime(a)},getCurrentTime:function(){return this.media.currentTime},setVolume:function(a){this.media.setVolume(a)},getVolume:function(){return this.media.volume},setSrc:function(a){this.media.setSrc(a)},remove:function(){"flash"===
this.media.pluginType?this.media.remove():"native"===this.media.pluginType&&this.$media.prop("controls",!0);this.isDynamic||this.$node.insertBefore(this.container);this.container.remove()}};"undefined"!=typeof jQuery&&(jQuery.fn.mediaelementplayer=function(a){return this.each(function(){new mejs.MediaElementPlayer(this,a)})});a(document).ready(function(){a(".mejs-player").mediaelementplayer()});window.MediaElementPlayer=mejs.MediaElementPlayer})(mejs.$);
(function(a){a.extend(mejs.MepDefaults,{playpauseText:"Play/Pause"});a.extend(MediaElementPlayer.prototype,{buildplaypause:function(b,c,d,e){var f=a('<div class="mejs-button mejs-playpause-button mejs-play" ><button type="button" aria-controls="'+this.id+'" title="'+this.options.playpauseText+'"></button></div>').appendTo(c).click(function(a){a.preventDefault();e.paused?e.play():e.pause();return!1});e.addEventListener("play",function(){f.removeClass("mejs-play").addClass("mejs-pause")},!1);e.addEventListener("playing",
function(){f.removeClass("mejs-play").addClass("mejs-pause")},!1);e.addEventListener("pause",function(){f.removeClass("mejs-pause").addClass("mejs-play")},!1);e.addEventListener("paused",function(){f.removeClass("mejs-pause").addClass("mejs-play")},!1)}})})(mejs.$);
(function(a){a.extend(mejs.MepDefaults,{stopText:"Stop"});a.extend(MediaElementPlayer.prototype,{buildstop:function(b,c,d,e){a('<div class="mejs-button mejs-stop-button mejs-stop"><button type="button" aria-controls="'+this.id+'" title="'+this.options.stopText+'"></button></div>').appendTo(c).click(function(){e.paused||e.pause();0<e.currentTime&&(e.setCurrentTime(0),e.pause(),c.find(".mejs-time-current").width("0px"),c.find(".mejs-time-handle").css("left","0px"),c.find(".mejs-time-float-current").html(mejs.Utility.secondsToTimeCode(0)),
c.find(".mejs-currenttime").html(mejs.Utility.secondsToTimeCode(0)),d.find(".mejs-poster").show())})}})})(mejs.$);
(function(a){a.extend(MediaElementPlayer.prototype,{buildprogress:function(b,c,d,e){a('<div class="mejs-time-rail"><span class="mejs-time-total"><span class="mejs-time-buffering"></span><span class="mejs-time-loaded"></span><span class="mejs-time-current"></span><span class="mejs-time-handle"></span><span class="mejs-time-float"><span class="mejs-time-float-current">00:00</span><span class="mejs-time-float-corner"></span></span></span></div>').appendTo(c);c.find(".mejs-time-buffering").hide();var f=
c.find(".mejs-time-total");d=c.find(".mejs-time-loaded");var h=c.find(".mejs-time-current"),g=c.find(".mejs-time-handle"),k=c.find(".mejs-time-float"),n=c.find(".mejs-time-float-current"),q=function(a){a=a.pageX;var b=f.offset(),c=f.outerWidth(!0),d=0,g=0;e.duration&&(a<b.left?a=b.left:a>c+b.left&&(a=c+b.left),g=a-b.left,d=g/c,d=.02>=d?0:d*e.duration,m&&d!==e.currentTime&&e.setCurrentTime(d),mejs.MediaFeatures.hasTouch||(k.css("left",g),n.html(mejs.Utility.secondsToTimeCode(d)),k.show()))},m=!1;f.bind("mousedown",
function(b){if(1===b.which)return m=!0,q(b),a(document).bind("mousemove.dur",function(a){q(a)}).bind("mouseup.dur",function(){m=!1;k.hide();a(document).unbind(".dur")}),!1}).bind("mouseenter",function(){a(document).bind("mousemove.dur",function(a){q(a)});mejs.MediaFeatures.hasTouch||k.show()}).bind("mouseleave",function(){m||(a(document).unbind(".dur"),k.hide())});e.addEventListener("progress",function(a){b.setProgressRail(a);b.setCurrentRail(a)},!1);e.addEventListener("timeupdate",function(a){b.setProgressRail(a);
b.setCurrentRail(a)},!1);this.loaded=d;this.total=f;this.current=h;this.handle=g},setProgressRail:function(a){var c=void 0!=a?a.target:this.media,d=null;c&&c.buffered&&0<c.buffered.length&&c.buffered.end&&c.duration?d=c.buffered.end(0)/c.duration:c&&void 0!=c.bytesTotal&&0<c.bytesTotal&&void 0!=c.bufferedBytes?d=c.bufferedBytes/c.bytesTotal:a&&a.lengthComputable&&0!=a.total&&(d=a.loaded/a.total);null!==d&&(d=Math.min(1,Math.max(0,d)),this.loaded&&this.total&&this.loaded.width(this.total.width()*d))},
setCurrentRail:function(){if(void 0!=this.media.currentTime&&this.media.duration&&this.total&&this.handle){var a=this.total.width()*this.media.currentTime/this.media.duration,c=a-this.handle.outerWidth(!0)/2;this.current.width(a);this.handle.css("left",c)}}})})(mejs.$);
(function(a){a.extend(mejs.MepDefaults,{duration:-1,timeAndDurationSeparator:" <span> | </span> "});a.extend(MediaElementPlayer.prototype,{buildcurrent:function(b,c,d,e){a('<div class="mejs-time"><span class="mejs-currenttime">'+(b.options.alwaysShowHours?"00:":"")+(b.options.showTimecodeFrameCount?"00:00:00":"00:00")+"</span></div>").appendTo(c);this.currenttime=this.controls.find(".mejs-currenttime");e.addEventListener("timeupdate",function(){b.updateCurrent()},!1)},buildduration:function(b,c,d,
e){0<c.children().last().find(".mejs-currenttime").length?a(this.options.timeAndDurationSeparator+'<span class="mejs-duration">'+(0<this.options.duration?mejs.Utility.secondsToTimeCode(this.options.duration,this.options.alwaysShowHours||3600<this.media.duration,this.options.showTimecodeFrameCount,this.options.framesPerSecond||25):(b.options.alwaysShowHours?"00:":"")+(b.options.showTimecodeFrameCount?"00:00:00":"00:00"))+"</span>").appendTo(c.find(".mejs-time")):(c.find(".mejs-currenttime").parent().addClass("mejs-currenttime-container"),
a('<div class="mejs-time mejs-duration-container"><span class="mejs-duration">'+(0<this.options.duration?mejs.Utility.secondsToTimeCode(this.options.duration,this.options.alwaysShowHours||3600<this.media.duration,this.options.showTimecodeFrameCount,this.options.framesPerSecond||25):(b.options.alwaysShowHours?"00:":"")+(b.options.showTimecodeFrameCount?"00:00:00":"00:00"))+"</span></div>").appendTo(c));this.durationD=this.controls.find(".mejs-duration");e.addEventListener("timeupdate",function(){b.updateDuration()},
!1)},updateCurrent:function(){this.currenttime&&this.currenttime.html(mejs.Utility.secondsToTimeCode(this.media.currentTime,this.options.alwaysShowHours||3600<this.media.duration,this.options.showTimecodeFrameCount,this.options.framesPerSecond||25))},updateDuration:function(){this.container.toggleClass("mejs-long-video",3600<this.media.duration);this.media.duration&&this.durationD&&this.durationD.html(mejs.Utility.secondsToTimeCode(this.media.duration,this.options.alwaysShowHours,this.options.showTimecodeFrameCount,
this.options.framesPerSecond||25))}})})(mejs.$);
(function(a){a.extend(mejs.MepDefaults,{muteText:"Mute Toggle",hideVolumeOnTouchDevices:!0,audioVolume:"horizontal",videoVolume:"vertical"});a.extend(MediaElementPlayer.prototype,{buildvolume:function(b,c,d,e){if(!mejs.MediaFeatures.hasTouch||!this.options.hideVolumeOnTouchDevices){var f=this.isVideo?this.options.videoVolume:this.options.audioVolume,h="horizontal"==f?a('<div class="mejs-button mejs-volume-button mejs-mute"><button type="button" aria-controls="'+this.id+'" title="'+this.options.muteText+
'"></button></div><div class="mejs-horizontal-volume-slider"><div class="mejs-horizontal-volume-total"></div><div class="mejs-horizontal-volume-current"></div><div class="mejs-horizontal-volume-handle"></div></div>').appendTo(c):a('<div class="mejs-button mejs-volume-button mejs-mute"><button type="button" aria-controls="'+this.id+'" title="'+this.options.muteText+'"></button><div class="mejs-volume-slider"><div class="mejs-volume-total"></div><div class="mejs-volume-current"></div><div class="mejs-volume-handle"></div></div></div>').appendTo(c),
g=this.container.find(".mejs-volume-slider, .mejs-horizontal-volume-slider"),k=this.container.find(".mejs-volume-total, .mejs-horizontal-volume-total"),n=this.container.find(".mejs-volume-current, .mejs-horizontal-volume-current"),q=this.container.find(".mejs-volume-handle, .mejs-horizontal-volume-handle"),m=function(a,b){if(g.is(":visible")||"undefined"!=typeof b)if(a=Math.max(0,a),a=Math.min(a,1),0==a?h.removeClass("mejs-mute").addClass("mejs-unmute"):h.removeClass("mejs-unmute").addClass("mejs-mute"),
"vertical"==f){var c=k.height(),d=k.position(),e=c-c*a;q.css("top",Math.round(d.top+e-q.height()/2));n.height(c-e);n.css("top",d.top+e)}else c=k.width(),d=k.position(),c*=a,q.css("left",Math.round(d.left+c-q.width()/2)),n.width(Math.round(c));else g.show(),m(a,!0),g.hide()},p=function(a){var b=null,c=k.offset();if("vertical"==f){if(b=k.height(),parseInt(k.css("top").replace(/px/,""),10),b=(b-(a.pageY-c.top))/b,0==c.top||0==c.left)return}else b=k.width(),b=(a.pageX-c.left)/b;b=Math.max(0,b);b=Math.min(b,
1);m(b);0==b?e.setMuted(!0):e.setMuted(!1);e.setVolume(b)},u=!1,v=!1;h.hover(function(){g.show();v=!0},function(){v=!1;!u&&"vertical"==f&&g.hide()});g.bind("mouseover",function(){v=!0}).bind("mousedown",function(b){p(b);a(document).bind("mousemove.vol",function(a){p(a)}).bind("mouseup.vol",function(){u=!1;a(document).unbind(".vol");!v&&"vertical"==f&&g.hide()});u=!0;return!1});h.find("button").click(function(){e.setMuted(!e.muted)});e.addEventListener("volumechange",function(){u||(e.muted?(m(0),h.removeClass("mejs-mute").addClass("mejs-unmute")):
(m(e.volume),h.removeClass("mejs-unmute").addClass("mejs-mute")))},!1);this.container.is(":visible")&&(m(b.options.startVolume),"native"===e.pluginType&&e.setVolume(b.options.startVolume))}}})})(mejs.$);
(function(a){a.extend(mejs.MepDefaults,{usePluginFullScreen:!0,newWindowCallback:function(){return""},fullscreenText:mejs.i18n.t("Fullscreen")});a.extend(MediaElementPlayer.prototype,{isFullScreen:!1,isNativeFullScreen:!1,docStyleOverflow:null,isInIframe:!1,buildfullscreen:function(b,c,d,e){if(b.isVideo){b.isInIframe=window.location!=window.parent.location;mejs.MediaFeatures.hasTrueNativeFullScreen&&(d=null,d=mejs.MediaFeatures.hasMozNativeFullScreen?a(document):b.container,d.bind(mejs.MediaFeatures.fullScreenEventName,
function(){mejs.MediaFeatures.isFullScreen()?(b.isNativeFullScreen=!0,b.setControlsSize()):(b.isNativeFullScreen=!1,b.exitFullScreen())}));var f=this,h=a('<div class="mejs-button mejs-fullscreen-button"><button type="button" aria-controls="'+f.id+'" title="'+f.options.fullscreenText+'"></button></div>').appendTo(c);if("native"===f.media.pluginType||!f.options.usePluginFullScreen&&!mejs.MediaFeatures.isFirefox)h.click(function(){mejs.MediaFeatures.hasTrueNativeFullScreen&&mejs.MediaFeatures.isFullScreen()||
b.isFullScreen?b.exitFullScreen():b.enterFullScreen()});else{var g=null;if(function(){var a=document.createElement("x"),b=document.documentElement,c=window.getComputedStyle;if(!("pointerEvents"in a.style))return!1;a.style.pointerEvents="auto";a.style.pointerEvents="x";b.appendChild(a);c=c&&"auto"===c(a,"").pointerEvents;b.removeChild(a);return!!c}()&&!mejs.MediaFeatures.isOpera){var k=!1,n=function(){k&&(q.hide(),m.hide(),p.hide(),h.css("pointer-events",""),f.controls.css("pointer-events",""),k=!1)},
q=a('<div class="mejs-fullscreen-hover" />').appendTo(f.container).mouseover(n),m=a('<div class="mejs-fullscreen-hover"  />').appendTo(f.container).mouseover(n),p=a('<div class="mejs-fullscreen-hover"  />').appendTo(f.container).mouseover(n),u=function(){var a={position:"absolute",top:0,left:0};q.css(a);m.css(a);p.css(a);q.width(f.container.width()).height(f.container.height()-f.controls.height());a=h.offset().left-f.container.offset().left;fullScreenBtnWidth=h.outerWidth(!0);m.width(a).height(f.controls.height()).css({top:f.container.height()-
f.controls.height()});p.width(f.container.width()-a-fullScreenBtnWidth).height(f.controls.height()).css({top:f.container.height()-f.controls.height(),left:a+fullScreenBtnWidth})};a(document).resize(function(){u()});h.mouseover(function(){if(!f.isFullScreen){var a=h.offset(),c=b.container.offset();e.positionFullscreenButton(a.left-c.left,a.top-c.top,!1);h.css("pointer-events","none");f.controls.css("pointer-events","none");q.show();p.show();m.show();u();k=!0}});e.addEventListener("fullscreenchange",
function(){n()})}else h.mouseover(function(){null!==g&&(clearTimeout(g),delete g);var a=h.offset(),c=b.container.offset();e.positionFullscreenButton(a.left-c.left,a.top-c.top,!0)}).mouseout(function(){null!==g&&(clearTimeout(g),delete g);g=setTimeout(function(){e.hideFullscreenButton()},1500)})}b.fullscreenBtn=h;a(document).bind("keydown",function(a){(mejs.MediaFeatures.hasTrueNativeFullScreen&&mejs.MediaFeatures.isFullScreen()||f.isFullScreen)&&27==a.keyCode&&b.exitFullScreen()})}},enterFullScreen:function(){var b=
this;if("native"===b.media.pluginType||!mejs.MediaFeatures.isFirefox&&!b.options.usePluginFullScreen){docStyleOverflow=document.documentElement.style.overflow;document.documentElement.style.overflow="hidden";normalHeight=b.container.height();normalWidth=b.container.width();if("native"===b.media.pluginType)if(mejs.MediaFeatures.hasTrueNativeFullScreen)mejs.MediaFeatures.requestFullScreen(b.container[0]),b.isInIframe&&setTimeout(function e(){b.isNativeFullScreen&&(a(window).width()!==screen.width?b.exitFullScreen():
setTimeout(e,500))},500);else if(mejs.MediaFeatures.hasSemiNativeFullScreen){b.media.webkitEnterFullscreen();return}if(b.isInIframe){var c=b.options.newWindowCallback(this);if(""!==c)if(mejs.MediaFeatures.hasTrueNativeFullScreen)setTimeout(function(){b.isNativeFullScreen||(b.pause(),window.open(c,b.id,"top=0,left=0,width="+screen.availWidth+",height="+screen.availHeight+",resizable=yes,scrollbars=no,status=no,toolbar=no"))},250);else{b.pause();window.open(c,b.id,"top=0,left=0,width="+screen.availWidth+
",height="+screen.availHeight+",resizable=yes,scrollbars=no,status=no,toolbar=no");return}}b.container.addClass("mejs-container-fullscreen").width("100%").height("100%");setTimeout(function(){b.container.css({width:"100%",height:"100%"});b.setControlsSize()},500);"native"===b.pluginType?b.$media.width("100%").height("100%"):(b.container.find("object, embed, iframe").width("100%").height("100%"),b.media.setVideoSize(a(window).width(),a(window).height()));b.layers.children("div").width("100%").height("100%");
b.fullscreenBtn&&b.fullscreenBtn.removeClass("mejs-fullscreen").addClass("mejs-unfullscreen");b.setControlsSize();b.isFullScreen=!0}},exitFullScreen:function(){"native"!==this.media.pluginType&&mejs.MediaFeatures.isFirefox?this.media.setFullscreen(!1):(mejs.MediaFeatures.hasTrueNativeFullScreen&&(mejs.MediaFeatures.isFullScreen()||this.isFullScreen)&&mejs.MediaFeatures.cancelFullScreen(),document.documentElement.style.overflow=docStyleOverflow,this.container.removeClass("mejs-container-fullscreen").width(normalWidth).height(normalHeight),
"native"===this.pluginType?this.$media.width(normalWidth).height(normalHeight):(this.container.find("object embed").width(normalWidth).height(normalHeight),this.media.setVideoSize(normalWidth,normalHeight)),this.layers.children("div").width(normalWidth).height(normalHeight),this.fullscreenBtn.removeClass("mejs-unfullscreen").addClass("mejs-fullscreen"),this.setControlsSize(),this.isFullScreen=!1)}})})(mejs.$);
(function(a){a.extend(mejs.MepDefaults,{startLanguage:"",tracksText:"Captions/Subtitles"});a.extend(MediaElementPlayer.prototype,{hasChapters:!1,buildtracks:function(b,c,d,e){if(b.isVideo&&0!=b.tracks.length){var f;b.chapters=a('<div class="mejs-chapters mejs-layer"></div>').prependTo(d).hide();b.captions=a('<div class="mejs-captions-layer mejs-layer"><div class="mejs-captions-position"><span class="mejs-captions-text"></span></div></div>').prependTo(d).hide();b.captionsText=b.captions.find(".mejs-captions-text");
b.captionsButton=a('<div class="mejs-button mejs-captions-button"><button type="button" aria-controls="'+this.id+'" title="'+this.options.tracksText+'"></button><div class="mejs-captions-selector"><ul><li><input type="radio" name="'+b.id+'_captions" id="'+b.id+'_captions_none" value="none" checked="checked" /><label for="'+b.id+'_captions_none">None</label></li></ul></div></div>').appendTo(c).hover(function(){a(this).find(".mejs-captions-selector").css("visibility","visible")},function(){a(this).find(".mejs-captions-selector").css("visibility",
"hidden")}).delegate("input[type=radio]","click",function(){lang=this.value;if("none"==lang)b.selectedTrack=null;else for(f=0;f<b.tracks.length;f++)if(b.tracks[f].srclang==lang){b.selectedTrack=b.tracks[f];b.captions.attr("lang",b.selectedTrack.srclang);b.displayCaptions();break}});b.options.alwaysShowControls?b.container.find(".mejs-captions-position").addClass("mejs-captions-position-hover"):b.container.bind("controlsshown",function(){b.container.find(".mejs-captions-position").addClass("mejs-captions-position-hover")}).bind("controlshidden",
function(){e.paused||b.container.find(".mejs-captions-position").removeClass("mejs-captions-position-hover")});b.trackToLoad=-1;b.selectedTrack=null;b.isLoadingTrack=!1;for(f=0;f<b.tracks.length;f++)"subtitles"==b.tracks[f].kind&&b.addTrackButton(b.tracks[f].srclang,b.tracks[f].label);b.loadNextTrack();e.addEventListener("timeupdate",function(){b.displayCaptions()},!1);e.addEventListener("loadedmetadata",function(){b.displayChapters()},!1);b.container.hover(function(){b.hasChapters&&(b.chapters.css("visibility",
"visible"),b.chapters.fadeIn(200).height(b.chapters.find(".mejs-chapter").outerHeight()))},function(){b.hasChapters&&!e.paused&&b.chapters.fadeOut(200,function(){a(this).css("visibility","hidden");a(this).css("display","block")})});null!==b.node.getAttribute("autoplay")&&b.chapters.css("visibility","hidden")}},loadNextTrack:function(){this.trackToLoad++;this.trackToLoad<this.tracks.length?(this.isLoadingTrack=!0,this.loadTrack(this.trackToLoad)):this.isLoadingTrack=!1},loadTrack:function(b){var c=
this,d=c.tracks[b];a.ajax({url:d.src,dataType:"text",success:function(a){d.entries="string"==typeof a&&/<tt\s+xml/ig.exec(a)?mejs.TrackFormatParser.dfxp.parse(a):mejs.TrackFormatParser.webvvt.parse(a);d.isLoaded=!0;c.enableTrackButton(d.srclang,d.label);c.loadNextTrack();"chapters"==d.kind&&c.media.addEventListener("play",function(){0<c.media.duration&&c.displayChapters(d)},!1)},error:function(){c.loadNextTrack()}})},enableTrackButton:function(b,c){""===c&&(c=mejs.language.codes[b]||b);this.captionsButton.find("input[value="+
b+"]").prop("disabled",!1).siblings("label").html(c);this.options.startLanguage==b&&a("#"+this.id+"_captions_"+b).click();this.adjustLanguageBox()},addTrackButton:function(b,c){""===c&&(c=mejs.language.codes[b]||b);this.captionsButton.find("ul").append(a('<li><input type="radio" name="'+this.id+'_captions" id="'+this.id+"_captions_"+b+'" value="'+b+'" disabled="disabled" /><label for="'+this.id+"_captions_"+b+'">'+c+" (loading)</label></li>"));this.adjustLanguageBox();this.container.find(".mejs-captions-translations option[value="+
b+"]").remove()},adjustLanguageBox:function(){this.captionsButton.find(".mejs-captions-selector").height(this.captionsButton.find(".mejs-captions-selector ul").outerHeight(!0)+this.captionsButton.find(".mejs-captions-translations").outerHeight(!0))},displayCaptions:function(){if("undefined"!=typeof this.tracks){var a,c=this.selectedTrack;if(null!=c&&c.isLoaded)for(a=0;a<c.entries.times.length;a++)if(this.media.currentTime>=c.entries.times[a].start&&this.media.currentTime<=c.entries.times[a].stop){this.captionsText.html(c.entries.text[a]);
this.captions.show().height(0);return}this.captions.hide()}},displayChapters:function(){var a;for(a=0;a<this.tracks.length;a++)if("chapters"==this.tracks[a].kind&&this.tracks[a].isLoaded){this.drawChapters(this.tracks[a]);this.hasChapters=!0;break}},drawChapters:function(b){var c=this,d,e,f=e=0;c.chapters.empty();for(d=0;d<b.entries.times.length;d++){e=b.entries.times[d].stop-b.entries.times[d].start;e=Math.floor(e/c.media.duration*100);if(100<e+f||d==b.entries.times.length-1&&100>e+f)e=100-f;c.chapters.append(a('<div class="mejs-chapter" rel="'+
b.entries.times[d].start+'" style="left: '+f.toString()+"%;width: "+e.toString()+'%;"><div class="mejs-chapter-block'+(d==b.entries.times.length-1?" mejs-chapter-block-last":"")+'"><span class="ch-title">'+b.entries.text[d]+'</span><span class="ch-time">'+mejs.Utility.secondsToTimeCode(b.entries.times[d].start)+"&ndash;"+mejs.Utility.secondsToTimeCode(b.entries.times[d].stop)+"</span></div></div>"));f+=e}c.chapters.find("div.mejs-chapter").click(function(){c.media.setCurrentTime(parseFloat(a(this).attr("rel")));
c.media.paused&&c.media.play()});c.chapters.show()}});mejs.language={codes:{af:"Afrikaans",sq:"Albanian",ar:"Arabic",be:"Belarusian",bg:"Bulgarian",ca:"Catalan",zh:"Chinese","zh-cn":"Chinese Simplified","zh-tw":"Chinese Traditional",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch",en:"English",et:"Estonian",tl:"Filipino",fi:"Finnish",fr:"French",gl:"Galician",de:"German",el:"Greek",ht:"Haitian Creole",iw:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",ga:"Irish",it:"Italian",ja:"Japanese",
ko:"Korean",lv:"Latvian",lt:"Lithuanian",mk:"Macedonian",ms:"Malay",mt:"Maltese",no:"Norwegian",fa:"Persian",pl:"Polish",pt:"Portuguese",ro:"Romanian",ru:"Russian",sr:"Serbian",sk:"Slovak",sl:"Slovenian",es:"Spanish",sw:"Swahili",sv:"Swedish",tl:"Tagalog",th:"Thai",tr:"Turkish",uk:"Ukrainian",vi:"Vietnamese",cy:"Welsh",yi:"Yiddish"}};mejs.TrackFormatParser={webvvt:{pattern_identifier:/^([a-zA-z]+-)?[0-9]+$/,pattern_timecode:/^([0-9]{2}:[0-9]{2}:[0-9]{2}([,.][0-9]{1,3})?) --\> ([0-9]{2}:[0-9]{2}:[0-9]{2}([,.][0-9]{3})?)(.*)$/,
parse:function(b){var c=0;b=mejs.TrackFormatParser.split2(b,/\r?\n/);for(var d={text:[],times:[]},e,f;c<b.length;c++)if(this.pattern_identifier.exec(b[c])&&(c++,(e=this.pattern_timecode.exec(b[c]))&&c<b.length)){c++;f=b[c];for(c++;""!==b[c]&&c<b.length;)f=f+"\n"+b[c],c++;f=a.trim(f).replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig,"<a href='$1' target='_blank'>$1</a>");d.text.push(f);d.times.push({start:0==mejs.Utility.convertSMPTEtoSeconds(e[1])?.2:mejs.Utility.convertSMPTEtoSeconds(e[1]),
stop:mejs.Utility.convertSMPTEtoSeconds(e[3]),settings:e[5]})}return d}},dfxp:{parse:function(b){b=a(b).filter("tt");var c=0,c=b.children("div").eq(0),d=c.find("p"),c=b.find("#"+c.attr("style")),e,f;b={text:[],times:[]};if(c.length&&(f=c.removeAttr("id").get(0).attributes,f.length))for(e={},c=0;c<f.length;c++)e[f[c].name.split(":")[1]]=f[c].value;for(c=0;c<d.length;c++){var h;f={start:null,stop:null,style:null};d.eq(c).attr("begin")&&(f.start=mejs.Utility.convertSMPTEtoSeconds(d.eq(c).attr("begin")));
!f.start&&d.eq(c-1).attr("end")&&(f.start=mejs.Utility.convertSMPTEtoSeconds(d.eq(c-1).attr("end")));d.eq(c).attr("end")&&(f.stop=mejs.Utility.convertSMPTEtoSeconds(d.eq(c).attr("end")));!f.stop&&d.eq(c+1).attr("begin")&&(f.stop=mejs.Utility.convertSMPTEtoSeconds(d.eq(c+1).attr("begin")));if(e){h="";for(var g in e)h+=g+":"+e[g]+";"}h&&(f.style=h);0==f.start&&(f.start=.2);b.times.push(f);f=a.trim(d.eq(c).html()).replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig,
"<a href='$1' target='_blank'>$1</a>");b.text.push(f);0==b.times.start&&(b.times.start=2)}return b}},split2:function(a,c){return a.split(c)}};3!="x\n\ny".split(/\n/gi).length&&(mejs.TrackFormatParser.split2=function(a,c){var d=[],e="",f;for(f=0;f<a.length;f++)e+=a.substring(f,f+1),c.test(e)&&(d.push(e.replace(c,"")),e="");d.push(e);return d})})(mejs.$);
(function(a){a.extend(mejs.MepDefaults,{contextMenuItems:[{render:function(a){return"undefined"==typeof a.enterFullScreen?null:a.isFullScreen?"Turn off Fullscreen":"Go Fullscreen"},click:function(a){a.isFullScreen?a.exitFullScreen():a.enterFullScreen()}},{render:function(a){return a.media.muted?"Unmute":"Mute"},click:function(a){a.media.muted?a.setMuted(!1):a.setMuted(!0)}},{isSeparator:!0},{render:function(){return"Download Video"},click:function(a){window.location.href=a.media.currentSrc}}]});a.extend(MediaElementPlayer.prototype,
{buildcontextmenu:function(b){b.contextMenu=a('<div class="mejs-contextmenu"></div>').appendTo(a("body")).hide();b.container.bind("contextmenu",function(a){if(b.isContextMenuEnabled)return a.preventDefault(),b.renderContextMenu(a.clientX-1,a.clientY-1),!1});b.container.bind("click",function(){b.contextMenu.hide()});b.contextMenu.bind("mouseleave",function(){b.startContextMenuTimer()})},isContextMenuEnabled:!0,enableContextMenu:function(){this.isContextMenuEnabled=!0},disableContextMenu:function(){this.isContextMenuEnabled=
!1},contextMenuTimeout:null,startContextMenuTimer:function(){var a=this;a.killContextMenuTimer();a.contextMenuTimer=setTimeout(function(){a.hideContextMenu();a.killContextMenuTimer()},750)},killContextMenuTimer:function(){var a=this.contextMenuTimer;null!=a&&(clearTimeout(a),delete a)},hideContextMenu:function(){this.contextMenu.hide()},renderContextMenu:function(b,c){for(var d=this,e="",f=d.options.contextMenuItems,h=0,g=f.length;h<g;h++)if(f[h].isSeparator)e+='<div class="mejs-contextmenu-separator"></div>';
else{var k=f[h].render(d);null!=k&&(e+='<div class="mejs-contextmenu-item" data-itemindex="'+h+'" id="element-'+1E6*Math.random()+'">'+k+"</div>")}d.contextMenu.empty().append(a(e)).css({top:c,left:b}).show();d.contextMenu.find(".mejs-contextmenu-item").each(function(){var b=a(this),c=parseInt(b.data("itemindex"),10),e=d.options.contextMenuItems[c];"undefined"!=typeof e.show&&e.show(b,d);b.click(function(){"undefined"!=typeof e.click&&e.click(d);d.contextMenu.hide()})});setTimeout(function(){d.killControlsTimer("rev3")},
100)}})})(mejs.$);
(function(a){a.extend(mejs.MepDefaults,{postrollCloseText:mejs.i18n.t("Close")});a.extend(MediaElementPlayer.prototype,{buildpostroll:function(b,c,d){var e=this.container.find('link[rel="postroll"]').attr("href");"undefined"!==typeof e&&(b.postroll=a('<div class="mejs-postroll-layer mejs-layer"><a class="mejs-postroll-close" onclick="$(this).parent().hide();return false;">'+this.options.postrollCloseText+'</a><div class="mejs-postroll-layer-content"></div></div>').prependTo(d).hide(),this.media.addEventListener("ended",
function(){a.ajax({dataType:"html",url:e,success:function(a){d.find(".mejs-postroll-layer-content").html(a)}});b.postroll.show()},!1))}})})(mejs.$);I18n.fallbacks=!1;I18n.defaultSeparator=".";I18n.PLACEHOLDER=/(?:\{\{|%\{)(.*?)(?:\}\}?)/gm;I18n.isValidNode=function(a,b,c){return null!==a[b]&&a[b]!==c};
I18n.lookup=function(a,b){b=b||{};var c=a,d=this.prepareOptions(I18n.translations)[b.locale||I18n.currentLocale()];b=this.prepareOptions(b);var e;if(d){"object"==typeof a&&(a=a.join(this.defaultSeparator));b.scope&&(a=b.scope.toString()+this.defaultSeparator+a);for(a=a.split(this.defaultSeparator);0<a.length;)if(e=a.shift(),d=d[e],!d){I18n.fallbacks&&!b.fallback&&(d=I18n.lookup(c,this.prepareOptions({locale:I18n.defaultLocale,fallback:!0},b)));break}!d&&this.isValidNode(b,"defaultValue")&&(d=b.defaultValue);
return d}};I18n.prepareOptions=function(){for(var a={},b,c=arguments.length,d=0;d<c;d++)if(b=arguments[d])for(var e in b)this.isValidNode(a,e)||(a[e]=b[e]);return a};I18n.interpolate=function(a,b){b=this.prepareOptions(b);var c=a.match(this.PLACEHOLDER),d,e,f;if(!c)return a;for(var h=0;d=c[h];h++)f=d.replace(this.PLACEHOLDER,"$1"),e=b[f],this.isValidNode(b,f)||(e="[missing "+d+" value]"),regex=new RegExp(d.replace(/\{/gm,"\\{").replace(/\}/gm,"\\}")),a=a.replace(regex,e);return a};
I18n.translate=function(a,b){b=this.prepareOptions(b);var c=this.lookup(a,b);try{return"object"==typeof c?"number"==typeof b.count?this.pluralize(b.count,a,b):c:this.interpolate(c,b)}catch(d){return this.missingTranslation(a)}};I18n.localize=function(a,b){switch(a){case "currency":return this.toCurrency(b);case "number":return a=this.lookup("number.format"),this.toNumber(b,a);case "percentage":return this.toPercentage(b);default:return a.match(/^(date|time)/)?this.toTime(a,b):b.toString()}};
I18n.parseDate=function(a){var b;if("object"==typeof a)return a;if(b=a.toString().match(/(\d{4})-(\d{2})-(\d{2})(?:[ T](\d{2}):(\d{2}):(\d{2}))?(Z|\+0000)?/)){for(a=1;6>=a;a++)b[a]=parseInt(b[a],10)||0;b[2]-=1;b=b[7]?new Date(Date.UTC(b[1],b[2],b[3],b[4],b[5],b[6])):new Date(b[1],b[2],b[3],b[4],b[5],b[6])}else"number"==typeof a?(b=new Date,b.setTime(a)):(a.match(/\d+ \d+:\d+:\d+ [+-]\d+ \d+/),b=new Date,b.setTime(Date.parse(a)));return b};
I18n.toTime=function(a,b){var c=this.parseDate(b),d=this.lookup(a);return c.toString().match(/invalid/i)||!d?c.toString():this.strftime(c,d)};
I18n.strftime=function(a,b){var c=this.lookup("date");if(!c)return a.toString();c.meridian=c.meridian||["AM","PM"];var d=a.getDay(),e=a.getDate(),f=a.getFullYear(),h=a.getMonth()+1,g=a.getHours(),k=g,n=11<g?1:0,q=a.getSeconds(),m=a.getMinutes(),p=a.getTimezoneOffset(),u=Math.floor(Math.abs(p/60)),v=Math.abs(p)-60*u,p=(0<p?"-":"+")+(2>u.toString().length?"0"+u:u)+(2>v.toString().length?"0"+v:v);12<k?k-=12:0===k&&(k=12);u=function(a){a="0"+a.toString();return a.substr(a.length-2)};v=b.replace("%a",
c.abbr_day_names[d]);v=v.replace("%A",c.day_names[d]);v=v.replace("%b",c.abbr_month_names[h]);v=v.replace("%B",c.month_names[h]);v=v.replace("%d",u(e));v=v.replace("%e",e);v=v.replace("%-d",e);v=v.replace("%H",u(g));v=v.replace("%-H",g);v=v.replace("%I",u(k));v=v.replace("%-I",k);v=v.replace("%m",u(h));v=v.replace("%-m",h);v=v.replace("%M",u(m));v=v.replace("%-M",m);v=v.replace("%p",c.meridian[n]);v=v.replace("%S",u(q));v=v.replace("%-S",q);v=v.replace("%w",d);v=v.replace("%y",u(f));v=v.replace("%-y",
u(f).replace(/^0+/,""));v=v.replace("%Y",f);return v=v.replace("%z",p)};
I18n.toNumber=function(a,b){b=this.prepareOptions(b,this.lookup("number.format"),{precision:3,separator:".",delimiter:",",strip_insignificant_zeros:!1});var c=0>a,d=Math.abs(a).toFixed(b.precision).toString().split("."),e=[];for(a=d[0];0<a.length;)e.unshift(a.substr(Math.max(0,a.length-3),3)),a=a.substr(0,a.length-3);e=e.join(b.delimiter);0<b.precision&&(e+=b.separator+d[1]);c&&(e="-"+e);b.strip_insignificant_zeros&&(c=new RegExp(b.separator.replace(/\./,"\\.")+"$"),e=e.replace(/0+$/,"").replace(c,
""));return e};I18n.toCurrency=function(a,b){b=this.prepareOptions(b,this.lookup("number.currency.format"),this.lookup("number.format"),{unit:"$",precision:2,format:"%u%n",delimiter:",",separator:"."});a=this.toNumber(a,b);return a=b.format.replace("%u",b.unit).replace("%n",a)};
I18n.toHumanSize=function(a,b){for(var c=a,d=0,e;1024<=c&&4>d;)c/=1024,d+=1;0===d?(d=this.t("number.human.storage_units.units.byte",{count:c}),e=0):(d=this.t("number.human.storage_units.units."+[null,"kb","mb","gb","tb"][d]),e=0===c-Math.floor(c)?0:1);b=this.prepareOptions(b,{precision:e,format:"%n%u",delimiter:""});a=this.toNumber(c,b);return a=b.format.replace("%u",d).replace("%n",a)};
I18n.toPercentage=function(a,b){b=this.prepareOptions(b,this.lookup("number.percentage.format"),this.lookup("number.format"),{precision:3,separator:".",delimiter:""});a=this.toNumber(a,b);return a+"%"};
I18n.pluralize=function(a,b,c){var d;try{d=this.lookup(b,c)}catch(e){}if(!d)return this.missingTranslation(b);c=this.prepareOptions(c);c.count=a.toString();switch(Math.abs(a)){case 0:a=this.isValidNode(d,"zero")?d.zero:this.isValidNode(d,"none")?d.none:this.isValidNode(d,"other")?d.other:this.missingTranslation(b,"zero");break;case 1:a=this.isValidNode(d,"one")?d.one:this.missingTranslation(b,"one");break;default:a=this.isValidNode(d,"other")?d.other:this.missingTranslation(b,"other")}return this.interpolate(a,
c)};I18n.missingTranslation=function(){for(var a='[missing "'+this.currentLocale(),b=arguments.length,c=0;c<b;c++)a+="."+arguments[c];return a+'" translation]'};I18n.currentLocale=function(){return I18n.locale||I18n.defaultLocale};I18n.t=I18n.translate;I18n.l=I18n.localize;I18n.p=I18n.pluralize;
(function(a,b){function c(b,c){var f=function(h){if(!c.is(":not(:visible)"))if(a(h.target).closest(c).length)a(document).one("click",f);else return b.toggle_target(!1),!a(h.target).is_toggle_target_control_for(c)};a(document).one("click",f)}a.fn.scroll_lock=function(){return a(this).on("DOMMouseScroll mousewheel",function(b){var c=a(this),f=this.scrollTop,h=this.scrollHeight,g=c.height(),k="DOMMouseScroll"==b.type?-40*b.originalEvent.detail:b.originalEvent.wheelDelta,n=0<k,q=function(){b.stopPropagation();
b.preventDefault();return b.returnValue=!1};if(!n&&-k>h-g-f)return c.scrollTop(h),q();if(n&&k>f)return c.scrollTop(0),q()})};a.fn.scroll_release=function(){return a(this).off("DOMMouseScroll mousewheel")};a.fn.outer_html=function(){return this[0].outerHTML};a.fn.unique_items_in_array=function(){var b=[];a.each(this,function(c,f){-1==a.inArray(f,b)&&b.push(f)});return b};a.fn.force_reflow=function(){this[0].offsetHeight;return this};a.fn.is_scrolled_into_view=function(){return this.is_scrolled_vertically_into_view()&&
this.is_scrolled_horizontally_into_view()};a.fn.is_scrolled_vertically_into_view=function(){var a=this[0].getBoundingClientRect();return 0<=a.top&&a.bottom<=window.innerHeight};a.fn.is_scrolled_horizontally_into_view=function(){var a=this[0].getBoundingClientRect();return 0<=a.left&&a.right<=window.innerWidth};a.fn.scroll_bottom=function(){var a=this.prop("innerHeight");if(void 0!==a)return a+this.scrollTop()};a.fn.get_bounding_client_rect=function(){for(var a=this[0].getBoundingClientRect(),a={top:a.top,
bottom:a.bottom,left:a.left,right:a.right},b=1;b<this.length;b++){var c=this[b].getBoundingClientRect();a.top=Math.min(a.top,c.top);a.bottom=Math.max(a.bottom,c.bottom);a.left=Math.min(a.left,c.left);a.right=Math.max(a.right,c.right)}a.height=a.bottom-a.top;a.width=a.right-a.left;return a};a.fn.closest_block_level_element=function(){return this.parents().filter(function(){return"block"===a(this).css("display")}).first()};a.fn.is_block_level_element=function(){var b=a(this).css("display");return void 0===
b?!1:!("inline"===b||"none"===b)};a.fn.on_screen=function(b){a(this).waypoint(b,{offset:"150%",triggerOnce:!0})};a.fn.auto_load_more_on_scroll=function(){a(this).scroll(function(){a.doTimeout("context_scroll",250,function(){Waypoint.refreshAll();var b=a("a.more:visible:not(.loading, .no_auto_more a)");b.on_screen(function(){b.click()})})});return this};a.fn.scrollToCenterOfScreen=function(b){b=b||{};if(!this.length)return this;var c=a(b.scroller||(MOBILE_DEVICE?"#container":document)),f=a(window).height(),
h=this.height();c.scrollTo(this,{offset:h/2-f/2,onAfter:b.onAfter||function(){}});return this};a.fn.retainingScrollPosition=function(a,b){if(!a.length)return b(),this;var c=a.offset().top,h=this.scrollTop();b();var g=a.offset().top;if(g===c)return this;this.scrollTop(h+(g-c));return this};a.fn.reloadTooltip=function(){var a;try{a=this.qtip("api")}catch(b){return this}a.updateContent("Loading...");a.loadContent(a.options.content.url);return this};a.fn.reset_editable=function(){this.length&&"function"==
typeof this[0].reset&&this[0].reset()};a.fn.counter_value=function(){return parseInt(this.text().replace(/[^0-9]/g,""))};a.fn.change_counter_value_by=function(a){this.text(this.text().replace(/[0-9]+/,this.counter_value()+a))};a.fn.detect=function(a){var b=null;this.each(function(){if(a.call(this))return b=this,!1});return b};a.fn.insertAtCursor=function(a){return this.each(function(){if(this.selectionStart||"0"==this.selectionStart){var b=this.selectionStart,c=this.selectionEnd,h=this.scrollTop;
this.value=this.value.substring(0,b)+a+this.value.substring(c,this.value.length);this.focus();this.selectionStart=b+a.length;this.selectionEnd=b+a.length;this.scrollTop=h}else this.value+=a,this.focus()})};a.fn.submitWithAjaxQueue=function(b){var c=(b||{}).complete||a.noop;return this.each(function(){var f=a(this);app.ajaxQueue.add(a.extend({type:this.method,url:this.action,data:f.serialize()},b,{complete:function(){f.trigger("ajax:complete");c.apply(this,arguments)}}))})};a.referents_for_this_annotation=
{settings:{selector:function(a){return'a[data-id="'+a+'"]'},attribute:"data-id"}};a.fn.referents_for_this_annotation=function(){var b=this.attr(a.referents_for_this_annotation.settings.attribute),c=a.referents_for_this_annotation.settings.selector;return void 0===b?this:a(c(b))};a.fn.hydrate_diff=function(){a(this).each(function(){var b=a(this),c=new diff_match_patch,f=c.diff_main(b.data("before"),b.data("after"));c.diff_cleanupSemantic(f);b.html(c.diff_prettyHtml(f).replace(/&para;/g,""))});return this};
a.fn.chosen_auto_choose=function(b){var c=a(this),f=c.find('option[value="'+b+'"]');c.find("option.auto-selected").removeAttr("selected").removeClass("auto-selected");f.is(":selected")||f.attr("selected",!0).addClass("auto-selected");setTimeout(function(){var a=c.parent().find("ul.chzn-choices"),b=a.parent().attr("id");a.find("#"+b+"_c_"+f.index()).addClass("locked").siblings().removeClass("locked")},0);c.trigger("liszt:updated")};a.fn.toggle_target=function(b){var e=a(this).toggleClass("pressed",
b),f=e.attr("data-relative")?e.find(e.attr("data-target")):a(e.attr("data-target")),h=e.attr("data-show-with-class");h?f.toggleClass(h,b):f.toggle(b);(b=f.is(":visible"))&&app.process_auto_load_containers&&app.process_auto_load_containers();void 0!==e.attr("data-hide-on-blur")&&c(e,f);e.attr("data-hide-siblings")&&(f.is(":visible")?(f.siblings(":visible").addClass("toggle_target_hidden_sibling"),h?f.siblings().removeClass(h):f.siblings(":visible").hide()):f.siblings().removeClass("toggle_target_hidden_sibling"),
e.siblings(".toggle_target").removeClass("pressed"));h=e.attr("data-toggles-to-hide");void 0!==h&&b&&a(h).not(e).toggle_target(!1);(e=e.attr("data-focus"))&&a(e).focus();f.trigger(b?"toggle_target:visible":"toggle_target:hidden")};a.fn.is_toggle_target_control_for=function(b){var c=a(this).closest(".toggle_target");return c.length&&b.is(c.attr("data-target"))};a.fn.dirtyable=function(){if("undefined"===typeof this.data("dirty")){var b=this;this.data("dirty",!1);this.on("dirtyable:changed",function(a,
c){b.data("dirty",c).toggleClass("dirty",c)});this.on("input propertychange",function(){b.trigger("dirtyable:changed",!!b.val())});this.each(function(){var b=a(this),c=b.closest("form")[0];if(c){var d="function"===typeof c.onsubmit?c.onsubmit.bind(c):function(){return!0};c.onsubmit=function(){b.trigger("dirtyable:changed",!1);return d()};var g="function"===typeof c.onreset?c.onreset.bind(c):function(){return!0};c.onreset=function(){b.trigger("dirtyable:changed",!1);return g()}}})}};a.fn.values_for_attribute=
function(b){return a.map(a(this),function(c){return a(c).attr(b)})};a.when_all=function(b){return a.when.apply(a,b)};a.fn.toggle_boolean_attribute=function(b){var c=a(this);c.attr(b)?c.removeAttr(b):c.attr(b,!0)};a.trim=function(a){return(a||"").replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")};a.html_to_text=function(b){return a("<div>").prop("innerHTML",b).text()};a.capitalize_first_letter=function(a){return a.charAt(0).toUpperCase()+a.slice(1)};a.hyphen_compatible_titleize=function(a){return a.replace(/\b('?[a-z])/g,
function(a){return a.toUpperCase()})};a.trim_to_length=function(b,c){return b.length>c?a.trim(b).substring(0,c).split(" ").slice(0,-1).join(" ")+"...":b};a.fn.unwrap_contents=function(){return a(this).contents().unwrap()};a.fn.acts_like_input=function(){var b=a(this);return b.is(":input")||b.prop("isContentEditable")};a.fn.cache_iframe_contents=function(){this.each(function(){this.src||this.srcdoc||!this.contentWindow||(this.srcdoc=this.contentWindow.document.documentElement.outerHTML)})};a.fn.capture=
function(b){var c,f;2===arguments.length?f=arguments[1]:(c=arguments[1],f=arguments[2]);var h=function(b,d){var h=b.originalEvent,q;if(q=c?a(h.target).closest(c)[0]:d)h=a.extend(a.event.fix(h),{currentTarget:q,delegateTarget:d,target:h.target}),!1===f.call(q,h)&&(h.stopPropagation(),h.preventDefault())};this.each(function(){var c=a(this),e=c.data("_capture_event_listener");e||(e=a({}),c.data("_capture_event_listener",e));e.prop(b)||(e.prop(b,!0),this.addEventListener(b,function(b){e.triggerHandler(a.Event(b),
this)},!0));e.on(b,h)});return this};void 0!==a.facebox&&(a.facebox_then_reload=function(b,c){a.facebox(b);a(document).bind("close.facebox",function(){(c||PRODUCTION_ENV)&&window.location.reload(!0)})});a.ajax_with_retry=function(b){b=a.extend({},{retry_limit:2,type:"get",dataType:"html",success:function(){},data:{}},b);a.ajax({url:b.url,type:b.type,data:b.data,dataType:b.dataType,try_count:0,retry_limit:b.retry_limit,success:b.success,error:function(){this.try_count++;this.try_count<=this.retry_limit&&
a.ajax(this)}})};a.event_emitter={ensure_jquery_wrapper:function(){return this.jquery_wrapper||(this.jquery_wrapper=a(this))},emit:function(a,b){this.ensure_jquery_wrapper().triggerHandler(a,b)},once:function(a,b){this.ensure_jquery_wrapper().one(a,b)},on:function(a,b){this.ensure_jquery_wrapper().bind(a,b)},off:function(a,b){this.ensure_jquery_wrapper().unbind(a,b)}};a.get_selection=function(){var b=(window.getSelection||document.getSelection||a.noop)();if("undefined"!==typeof b&&b.rangeCount&&!b.isCollapsed)return b};
a.get_selection_range=function(){return getSelection().getRangeAt(0)};a.on_body_available=function(){var b=a.Deferred();if(document.body)b.resolve();else{var c=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;if(!c)return a;(new c(function(a,c){document.body&&(c.disconnect(),b.resolve())})).observe(document.documentElement,{childList:!0})}c=b.promise();return c.done.bind(c)}();a(function(){var c=function(){var b=a.get_selection();if(b)return a("<div>").append(b.getRangeAt(0).cloneContents()).html()};
a(document).on("mouseup",function(){setTimeout(function(){var b=a.get_selection();if(b)for(var c=0;c<b.rangeCount;c++){for(var d=b.getRangeAt(c),e=d.commonAncestorContainer;e.nodeType!==Node.ELEMENT_NODE;)e=e.parentNode;var n=a.Event("textselected",{selection:b,range:d,triggering_event:n});a(e).trigger(n)}},0)});if(b.touch){var e=function(b){c()&&a(b.target).trigger("textselected",{triggering_event:b});window.setImmediate(function(){a(document).one("selectionchange",e)})};a(document).one("selectionchange",
e)}})})(jQuery,Modernizr);
(function(){var a=[].slice;(function(a){return"function"==typeof define&&define.amd?define(["jquery"],a):a(window.jQuery)})(function(b){var c,d,e,f,h,g,k,n,q;return e=function(){function a(c){this.current_flag=null;this.controllers={};this.$inputor=b(c);this.listen()}return a.prototype.controller=function(a){return this.controllers[a||this.current_flag]},a.prototype.set_context_for=function(a){return this.current_flag=a,this},a.prototype.reg=function(a,b){var c,d;return c=(d=this.controllers)[a]||
(d[a]=new f(this,a)),b.alias&&(this.controllers[b.alias]=c),c.init(b),this},a.prototype.listen=function(){var a=this;return this.$inputor.on("keyup.atwho",function(b){return a.on_keyup(b)}).on("keydown.atwho",function(b){return a.on_keydown(b)}).on("scroll.atwho",function(b){var c;return null!=(c=a.controller())?c.view.hide():void 0}).on("blur.atwho",function(b){if(b=a.controller())return b.view.hide(b.get_opt("display_timeout"))})},a.prototype.dispatch=function(){var a=this;return b.map(this.controllers,
function(b){if(b.look_up())return a.set_context_for(b.key)})},a.prototype.on_keyup=function(a){var c;switch(a.keyCode){case k.ESC:a.preventDefault();null!=(c=this.controller())&&c.view.hide();break;case k.DOWN:case k.UP:b.noop();break;default:this.dispatch()}},a.prototype.on_keydown=function(a){var c,d;if((c=null!=(d=this.controller())?d.view:void 0)&&c.visible())switch(a.keyCode){case k.ESC:a.preventDefault();c.hide();break;case k.UP:a.preventDefault();c.prev();break;case k.DOWN:a.preventDefault();
c.next();break;case k.TAB:case k.ENTER:if(!c.visible())break;a.preventDefault();c.choose();break;default:b.noop()}},a}(),f=function(){function d(a,f){this.app=a;this.key=f;this.$inputor=this.app.$inputor;this.id=this.$inputor[0].id||e();this.query=this.setting=null;this.pos=0;c.append(this.$el=b("<div id='atwho-ground-"+this.id+"'></div>"));this.model=new n(this);this.view=new q(this)}var e,f;return f=0,e=function(){return f+=1},d.prototype.init=function(a){return this.setting=b.extend({},this.setting||
b.fn.atwho["default"],a),this.model.reload(this.setting.data)},d.prototype.super_call=function(){var c,d;d=arguments[0];c=2<=arguments.length?a.call(arguments,1):[];try{return h[d].apply(this,c)}catch(e){return b.error(""+e+" Or maybe At.js doesn't have function "+d)}},d.prototype.trigger=function(a,b){var c,d;return b.push(this),c=this.get_opt("alias"),d=c?""+a+"-"+c+".atwho":""+a+".atwho",this.$inputor.trigger(d,b)},d.prototype.callbacks=function(a){return this.get_opt("callbacks")[a]||h[a]},d.prototype.get_opt=
function(a,b){try{return this.setting[a]}catch(c){return null}},d.prototype.catch_query=function(){var a,b,c,d,e,f;return b=this.$inputor.val(),a=this.$inputor.caret("pos"),f=b.slice(0,a),d=this.callbacks("matcher").call(this,this.key,f),"string"==typeof d&&d.length<=this.get_opt("max_len",20)?(e=a-d.length,c=e+d.length,this.pos=e,d={text:d.toLowerCase(),head_pos:e,end_pos:c},this.trigger("matched",[this.key,d.text])):this.view.hide(),this.query=d},d.prototype.rect=function(){var a,b;return a=this.$inputor.caret("offset",
this.pos-1),b=document.selection?0:2,{left:a.left,top:a.top,bottom:a.top+a.height+b}},d.prototype.insert=function(a){var b,c,d,e,f;return b=this.$inputor,a=""+a,d=b.val(),c=this.get_opt("display_flag")?0:this.key.length,e=d.slice(0,(this.query.head_pos||0)-c),f=""+e+a+" "+d.slice(this.query.end_pos||0),b.val(f),b.caret("pos",e.length+a.length+1),b.change()},d.prototype.render_view=function(a){var b;return b=this.get_opt("search_key"),a=this.callbacks("sorter").call(this,this.query.text,a.slice(0,
1001),b),this.view.render(a.slice(0,this.get_opt("limit")))},d.prototype.look_up=function(){var a,c;if(a=this.catch_query())return c=function(a){return a&&0<a.length?this.render_view(a):this.view.hide()},this.model.query(a.text,b.proxy(c,this)),a},d}(),n=function(){function a(b){this.context=b;this.key=this.context.key}var c;return c={},a.prototype.saved=function(){return 0<this.fetch()},a.prototype.query=function(a,b){var c,d,e;c=this.fetch();d=this.context.get_opt("search_key");b(c=this.context.callbacks("filter").call(this.context,
a,c,d));if(!(c&&0<c.length))return null!=(e=this.context.callbacks("remote_filter"))?e.call(this.context,a,b):void 0},a.prototype.fetch=function(){return c[this.key]||[]},a.prototype.save=function(a){return c[this.key]=this.context.callbacks("before_save").call(this.context,a||[])},a.prototype.load=function(a){if(!this.saved()&&a)return this._load(a)},a.prototype.reload=function(a){return this._load(a)},a.prototype._load=function(a){var c=this;return"string"==typeof a?b.ajax(a,{dataType:"json"}).done(function(a){return c.save(a)}):
this.save(a)},a}(),q=function(){function a(c){this.context=c;this.key=this.context.key;this.id=this.context.get_opt("alias")||"at-view-"+this.key.charCodeAt(0);this.$el=b("<div id='"+this.id+"' class='atwho-view'><ul id='"+this.id+"-ul' class='atwho-view-url'></ul></div>");this.timeout_id=null;this.context.$el.append(this.$el);this.bind_event()}return a.prototype.bind_event=function(){var a,c=this;return a=this.$el.find("ul"),a.on("mouseenter.view","li",function(c){return a.find(".cur").removeClass("cur"),
b(c.currentTarget).addClass("cur")}).on("click",function(a){return c.choose(),a.preventDefault()})},a.prototype.visible=function(){return this.$el.is(":visible")},a.prototype.choose=function(){var a;return a=this.$el.find(".cur"),this.context.insert(this.context.callbacks("before_insert").call(this.context,a.data("value"),a)),this.context.trigger("inserted",[a]),this.hide()},a.prototype.reposition=function(){var a,c;return c=this.context.rect(),c.bottom+this.$el.height()-b(window).scrollTop()>b(window).height()&&
(c.bottom=c.top-this.$el.height()),a={left:c.left,top:c.bottom},this.$el.offset(a),this.context.trigger("reposition",[a])},a.prototype.next=function(){var a,b;return a=this.$el.find(".cur").removeClass("cur"),b=a.next(),b.length||(b=this.$el.find("li:first")),b.addClass("cur")},a.prototype.prev=function(){var a,b;return a=this.$el.find(".cur").removeClass("cur"),b=a.prev(),b.length||(b=this.$el.find("li:last")),b.addClass("cur")},a.prototype.show=function(){return this.visible()||this.$el.show(),
this.reposition()},a.prototype.hide=function(a){var b,c=this;return isNaN(a&&this.visible())?this.$el.hide():(b=function(){return c.hide()},clearTimeout(this.timeout_id),this.timeout_id=setTimeout(b,a))},a.prototype.render=function(a){var c,d,e,f,h,k;if(b.isArray(a||0>=a.length)){this.$el.find("ul").empty();d=this.$el.find("ul");f=this.context.get_opt("tpl",g);h=0;for(k=a.length;h<k;h++)e=a[h],c=this.context.callbacks("tpl_eval").call(this.context,f,e),c=b(this.context.callbacks("highlighter").call(this.context,
c,this.context.query.text)),c.data("atwho-info",e),d.append(c);return this.show(),d.find("li:first").addClass("cur")}this.hide()},a}(),k={DOWN:40,UP:38,ESC:27,TAB:9,ENTER:13},h={before_save:function(a){var c,d,e,f;if(!b.isArray(a))return a;f=[];d=0;for(e=a.length;d<e;d++)c=a[d],b.isPlainObject(c)?f.push(c):f.push({name:c});return f},matcher:function(a,b){var c,d;return a="(?:^|\\s)"+a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),d=new RegExp(a+"([A-Za-z0-9_+-]*)$|"+a+"([^\\x00-\\xff]*)$",
"gi"),c=d.exec(b),c?c[2]||c[1]:null},filter:function(a,b,c){var d,e,f,g;g=[];e=0;for(f=b.length;e<f;e++)d=b[e],~d[c].toLowerCase().indexOf(a)&&g.push(d);return g},remote_filter:null,sorter:function(a,b,c){var d,e,f,g;if(!a)return b;g=[];e=0;for(f=b.length;e<f;e++)d=b[e],d.atwho_order=d[c].toLowerCase().indexOf(a),-1<d.atwho_order&&g.push(d);return g.sort(function(a,b){return a.atwho_order-b.atwho_order})},tpl_eval:function(a,b){try{return a.replace(/\$\{([^\}]*)\}/g,function(a,c,d){return b[c]})}catch(c){return""}},
highlighter:function(a,b){var c;return b?(c=new RegExp(">\\s*(\\w*)("+b.replace("+","\\+")+")(\\w*)\\s*<","ig"),a.replace(c,function(a,b,c,d){return"> "+b+"<strong>"+c+"</strong>"+d+" <"})):a},before_insert:function(a,b){return a}},g="<li data-value='${name}'>${name}</li>",d={init:function(a){var c,d;return d=(c=b(this)).data("atwho"),d||c.data("atwho",d=new e(this)),d.reg(a.at,a)},load:function(a,b){var c;if(c=this.controller(a))return c.model.load(b)},run:function(){return this.dispatch()}},c=b("<div id='atwho-container'></div>"),
b.fn.atwho=function(a){var e;return e=arguments,b("body").append(c),this.filter("textarea, input").each(function(){var c;if("object"==typeof a||!a)return d.init.apply(this,e);if(!d[a])return b.error("Method "+a+" does not exist on jQuery.caret");if(c=b(this).data("atwho"))return d[a].apply(c,Array.prototype.slice.call(e,1))})},b.fn.atwho["default"]={at:void 0,alias:void 0,data:null,tpl:g,callbacks:h,search_key:"name",limit:5,max_len:20,display_flag:!0,display_timeout:300}})}).call(this);
(function(){(function(a){return"function"==typeof define&&define.amd?define(["jquery"],a):a(window.jQuery)})(function(a){var b,c,d;return b=function(){function b(a){this.$inputor=a;this.domInputor=this.$inputor[0]}return b.prototype.getPos=function(){var a,b,c,d,e,q,m;return b=this.domInputor,b.focus(),document.selection?(e=document.selection.createRange(),e&&e.parentElement()===b&&(d=b.value.replace(/\r\n/g,"\n"),c=d.length,m=b.createTextRange(),m.moveToBookmark(e.getBookmark()),a=b.createTextRange(),
a.collapse(!1),-1<m.compareEndPoints("StartToEnd",a)?q=c:(q=-m.moveStart("character",-c),m.moveEnd("character",-c)))):q=b.selectionStart,q},b.prototype.setPos=function(a){var b,c;return b=this.domInputor,document.selection?(c=b.createTextRange(),c.move("character",a),c.select()):b.setSelectionRange(a,a)},b.prototype.getPosition=function(a){var b,d,e,n,q,m,p,u,v;return b=this.$inputor,e=function(a){return a.replace(/</g,"&lt").replace(/>/g,"&gt").replace(/`/g,"&#96").replace(/"/g,"&quot").replace(/\r\n|\r|\n/g,
"<br />")},a=a||this.getPos(),p=b.val().slice(0,a),q="<span>"+e(p)+"</span>",q+="<span id='caret'>|</span>",m=new c(b),d=m.create(q).rect(),u=d.left-b.scrollLeft(),v=d.top-b.scrollTop(),n=d.height,{left:u,top:v,height:n}},b.prototype.getOffset=function(b){var c,d,e,n,q,m,p;return c=this.$inputor,document.selection?(q=this.domInputor.createTextRange(),b&&q.move("character",b),m=q.boundingLeft+c.scrollLeft(),p=q.boundingTop+a(window).scrollTop()+c.scrollTop(),d=q.boundingHeight):(e=c.offset(),n=this.getPosition(b),
m=e.left+n.left,p=e.top+n.top,d=n.height),{left:m,top:p,height:d}},b}(),c=function(){function b(a){this.$inputor=a}return b.prototype.css_attr="overflowY height width paddingTop paddingLeft paddingRight paddingBottom marginTop marginLeft marginRight marginBottom fontFamily borderStyle borderWidth wordWrap fontSize lineHeight overflowX text-align".split(" "),b.prototype.mirrorCss=function(){var b,c=this;return b={position:"absolute",left:-9999,top:0,zIndex:-2E4,"white-space":"pre-wrap"},a.each(this.css_attr,
function(a,d){return b[d]=c.$inputor.css(d)}),b},b.prototype.create=function(b){return this.$mirror=a("<div></div>"),this.$mirror.css(this.mirrorCss()),this.$mirror.html(b),this.$inputor.after(this.$mirror),this},b.prototype.rect=function(){var a,b,c;return a=this.$mirror.find("#caret"),b=a.position(),c={left:b.left,top:b.top,height:a.height()},this.$mirror.remove(),c},b}(),d={pos:function(a){return a?this.setPos(a):this.getPos()},position:function(a){return this.getPosition(a)},offset:function(a){return this.getOffset(a)}},
a.fn.caret=function(c){var f;return f=new b(this),d[c]?d[c].apply(f,Array.prototype.slice.call(arguments,1)):a.error("Method "+c+" does not exist on jQuery.caret")}})}).call(this);
(function(){if(!window["com.genius.Genius"].require){var a={},b={},c=function(e,f){var h=d(f,e),g=d(h,"./index"),k;if(k=b[h]||b[g])return k;if(g=a[h]||a[h=g])return k={id:h,exports:{}},b[h]=k.exports,g(k.exports,function(a){return c(a,h.split("/").slice(0,-1).join("/"))},k),b[h]=k.exports;throw"module "+e+" not found";},d=function(a,b){var c=[],d,k;d=/^\.\.?(\/|$)/.test(b)?[a,b].join("/").split("/"):b.split("/");for(var n=0,q=d.length;n<q;n++)k=d[n],".."==k?c.pop():"."!=k&&""!=k&&c.push(k);return c.join("/")};
window["com.genius.Genius"].require=function(a){return c(a,"")};window["com.genius.Genius"].require.define=function(b){for(var c in b)a[c]=b[c]};window["com.genius.Genius"].require.modules=a;window["com.genius.Genius"].require.cache=b}return window["com.genius.Genius"].require}).call(this);
(function(){window["com.genius.Genius"].require.define({jschannel:function(a,b,c){a=function(){function a(b,c,d,e){function f(a){for(var c=0;c<a.length;c++)if(a[c].win===b)return!0;return!1}var g=!1;if("*"===c)for(var k in h){if(h.hasOwnProperty(k)&&"*"!==k&&"object"===typeof h[k][d]&&(g=f(h[k][d])))break}else h["*"]&&h["*"][d]&&(g=f(h["*"][d])),!g&&h[c]&&h[c][d]&&(g=f(h[c][d]));if(g)throw"A channel is already bound to the same window which overlaps with origin '"+c+"' and has scope '"+d+"'";"object"!=
typeof h[c]&&(h[c]={});"object"!=typeof h[c][d]&&(h[c][d]=[]);h[c][d].push({win:b,handler:e})}function b(a){return Array.isArray?Array.isArray(a):-1!=a.constructor.toString().indexOf("Array")}var c=Math.floor(1000001*Math.random()),h={},g={},k=function(a){try{var b=JSON.parse(a.data);if("object"!==typeof b||null===b)throw"malformed";}catch(c){return}var d=a.source;a=a.origin;var e,f,k;"string"===typeof b.method&&(k=b.method.split("::"),2==k.length?(e=k[0],k=k[1]):k=b.method);"undefined"!==typeof b.id&&
(f=b.id);if("string"===typeof k){f=!1;if(h[a]&&h[a][e])for(var D=0;D<h[a][e].length;D++)if(h[a][e][D].win===d){h[a][e][D].handler(a,k,b);f=!0;break}if(!f&&h["*"]&&h["*"][e])for(D=0;D<h["*"][e].length;D++)if(h["*"][e][D].win===d){h["*"][e][D].handler(a,k,b);break}}else if("undefined"!=typeof f&&g[f])g[f](a,k,b)};window.addEventListener?window.addEventListener("message",k,!1):window.attachEvent&&window.attachEvent("onmessage",k);return{build:function(k){var q=function(a){if(k.debugOutput&&window.console&&
window.console.log){try{"string"!==typeof a&&(a=JSON.stringify(a))}catch(b){}console.log("["+u+"] "+a)}};if(!window.postMessage)throw"jschannel cannot run this browser, no postMessage";if(!window.JSON||!window.JSON.stringify||!window.JSON.parse)throw"jschannel cannot run this browser, no JSON parsing/serialization";if("object"!=typeof k)throw"Channel build invoked without a proper object argument";if(!k.window||!k.window.postMessage)throw"Channel.build() called without a valid window argument";if(window===
k.window)throw"target window is same as present window -- not allowed";var m=!1;if("string"===typeof k.origin){var p;"*"===k.origin?m=!0:null!==(p=k.origin.match(/^https?:\/\/(?:[-a-zA-Z0-9_\.])+(?::\d+)?/))&&(k.origin=p[0].toLowerCase(),m=!0)}if(!m)throw"Channel.build() called with an invalid origin";if("undefined"!==typeof k.scope){if("string"!==typeof k.scope)throw"scope, when specified, must be a string";if(1<k.scope.split("::").length)throw"scope may not contain double colons: '::'";}var u=function(){for(var a=
"",b=0;5>b;b++)a+="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".charAt(Math.floor(62*Math.random()));return a}(),v={},A={},D={},x=!1,B=[],s=function(a,b,c){var d=!1,e=!1;return{origin:b,invoke:function(b,d){if(!D[a])throw"attempting to invoke a callback of a nonexistent transaction: "+a;for(var e=!1,f=0;f<c.length;f++)if(b===c[f]){e=!0;break}if(!e)throw"request supports no such callback '"+b+"'";C({id:a,callback:b,params:d})},error:function(b,c){e=!0;if(!D[a])throw"error called for nonexistent message: "+
a;delete D[a];C({id:a,error:b,message:c})},complete:function(b){e=!0;if(!D[a])throw"complete called for nonexistent message: "+a;delete D[a];C({id:a,result:b})},delayReturn:function(a){"boolean"===typeof a&&(d=!0===a);return d},completed:function(){return e}}},G=function(a,b,c){return window.setTimeout(function(){if(A[a]){var d="timeout ("+b+"ms) exceeded on method '"+c+"'";(1,A[a].error)("timeout_error",d);delete A[a];delete g[a]}},b)},K=function(a,c,d){if("function"===typeof k.gotMessageObserver)try{k.gotMessageObserver(a,
d)}catch(f){q("gotMessageObserver() raised an exception: "+f.toString())}if(d.id&&c){if(v[c]){var h=s(d.id,a,d.callbacks?d.callbacks:[]);D[d.id]={};try{if(d.callbacks&&b(d.callbacks)&&0<d.callbacks.length)for(a=0;a<d.callbacks.length;a++){for(var m=d.callbacks[a],p=d.params,u=m.split("/"),B=0;B<u.length-1;B++){var x=u[B];"object"!==typeof p[x]&&(p[x]={});p=p[x]}p[u[u.length-1]]=function(){var a=m;return function(b){return h.invoke(a,b)}}()}var w=v[c](h,d.params);h.delayReturn()||h.completed()||h.complete(w)}catch(R){c=
"runtime_error";d=null;"string"===typeof R?d=R:"object"===typeof R&&(R&&b(R)&&2==R.length?(c=R[0],d=R[1]):"string"===typeof R.error&&(c=R.error,R.message?"string"===typeof R.message?d=R.message:R=R.message:d=""));if(null===d)try{d=JSON.stringify(R),"undefined"==typeof d&&(d=R.toString())}catch(U){d=R.toString()}h.error(c,d)}}}else if(d.id&&d.callback)if(A[d.id]&&A[d.id].callbacks&&A[d.id].callbacks[d.callback])A[d.id].callbacks[d.callback](d.params);else q("ignoring invalid callback, id:"+d.id+" ("+
d.callback+")");else if(d.id)A[d.id]?(d.error?(1,A[d.id].error)(d.error,d.message):void 0!==d.result?(1,A[d.id].success)(d.result):(1,A[d.id].success)(),delete A[d.id],delete g[d.id]):q("ignoring invalid response: "+d.id);else if(c&&v[c])v[c]({origin:a},d.params)};a(k.window,k.origin,"string"===typeof k.scope?k.scope:"",K);var J=function(a){"string"===typeof k.scope&&k.scope.length&&(a=[k.scope,a].join("::"));return a},C=function(a,b){if(!a)throw"postMessage called with null message";q((x?"post  ":
"queue ")+" message: "+JSON.stringify(a));if(b||x){if("function"===typeof k.postMessageObserver)try{k.postMessageObserver(k.origin,a)}catch(c){q("postMessageObserver() raised an exception: "+c.toString())}k.window.postMessage(JSON.stringify(a),k.origin)}else B.push(a)},L={unbind:function(a){if(v[a]){if(!delete v[a])throw"can't delete method: "+a;return!0}return!1},bind:function(a,b){if(!a||"string"!==typeof a)throw"'method' argument to bind must be string";if(!b||"function"!==typeof b)throw"callback missing from bind params";
if(v[a])throw"method '"+a+"' is already bound!";v[a]=b;return this},call:function(a){if(!a)throw"missing arguments to call function";if(!a.method||"string"!==typeof a.method)throw"'method' argument to call must be string";if(!a.success||"function"!==typeof a.success)throw"'success' callback missing from call";var b={},d=[],e=[],h=function(a,c){if(0<=e.indexOf(c))throw"params cannot be a recursive data structure";e.push(c);if("object"===typeof c)for(var f in c)if(c.hasOwnProperty(f)){var g=a+(a.length?
"/":"")+f;"function"===typeof c[f]?(b[g]=c[f],d.push(g),delete c[f]):"object"===typeof c[f]&&h(g,c[f])}};h("",a.params);var k={id:c,method:J(a.method),params:a.params};d.length&&(k.callbacks=d);a.timeout&&G(c,a.timeout,J(a.method));A[c]={callbacks:b,error:a.error,success:a.success};g[c]=K;c++;C(k)},notify:function(a){if(!a)throw"missing arguments to notify function";if(!a.method||"string"!==typeof a.method)throw"'method' argument to notify must be string";C({method:J(a.method),params:a.params})},
destroy:function(){for(var a=k.window,b=k.origin,c="string"===typeof k.scope?k.scope:"",d=h[b][c],e=0;e<d.length;e++)d[e].win===a&&d.splice(e,1);0===h[b][c].length&&delete h[b][c];window.removeEventListener?window.removeEventListener("message",K,!1):window.detachEvent&&window.detachEvent("onmessage",K);x=!1;v={};D={};A={};k.origin=null;B=[];q("channel destroyed");u=""}};L.bind("__ready",function(a,b){q("ready msg received");if(x)throw"received ready message while in ready state.  help!";u="ping"===
b?u+"-R":u+"-L";L.unbind("__ready");x=!0;q("ready msg accepted.");for("ping"===b&&L.notify({method:"__ready",params:"pong"});B.length;)C(B.pop());if("function"===typeof k.onReady)k.onReady(L)});setTimeout(function(){C({method:J("__ready"),params:"ping"},!0)},0);return L}}}();c.exports=a}})})();
(function(a,b,c){function d(a,b){b=b||Error;return function(){var c=arguments,d=c[0],e="["+(a?a+":":"")+d+"] ",f,e=e+c[1].replace(/\{\d+\}/g,function(a){var b=+a.slice(1,-1)+2;return b<c.length?va(c[b]):a}),e=e+("\nhttp://errors.angularjs.org/1.4.1/"+(a?a+"/":"")+d);f=2;for(d="?";f<c.length;f++,d="&")e+=d+"p"+(f-2)+"="+encodeURIComponent(va(c[f]));return new b(e)}}function e(a){if(null==a||T(a))return!1;var b="length"in Object(a)&&a.length;return a.nodeType===Qb&&b?!0:J(a)||ia(a)||0===b||"number"===
typeof b&&0<b&&b-1 in a}function f(a,b,c){var d,g;if(a)if(N(a))for(d in a)"prototype"==d||"length"==d||"name"==d||a.hasOwnProperty&&!a.hasOwnProperty(d)||b.call(c,a[d],d,a);else if(ia(a)||e(a)){var h="object"!==typeof a;d=0;for(g=a.length;d<g;d++)(h||d in a)&&b.call(c,a[d],d,a)}else if(a.forEach&&a.forEach!==f)a.forEach(b,c,a);else if(K(a))for(d in a)b.call(c,a[d],d,a);else if("function"===typeof a.hasOwnProperty)for(d in a)a.hasOwnProperty(d)&&b.call(c,a[d],d,a);else for(d in a)Rc.call(a,d)&&b.call(c,
a[d],d,a);return a}function h(a,b,c){for(var d=Object.keys(a).sort(),e=0;e<d.length;e++)b.call(c,a[d[e]],d[e]);return d}function g(a){return function(b,c){a(c,b)}}function k(){return++id}function n(a,b){b?a.$$hashKey=b:delete a.$$hashKey}function q(a,b,c){for(var d=a.$$hashKey,e=0,f=b.length;e<f;++e){var g=b[e];if(G(g)||N(g))for(var h=Object.keys(g),k=0,m=h.length;k<m;k++){var y=h[k],F=g[y];c&&G(F)?(G(a[y])||(a[y]=ia(F)?[]:{}),q(a[y],[F],!0)):a[y]=F}}n(a,d);return a}function m(a){return q(a,Vb.call(arguments,
1),!1)}function p(a){return q(a,Vb.call(arguments,1),!0)}function u(a){return parseInt(a,10)}function v(a,b){return m(Object.create(a),b)}function A(){}function D(a){return a}function x(a){return function(){return a}}function B(a){return"undefined"===typeof a}function s(a){return"undefined"!==typeof a}function G(a){return null!==a&&"object"===typeof a}function K(a){return null!==a&&"object"===typeof a&&!jd(a)}function J(a){return"string"===typeof a}function C(a){return"number"===typeof a}function L(a){return"[object Date]"===
Wb.call(a)}function N(a){return"function"===typeof a}function Q(a){return"[object RegExp]"===Wb.call(a)}function T(a){return a&&a.window===a}function E(a){return a&&a.$evalAsync&&a.$watch}function X(a){return"boolean"===typeof a}function aa(a){return!(!a||!(a.nodeName||a.prop&&a.attr&&a.find))}function r(a){var b={};a=a.split(",");var c;for(c=0;c<a.length;c++)b[a[c]]=!0;return b}function W(a){return sa(a.nodeName||a[0]&&a[0].nodeName)}function ba(a,b){var c=a.indexOf(b);0<=c&&a.splice(c,1);return c}
function la(a,b,c,d){if(T(a)||E(a))throw qc("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");if(he.test(Wb.call(b)))throw qc("cpta","Can't copy! TypedArray destination cannot be mutated.");if(b){if(a===b)throw qc("cpi","Can't copy! Source and destination are identical.");c=c||[];d=d||[];G(a)&&(c.push(a),d.push(b));var e;if(ia(a))for(e=b.length=0;e<a.length;e++)b.push(la(a[e],null,c,d));else{var g=b.$$hashKey;ia(b)?b.length=0:f(b,function(a,c){delete b[c]});if(K(a))for(e in a)b[e]=
la(a[e],null,c,d);else if(a&&"function"===typeof a.hasOwnProperty)for(e in a)a.hasOwnProperty(e)&&(b[e]=la(a[e],null,c,d));else for(e in a)Rc.call(a,e)&&(b[e]=la(a[e],null,c,d));n(b,g)}}else if(b=a,G(a)){if(c&&-1!==(g=c.indexOf(a)))return d[g];if(ia(a))return la(a,[],c,d);if(he.test(Wb.call(a)))b=new a.constructor(a);else if(L(a))b=new Date(a.getTime());else if(Q(a))b=new RegExp(a.source,a.toString().match(/[^\/]*$/)[0]),b.lastIndex=a.lastIndex;else return e=Object.create(jd(a)),la(a,e,c,d);d&&(c.push(a),
d.push(b))}return b}function w(a,b){if(ia(a)){b=b||[];for(var c=0,d=a.length;c<d;c++)b[c]=a[c]}else if(G(a))for(c in b=b||{},a)if("$"!==c.charAt(0)||"$"!==c.charAt(1))b[c]=a[c];return b||a}function R(a,b){if(a===b)return!0;if(null===a||null===b)return!1;if(a!==a&&b!==b)return!0;var d=typeof a,e;if(d==typeof b&&"object"==d)if(ia(a)){if(!ia(b))return!1;if((d=a.length)==b.length){for(e=0;e<d;e++)if(!R(a[e],b[e]))return!1;return!0}}else{if(L(a))return L(b)?R(a.getTime(),b.getTime()):!1;if(Q(a))return Q(b)?
a.toString()==b.toString():!1;if(E(a)||E(b)||T(a)||T(b)||ia(b)||L(b)||Q(b))return!1;d=fa();for(e in a)if("$"!==e.charAt(0)&&!N(a[e])){if(!R(a[e],b[e]))return!1;d[e]=!0}for(e in b)if(!(e in d||"$"===e.charAt(0)||b[e]===c||N(b[e])))return!1;return!0}return!1}function U(a,b,c){return a.concat(Vb.call(b,c))}function ua(a,b){var c=2<arguments.length?Vb.call(arguments,2):[];return!N(b)||b instanceof RegExp?b:c.length?function(){return arguments.length?b.apply(a,U(c,arguments,0)):b.apply(a,c)}:function(){return arguments.length?
b.apply(a,arguments):b.call(a)}}function wa(a,d){var e=d;"string"===typeof a&&"$"===a.charAt(0)&&"$"===a.charAt(1)?e=c:T(d)?e="$WINDOW":d&&b===d?e="$DOCUMENT":E(d)&&(e="$SCOPE");return e}function ub(a,b){if("undefined"===typeof a)return c;C(b)||(b=b?2:null);return JSON.stringify(a,wa,b)}function pb(a){return J(a)?JSON.parse(a):a}function V(a,b){var c=Date.parse("Jan 01, 1970 00:00:00 "+a)/6E4;return isNaN(c)?b:c}function Da(a,b,c){c=c?-1:1;var d=V(b,a.getTimezoneOffset());b=a;a=c*(d-a.getTimezoneOffset());
b=new Date(b.getTime());b.setMinutes(b.getMinutes()+a);return b}function qa(a){a=Z(a).clone();try{a.empty()}catch(b){}var c=Z("<div>").append(a).html();try{return a[0].nodeType===Sc?sa(c):c.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(a,b){return"<"+sa(b)})}catch(d){return sa(c)}}function Jb(a){try{return decodeURIComponent(a)}catch(b){}}function qb(a){var b={},c,d;f((a||"").split("&"),function(a){a&&(c=a.replace(/\+/g,"%20").split("="),d=Jb(c[0]),s(d)&&(a=s(c[1])?Jb(c[1]):!0,Rc.call(b,d)?
ia(b[d])?b[d].push(a):b[d]=[b[d],a]:b[d]=a))});return b}function hb(a){var b=[];f(a,function(a,c){ia(a)?f(a,function(a){b.push(ea(c,!0)+(!0===a?"":"="+ea(a,!0)))}):b.push(ea(c,!0)+(!0===a?"":"="+ea(a,!0)))});return b.length?b.join("&"):""}function ha(a){return ea(a,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function ea(a,b){return encodeURIComponent(a).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,b?"%20":
"+")}function Kb(a,b){var c,d,e=rc.length;for(d=0;d<e;++d)if(c=rc[d]+b,J(c=a.getAttribute(c)))return c;return null}function vb(a,b){var c,d,e={};f(rc,function(b){b+="app";!c&&a.hasAttribute&&a.hasAttribute(b)&&(c=a,d=a.getAttribute(b))});f(rc,function(b){b+="app";var e;!c&&(e=a.querySelector("["+b.replace(":","\\:")+"]"))&&(c=e,d=e.getAttribute(b))});c&&(e.strictDi=null!==Kb(c,"strict-di"),b(c,d?[d]:[],e))}function Bb(c,d,e){G(e)||(e={});e=m({strictDi:!1},e);var g=function(){c=Z(c);if(c.injector()){var a=
c[0]===b?"document":qa(c);throw qc("btstrpd","App Already Bootstrapped with this Element '{0}'",a.replace(/</,"&lt;").replace(/>/,"&gt;"));}d=d||[];d.unshift(["$provide",function(a){a.value("$rootElement",c)}]);e.debugInfoEnabled&&d.push(["$compileProvider",function(a){a.debugInfoEnabled(!0)}]);d.unshift("ng");a=oa(d,e.strictDi);a.invoke(["$rootScope","$rootElement","$compile","$injector",function(a,b,c,d){a.$apply(function(){b.data("$injector",d);c(b)(a)})}]);return a},h=/^NG_ENABLE_DEBUG_INFO!/,
k=/^NG_DEFER_BOOTSTRAP!/;a&&h.test(a.name)&&(e.debugInfoEnabled=!0,a.name=a.name.replace(h,""));if(a&&!k.test(a.name))return g();a.name=a.name.replace(k,"");yb.resumeBootstrap=function(a){f(a,function(a){d.push(a)});return g()};N(yb.resumeDeferredBootstrap)&&yb.resumeDeferredBootstrap()}function wb(){a.name="NG_ENABLE_DEBUG_INFO!"+a.name;a.location.reload()}function Oa(a){a=yb.element(a).injector();if(!a)throw qc("test","no injector found for element argument to getTestability");return a.get("$$testability")}
function ib(a,b){b=b||"_";return a.replace(Qe,function(a,c){return(c?b:"")+a.toLowerCase()})}function rb(){var b;if(!kd){var d=ld();Cb=a.jQuery;s(d)&&(Cb=null===d?c:a[d]);Cb&&Cb.fn.on?(Z=Cb,m(Cb.fn,{scope:Ga.scope,isolateScope:Ga.isolateScope,controller:Ga.controller,injector:Ga.injector,inheritedData:Ga.inheritedData}),b=Cb.cleanData,Cb.cleanData=function(a){var c;if(Ca)Ca=!1;else for(var d=0,e;null!=(e=a[d]);d++)(c=Cb._data(e,"events"))&&c.$destroy&&Cb(e).triggerHandler("$destroy");b(a)}):Z=ca;
yb.element=Z;kd=!0}}function jb(a,b,c){if(!a)throw qc("areq","Argument '{0}' is {1}",b||"?",c||"required");return a}function kb(a,b,c){c&&ia(a)&&(a=a[a.length-1]);jb(N(a),b,"not a function, got "+(a&&"object"===typeof a?a.constructor.name||"Object":typeof a));return a}function Ya(a,b){if("hasOwnProperty"===a)throw qc("badname","hasOwnProperty is not a valid {0} name",b);}function Ta(a,b,c){if(!b)return a;b=b.split(".");for(var d,e=a,f=b.length,g=0;g<f;g++)d=b[g],a&&(a=(e=a)[d]);return!c&&N(a)?ua(e,
a):a}function Y(a){var b=a[0];a=a[a.length-1];var c=[b];do{b=b.nextSibling;if(!b)break;c.push(b)}while(b!==a);return Z(c)}function fa(){return Object.create(null)}function z(a){function b(a,c,d){return a[c]||(a[c]=d())}var c=d("$injector"),e=d("ng");a=b(a,"angular",Object);a.$$minErr=a.$$minErr||d;return b(a,"module",function(){var a={};return function(d,f,g){if("hasOwnProperty"===d)throw e("badname","hasOwnProperty is not a valid {0} name","module");f&&a.hasOwnProperty(d)&&(a[d]=null);return b(a,
d,function(){function a(b,c,d,f){f||(f=e);return function(){f[d||"push"]([b,c,arguments]);return y}}function b(a,c){return function(b,f){f&&N(f)&&(f.$$moduleName=d);e.push([a,c,arguments]);return y}}if(!f)throw c("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",d);var e=[],h=[],k=[],m=a("$injector","invoke","push",h),y={_invokeQueue:e,_configBlocks:h,_runBlocks:k,
requires:f,name:d,provider:b("$provide","provider"),factory:b("$provide","factory"),service:b("$provide","service"),value:a("$provide","value"),constant:a("$provide","constant","unshift"),decorator:b("$provide","decorator"),animation:b("$animateProvider","register"),filter:b("$filterProvider","register"),controller:b("$controllerProvider","register"),directive:b("$compileProvider","directive"),config:m,run:function(a){k.push(a);return this}};g&&m(g);return y})}})}function Ua(a){var b=[];return JSON.stringify(a,
function(a,c){c=wa(a,c);if(G(c)){if(0<=b.indexOf(c))return"<<already seen>>";b.push(c)}return c})}function va(a){return"function"===typeof a?a.toString().replace(/ \{[\s\S]*$/,""):"undefined"===typeof a?"undefined":"string"!==typeof a?Ua(a):a}function da(b){m(b,{bootstrap:Bb,copy:la,extend:m,merge:p,equals:R,element:Z,forEach:f,injector:oa,noop:A,bind:ua,toJson:ub,fromJson:pb,identity:D,isUndefined:B,isDefined:s,isString:J,isFunction:N,isObject:G,isNumber:C,isElement:aa,isArray:ia,version:Se,isDate:L,
lowercase:sa,uppercase:Uc,callbacks:{counter:0},getTestability:Oa,$$minErr:d,$$csp:Rb,reloadWithDebugInfo:wb});Vc=z(a);try{Vc("ngLocale")}catch(c){Vc("ngLocale",[]).provider("$locale",Zb)}Vc("ng",["ngLocale"],["$provide",function(a){a.provider({$$sanitizeUri:Wd});a.provider("$compile",Bc).directive({a:of,input:Te,textarea:Te,form:pf,script:Ue,select:qf,style:y,option:rf,ngBind:Ve,ngBindHtml:Wc,ngBindTemplate:sf,ngClass:tf,ngClassEven:uf,ngClassOdd:We,ngCloak:vf,ngController:wf,ngForm:xf,ngHide:yf,
ngIf:ie,ngInclude:zf,ngInit:Af,ngNonBindable:Bf,ngPluralize:Cf,ngRepeat:Df,ngShow:Ef,ngStyle:Ff,ngSwitch:Gf,ngSwitchWhen:Hf,ngSwitchDefault:If,ngOptions:Jf,ngTransclude:Kf,ngModel:Lf,ngList:ka,ngChange:Xe,pattern:M,ngPattern:M,required:F,ngRequired:F,minlength:I,ngMinlength:I,maxlength:H,ngMaxlength:H,ngValue:je,ngModelOptions:Mf}).directive({ngInclude:Nf}).directive(Bd).directive(Ye);a.provider({$anchorScroll:ga,$animate:Ze,$$animateQueue:ke,$$AnimateRunner:Of,$browser:de,$cacheFactory:wc,$controller:gc,
$document:Ra,$exceptionHandler:zd,$filter:ee,$interpolate:Dc,$interval:yc,$http:tb,$httpParamSerializer:Ad,$httpParamSerializerJQLike:Oc,$httpBackend:sb,$location:Ee,$log:Fe,$parse:Mc,$rootScope:mf,$q:Ke,$$q:Ab,$sce:Ac,$sceDelegate:ja,$sniffer:ae,$templateCache:yd,$templateRequest:Ub,$$testability:Me,$timeout:Ne,$window:ce,$$rAF:nf,$$asyncCallback:dd,$$jqLite:Nc,$$HashMap:Pf,$$cookieReader:nc})}])}function xa(a){return a.replace(sc,function(a,b,c,d){return d?c.toUpperCase():c}).replace(le,"Moz$1")}
function ec(a){a=a.nodeType;return a===Qb||!a||9===a}function Va(a,b){var c,d,e=b.createDocumentFragment(),g=[];if(Cd.test(a)){c=c||e.appendChild(b.createElement("div"));d=(Qf.exec(a)||["",""])[1].toLowerCase();d=Nb[d]||Nb._default;c.innerHTML=d[1]+a.replace(me,"<$1></$2>")+d[2];for(d=d[0];d--;)c=c.lastChild;g=U(g,c.childNodes);c=e.firstChild;c.textContent=""}else g.push(b.createTextNode(a));e.textContent="";e.innerHTML="";f(g,function(a){e.appendChild(a)});return e}function ca(a){if(a instanceof
ca)return a;var c;J(a)&&(a=ya(a),c=!0);if(!(this instanceof ca)){if(c&&"<"!=a.charAt(0))throw Db("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new ca(a)}if(c){c=b;var d;a=(d=ne.exec(a))?[c.createElement(d[1])]:(d=Va(a,c))?d.childNodes:[]}nb(this,a)}function ra(a){return a.cloneNode(!0)}function Pa(a,b){b||za(a);if(a.querySelectorAll)for(var c=a.querySelectorAll("*"),d=0,e=c.length;d<e;d++)za(c[d])}function lb(a,b,
c,d){if(s(d))throw Db("offargs","jqLite#off() does not support the `selector` argument");var e=(d=Wa(a))&&d.events,g=d&&d.handle;if(g)if(b)f(b.split(" "),function(b){if(s(c)){var d=e[b];ba(d||[],c);if(d&&0<d.length)return}a.removeEventListener(b,g,!1);delete e[b]});else for(b in e)"$destroy"!==b&&a.removeEventListener(b,g,!1),delete e[b]}function za(a,b){var d=a.ng339,e=d&&ic[d];e&&(b?delete e.data[b]:(e.handle&&(e.events.$destroy&&e.handle({},"$destroy"),lb(a)),delete ic[d],a.ng339=c))}function Wa(a,
b){var d=a.ng339,d=d&&ic[d];b&&!d&&(a.ng339=d=++oe,d=ic[d]={events:{},data:{},handle:c});return d}function Aa(a,b,c){if(ec(a)){var d=s(c),e=!d&&b&&!G(b),f=!b;a=(a=Wa(a,!e))&&a.data;if(d)a[b]=c;else{if(f)return a;if(e)return a&&a[b];m(a,b)}}}function O(a,b){return a.getAttribute?-1<(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+b+" "):!1}function mb(a,b){b&&a.setAttribute&&f(b.split(" "),function(b){a.setAttribute("class",ya((" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g,
" ").replace(" "+ya(b)+" "," ")))})}function ma(a,b){if(b&&a.setAttribute){var c=(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");f(b.split(" "),function(a){a=ya(a);-1===c.indexOf(" "+a+" ")&&(c+=a+" ")});a.setAttribute("class",ya(c))}}function nb(a,b){if(b)if(b.nodeType)a[a.length++]=b;else{var c=b.length;if("number"===typeof c&&b.window!==b){if(c)for(var d=0;d<c;d++)a[a.length++]=b[d]}else a[a.length++]=b}}function Ba(a,b){return Ja(a,"$"+(b||"ngController")+"Controller")}function Ja(a,
b,d){9==a.nodeType&&(a=a.documentElement);for(b=ia(b)?b:[b];a;){for(var e=0,f=b.length;e<f;e++)if((d=Z.data(a,b[e]))!==c)return d;a=a.parentNode||11===a.nodeType&&a.host}}function lc(a){for(Pa(a,!0);a.firstChild;)a.removeChild(a.firstChild)}function Qa(a,b){b||Pa(a);var c=a.parentNode;c&&c.removeChild(a)}function db(b,c){c=c||a;if("complete"===c.document.readyState)c.setTimeout(b);else Z(c).on("load",b)}function Ma(a,b){var c=Dd[b.toLowerCase()];return c&&ab[W(a)]&&c}function Hb(a,b){var c=a.nodeName;
return("INPUT"===c||"TEXTAREA"===c)&&$e[b]}function fc(a,b){var c=function(c,d){c.isDefaultPrevented=function(){return c.defaultPrevented};var e=b[d||c.type],f=e?e.length:0;if(f){if(B(c.immediatePropagationStopped)){var g=c.stopImmediatePropagation;c.stopImmediatePropagation=function(){c.immediatePropagationStopped=!0;c.stopPropagation&&c.stopPropagation();g&&g.call(c)}}c.isImmediatePropagationStopped=function(){return!0===c.immediatePropagationStopped};1<f&&(e=w(e));for(var h=0;h<f;h++)c.isImmediatePropagationStopped()||
e[h].call(a,c)}};c.elem=a;return c}function Nc(){this.$get=function(){return m(ca,{hasClass:function(a,b){a.attr&&(a=a[0]);return O(a,b)},addClass:function(a,b){a.attr&&(a=a[0]);return ma(a,b)},removeClass:function(a,b){a.attr&&(a=a[0]);return mb(a,b)}})}}function xb(a,b){var c=a&&a.$$hashKey;if(c)return"function"===typeof c&&(c=a.$$hashKey()),c;c=typeof a;return c="function"==c||"object"==c&&null!==a?a.$$hashKey=c+":"+(b||k)():c+":"+a}function Fa(a,b){if(b){var c=0;this.nextUid=function(){return++c}}f(a,
this.put,this)}function mc(a){return(a=a.toString().replace(Gc,"").match(Xc))?"function("+(a[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function oa(a,b){function d(a){return function(b,c){if(G(b))f(b,g(a));else return a(b,c)}}function e(a,b){Ya(a,"service");if(N(b)||ia(b))b=M.instantiate(b);if(!b.$get)throw Eb("pget","Provider '{0}' must define $get factory method.",a);return p[a+"Provider"]=b}function h(a,b){return function(){var c=r.invoke(b,this);if(B(c))throw Eb("undef","Provider '{0}' must return a value from $get factory method.",
a);return c}}function k(a,b,c){return e(a,{$get:!1!==c?h(a,b):b})}function m(a){var b=[],c;f(a,function(a){function d(a){var b,c;b=0;for(c=a.length;b<c;b++){var e=a[b],f=M.get(e[0]);f[e[1]].apply(f,e[2])}}if(!q.get(a)){q.put(a,!0);try{J(a)?(c=Vc(a),b=b.concat(m(c.requires)).concat(c._runBlocks),d(c._invokeQueue),d(c._configBlocks)):N(a)?b.push(M.invoke(a)):ia(a)?b.push(M.invoke(a)):kb(a,"module")}catch(e){throw ia(a)&&(a=a[a.length-1]),e.message&&e.stack&&-1==e.stack.indexOf(e.message)&&(e=e.message+
"\n"+e.stack),Eb("modulerr","Failed to instantiate module {0} due to:\n{1}",a,e.stack||e.message||e);}}});return b}function y(a,c){function d(b,e){if(a.hasOwnProperty(b)){if(a[b]===F)throw Eb("cdep","Circular dependency found: {0}",b+" <- "+n.join(" <- "));return a[b]}try{return n.unshift(b),a[b]=F,a[b]=c(b,e)}catch(f){throw a[b]===F&&delete a[b],f;}finally{n.shift()}}function e(a,c,f,g){"string"===typeof f&&(g=f,f=null);var h=[],k=oa.$$annotate(a,b,g),m,y,F;y=0;for(m=k.length;y<m;y++){F=k[y];if("string"!==
typeof F)throw Eb("itkn","Incorrect injection token! Expected service name as string, got {0}",F);h.push(f&&f.hasOwnProperty(F)?f[F]:d(F,g))}ia(a)&&(a=a[m]);return a.apply(c,h)}return{invoke:e,instantiate:function(a,b,c){var d=Object.create((ia(a)?a[a.length-1]:a).prototype||null);a=e(a,d,b,c);return G(a)||N(a)?a:d},get:d,annotate:oa.$$annotate,has:function(b){return p.hasOwnProperty(b+"Provider")||a.hasOwnProperty(b)}}}b=!0===b;var F={},n=[],q=new Fa([],!0),p={$provide:{provider:d(e),factory:d(k),
service:d(function(a,b){return k(a,["$injector",function(a){return a.instantiate(b)}])}),value:d(function(a,b){return k(a,x(b),!1)}),constant:d(function(a,b){Ya(a,"constant");p[a]=b;w[a]=b}),decorator:function(a,b){var c=M.get(a+"Provider"),d=c.$get;c.$get=function(){var a=r.invoke(d,c);return r.invoke(b,null,{$delegate:a})}}}},M=p.$injector=y(p,function(a,b){yb.isString(b)&&n.push(b);throw Eb("unpr","Unknown provider: {0}",n.join(" <- "));}),w={},r=w.$injector=y(w,function(a,b){var d=M.get(a+"Provider",
b);return r.invoke(d.$get,d,c,a)});f(m(a),function(a){a&&r.invoke(a)});return r}function ga(){var a=!0;this.disableAutoScrolling=function(){a=!1};this.$get=["$window","$location","$rootScope",function(b,c,d){function e(a){var b=null;Array.prototype.some.call(a,function(a){if("a"===W(a))return b=a,!0});return b}function f(a){if(a){a.scrollIntoView();var c;c=g.yOffset;N(c)?c=c():aa(c)?(c=c[0],c="fixed"!==b.getComputedStyle(c).position?0:c.getBoundingClientRect().bottom):C(c)||(c=0);c&&(a=a.getBoundingClientRect().top,
b.scrollBy(0,a-c))}else b.scrollTo(0,0)}function g(a){a=J(a)?a:c.hash();var b;a?(b=h.getElementById(a))?f(b):(b=e(h.getElementsByName(a)))?f(b):"top"===a&&f(null):f(null)}var h=b.document;a&&d.$watch(function(){return c.hash()},function(a,b){a===b&&""===a||db(function(){d.$evalAsync(g)})});return g}]}function Xa(a,b){if(!a&&!b)return"";if(!a)return b;if(!b)return a;ia(a)&&(a=a.join(" "));ia(b)&&(b=b.join(" "));return a+" "+b}function Za(a){J(a)&&(a=a.split(" "));var b=fa();f(a,function(a){a.length&&
(b[a]=!0)});return b}function eb(a){return G(a)?a:{}}function dd(){this.$get=["$$rAF","$timeout",function(a,b){return a.supported?function(b){return a(b)}:function(a){return b(a,0,!1)}}]}function xd(a,b,c,d){function e(a){try{a.apply(null,Vb.call(arguments,1))}finally{if(M--,0===M)for(;w.length;)try{w.pop()()}catch(b){c.error(b)}}}function g(){h();k()}function h(){a:{try{r=F.state;break a}catch(a){}r=void 0}r=B(r)?null:r;R(r,x)&&(r=x);x=r}function k(){if(s!==m.url()||H!==r)s=m.url(),H=r,f(v,function(a){a(m.url(),
r)})}var m=this,y=a.location,F=a.history,n=a.setTimeout,q=a.clearTimeout,p={};m.isMock=!1;var M=0,w=[];m.$$completeOutstandingRequest=e;m.$$incOutstandingRequestCount=function(){M++};m.notifyWhenNoOutstandingRequests=function(a){0===M?a():w.push(a)};var r,H,s=y.href,I=b.find("base"),u=null;h();H=r;m.url=function(b,c,e){B(e)&&(e=null);y!==a.location&&(y=a.location);F!==a.history&&(F=a.history);if(b){var f=H===e;if(s===b&&(!d.history||f))return m;var g=s&&Tb(s)===Tb(b);s=b;H=e;if(!d.history||g&&f){if(!g||
u)u=b;c?y.replace(b):g?(c=y,e=b.indexOf("#"),b=-1===e?"":b.substr(e+1),c.hash=b):y.href=b}else F[c?"replaceState":"pushState"](e,"",b),h(),H=r;return m}return u||y.href.replace(/%27/g,"'")};m.state=function(){return r};var v=[],z=!1,x=null;m.onUrlChange=function(b){if(!z){if(d.history)Z(a).on("popstate",g);Z(a).on("hashchange",g);z=!0}v.push(b);return b};m.$$applicationDestroyed=function(){Z(a).off("hashchange popstate",g)};m.$$checkUrlChange=k;m.baseHref=function(){var a=I.attr("href");return a?
a.replace(/^(https?\:)?\/\/[^\/]*/,""):""};m.defer=function(a,b){var c;M++;c=n(function(){delete p[c];e(a)},b||0);p[c]=!0;return c};m.defer.cancel=function(a){return p[a]?(delete p[a],q(a),e(A),!0):!1}}function de(){this.$get=["$window","$log","$sniffer","$document",function(a,b,c,d){return new xd(a,d,b,c)}]}function wc(){this.$get=function(){function a(c,e){function f(a){a!=q&&(p?p==a&&(p=a.n):p=a,g(a.n,a.p),g(a,q),q=a,q.n=null)}function g(a,b){a!=b&&(a&&(a.p=b),b&&(b.n=a))}if(c in b)throw d("$cacheFactory")("iid",
"CacheId '{0}' is already taken!",c);var h=0,k=m({},e,{id:c}),y={},F=e&&e.capacity||Number.MAX_VALUE,n={},q=null,p=null;return b[c]={put:function(a,b){if(!B(b)){if(F<Number.MAX_VALUE){var c=n[a]||(n[a]={key:a});f(c)}a in y||h++;y[a]=b;h>F&&this.remove(p.key);return b}},get:function(a){if(F<Number.MAX_VALUE){var b=n[a];if(!b)return;f(b)}return y[a]},remove:function(a){if(F<Number.MAX_VALUE){var b=n[a];if(!b)return;b==q&&(q=b.p);b==p&&(p=b.n);g(b.n,b.p);delete n[a]}delete y[a];h--},removeAll:function(){y=
{};h=0;n={};q=p=null},destroy:function(){n=k=y=null;delete b[c]},info:function(){return m({},k,{size:h})}}}var b={};a.info=function(){var a={};f(b,function(b,c){a[c]=b.info()});return a};a.get=function(a){return b[a]};return a}}function yd(){this.$get=["$cacheFactory",function(a){return a("templates")}]}function Bc(a,d){function e(a,b,c){var d=/^\s*([@&]|=(\*?))(\??)\s*(\w*)\s*$/,g={};f(a,function(a,e){var f=a.match(d);if(!f)throw bb("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",
b,e,a,c?"controller bindings definition":"isolate scope definition");g[e]={mode:f[1][0],collection:"*"===f[2],optional:"?"===f[3],attrName:f[4]||e}});return g}function h(a){var b=a.charAt(0);if(!b||b!==sa(b))throw bb("baddir","Directive name '{0}' is invalid. The first character must be a lowercase letter",a);if(a!==a.trim())throw bb("baddir","Directive name '{0}' is invalid. The name should not contain leading or trailing whitespaces",a);}var k={},y=/^\s*directive\:\s*([\w\-]+)\s+(.*)$/,F=/(([\w\-]+)(?:\:([^;]+))?;?)/,
n=r("ngSrc,ngSrcset,src,srcset"),q=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,p=/^(on[a-z]+|formaction)$/;this.directive=function Tc(b,c){Ya(b,"directive");J(b)?(h(b),jb(c,"directiveFactory"),k.hasOwnProperty(b)||(k[b]=[],a.factory(b+"Directive",["$injector","$exceptionHandler",function(a,c){var d=[];f(k[b],function(f,g){try{var h=a.invoke(f);N(h)?h={compile:x(h)}:!h.compile&&h.link&&(h.compile=x(h.link));h.priority=h.priority||0;h.index=g;h.name=h.name||b;h.require=h.require||h.controller&&h.name;h.restrict=
h.restrict||"EA";var k=h,m=h,y=h.name,S={isolateScope:null,bindToController:null};G(m.scope)&&(!0===m.bindToController?(S.bindToController=e(m.scope,y,!0),S.isolateScope={}):S.isolateScope=e(m.scope,y,!1));G(m.bindToController)&&(S.bindToController=e(m.bindToController,y,!0));if(G(S.bindToController)){var F=m.controller,n=m.controllerAs;if(!F)throw bb("noctrl","Cannot bind to controller without directive '{0}'s controller.",y);var q;a:if(n&&J(n))q=n;else{if(J(F)){var p=pe.exec(F);if(p){q=p[3];break a}}q=
void 0}if(!q)throw bb("noident","Cannot bind to controller without identifier for directive '{0}'.",y);}var M=k.$$bindings=S;G(M.isolateScope)&&(h.$$isolateBindings=M.isolateScope);h.$$moduleName=f.$$moduleName;d.push(h)}catch(Ka){c(Ka)}});return d}])),k[b].push(c)):f(b,g(Tc));return this};this.aHrefSanitizationWhitelist=function(a){return s(a)?(d.aHrefSanitizationWhitelist(a),this):d.aHrefSanitizationWhitelist()};this.imgSrcSanitizationWhitelist=function(a){return s(a)?(d.imgSrcSanitizationWhitelist(a),
this):d.imgSrcSanitizationWhitelist()};var M=!0;this.debugInfoEnabled=function(a){return s(a)?(M=a,this):M};this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function(a,d,e,g,h,S,Sa,Ka,w,$a,r){function H(a,b){try{a.addClass(b)}catch(c){}}function s(a,b,c,d,e){a instanceof Z||(a=Z(a));f(a,function(b,c){b.nodeType==Sc&&b.nodeValue.match(/\S+/)&&(a[c]=Z(b).wrap("<span></span>").parent()[0])});
var g=I(a,b,a,c,d,e);s.$$addScopeClass(a);var h=null;return function(b,c,d){jb(b,"scope");d=d||{};var e=d.parentBoundTranscludeFn,f=d.transcludeControllers;d=d.futureParentElement;e&&e.$$boundTransclude&&(e=e.$$boundTransclude);h||(h=(d=d&&d[0])?"foreignobject"!==W(d)&&d.toString().match(/SVG/)?"svg":"html":"html");d="html"!==h?Z(O(h,Z("<div>").append(a).html())):c?Ga.clone.call(a):a;if(f)for(var k in f)d.data("$"+k+"Controller",f[k].instance);s.$$addScopeInfo(d,b);c&&c(d,b);g&&g(b,d,d,e);return d}}
function I(a,b,d,e,f,g){function h(a,d,e,f){var g,m,y,S,F,q,Sa;if(n)for(Sa=Array(d.length),S=0;S<k.length;S+=3)g=k[S],Sa[g]=d[g];else Sa=d;S=0;for(F=k.length;S<F;)if(m=Sa[k[S++]],d=k[S++],g=k[S++],d){if(d.scope){if(y=a.$new(),s.$$addScopeInfo(Z(m),y),q=d.$$destroyBindings)d.$$destroyBindings=null,y.$on("$destroyed",q)}else y=a;q=d.transcludeOnThisElement?u(a,d.transclude,f):!d.templateOnThisElement&&f?f:!f&&b?u(a,b):null;d(g,y,m,e,q,d)}else g&&g(a,m.childNodes,c,f)}for(var k=[],m,y,S,F,n,q=0;q<a.length;q++){m=
new qb;y=B(a[q],[],m,0===q?e:c,f);(g=y.length?U(y,a[q],m,b,d,null,[],[],g):null)&&g.scope&&s.$$addScopeClass(m.$$element);m=g&&g.terminal||!(S=a[q].childNodes)||!S.length?null:I(S,g?(g.transcludeOnThisElement||!g.templateOnThisElement)&&g.transclude:b);if(g||m)k.push(q,g,m),F=!0,n=n||g;g=null}return F?h:null}function u(a,b,c){return function(d,e,f,g,h){d||(d=a.$new(!1,h),d.$$transcluded=!0);return b(d,e,{parentBoundTranscludeFn:c,transcludeControllers:f,futureParentElement:g})}}function B(a,b,c,d,
e){var f=c.$attr,g;switch(a.nodeType){case Qb:ua(b,Lb(W(a)),"E",d,e);for(var h,k,m,S=a.attributes,n=0,q=S&&S.length;n<q;n++){var Sa=!1,p=!1;h=S[n];g=h.name;k=ya(h.value);h=Lb(g);if(m=da.test(h))g=g.replace(qe,"").substr(8).replace(/_(.)/g,function(a,b){return b.toUpperCase()});var M=h.replace(/(Start|End)$/,"");wa(M)&&h===M+"Start"&&(Sa=g,p=g.substr(0,g.length-5)+"end",g=g.substr(0,g.length-6));h=Lb(g.toLowerCase());f[h]=g;if(m||!c.hasOwnProperty(h))c[h]=k,Ma(a,h)&&(c[h]=!0);ub(a,b,k,h,m);ua(b,h,
"A",d,e,Sa,p)}a=a.className;G(a)&&(a=a.animVal);if(J(a)&&""!==a)for(;g=F.exec(a);)h=Lb(g[2]),ua(b,h,"C",d,e)&&(c[h]=ya(g[3])),a=a.substr(g.index+g[0].length);break;case Sc:if(11===Sb)for(;a.parentNode&&a.nextSibling&&a.nextSibling.nodeType===Sc;)a.nodeValue+=a.nextSibling.nodeValue,a.parentNode.removeChild(a.nextSibling);L(b,a.nodeValue);break;case 8:try{if(g=y.exec(a.nodeValue))h=Lb(g[1]),ua(b,h,"M",d,e)&&(c[h]=ya(g[2]))}catch(Ka){}}b.sort(Jb);return b}function z(a,b,c){var d=[],e=0;if(b&&a.hasAttribute&&
a.hasAttribute(b)){do{if(!a)throw bb("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",b,c);a.nodeType==Qb&&(a.hasAttribute(b)&&e++,a.hasAttribute(c)&&e--);d.push(a);a=a.nextSibling}while(0<e)}else d.push(a);return Z(d)}function x(a,b,c){return function(d,e,f,g,h){e=z(e[0],b,c);return a(d,e,f,g,h)}}function U(a,d,f,g,h,k,m,y,F){function n(a,b,c,d){if(a){c&&(a=x(a,c,d));a.require=I.require;a.directiveName=u;if(La===I||I.$$isolateScope)a=pb(a,{isolateScope:!0});m.push(a)}if(b){c&&
(b=x(b,c,d));b.require=I.require;b.directiveName=u;if(La===I||I.$$isolateScope)b=pb(b,{isolateScope:!0});y.push(b)}}function Sa(a,b,c,d){var e;if(J(b)){var f=b.match(q);b=b.substring(f[0].length);var g=f[1]||f[3],f="?"===f[2];"^^"===g?c=c.parent():e=(e=d&&d[b])&&e.instance;e||(d="$"+b+"Controller",e=g?c.inheritedData(d):c.data(d));if(!e&&!f)throw bb("ctreq","Controller '{0}', required by directive '{1}', can't be found!",b,a);}else if(ia(b))for(e=[],g=0,f=b.length;g<f;g++)e[g]=Sa(a,b[g],c,d);return e||
null}function p(a,b,c,d,e,f){var g=fa(),h;for(h in d){var k=d[h],m={$scope:k===La||k.$$isolateScope?e:f,$element:a,$attrs:b,$transclude:c},y=k.controller;"@"==y&&(y=b[k.name]);m=S(y,m,!0,k.controllerAs);g[k.name]=m;pc||a.data("$"+k.name+"Controller",m.instance)}return g}function M(a,b,e,g,h,k){function S(a,b,d){var e;E(a)||(d=b,b=a,a=c);pc&&(e=na);d||(d=pc?H.parent():H);return h(a,b,e,d,u)}var F,n,q,Ka,na,Fc,H;d===e?(g=f,H=f.$$element):(H=Z(e),g=new qb(H,f));La&&(Ka=b.$new(!0));h&&(Fc=S,Fc.$$boundTransclude=
h);$a&&(na=p(H,g,Fc,$a,Ka,b));La&&(s.$$addScopeInfo(H,Ka,!0,!(r&&(r===La||r===La.$$originalDirective))),s.$$addScopeClass(H,!0),Ka.$$isolateBindings=La.$$isolateBindings,T(b,g,Ka,Ka.$$isolateBindings,La,Ka));if(na){var Ea=La||w,fe;Ea&&na[Ea.name]&&(n=Ea.$$bindings.bindToController,(q=na[Ea.name])&&q.identifier&&n&&(fe=q,k.$$destroyBindings=T(b,g,q.instance,n,Ea)));for(F in na){q=na[F];var I=q();I!==q.instance&&(q.instance=I,H.data("$"+F+"Controller",I),q===fe&&(k.$$destroyBindings(),k.$$destroyBindings=
T(b,g,I,n,Ea)))}}F=0;for(k=m.length;F<k;F++)n=m[F],aa(n,n.isolateScope?Ka:b,H,g,n.require&&Sa(n.directiveName,n.require,H,na),Fc);var u=b;La&&(La.template||null===La.templateUrl)&&(u=Ka);a&&a(u,e.childNodes,c,h);for(F=y.length-1;0<=F;F--)n=y[F],aa(n,n.isolateScope?Ka:b,H,g,n.require&&Sa(n.directiveName,n.require,H,na),Fc)}F=F||{};for(var Ka=-Number.MAX_VALUE,w,$a=F.controllerDirectives,La=F.newIsolateScopeDirective,r=F.templateDirective,na=F.nonTlbTranscludeDirective,Fc=!1,H=!1,pc=F.hasElementTranscludeDirective,
Ea=f.$$element=Z(d),I,u,v,ge=g,Tc,R=0,A=a.length;R<A;R++){I=a[R];var D=I.$$start,Rf=I.$$end;D&&(Ea=z(d,D,Rf));v=c;if(Ka>I.priority)break;if(v=I.scope)I.templateUrl||(G(v)?(V("new/isolated scope",La||w,I,Ea),La=I):V("new/isolated scope",La,I,Ea)),w=w||I;u=I.name;!I.templateUrl&&I.controller&&(v=I.controller,$a=$a||fa(),V("'"+u+"' controller",$a[u],I,Ea),$a[u]=I);if(v=I.transclude)Fc=!0,I.$$tlb||(V("transclusion",na,I,Ea),na=I),"element"==v?(pc=!0,Ka=I.priority,v=Ea,Ea=f.$$element=Z(b.createComment(" "+
u+": "+f[u]+" ")),d=Ea[0],P(h,Vb.call(v,0),d),ge=s(v,g,Ka,k&&k.name,{nonTlbTranscludeDirective:na})):(v=Z(ra(d)).contents(),Ea.empty(),ge=s(v,g));if(I.template)if(H=!0,V("template",r,I,Ea),r=I,v=N(I.template)?I.template(Ea,f):I.template,v=hb(v),I.replace){k=I;v=Cd.test(v)?Cc(O(I.templateNamespace,ya(v))):[];d=v[0];if(1!=v.length||d.nodeType!==Qb)throw bb("tplrt","Template for directive '{0}' must have exactly one root element. {1}",u,"");P(h,Ea,d);A={$attr:{}};v=B(d,[],A);var Re=a.splice(R+1,a.length-
(R+1));La&&C(v);a=a.concat(v).concat(Re);K(f,A);A=a.length}else Ea.html(v);if(I.templateUrl)H=!0,V("template",r,I,Ea),r=I,I.replace&&(k=I),M=X(a.splice(R,a.length-R),Ea,f,h,Fc&&ge,m,y,{controllerDirectives:$a,newIsolateScopeDirective:La,templateDirective:r,nonTlbTranscludeDirective:na}),A=a.length;else if(I.compile)try{Tc=I.compile(Ea,f,ge),N(Tc)?n(null,Tc,D,Rf):Tc&&n(Tc.pre,Tc.post,D,Rf)}catch(ig){e(ig,qa(Ea))}I.terminal&&(M.terminal=!0,Ka=Math.max(Ka,I.priority))}M.scope=w&&!0===w.scope;M.transcludeOnThisElement=
Fc;M.templateOnThisElement=H;M.transclude=ge;F.hasElementTranscludeDirective=pc;return M}function C(a){for(var b=0,c=a.length;b<c;b++)a[b]=v(a[b],{$$isolateScope:!0})}function ua(b,d,f,g,h,m,y){if(d===h)return null;h=null;if(k.hasOwnProperty(d)){var S;d=a.get(d+"Directive");for(var F=0,n=d.length;F<n;F++)try{S=d[F],(g===c||g>S.priority)&&-1!=S.restrict.indexOf(f)&&(m&&(S=v(S,{$$start:m,$$end:y})),b.push(S),h=S)}catch(q){e(q)}}return h}function wa(b){if(k.hasOwnProperty(b))for(var c=a.get(b+"Directive"),
d=0,e=c.length;d<e;d++)if(b=c[d],b.multiElement)return!0;return!1}function K(a,b){var c=b.$attr,d=a.$attr,e=a.$$element;f(a,function(d,e){"$"!=e.charAt(0)&&(b[e]&&b[e]!==d&&(d+=("style"===e?";":" ")+b[e]),a.$set(e,d,!0,c[e]))});f(b,function(b,f){"class"==f?(H(e,b),a["class"]=(a["class"]?a["class"]+" ":"")+b):"style"==f?(e.attr("style",e.attr("style")+";"+b),a.style=(a.style?a.style+";":"")+b):"$"==f.charAt(0)||a.hasOwnProperty(f)||(a[f]=b,d[f]=c[f])})}function X(a,b,c,d,e,h,k,m){var y=[],S,F,n=b[0],
q=a.shift(),Sa=v(q,{templateUrl:null,transclude:null,replace:null,$$originalDirective:q}),p=N(q.templateUrl)?q.templateUrl(b,c):q.templateUrl,Ka=q.templateNamespace;b.empty();g(w.getTrustedResourceUrl(p)).then(function(g){var M,w;g=hb(g);if(q.replace){g=Cd.test(g)?Cc(O(Ka,ya(g))):[];M=g[0];if(1!=g.length||M.nodeType!==Qb)throw bb("tplrt","Template for directive '{0}' must have exactly one root element. {1}",q.name,p);g={$attr:{}};P(d,b,M);var $a=B(M,[],g);G(q.scope)&&C($a);a=$a.concat(a);K(c,g)}else M=
n,b.html(g);a.unshift(Sa);S=U(a,M,c,e,b,q,h,k,m);f(d,function(a,c){a==M&&(d[c]=b[0])});for(F=I(b[0].childNodes,e);y.length;){g=y.shift();w=y.shift();var La=y.shift(),r=y.shift(),$a=b[0];if(!g.$$destroyed){if(w!==n){var na=w.className;m.hasElementTranscludeDirective&&q.replace||($a=ra(M));P(La,Z(w),$a);H(Z($a),na)}w=S.transcludeOnThisElement?u(g,S.transclude,r):r;S(F,g,$a,d,w,S)}}y=null});return function(a,b,c,d,e){a=e;b.$$destroyed||(y?y.push(b,c,d,a):(S.transcludeOnThisElement&&(a=u(b,S.transclude,
e)),S(F,b,c,d,a,S)))}}function Jb(a,b){var c=b.priority-a.priority;return 0!==c?c:a.name!==b.name?a.name<b.name?-1:1:a.index-b.index}function V(a,b,c,d){function e(a){return a?" (module: "+a+")":""}if(b)throw bb("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",b.name,e(b.$$moduleName),c.name,e(c.$$moduleName),a,qa(d));}function L(a,b){var c=d(b,!0);c&&a.push({priority:0,compile:function(a){a=a.parent();var b=!!a.length;b&&s.$$addBindingClass(a);return function(a,d){var e=d.parent();
b||s.$$addBindingClass(e);s.$$addBindingInfo(e,c.expressions);a.$watch(c,function(a){d[0].nodeValue=a})}}})}function O(a,c){a=sa(a||"html");switch(a){case "svg":case "math":var d=b.createElement("div");d.innerHTML="<"+a+">"+c+"</"+a+">";return d.childNodes[0].childNodes;default:return c}}function Q(a,b){if("srcdoc"==b)return w.HTML;var c=W(a);if("xlinkHref"==b||"form"==c&&"action"==b||"img"!=c&&("src"==b||"ngSrc"==b))return w.RESOURCE_URL}function ub(a,b,c,e,f){var g=Q(a,e);f=n[e]||f;var h=d(c,!0,
g,f);if(h){if("multiple"===e&&"select"===W(a))throw bb("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",qa(a));b.push({priority:100,compile:function(){return{pre:function(a,b,k){b=k.$$observers||(k.$$observers={});if(p.test(e))throw bb("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");var m=k[e];m!==c&&(h=m&&d(m,!0,g,f),c=m);h&&(k[e]=h(a),(b[e]||(b[e]=[])).$$inter=
!0,(k.$$observers&&k.$$observers[e].$$scope||a).$watch(h,function(a,b){"class"===e&&a!=b?k.$updateClass(a,b):k.$set(e,a)}))}}}})}}function P(a,c,d){var e=c[0],f=c.length,g=e.parentNode,h,k;if(a)for(h=0,k=a.length;h<k;h++)if(a[h]==e){a[h++]=d;k=h+f-1;for(var m=a.length;h<m;h++,k++)k<m?a[h]=a[k]:delete a[h];a.length-=f-1;a.context===e&&(a.context=d);break}g&&g.replaceChild(d,e);a=b.createDocumentFragment();a.appendChild(e);Z.hasData(e)&&(Z(d).data(Z(e).data()),Cb?(Ca=!0,Cb.cleanData([e])):delete Z.cache[e[Z.expando]]);
e=1;for(f=c.length;e<f;e++)g=c[e],Z(g).remove(),a.appendChild(g),delete c[e];c[0]=d;c.length=1}function pb(a,b){return m(function(){return a.apply(null,arguments)},a,b)}function aa(a,b,c,d,f,g){try{a(b,c,d,f,g)}catch(h){e(h,qa(c))}}function T(a,b,e,g,k,m){var y;f(g,function(f,g){var m=f.attrName,S=f.optional,F=f.mode,n,q,Sa,p;Rc.call(b,m)||(b[m]=c);switch(F){case "@":b[m]||S||(e[g]=c);b.$observe(m,function(a){e[g]=a});b.$$observers[m].$$scope=a;b[m]&&(e[g]=d(b[m])(a));break;case "=":if(S&&!b[m])break;
q=h(b[m]);p=q.literal?R:function(a,b){return a===b||a!==a&&b!==b};Sa=q.assign||function(){n=e[g]=q(a);throw bb("nonassign","Expression '{0}' used with directive '{1}' is non-assignable!",b[m],k.name);};n=e[g]=q(a);S=function(b){p(b,e[g])||(p(b,n)?Sa(a,b=e[g]):e[g]=b);return n=b};S.$stateful=!0;S=f.collection?a.$watchCollection(b[m],S):a.$watch(h(b[m],S),null,q.literal);y=y||[];y.push(S);break;case "&":q=h(b[m]);if(q===A&&S)break;e[g]=function(b){return q(a,b)}}});g=y?function(){for(var a=0,b=y.length;a<
b;++a)y[a]()}:A;return m&&g!==A?(m.$on("$destroy",g),A):g}var qb=function(a,b){if(b){var c=Object.keys(b),d,e,f;d=0;for(e=c.length;d<e;d++)f=c[d],this[f]=b[f]}else this.$attr={};this.$$element=a};qb.prototype={$normalize:Lb,$addClass:function(a){a&&0<a.length&&$a.addClass(this.$$element,a)},$removeClass:function(a){a&&0<a.length&&$a.removeClass(this.$$element,a)},$updateClass:function(a,b){var c=xc(a,b);c&&c.length&&$a.addClass(this.$$element,c);(c=xc(b,a))&&c.length&&$a.removeClass(this.$$element,
c)},$set:function(a,b,d,g){var h=this.$$element[0],k=Ma(h,a),m=Hb(h,a),h=a;k?(this.$$element.prop(a,b),g=k):m&&(this[m]=b,h=m);this[a]=b;g?this.$attr[a]=g:(g=this.$attr[a])||(this.$attr[a]=g=ib(a,"-"));k=W(this.$$element);if("a"===k&&"href"===a||"img"===k&&"src"===a)this[a]=b=r(b,"src"===a);else if("img"===k&&"srcset"===a){for(var k="",m=ya(b),y=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,y=/\s/.test(m)?y:/(,)/,m=m.split(y),y=Math.floor(m.length/2),S=0;S<y;S++)var F=2*S,k=k+r(ya(m[F]),!0),k=k+(" "+ya(m[F+
1]));m=ya(m[2*S]).split(/\s/);k+=r(ya(m[0]),!0);2===m.length&&(k+=" "+ya(m[1]));this[a]=b=k}!1!==d&&(null===b||b===c?this.$$element.removeAttr(g):this.$$element.attr(g,b));(a=this.$$observers)&&f(a[h],function(a){try{a(b)}catch(c){e(c)}})},$observe:function(a,b){var c=this,d=c.$$observers||(c.$$observers=fa()),e=d[a]||(d[a]=[]);e.push(b);Sa.$evalAsync(function(){!e.$$inter&&c.hasOwnProperty(a)&&b(c[a])});return function(){ba(e,b)}}};var ha=d.startSymbol(),ea=d.endSymbol(),hb="{{"==ha||"}}"==ea?D:
function(a){return a.replace(/\{\{/g,ha).replace(/}}/g,ea)},da=/^ngAttr[A-Z]/;s.$$addBindingInfo=M?function(a,b){var c=a.data("$binding")||[];ia(b)?c=c.concat(b):c.push(b);a.data("$binding",c)}:A;s.$$addBindingClass=M?function(a){H(a,"ng-binding")}:A;s.$$addScopeInfo=M?function(a,b,c,d){a.data(c?d?"$isolateScopeNoTemplate":"$isolateScope":"$scope",b)}:A;s.$$addScopeClass=M?function(a,b){H(a,b?"ng-isolate-scope":"ng-scope")}:A;return s}]}function Lb(a){return xa(a.replace(qe,""))}function xc(a,b){var c=
"",d=a.split(/\s+/),e=b.split(/\s+/),f=0;a:for(;f<d.length;f++){for(var g=d[f],h=0;h<e.length;h++)if(g==e[h])continue a;c+=(0<c.length?" ":"")+g}return c}function Cc(a){a=Z(a);var b=a.length;if(1>=b)return a;for(;b--;)8===a[b].nodeType&&re.call(a,b,1);return a}function gc(){var a={},b=!1;this.register=function(b,c){Ya(b,"controller");G(b)?m(a,b):a[b]=c};this.allowGlobals=function(){b=!0};this.$get=["$injector","$window",function(e,f){function g(a,b,c,e){if(!a||!G(a.$scope))throw d("$controller")("noscp",
"Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",e,b);a.$scope[b]=c}return function(d,h,k,y){var F,n,q;k=!0===k;y&&J(y)&&(q=y);if(J(d)){y=d.match(pe);if(!y)throw md("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",d);n=y[1];q=q||y[3];d=a.hasOwnProperty(n)?a[n]:Ta(h.$scope,n,!0)||(b?Ta(f,n,!0):c);kb(d,n,!0)}if(k)return k=(ia(d)?d[d.length-1]:d).prototype,F=Object.create(k||null),q&&g(h,q,F,n||d.name),m(function(){var a=
e.invoke(d,F,h,n);a!==F&&(G(a)||N(a))&&(F=a,q&&g(h,q,F,n||d.name));return F},{instance:F,identifier:q});F=e.instantiate(d,h,n);q&&g(h,q,F,n||d.name);return F}}]}function Ra(){this.$get=["$window",function(a){return Z(a.document)}]}function zd(){this.$get=["$log",function(a){return function(b,c){a.error.apply(a,arguments)}}]}function ed(a){return G(a)?L(a)?a.toISOString():ub(a):a}function Ad(){this.$get=function(){return function(a){if(!a)return"";var b=[];h(a,function(a,c){null===a||B(a)||(ia(a)?
f(a,function(a,d){b.push(ea(c)+"="+ea(ed(a)))}):b.push(ea(c)+"="+ea(ed(a))))});return b.join("&")}}}function Oc(){this.$get=function(){return function(a){function b(a,d,e){null===a||B(a)||(ia(a)?f(a,function(a){b(a,d+"[]")}):G(a)&&!L(a)?h(a,function(a,c){b(a,d+(e?"":"[")+c+(e?"":"]"))}):c.push(ea(d)+"="+ea(ed(a))))}if(!a)return"";var c=[];b(a,"",!0);return c.join("&")}}}function hc(a,b){if(J(a)){var c=a.replace(af,"").trim();if(c){var d=b("Content-Type");(d=d&&0===d.indexOf(Yc))||(d=(d=c.match(Sf))&&
Zc[d[0]].test(c));d&&(a=pb(c))}}return a}function Pc(a){var b=fa(),c;J(a)?f(a.split("\n"),function(a){c=a.indexOf(":");var d=sa(ya(a.substr(0,c)));a=ya(a.substr(c+1));d&&(b[d]=b[d]?b[d]+", "+a:a)}):G(a)&&f(a,function(a,c){var d=sa(c),e=ya(a);d&&(b[d]=b[d]?b[d]+", "+e:e)});return b}function Mb(a){var b;return function(c){b||(b=Pc(a));return c?(c=b[sa(c)],void 0===c&&(c=null),c):b}}function zc(a,b,c,d){if(N(d))return d(a,b,c);f(d,function(d){a=d(a,b,c)});return a}function tb(){var a=this.defaults={transformResponse:[hc],
transformRequest:[function(a){return G(a)&&"[object File]"!==Wb.call(a)&&"[object Blob]"!==Wb.call(a)&&"[object FormData]"!==Wb.call(a)?ub(a):a}],headers:{common:{Accept:"application/json, text/plain, */*"},post:w(Ed),put:w(Ed),patch:w(Ed)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer"},b=!1;this.useApplyAsync=function(a){return s(a)?(b=!!a,this):b};var e=this.interceptors=[];this.$get=["$httpBackend","$$cookieReader","$cacheFactory","$rootScope",
"$q","$injector",function(g,h,k,y,F,n){function q(b){function e(a){var b=m({},a);b.data=a.data?zc(a.data,a.headers,a.status,h.transformResponse):a.data;a=a.status;return 200<=a&&300>a?b:F.reject(b)}function g(a,b){var c,d={};f(a,function(a,e){N(a)?(c=a(b),null!=c&&(d[e]=c)):d[e]=a});return d}if(!yb.isObject(b))throw d("$http")("badreq","Http request configuration must be an object.  Received: {0}",b);var h=m({method:"get",transformRequest:a.transformRequest,transformResponse:a.transformResponse,paramSerializer:a.paramSerializer},
b);h.headers=function(b){var c=a.headers,d=m({},b.headers),e,f,h,c=m({},c.common,c[sa(b.method)]);a:for(e in c){f=sa(e);for(h in d)if(sa(h)===f)continue a;d[e]=c[e]}return g(d,w(b))}(b);h.method=Uc(h.method);h.paramSerializer=J(h.paramSerializer)?n.get(h.paramSerializer):h.paramSerializer;var k=[function(b){var d=b.headers,g=zc(b.data,Mb(d),c,b.transformRequest);B(g)&&f(d,function(a,b){"content-type"===sa(b)&&delete d[b]});B(b.withCredentials)&&!B(a.withCredentials)&&(b.withCredentials=a.withCredentials);
return p(b,g).then(e,e)},c],y=F.when(h);for(f(H,function(a){(a.request||a.requestError)&&k.unshift(a.request,a.requestError);(a.response||a.responseError)&&k.push(a.response,a.responseError)});k.length;){b=k.shift();var S=k.shift(),y=y.then(b,S)}y.success=function(a){kb(a,"fn");y.then(function(b){a(b.data,b.status,b.headers,h)});return y};y.error=function(a){kb(a,"fn");y.then(null,function(b){a(b.data,b.status,b.headers,h)});return y};return y}function p(d,e){function f(a,c,d,e){function g(){k(c,
a,d,e)}H&&(200<=a&&300>a?H.put(u,[a,c,Pc(d),e]):H.remove(u));b?y.$applyAsync(g):(g(),y.$$phase||y.$apply())}function k(a,b,c,e){b=Math.max(b,0);(200<=b&&300>b?Sa.resolve:Sa.reject)({data:a,status:b,headers:Mb(c),config:d,statusText:e})}function m(a){k(a.data,a.status,w(a.headers()),a.statusText)}function n(){var a=q.pendingRequests.indexOf(d);-1!==a&&q.pendingRequests.splice(a,1)}var Sa=F.defer(),na=Sa.promise,H,I,fe=d.headers,u=M(d.url,d.paramSerializer(d.params));q.pendingRequests.push(d);na.then(n,
n);!d.cache&&!a.cache||!1===d.cache||"GET"!==d.method&&"JSONP"!==d.method||(H=G(d.cache)?d.cache:G(a.cache)?a.cache:r);H&&(I=H.get(u),s(I)?I&&N(I.then)?I.then(m,m):ia(I)?k(I[1],I[0],w(I[2]),I[3]):k(I,200,{},"OK"):H.put(u,na));B(I)&&((I=be(d.url)?h()[d.xsrfCookieName||a.xsrfCookieName]:c)&&(fe[d.xsrfHeaderName||a.xsrfHeaderName]=I),g(d.method,u,e,f,fe,d.timeout,d.withCredentials,d.responseType));return na}function M(a,b){0<b.length&&(a+=(-1==a.indexOf("?")?"?":"&")+b);return a}var r=k("$http");a.paramSerializer=
J(a.paramSerializer)?n.get(a.paramSerializer):a.paramSerializer;var H=[];f(e,function(a){H.unshift(J(a)?n.get(a):n.invoke(a))});q.pendingRequests=[];(function(a){f(arguments,function(a){q[a]=function(b,c){return q(m({},c||{},{method:a,url:b}))}})})("get","delete","head","jsonp");(function(a){f(arguments,function(a){q[a]=function(b,c,d){return q(m({},d||{},{method:a,url:b,data:c}))}})})("post","put","patch");q.defaults=a;return q}]}function $b(){return new a.XMLHttpRequest}function sb(){this.$get=
["$browser","$window","$document",function(a,b,c){return gd(a,$b,a.defer,b.angular.callbacks,c[0])}]}function gd(a,b,d,e,g){function h(a,b,c){var d=g.createElement("script"),f=null;d.type="text/javascript";d.src=a;d.async=!0;f=function(a){d.removeEventListener("load",f,!1);d.removeEventListener("error",f,!1);g.body.removeChild(d);d=null;var h=-1,k="unknown";a&&("load"!==a.type||e[b].called||(a={type:"error"}),k=a.type,h="error"===a.type?404:200);c&&c(h,k)};d.addEventListener("load",f,!1);d.addEventListener("error",
f,!1);g.body.appendChild(d);return f}return function(g,k,m,y,F,n,q,p){function M(){La&&La();H&&H.abort()}function w(b,e,f,g,h){u!==c&&d.cancel(u);La=H=null;b(e,f,g,h);a.$$completeOutstandingRequest(A)}a.$$incOutstandingRequestCount();k=k||a.url();if("jsonp"==sa(g)){var r="_"+(e.counter++).toString(36);e[r]=function(a){e[r].data=a;e[r].called=!0};var La=h(k.replace("JSON_CALLBACK","angular.callbacks."+r),r,function(a,b){w(y,a,e[r].data,"",b);e[r]=A})}else{var H=b();H.open(g,k,!0);f(F,function(a,b){s(a)&&
H.setRequestHeader(b,a)});H.onload=function(){var a=H.statusText||"",b="response"in H?H.response:H.responseText,c=1223===H.status?204:H.status;0===c&&(c=b?200:"file"==dc(k).protocol?404:0);w(y,c,b,H.getAllResponseHeaders(),a)};g=function(){w(y,-1,null,null,"")};H.onerror=g;H.onabort=g;q&&(H.withCredentials=!0);if(p)try{H.responseType=p}catch(I){if("json"!==p)throw I;}H.send(m)}if(0<n)var u=d(M,n);else n&&N(n.then)&&n.then(M)}}function Dc(){var a="{{",b="}}";this.startSymbol=function(b){return b?(a=
b,this):a};this.endSymbol=function(a){return a?(b=a,this):b};this.$get=["$parse","$exceptionHandler","$sce",function(c,d,e){function f(a){return"\\\\\\"+a}function g(c){return c.replace(F,a).replace(n,b)}function h(f,F,n,q){function p(a){try{var b=a;a=n?e.getTrusted(n,b):e.valueOf(b);var c;if(q&&!s(a))c=a;else if(null==a)c="";else{switch(typeof a){case "string":break;case "number":a=""+a;break;default:a=ub(a)}c=a}return c}catch(g){d(Ha.interr(f,g))}}q=!!q;for(var M,w,r=0,na=[],H=[],pc=f.length,I=
[],u=[];r<pc;)if(-1!=(M=f.indexOf(a,r))&&-1!=(w=f.indexOf(b,M+k)))r!==M&&I.push(g(f.substring(r,M))),r=f.substring(M+k,w),na.push(r),H.push(c(r,p)),r=w+y,u.push(I.length),I.push("");else{r!==pc&&I.push(g(f.substring(r)));break}n&&1<I.length&&Ha.throwNoconcat(f);if(!F||na.length){var v=function(a){for(var b=0,c=na.length;b<c;b++){if(q&&B(a[b]))return;I[u[b]]=a[b]}return I.join("")};return m(function(a){var b=0,c=na.length,e=Array(c);try{for(;b<c;b++)e[b]=H[b](a);return v(e)}catch(g){d(Ha.interr(f,
g))}},{exp:f,expressions:na,$$watchDelegate:function(a,b){var c;return a.$watchGroup(H,function(d,e){var f=v(d);N(b)&&b.call(this,f,d!==e?c:f,a);c=f})}})}}var k=a.length,y=b.length,F=new RegExp(a.replace(/./g,f),"g"),n=new RegExp(b.replace(/./g,f),"g");h.startSymbol=function(){return a};h.endSymbol=function(){return b};return h}]}function yc(){this.$get=["$rootScope","$window","$q","$$q",function(a,b,c,d){function e(g,h,k,m){var y=4<arguments.length,F=y?Vb.call(arguments,4):[],n=b.setInterval,q=b.clearInterval,
p=0,M=s(m)&&!m,w=(M?d:c).defer(),r=w.promise;k=s(k)?k:0;r.then(null,null,y?function(){g.apply(null,F)}:g);r.$$intervalId=n(function(){w.notify(p++);0<k&&p>=k&&(w.resolve(p),q(r.$$intervalId),delete f[r.$$intervalId]);M||a.$apply()},h);f[r.$$intervalId]=w;return r}var f={};e.cancel=function(a){return a&&a.$$intervalId in f?(f[a.$$intervalId].reject("canceled"),b.clearInterval(a.$$intervalId),delete f[a.$$intervalId],!0):!1};return e}]}function Zb(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",
GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"\u00a4",posSuf:"",negPre:"(\u00a4",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January February March April May June July August September October November December".split(" "),SHORTMONTH:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),DAY:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
SHORTDAY:"Sun Mon Tue Wed Thu Fri Sat".split(" "),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a","short":"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a",ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"]},pluralCat:function(a){return 1===a?"one":"other"}}}}function Ec(a){a=a.split("/");for(var b=a.length;b--;)a[b]=ha(a[b]);return a.join("/")}function hd(a,b){var c=dc(a);b.$$protocol=c.protocol;
b.$$host=c.hostname;b.$$port=u(c.port)||Tf[c.protocol]||null}function Qc(a,b){var c="/"!==a.charAt(0);c&&(a="/"+a);var d=dc(a);b.$$path=decodeURIComponent(c&&"/"===d.pathname.charAt(0)?d.pathname.substring(1):d.pathname);b.$$search=qb(d.search);b.$$hash=decodeURIComponent(d.hash);b.$$path&&"/"!=b.$$path.charAt(0)&&(b.$$path="/"+b.$$path)}function Yb(a,b){if(0===b.indexOf(a))return b.substr(a.length)}function Tb(a){var b=a.indexOf("#");return-1==b?a:a.substr(0,b)}function vc(a){return a.replace(/(#.+)|#$/,
"$1")}function td(a){return a.substr(0,Tb(a).lastIndexOf("/")+1)}function ud(a,b){this.$$html5=!0;b=b||"";var d=td(a);hd(a,this);this.$$parse=function(a){var b=Yb(d,a);if(!J(b))throw Fd("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',a,d);Qc(b,this);this.$$path||(this.$$path="/");this.$$compose()};this.$$compose=function(){var a=hb(this.$$search),b=this.$$hash?"#"+ha(this.$$hash):"";this.$$url=Ec(this.$$path)+(a?"?"+a:"")+b;this.$$absUrl=d+this.$$url.substr(1)};this.$$parseLinkUrl=function(e,
f){if(f&&"#"===f[0])return this.hash(f.slice(1)),!0;var g,h;(g=Yb(a,e))!==c?(h=g,h=(g=Yb(b,g))!==c?d+(Yb("/",g)||g):a+h):(g=Yb(d,e))!==c?h=d+g:d==e+"/"&&(h=d);h&&this.$$parse(h);return!!h}}function vd(a,b){var c=td(a);hd(a,this);this.$$parse=function(d){d=Yb(a,d)||Yb(c,d);var e;"#"===d.charAt(0)?(e=Yb(b,d),B(e)&&(e=d)):e=this.$$html5?d:"";Qc(e,this);d=this.$$path;var f=/^\/[A-Z]:(\/.*)/;0===e.indexOf(a)&&(e=e.replace(a,""));f.exec(e)||(d=(e=f.exec(d))?e[1]:d);this.$$path=d;this.$$compose()};this.$$compose=
function(){var c=hb(this.$$search),d=this.$$hash?"#"+ha(this.$$hash):"";this.$$url=Ec(this.$$path)+(c?"?"+c:"")+d;this.$$absUrl=a+(this.$$url?b+this.$$url:"")};this.$$parseLinkUrl=function(b,c){return Tb(a)==Tb(b)?(this.$$parse(b),!0):!1}}function Ud(a,b){this.$$html5=!0;vd.apply(this,arguments);var c=td(a);this.$$parseLinkUrl=function(d,e){if(e&&"#"===e[0])return this.hash(e.slice(1)),!0;var f,g;a==Tb(d)?f=d:(g=Yb(c,d))?f=a+b+g:c===d+"/"&&(f=c);f&&this.$$parse(f);return!!f};this.$$compose=function(){var c=
hb(this.$$search),d=this.$$hash?"#"+ha(this.$$hash):"";this.$$url=Ec(this.$$path)+(c?"?"+c:"")+d;this.$$absUrl=a+b+this.$$url}}function cd(a){return function(){return this[a]}}function Vd(a,b){return function(c){if(B(c))return this[a];this[a]=b(c);this.$$compose();return this}}function Ee(){var a="",b={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(b){return s(b)?(a=b,this):a};this.html5Mode=function(a){return X(a)?(b.enabled=a,this):G(a)?(X(a.enabled)&&(b.enabled=a.enabled),
X(a.requireBase)&&(b.requireBase=a.requireBase),X(a.rewriteLinks)&&(b.rewriteLinks=a.rewriteLinks),this):b};this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(c,d,e,f,g){function h(a,b,c){var e=m.url(),f=m.$$state;try{d.url(a,b,c),m.$$state=d.state()}catch(g){throw m.url(e),m.$$state=f,g;}}function k(a,b){c.$broadcast("$locationChangeSuccess",m.absUrl(),a,m.$$state,b)}var m,y;y=d.baseHref();var F=d.url(),n;if(b.enabled){if(!y&&b.requireBase)throw Fd("nobase","$location in HTML5 mode requires a <base> tag to be present!");
n=F.substring(0,F.indexOf("/",F.indexOf("//")+2))+(y||"/");y=e.history?ud:Ud}else n=Tb(F),y=vd;m=new y(n,"#"+a);m.$$parseLinkUrl(F,F);m.$$state=d.state();var q=/^\s*(javascript|mailto):/i;f.on("click",function(a){if(b.rewriteLinks&&!a.ctrlKey&&!a.metaKey&&!a.shiftKey&&2!=a.which&&2!=a.button){for(var e=Z(a.target);"a"!==W(e[0]);)if(e[0]===f[0]||!(e=e.parent())[0])return;var h=e.prop("href"),k=e.attr("href")||e.attr("xlink:href");G(h)&&"[object SVGAnimatedString]"===h.toString()&&(h=dc(h.animVal).href);
q.test(h)||!h||e.attr("target")||a.isDefaultPrevented()||!m.$$parseLinkUrl(h,k)||(a.preventDefault(),m.absUrl()!=d.url()&&(c.$apply(),g.angular["ff-684208-preventDefault"]=!0))}});vc(m.absUrl())!=vc(F)&&d.url(m.absUrl(),!0);var p=!0;d.onUrlChange(function(a,b){c.$evalAsync(function(){var d=m.absUrl(),e=m.$$state,f;m.$$parse(a);m.$$state=b;f=c.$broadcast("$locationChangeStart",a,d,b,e).defaultPrevented;m.absUrl()===a&&(f?(m.$$parse(d),m.$$state=e,h(d,!1,e)):(p=!1,k(d,e)))});c.$$phase||c.$digest()});
c.$watch(function(){var a=vc(d.url()),b=vc(m.absUrl()),f=d.state(),g=m.$$replace,y=a!==b||m.$$html5&&e.history&&f!==m.$$state;if(p||y)p=!1,c.$evalAsync(function(){var b=m.absUrl(),d=c.$broadcast("$locationChangeStart",b,a,m.$$state,f).defaultPrevented;m.absUrl()===b&&(d?(m.$$parse(a),m.$$state=f):(y&&h(b,g,f===m.$$state?null:m.$$state),k(a,f)))});m.$$replace=!1});return m}]}function Fe(){var a=!0,b=this;this.debugEnabled=function(b){return s(b)?(a=b,this):a};this.$get=["$window",function(c){function d(a){a instanceof
Error&&(a.stack?a=a.message&&-1===a.stack.indexOf(a.message)?"Error: "+a.message+"\n"+a.stack:a.stack:a.sourceURL&&(a=a.message+"\n"+a.sourceURL+":"+a.line));return a}function e(a){var b=c.console||{},g=b[a]||b.log||A;a=!1;try{a=!!g.apply}catch(h){}return a?function(){var a=[];f(arguments,function(b){a.push(d(b))});return g.apply(b,a)}:function(a,b){g(a,null==b?"":b)}}return{log:e("log"),info:e("info"),warn:e("warn"),error:e("error"),debug:function(){var c=e("debug");return function(){a&&c.apply(b,
arguments)}}()}}]}function ac(a,b){if("__defineGetter__"===a||"__defineSetter__"===a||"__lookupGetter__"===a||"__lookupSetter__"===a||"__proto__"===a)throw zb("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",b);return a}function Ib(a,b){if(a){if(a.constructor===a)throw zb("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",b);if(a.window===a)throw zb("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",
b);if(a.children&&(a.nodeName||a.prop&&a.attr&&a.find))throw zb("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",b);if(a===Object)throw zb("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",b);}return a}function Xd(a,b){if(a){if(a.constructor===a)throw zb("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",b);if(a===Uf||a===se||a===bf)throw zb("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",
b);}}function Ge(a,b){return"undefined"!==typeof a?a:b}function Yd(a,b){return"undefined"===typeof a?b:"undefined"===typeof b?a:a+b}function Na(a,b){var c,d;switch(a.type){case P.Program:c=!0;f(a.body,function(a){Na(a.expression,b);c=c&&a.expression.constant});a.constant=c;break;case P.Literal:a.constant=!0;a.toWatch=[];break;case P.UnaryExpression:Na(a.argument,b);a.constant=a.argument.constant;a.toWatch=a.argument.toWatch;break;case P.BinaryExpression:Na(a.left,b);Na(a.right,b);a.constant=a.left.constant&&
a.right.constant;a.toWatch=a.left.toWatch.concat(a.right.toWatch);break;case P.LogicalExpression:Na(a.left,b);Na(a.right,b);a.constant=a.left.constant&&a.right.constant;a.toWatch=a.constant?[]:[a];break;case P.ConditionalExpression:Na(a.test,b);Na(a.alternate,b);Na(a.consequent,b);a.constant=a.test.constant&&a.alternate.constant&&a.consequent.constant;a.toWatch=a.constant?[]:[a];break;case P.Identifier:a.constant=!1;a.toWatch=[a];break;case P.MemberExpression:Na(a.object,b);a.computed&&Na(a.property,
b);a.constant=a.object.constant&&(!a.computed||a.property.constant);a.toWatch=[a];break;case P.CallExpression:c=a.filter?!b(a.callee.name).$stateful:!1;d=[];f(a.arguments,function(a){Na(a,b);c=c&&a.constant;a.constant||d.push.apply(d,a.toWatch)});a.constant=c;a.toWatch=a.filter&&!b(a.callee.name).$stateful?d:[a];break;case P.AssignmentExpression:Na(a.left,b);Na(a.right,b);a.constant=a.left.constant&&a.right.constant;a.toWatch=[a];break;case P.ArrayExpression:c=!0;d=[];f(a.elements,function(a){Na(a,
b);c=c&&a.constant;a.constant||d.push.apply(d,a.toWatch)});a.constant=c;a.toWatch=d;break;case P.ObjectExpression:c=!0;d=[];f(a.properties,function(a){Na(a.value,b);c=c&&a.value.constant;a.value.constant||d.push.apply(d,a.value.toWatch)});a.constant=c;a.toWatch=d;break;case P.ThisExpression:a.constant=!1,a.toWatch=[]}}function Zd(a){if(1==a.length){a=a[0].expression;var b=a.toWatch;return 1!==b.length?b:b[0]!==a?b:c}}function He(a){return a.type===P.Identifier||a.type===P.MemberExpression}function $d(a){if(1===
a.body.length&&He(a.body[0].expression))return{type:P.AssignmentExpression,left:a.body[0].expression,right:{type:P.NGValueParameter},operator:"="}}function bc(a){return 0===a.body.length||1===a.body.length&&(a.body[0].expression.type===P.Literal||a.body[0].expression.type===P.ArrayExpression||a.body[0].expression.type===P.ObjectExpression)}function Ie(a,b){this.astBuilder=a;this.$filter=b}function Je(a,b){this.astBuilder=a;this.$filter=b}function wd(a,b,c,d){Ib(a,d);b=b.split(".");for(var e,f=0;1<
b.length;f++){e=ac(b.shift(),d);var g=Ib(a[e],d);g||(g={},a[e]=g);a=g}e=ac(b.shift(),d);Ib(a[e],d);return a[e]=c}function pa(a){return"constructor"==a}function Lc(a){return N(a.valueOf)?a.valueOf():te.call(a)}function Mc(){var a=fa(),b=fa();this.$get=["$filter","$sniffer",function(d,e){function g(a,b){return null==a||null==b?a===b:"object"===typeof a&&(a=Lc(a),"object"===typeof a)?!1:a===b||a!==a&&b!==b}function h(a,b,d,e,f){var k=e.inputs,m;if(1===k.length){var y=g,k=k[0];return a.$watch(function(a){var b=
k(a);g(b,y)||(m=e(a,c,c,[b]),y=b&&Lc(b));return m},b,d,f)}for(var F=[],n=[],S=0,q=k.length;S<q;S++)F[S]=g,n[S]=null;return a.$watch(function(a){for(var b=!1,d=0,f=k.length;d<f;d++){var h=k[d](a);if(b||(b=!g(h,F[d])))n[d]=h,F[d]=h&&Lc(h)}b&&(m=e(a,c,c,n));return m},b,d,f)}function k(a,b,c,d){var e,f;return e=a.$watch(function(a){return d(a)},function(a,c,d){f=a;N(b)&&b.apply(this,arguments);s(a)&&d.$$postDigest(function(){s(f)&&e()})},c)}function m(a,b,c,d){function e(a){var b=!0;f(a,function(a){s(a)||
(b=!1)});return b}var g,h;return g=a.$watch(function(a){return d(a)},function(a,c,d){h=a;N(b)&&b.call(this,a,c,d);e(a)&&d.$$postDigest(function(){e(h)&&g()})},c)}function y(a,b,c,d){var e;return e=a.$watch(function(a){return d(a)},function(a,c,d){N(b)&&b.apply(this,arguments);e()},c)}function F(a,b){if(!b)return a;var c=a.$$watchDelegate,c=c!==m&&c!==k?function(c,d,e,f){e=a(c,d,e,f);return b(e,c,d)}:function(c,d,e,f){e=a(c,d,e,f);c=b(e,c,d);return s(e)?c:e};a.$$watchDelegate&&a.$$watchDelegate!==
h?c.$$watchDelegate=a.$$watchDelegate:b.$stateful||(c.$$watchDelegate=h,c.inputs=a.inputs?a.inputs:[a]);return c}var n={csp:e.csp,expensiveChecks:!1},q={csp:e.csp,expensiveChecks:!0};return function(c,e,f){var g,p,M;switch(typeof c){case "string":M=c=c.trim();var w=f?b:a;g=w[M];g||(":"===c.charAt(0)&&":"===c.charAt(1)&&(p=!0,c=c.substring(2)),f=f?q:n,g=new nd(f),g=(new Fb(g,d,f)).parse(c),g.constant?g.$$watchDelegate=y:p?g.$$watchDelegate=g.literal?m:k:g.inputs&&(g.$$watchDelegate=h),w[M]=g);return F(g,
e);case "function":return F(c,e);default:return A}}}]}function Ke(){this.$get=["$rootScope","$exceptionHandler",function(a,b){return Le(function(b){a.$evalAsync(b)},b)}]}function Ab(){this.$get=["$browser","$exceptionHandler",function(a,b){return Le(function(b){a.defer(b)},b)}]}function Le(a,b){function e(a,b,c){function d(b){return function(c){f||(f=!0,b.call(a,c))}}var f=!1;return[d(b),d(c)]}function g(){this.$$state={status:0}}function h(a,b){return function(c){b.call(a,c)}}function k(d){!d.processScheduled&&
d.pending&&(d.processScheduled=!0,a(function(){var a,e,f;f=d.pending;d.processScheduled=!1;d.pending=c;for(var g=0,h=f.length;g<h;++g){e=f[g][0];a=f[g][d.status];try{N(a)?e.resolve(a(d.value)):1===d.status?e.resolve(d.value):e.reject(d.value)}catch(k){e.reject(k),b(k)}}}))}function m(){this.promise=new g;this.resolve=h(this,this.resolve);this.reject=h(this,this.reject);this.notify=h(this,this.notify)}var y=d("$q",TypeError);g.prototype={then:function(a,b,c){var d=new m;this.$$state.pending=this.$$state.pending||
[];this.$$state.pending.push([d,a,b,c]);0<this.$$state.status&&k(this.$$state);return d.promise},"catch":function(a){return this.then(null,a)},"finally":function(a,b){return this.then(function(b){return n(b,!0,a)},function(b){return n(b,!1,a)},b)}};m.prototype={resolve:function(a){this.promise.$$state.status||(a===this.promise?this.$$reject(y("qcycle","Expected promise to be resolved with value other than itself '{0}'",a)):this.$$resolve(a))},$$resolve:function(a){var c,d;d=e(this,this.$$resolve,
this.$$reject);try{if(G(a)||N(a))c=a&&a.then;N(c)?(this.promise.$$state.status=-1,c.call(a,d[0],d[1],this.notify)):(this.promise.$$state.value=a,this.promise.$$state.status=1,k(this.promise.$$state))}catch(f){d[1](f),b(f)}},reject:function(a){this.promise.$$state.status||this.$$reject(a)},$$reject:function(a){this.promise.$$state.value=a;this.promise.$$state.status=2;k(this.promise.$$state)},notify:function(c){var d=this.promise.$$state.pending;0>=this.promise.$$state.status&&d&&d.length&&a(function(){for(var a,
e,f=0,g=d.length;f<g;f++){e=d[f][0];a=d[f][3];try{e.notify(N(a)?a(c):c)}catch(h){b(h)}}})}};var F=function(a,b){var c=new m;b?c.resolve(a):c.reject(a);return c.promise},n=function(a,b,c){var d=null;try{N(c)&&(d=c())}catch(e){return F(e,!1)}return d&&N(d.then)?d.then(function(){return F(a,b)},function(a){return F(a,!1)}):F(a,b)},q=function(a,b,c,d){var e=new m;e.resolve(a);return e.promise.then(b,c,d)},p=function Re(a){if(!N(a))throw y("norslvr","Expected resolverFn, got '{0}'",a);if(!(this instanceof
Re))return new Re(a);var b=new m;a(function(a){b.resolve(a)},function(a){b.reject(a)});return b.promise};p.defer=function(){return new m};p.reject=function(a){var b=new m;b.reject(a);return b.promise};p.when=q;p.resolve=q;p.all=function(a){var b=new m,c=0,d=ia(a)?[]:{};f(a,function(a,e){c++;q(a).then(function(a){d.hasOwnProperty(e)||(d[e]=a,--c||b.resolve(d))},function(a){d.hasOwnProperty(e)||b.reject(a)})});0===c&&b.resolve(d);return b.promise};return p}function nf(){this.$get=["$window","$timeout",
function(a,b){function c(){for(var a=0;a<y.length;a++){var b=y[a];b&&(y[a]=null,b())}m=y.length=0}function d(a){var b=y.length;m++;y.push(a);0===b&&(k=h(c));return function(){0<=b&&(b=y[b]=null,0===--m&&k&&(k(),k=null,y.length=0))}}var e=a.requestAnimationFrame||a.webkitRequestAnimationFrame,f=a.cancelAnimationFrame||a.webkitCancelAnimationFrame||a.webkitCancelRequestAnimationFrame,g=!!e,h=g?function(a){var b=e(a);return function(){f(b)}}:function(a){var c=b(a,16.66,!1);return function(){b.cancel(c)}};
d.supported=g;var k,m=0,y=[];return d}]}function mf(){function a(b){function c(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null;this.$$listeners={};this.$$listenerCount={};this.$$watchersCount=0;this.$id=++id;this.$$ChildScope=null}c.prototype=b;return c}var b=10,c=d("$rootScope"),g=null,h=null;this.digestTtl=function(a){arguments.length&&(b=a);return b};this.$get=["$injector","$exceptionHandler","$parse","$browser",function(d,k,m,y){function F(a){a.currentScope.$$destroyed=
!0}function n(){this.$id=++id;this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null;this.$root=this;this.$$destroyed=!1;this.$$listeners={};this.$$listenerCount={};this.$$watchersCount=0;this.$$isolateBindings=null}function q(a){if(I.$$phase)throw c("inprog","{0} already in progress",I.$$phase);I.$$phase=a}function p(a,b){do a.$$watchersCount+=b;while(a=a.$parent)}function M(a,b,c){do a.$$listenerCount[c]-=b,0===a.$$listenerCount[c]&&
delete a.$$listenerCount[c];while(a=a.$parent)}function w(){}function r(){for(;v.length;)try{v.shift()()}catch(a){k(a)}h=null}function H(){null===h&&(h=y.defer(function(){I.$apply(r)}))}n.prototype={constructor:n,$new:function(b,c){var d;c=c||this;b?(d=new n,d.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=a(this)),d=new this.$$ChildScope);d.$parent=c;d.$$prevSibling=c.$$childTail;c.$$childHead?(c.$$childTail.$$nextSibling=d,c.$$childTail=d):c.$$childHead=c.$$childTail=d;(b||c!=this)&&d.$on("$destroy",
F);return d},$watch:function(a,b,c,d){var e=m(a);if(e.$$watchDelegate)return e.$$watchDelegate(this,b,c,e,a);var f=this,h=f.$$watchers,k={fn:b,last:w,get:e,exp:d||a,eq:!!c};g=null;N(b)||(k.fn=A);h||(h=f.$$watchers=[]);h.unshift(k);p(this,1);return function(){0<=ba(h,k)&&p(f,-1);g=null}},$watchGroup:function(a,b){function c(){k=!1;m?(m=!1,b(e,e,h)):b(e,d,h)}var d=Array(a.length),e=Array(a.length),g=[],h=this,k=!1,m=!0;if(!a.length){var y=!0;h.$evalAsync(function(){y&&b(e,e,h)});return function(){y=
!1}}if(1===a.length)return this.$watch(a[0],function(a,c,f){e[0]=a;d[0]=c;b(e,a===c?e:d,f)});f(a,function(a,b){var f=h.$watch(a,function(a,f){e[b]=a;d[b]=f;k||(k=!0,h.$evalAsync(c))});g.push(f)});return function(){for(;g.length;)g.shift()()}},$watchCollection:function(a,b){function c(a){f=a;var b,d,h,k;if(!B(f)){if(G(f))if(e(f))for(g!==n&&(g=n,p=g.length=0,y++),a=f.length,p!==a&&(y++,g.length=p=a),b=0;b<a;b++)k=g[b],h=f[b],d=k!==k&&h!==h,d||k===h||(y++,g[b]=h);else{g!==S&&(g=S={},p=0,y++);a=0;for(b in f)f.hasOwnProperty(b)&&
(a++,h=f[b],k=g[b],b in g?(d=k!==k&&h!==h,d||k===h||(y++,g[b]=h)):(p++,g[b]=h,y++));if(p>a)for(b in y++,g)f.hasOwnProperty(b)||(p--,delete g[b])}else g!==f&&(g=f,y++);return y}}c.$stateful=!0;var d=this,f,g,h,k=1<b.length,y=0,F=m(a,c),n=[],S={},q=!0,p=0;return this.$watch(F,function(){q?(q=!1,b(f,f,d)):b(f,h,d);if(k)if(G(f))if(e(f)){h=Array(f.length);for(var a=0;a<f.length;a++)h[a]=f[a]}else for(a in h={},f)Rc.call(f,a)&&(h[a]=f[a]);else h=f})},$digest:function(){var a,d,e,f,m,F,n=b,p,M=[],H,na;q("$digest");
y.$$checkUrlChange();this===I&&null!==h&&(y.defer.cancel(h),r());g=null;do{F=!1;for(p=this;s.length;){try{na=s.shift(),na.scope.$eval(na.expression,na.locals)}catch(Ka){k(Ka)}g=null}a:do{if(f=p.$$watchers)for(m=f.length;m--;)try{if(a=f[m])if((d=a.get(p))!==(e=a.last)&&!(a.eq?R(d,e):"number"===typeof d&&"number"===typeof e&&isNaN(d)&&isNaN(e)))F=!0,g=a,a.last=a.eq?la(d,null):d,a.fn(d,e===w?d:e,p),5>n&&(H=4-n,M[H]||(M[H]=[]),M[H].push({msg:N(a.exp)?"fn: "+(a.exp.name||a.exp.toString()):a.exp,newVal:d,
oldVal:e}));else if(a===g){F=!1;break a}}catch(pc){k(pc)}if(!(f=p.$$watchersCount&&p.$$childHead||p!==this&&p.$$nextSibling))for(;p!==this&&!(f=p.$$nextSibling);)p=p.$parent}while(p=f);if((F||s.length)&&!n--)throw I.$$phase=null,c("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",b,M);}while(F||s.length);for(I.$$phase=null;u.length;)try{u.shift()()}catch(Ea){k(Ea)}},$destroy:function(){if(!this.$$destroyed){var a=this.$parent;this.$broadcast("$destroy");
this.$$destroyed=!0;this===I&&y.$$applicationDestroyed();p(this,-this.$$watchersCount);for(var b in this.$$listenerCount)M(this,this.$$listenerCount[b],b);a&&a.$$childHead==this&&(a.$$childHead=this.$$nextSibling);a&&a.$$childTail==this&&(a.$$childTail=this.$$prevSibling);this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling);this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling);this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=A;this.$on=
this.$watch=this.$watchGroup=function(){return A};this.$$listeners={};this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=this.$$watchers=null}},$eval:function(a,b){return m(a)(this,b)},$evalAsync:function(a,b){I.$$phase||s.length||y.defer(function(){s.length&&I.$digest()});s.push({scope:this,expression:a,locals:b})},$$postDigest:function(a){u.push(a)},$apply:function(a){try{return q("$apply"),this.$eval(a)}catch(b){k(b)}finally{I.$$phase=null;try{I.$digest()}catch(c){throw k(c),
c;}}},$applyAsync:function(a){function b(){c.$eval(a)}var c=this;a&&v.push(b);H()},$on:function(a,b){var c=this.$$listeners[a];c||(this.$$listeners[a]=c=[]);c.push(b);var d=this;do d.$$listenerCount[a]||(d.$$listenerCount[a]=0),d.$$listenerCount[a]++;while(d=d.$parent);var e=this;return function(){var d=c.indexOf(b);-1!==d&&(c[d]=null,M(e,1,a))}},$emit:function(a,b){var c=[],d,e=this,f=!1,g={name:a,targetScope:e,stopPropagation:function(){f=!0},preventDefault:function(){g.defaultPrevented=!0},defaultPrevented:!1},
h=U([g],arguments,1),m,y;do{d=e.$$listeners[a]||c;g.currentScope=e;m=0;for(y=d.length;m<y;m++)if(d[m])try{d[m].apply(null,h)}catch(F){k(F)}else d.splice(m,1),m--,y--;if(f)return g.currentScope=null,g;e=e.$parent}while(e);g.currentScope=null;return g},$broadcast:function(a,b){var c=this,d=this,e={name:a,targetScope:this,preventDefault:function(){e.defaultPrevented=!0},defaultPrevented:!1};if(!this.$$listenerCount[a])return e;for(var f=U([e],arguments,1),g,h;c=d;){e.currentScope=c;d=c.$$listeners[a]||
[];g=0;for(h=d.length;g<h;g++)if(d[g])try{d[g].apply(null,f)}catch(m){k(m)}else d.splice(g,1),g--,h--;if(!(d=c.$$listenerCount[a]&&c.$$childHead||c!==this&&c.$$nextSibling))for(;c!==this&&!(d=c.$$nextSibling);)c=c.$parent}e.currentScope=null;return e}};var I=new n,s=I.$$asyncQueue=[],u=I.$$postDigestQueue=[],v=I.$$applyAsyncQueue=[];return I}]}function Wd(){var a=/^\s*(https?|ftp|mailto|tel|file):/,b=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(b){return s(b)?
(a=b,this):a};this.imgSrcSanitizationWhitelist=function(a){return s(a)?(b=a,this):b};this.$get=function(){return function(c,d){var e=d?b:a,f;f=dc(c).href;return""===f||f.match(e)?c:"unsafe:"+f}}}function cb(a){if("self"===a)return a;if(J(a)){if(-1<a.indexOf("***"))throw Xb("iwcard","Illegal sequence *** in string matcher.  String: {0}",a);a=Gd(a).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*");return new RegExp("^"+a+"$")}if(Q(a))return new RegExp("^"+a.source+"$");throw Xb("imatcher",'Matchers may only be "self", string patterns or RegExp objects');
}function cc(a){var b=[];s(a)&&f(a,function(a){b.push(cb(a))});return b}function ja(){this.SCE_CONTEXTS=Ob;var a=["self"],b=[];this.resourceUrlWhitelist=function(b){arguments.length&&(a=cc(b));return a};this.resourceUrlBlacklist=function(a){arguments.length&&(b=cc(a));return b};this.$get=["$injector",function(d){function e(a,b){return"self"===a?be(b):!!a.exec(b.href)}function f(a){var b=function(a){this.$$unwrapTrustedValue=function(){return a}};a&&(b.prototype=new a);b.prototype.valueOf=function(){return this.$$unwrapTrustedValue()};
b.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()};return b}var g=function(a){throw Xb("unsafe","Attempting to use an unsafe value in a safe context.");};d.has("$sanitize")&&(g=d.get("$sanitize"));var h=f(),k={};k[Ob.HTML]=f(h);k[Ob.CSS]=f(h);k[Ob.URL]=f(h);k[Ob.JS]=f(h);k[Ob.RESOURCE_URL]=f(k[Ob.URL]);return{trustAs:function(a,b){var d=k.hasOwnProperty(a)?k[a]:null;if(!d)throw Xb("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",a,b);
if(null===b||b===c||""===b)return b;if("string"!==typeof b)throw Xb("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",a);return new d(b)},getTrusted:function(d,f){if(null===f||f===c||""===f)return f;var h=k.hasOwnProperty(d)?k[d]:null;if(h&&f instanceof h)return f.$$unwrapTrustedValue();if(d===Ob.RESOURCE_URL){var h=dc(f.toString()),m,y,F=!1;m=0;for(y=a.length;m<y;m++)if(e(a[m],h)){F=!0;break}if(F)for(m=0,y=b.length;m<y;m++)if(e(b[m],h)){F=!1;break}if(F)return f;
throw Xb("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",f.toString());}if(d===Ob.HTML)return g(f);throw Xb("unsafe","Attempting to use an unsafe value in a safe context.");},valueOf:function(a){return a instanceof h?a.$$unwrapTrustedValue():a}}}]}function Ac(){var a=!0;this.enabled=function(b){arguments.length&&(a=!!b);return a};this.$get=["$parse","$sceDelegate",function(b,c){if(a&&8>Sb)throw Xb("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");
var d=w(Ob);d.isEnabled=function(){return a};d.trustAs=c.trustAs;d.getTrusted=c.getTrusted;d.valueOf=c.valueOf;a||(d.trustAs=d.getTrusted=function(a,b){return b},d.valueOf=D);d.parseAs=function(a,c){var e=b(c);return e.literal&&e.constant?e:b(c,function(b){return d.getTrusted(a,b)})};var e=d.parseAs,g=d.getTrusted,h=d.trustAs;f(Ob,function(a,b){var c=sa(b);d[xa("parse_as_"+c)]=function(b){return e(a,b)};d[xa("get_trusted_"+c)]=function(b){return g(a,b)};d[xa("trust_as_"+c)]=function(b){return h(a,
b)}});return d}]}function ae(){this.$get=["$window","$document",function(a,b){var c={},d=u((/android (\d+)/.exec(sa((a.navigator||{}).userAgent))||[])[1]),e=/Boxee/i.test((a.navigator||{}).userAgent),f=b[0]||{},g,h=/^(Moz|webkit|ms)(?=[A-Z])/,k=f.body&&f.body.style,m=!1,y=!1;if(k){for(var F in k)if(m=h.exec(F)){g=m[0];g=g.substr(0,1).toUpperCase()+g.substr(1);break}g||(g="WebkitOpacity"in k&&"webkit");m=!!("transition"in k||g+"Transition"in k);y=!!("animation"in k||g+"Animation"in k);!d||m&&y||(m=
J(k.webkitTransition),y=J(k.webkitAnimation))}return{history:!(!a.history||!a.history.pushState||4>d||e),hasEvent:function(a){if("input"===a&&11>=Sb)return!1;if(B(c[a])){var b=f.createElement("div");c[a]="on"+a in b}return c[a]},csp:Rb(),vendorPrefix:g,transitions:m,animations:y,android:d}}]}function Ub(){this.$get=["$templateCache","$http","$q",function(a,b,c){function d(e,f){d.totalPendingRequests++;var g=b.defaults&&b.defaults.transformResponse;ia(g)?g=g.filter(function(a){return a!==hc}):g===
hc&&(g=null);return b.get(e,{cache:a,transformResponse:g})["finally"](function(){d.totalPendingRequests--}).then(function(b){a.put(e,b.data);return b.data},function(a){if(!f)throw bb("tpload","Failed to load template: {0} (HTTP status: {1} {2})",e,a.status,a.statusText);return c.reject(a)})}d.totalPendingRequests=0;return d}]}function Me(){this.$get=["$rootScope","$browser","$location",function(a,b,c){return{findBindings:function(a,b,c){a=a.getElementsByClassName("ng-binding");var d=[];f(a,function(a){var e=
yb.element(a).data("$binding");e&&f(e,function(e){c?(new RegExp("(^|\\s)"+Gd(b)+"(\\s|\\||$)")).test(e)&&d.push(a):-1!=e.indexOf(b)&&d.push(a)})});return d},findModels:function(a,b,c){for(var d=["ng-","data-ng-","ng\\:"],e=0;e<d.length;++e){var f=a.querySelectorAll("["+d[e]+"model"+(c?"=":"*=")+'"'+b+'"]');if(f.length)return f}},getLocation:function(){return c.url()},setLocation:function(b){b!==c.url()&&(c.url(b),a.$digest())},whenStable:function(a){b.notifyWhenNoOutstandingRequests(a)}}}]}function Ne(){this.$get=
["$rootScope","$browser","$q","$$q","$exceptionHandler",function(a,b,c,d,e){function f(h,k,m){N(h)||(m=k,k=h,h=A);var y=Vb.call(arguments,3),F=s(m)&&!m,n=(F?d:c).defer(),q=n.promise,p;p=b.defer(function(){try{n.resolve(h.apply(null,y))}catch(b){n.reject(b),e(b)}finally{delete g[q.$$timeoutId]}F||a.$apply()},k);q.$$timeoutId=p;g[p]=n;return q}var g={};f.cancel=function(a){return a&&a.$$timeoutId in g?(g[a.$$timeoutId].reject("canceled"),delete g[a.$$timeoutId],b.defer.cancel(a.$$timeoutId)):!1};return f}]}
function dc(a){Sb&&(fb.setAttribute("href",a),a=fb.href);fb.setAttribute("href",a);return{href:fb.href,protocol:fb.protocol?fb.protocol.replace(/:$/,""):"",host:fb.host,search:fb.search?fb.search.replace(/^\?/,""):"",hash:fb.hash?fb.hash.replace(/^#/,""):"",hostname:fb.hostname,port:fb.port,pathname:"/"===fb.pathname.charAt(0)?fb.pathname:"/"+fb.pathname}}function be(a){a=J(a)?dc(a):a;return a.protocol===Hd.protocol&&a.host===Hd.host}function ce(){this.$get=x(a)}function Pb(a){function b(a){try{return decodeURIComponent(a)}catch(c){return a}}
var d=a[0]||{},e={},f="";return function(){var a,g,h,k,m;a=d.cookie||"";if(a!==f)for(f=a,a=f.split("; "),e={},h=0;h<a.length;h++)g=a[h],k=g.indexOf("="),0<k&&(m=b(g.substring(0,k)),e[m]===c&&(e[m]=b(g.substring(k+1))));return e}}function nc(){this.$get=Pb}function ee(a){function b(c,d){if(G(c)){var e={};f(c,function(a,c){e[c]=b(c,a)});return e}return a.factory(c+"Filter",d)}this.register=b;this.$get=["$injector",function(a){return function(b){return a.get(b+"Filter")}}];b("currency",Hc);b("date",
Id);b("filter",Oe);b("json",ue);b("limitTo",ve);b("lowercase",Vf);b("number",we);b("orderBy",od);b("uppercase",Wf)}function Oe(){return function(a,b,c){if(!e(a)){if(null==a)return a;throw d("filter")("notarray","Expected array but received: {0}",a);}var f;switch(fd(b)){case "function":break;case "boolean":case "null":case "number":case "string":f=!0;case "object":b=Pe(b,c,f);break;default:return a}return Array.prototype.filter.call(a,b)}}function Pe(a,b,c){var d=G(a)&&"$"in a;!0===b?b=R:N(b)||(b=
function(a,b){if(B(a))return!1;if(null===a||null===b)return a===b;var c;!(c=G(b))&&(c=G(a))&&(c=a,c=!(N(c.toString)&&c.toString!==Object.prototype.toString));if(c)return!1;a=sa(""+a);b=sa(""+b);return-1!==a.indexOf(b)});return function(e){return d&&!G(e)?oc(e,a.$,b,!1):oc(e,a,b,c)}}function oc(a,b,c,d,e){var f=fd(a),g=fd(b);if("string"===g&&"!"===b.charAt(0))return!oc(a,b.substring(1),c,d);if(ia(a))return a.some(function(a){return oc(a,b,c,d)});switch(f){case "object":var h;if(d){for(h in a)if("$"!==
h.charAt(0)&&oc(a[h],b,c,!0))return!0;return e?!1:oc(a,b,c,!1)}if("object"===g){for(h in b)if(e=b[h],!N(e)&&!B(e)&&(f="$"===h,!oc(f?a:a[h],e,c,f,f)))return!1;return!0}return c(a,b);case "function":return!1;default:return c(a,b)}}function fd(a){return null===a?"null":typeof a}function Hc(a){var b=a.NUMBER_FORMATS;return function(a,c,d){B(c)&&(c=b.CURRENCY_SYM);B(d)&&(d=b.PATTERNS[1].maxFrac);return null==a?a:xe(a,b.PATTERNS[1],b.GROUP_SEP,b.DECIMAL_SEP,d).replace(/\u00A4/g,c)}}function we(a){var b=
a.NUMBER_FORMATS;return function(a,c){return null==a?a:xe(a,b.PATTERNS[0],b.GROUP_SEP,b.DECIMAL_SEP,c)}}function xe(a,b,c,d,e){if(G(a))return"";var f=0>a;a=Math.abs(a);var g=Infinity===a;if(!g&&!isFinite(a))return"";var h=a+"",k="",m=!1,y=[];g&&(k="\u221e");if(!g&&-1!==h.indexOf("e")){var F=h.match(/([\d\.]+)e(-?)(\d+)/);F&&"-"==F[2]&&F[3]>e+1?a=0:(k=h,m=!0)}if(g||m)0<e&&1>a&&(k=a.toFixed(e),a=parseFloat(k));else{g=(h.split(Jd)[1]||"").length;B(e)&&(e=Math.min(Math.max(b.minFrac,g),b.maxFrac));a=
+(Math.round(+(a.toString()+"e"+e)).toString()+"e"+-e);var g=(""+a).split(Jd),h=g[0],g=g[1]||"",F=0,n=b.lgSize,q=b.gSize;if(h.length>=n+q)for(F=h.length-n,m=0;m<F;m++)0===(F-m)%q&&0!==m&&(k+=c),k+=h.charAt(m);for(m=F;m<h.length;m++)0===(h.length-m)%n&&0!==m&&(k+=c),k+=h.charAt(m);for(;g.length<e;)g+="0";e&&"0"!==e&&(k+=d+g.substr(0,e))}0===a&&(f=!1);y.push(f?b.negPre:b.posPre,k,f?b.negSuf:b.posSuf);return y.join("")}function $c(a,b,c){var d="";0>a&&(d="-",a=-a);for(a=""+a;a.length<b;)a="0"+a;c&&(a=
a.substr(a.length-b));return d+a}function gb(a,b,c,d){c=c||0;return function(e){e=e["get"+a]();if(0<c||e>-c)e+=c;0===e&&-12==c&&(e=12);return $c(e,b,d)}}function pd(a,b){return function(c,d){var e=c["get"+a](),f=Uc(b?"SHORT"+a:a);return d[f][e]}}function ye(a){var b=(new Date(a,0,1)).getDay();return new Date(a,0,(4>=b?5:12)-b)}function ze(a){return function(b){var c=ye(b.getFullYear());b=+new Date(b.getFullYear(),b.getMonth(),b.getDate()+(4-b.getDay()))-+c;b=1+Math.round(b/6048E5);return $c(b,a)}}
function Kd(a,b){return 0>=a.getFullYear()?b.ERAS[0]:b.ERAS[1]}function Id(a){function b(a){var d;if(d=a.match(c)){a=new Date(0);var e=0,f=0,g=d[8]?a.setUTCFullYear:a.setFullYear,h=d[8]?a.setUTCHours:a.setHours;d[9]&&(e=u(d[9]+d[10]),f=u(d[9]+d[11]));g.call(a,u(d[1]),u(d[2])-1,u(d[3]));e=u(d[4]||0)-e;f=u(d[5]||0)-f;g=u(d[6]||0);d=Math.round(1E3*parseFloat("0."+(d[7]||0)));h.call(a,e,f,g,d)}return a}var c=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;
return function(c,d,e){var g="",h=[],k,m;d=d||"mediumDate";d=a.DATETIME_FORMATS[d]||d;J(c)&&(c=Xf.test(c)?u(c):b(c));C(c)&&(c=new Date(c));if(!L(c)||!isFinite(c.getTime()))return c;for(;d;)(m=cf.exec(d))?(h=U(h,m,1),d=h.pop()):(h.push(d),d=null);var y=c.getTimezoneOffset();e&&(y=V(e,c.getTimezoneOffset()),c=Da(c,e,!0));f(h,function(b){k=qd[b];g+=k?k(c,a.DATETIME_FORMATS,y):b.replace(/(^'|'$)/g,"").replace(/''/g,"'")});return g}}function ue(){return function(a,b){B(b)&&(b=2);return ub(a,b)}}function ve(){return function(a,
b,c){b=Infinity===Math.abs(Number(b))?Number(b):u(b);if(isNaN(b))return a;C(a)&&(a=a.toString());if(!ia(a)&&!J(a))return a;c=!c||isNaN(c)?0:u(c);c=0>c&&c>=-a.length?a.length+c:c;return 0<=b?a.slice(c,c+b):0===c?a.slice(b,a.length):a.slice(Math.max(0,c+b),c)}}function od(a){return function(b,c,d){function f(a,b){return b?function(b,c){return a(c,b)}:a}function g(a){switch(typeof a){case "number":case "boolean":case "string":return!0;default:return!1}}function h(a){return null===a?"null":"function"===
typeof a.valueOf&&(a=a.valueOf(),g(a))||"function"===typeof a.toString&&(a=a.toString(),g(a))?a:""}function k(a,b){var c=typeof a,d=typeof b;c===d&&"object"===c&&(a=h(a),b=h(b));return c===d?("string"===c&&(a=a.toLowerCase(),b=b.toLowerCase()),a===b?0:a<b?-1:1):c<d?-1:1}if(!e(b))return b;c=ia(c)?c:[c];0===c.length&&(c=["+"]);c=c.map(function(b){var c=!1,d=b||D;if(J(b)){if("+"==b.charAt(0)||"-"==b.charAt(0))c="-"==b.charAt(0),b=b.substring(1);if(""===b)return f(k,c);d=a(b);if(d.constant){var e=d();
return f(function(a,b){return k(a[e],b[e])},c)}}return f(function(a,b){return k(d(a),d(b))},c)});return Vb.call(b).sort(f(function(a,b){for(var d=0;d<c.length;d++){var e=c[d](a,b);if(0!==e)return e}return 0},d))}}function tc(a){N(a)&&(a={link:a});a.restrict=a.restrict||"AC";return x(a)}function Ae(a,b,d,e,g){var h=this,k=[],m=h.$$parentForm=a.parent().controller("form")||Ld;h.$error={};h.$$success={};h.$pending=c;h.$name=g(b.name||b.ngForm||"")(d);h.$dirty=!1;h.$pristine=!0;h.$valid=!0;h.$invalid=
!1;h.$submitted=!1;m.$addControl(h);h.$rollbackViewValue=function(){f(k,function(a){a.$rollbackViewValue()})};h.$commitViewValue=function(){f(k,function(a){a.$commitViewValue()})};h.$addControl=function(a){Ya(a.$name,"input");k.push(a);a.$name&&(h[a.$name]=a)};h.$$renameControl=function(a,b){var c=a.$name;h[c]===a&&delete h[c];h[b]=a;a.$name=b};h.$removeControl=function(a){a.$name&&h[a.$name]===a&&delete h[a.$name];f(h.$pending,function(b,c){h.$setValidity(c,null,a)});f(h.$error,function(b,c){h.$setValidity(c,
null,a)});f(h.$$success,function(b,c){h.$setValidity(c,null,a)});ba(k,a)};Md({ctrl:this,$element:a,set:function(a,b,c){var d=a[b];d?-1===d.indexOf(c)&&d.push(c):a[b]=[c]},unset:function(a,b,c){var d=a[b];d&&(ba(d,c),0===d.length&&delete a[b])},parentForm:m,$animate:e});h.$setDirty=function(){e.removeClass(a,jc);e.addClass(a,ad);h.$dirty=!0;h.$pristine=!1;m.$setDirty()};h.$setPristine=function(){e.setClass(a,jc,ad+" ng-submitted");h.$dirty=!1;h.$pristine=!0;h.$submitted=!1;f(k,function(a){a.$setPristine()})};
h.$setUntouched=function(){f(k,function(a){a.$setUntouched()})};h.$setSubmitted=function(){e.addClass(a,"ng-submitted");h.$submitted=!0;m.$setSubmitted()}}function Nd(a){a.$formatters.push(function(b){return a.$isEmpty(b)?b:b.toString()})}function Ic(a,b,c,d,e,f){var g=sa(b[0].type);if(!e.android){var h=!1;b.on("compositionstart",function(a){h=!0});b.on("compositionend",function(){h=!1;k()})}var k=function(a){m&&(f.defer.cancel(m),m=null);if(!h){var e=b.val();a=a&&a.type;"password"===g||c.ngTrim&&
"false"===c.ngTrim||(e=ya(e));(d.$viewValue!==e||""===e&&d.$$hasNativeValidators)&&d.$setViewValue(e,a)}};if(e.hasEvent("input"))b.on("input",k);else{var m,y=function(a,b,c){m||(m=f.defer(function(){m=null;b&&b.value===c||k(a)}))};b.on("keydown",function(a){var b=a.keyCode;91===b||15<b&&19>b||37<=b&&40>=b||y(a,this,this.value)});if(e.hasEvent("paste"))b.on("paste cut",y)}b.on("change",k);d.$render=function(){b.val(d.$isEmpty(d.$viewValue)?"":d.$viewValue)}}function ta(a,b){return function(c,d){var e,
g;if(L(c))return c;if(J(c)){'"'==c.charAt(0)&&'"'==c.charAt(c.length-1)&&(c=c.substring(1,c.length-1));if(Yf.test(c))return new Date(c);a.lastIndex=0;if(e=a.exec(c))return e.shift(),g=d?{yyyy:d.getFullYear(),MM:d.getMonth()+1,dd:d.getDate(),HH:d.getHours(),mm:d.getMinutes(),ss:d.getSeconds(),sss:d.getMilliseconds()/1E3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},f(e,function(a,c){c<b.length&&(g[b[c]]=+a)}),new Date(g.yyyy,g.MM-1,g.dd,g.HH,g.mm,g.ss||0,1E3*g.sss||0)}return NaN}}function bd(a,b,d,e){return function(f,
g,h,k,m,y,F){function n(a){return a&&!(a.getTime&&a.getTime()!==a.getTime())}function q(a){return s(a)?L(a)?a:d(a):c}kc(f,g,h,k);Ic(f,g,h,k,m,y);var p=k&&k.$options&&k.$options.timezone,M;k.$$parserName=a;k.$parsers.push(function(a){return k.$isEmpty(a)?null:b.test(a)?(a=d(a,M),p&&(a=Da(a,p)),a):c});k.$formatters.push(function(a){if(a&&!L(a))throw Od("datefmt","Expected `{0}` to be a date",a);if(n(a))return(M=a)&&p&&(M=Da(M,p,!0)),F("date")(a,e,p);M=null;return""});if(s(h.min)||h.ngMin){var w;k.$validators.min=
function(a){return!n(a)||B(w)||d(a)>=w};h.$observe("min",function(a){w=q(a);k.$validate()})}if(s(h.max)||h.ngMax){var r;k.$validators.max=function(a){return!n(a)||B(r)||d(a)<=r};h.$observe("max",function(a){r=q(a);k.$validate()})}}}function kc(a,b,d,e){(e.$$hasNativeValidators=G(b[0].validity))&&e.$parsers.push(function(a){var d=b.prop("validity")||{};return d.badInput&&!d.typeMismatch?c:a})}function Be(a,b,c,e,f){if(s(e)){a=a(e);if(!a.constant)throw d("ngModel")("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",
c,e);return a(b)}return f}function Pd(a,b){a="ngClass"+a;return["$animate",function(c){function d(a,b){var c=[],e=0;a:for(;e<a.length;e++){for(var f=a[e],g=0;g<b.length;g++)if(f==b[g])continue a;c.push(f)}return c}function e(a){var b=[];return ia(a)?(f(a,function(a){b=b.concat(e(a))}),b):J(a)?a.split(" "):G(a)?(f(a,function(a,c){a&&(b=b.concat(c.split(" ")))}),b):a}return{restrict:"AC",link:function(g,h,k){function m(a,b){var c=h.data("$classCounts")||fa(),d=[];f(a,function(a){if(0<b||c[a])c[a]=(c[a]||
0)+b,c[a]===+(0<b)&&d.push(a)});h.data("$classCounts",c);return d.join(" ")}function y(a){if(!0===b||g.$index%2===b){var f=e(a||[]);if(!F){var n=m(f,1);k.$addClass(n)}else if(!R(a,F)){var q=e(F),n=d(f,q),f=d(q,f),n=m(n,1),f=m(f,-1);n&&n.length&&c.addClass(h,n);f&&f.length&&c.removeClass(h,f)}}F=w(a)}var F;g.$watch(k[a],y,!0);k.$observe("class",function(b){y(g.$eval(k[a]))});"ngClass"!==a&&g.$watch("$index",function(c,d){var f=c&1;if(f!==(d&1)){var h=e(g.$eval(k[a]));f===b?(f=m(h,1),k.$addClass(f)):
(f=m(h,-1),k.$removeClass(f))}})}}}]}function Md(a){function b(a,c){c&&!g[a]?(y.addClass(f,a),g[a]=!0):!c&&g[a]&&(y.removeClass(f,a),g[a]=!1)}function d(a,c){a=a?"-"+ib(a,"-"):"";b(rd+a,!0===c);b(Jc+a,!1===c)}var e=a.ctrl,f=a.$element,g={},h=a.set,k=a.unset,m=a.parentForm,y=a.$animate;g[Jc]=!(g[rd]=f.hasClass(rd));e.$setValidity=function(a,f,g){f===c?(e.$pending||(e.$pending={}),h(e.$pending,a,g)):(e.$pending&&k(e.$pending,a,g),Ia(e.$pending)&&(e.$pending=c));X(f)?f?(k(e.$error,a,g),h(e.$$success,
a,g)):(h(e.$error,a,g),k(e.$$success,a,g)):(k(e.$error,a,g),k(e.$$success,a,g));e.$pending?(b(df,!0),e.$valid=e.$invalid=c,d("",null)):(b(df,!1),e.$valid=Ia(e.$error),e.$invalid=!e.$valid,d("",e.$valid));f=e.$pending&&e.$pending[a]?c:e.$error[a]?!1:e.$$success[a]?!0:null;d(a,f);m.$setValidity(a,f,e)}}function Ia(a){if(a)for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}var ef=/^\/(.+)\/([a-z]*)$/,sa=function(a){return J(a)?a.toLowerCase():a},Rc=Object.prototype.hasOwnProperty,Uc=function(a){return J(a)?
a.toUpperCase():a},Sb,Z,Cb,Vb=[].slice,re=[].splice,uc=[].push,Wb=Object.prototype.toString,jd=Object.getPrototypeOf,qc=d("ng"),yb=a.angular||(a.angular={}),Vc,id=0;Sb=b.documentMode;A.$inject=[];D.$inject=[];var ia=Array.isArray,he=/^\[object (Uint8(Clamped)?)|(Uint16)|(Uint32)|(Int8)|(Int16)|(Int32)|(Float(32)|(64))Array\]$/,ya=function(a){return J(a)?a.trim():a},Gd=function(a){return a.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},Rb=function(){if(s(Rb.isActive_))return Rb.isActive_;
var a=!(!b.querySelector("[ng-csp]")&&!b.querySelector("[data-ng-csp]"));if(!a)try{new Function("")}catch(c){a=!0}return Rb.isActive_=a},ld=function(){if(s(ld.name_))return ld.name_;var a,c,d=rc.length,e,f;for(c=0;c<d;++c)if(e=rc[c],a=b.querySelector("["+e.replace(":","\\:")+"jq]")){f=a.getAttribute(e+"jq");break}return ld.name_=f},rc=["ng-","data-ng-","ng:","x-ng-"],Qe=/[A-Z]/g,kd=!1,Ca,Qb=1,Sc=3,Se={full:"1.4.1",major:1,minor:4,dot:1,codeName:"hyperionic-illumination"};ca.expando="ng339";var ic=
ca.cache={},oe=1;ca._data=function(a){return this.cache[a[this.expando]]||{}};var sc=/([\:\-\_]+(.))/g,le=/^moz([A-Z])/,ff={mouseleave:"mouseout",mouseenter:"mouseover"},Db=d("jqLite"),ne=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,Cd=/<|&#?\w+;/,Qf=/<([\w:]+)/,me=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Nb={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],
td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Nb.optgroup=Nb.option;Nb.tbody=Nb.tfoot=Nb.colgroup=Nb.caption=Nb.thead;Nb.th=Nb.td;var Ga=ca.prototype={ready:function(c){function d(){e||(e=!0,c())}var e=!1;"complete"===b.readyState?setTimeout(d):(this.on("DOMContentLoaded",d),ca(a).on("load",d))},toString:function(){var a=[];f(this,function(b){a.push(""+b)});return"["+a.join(", ")+"]"},eq:function(a){return 0<=a?Z(this[a]):Z(this[this.length+a])},length:0,push:uc,sort:[].sort,
splice:[].splice},Dd={};f("multiple selected checked disabled readOnly required open".split(" "),function(a){Dd[sa(a)]=a});var ab={};f("input select option textarea button form details".split(" "),function(a){ab[a]=!0});var $e={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};f({data:Aa,removeData:za,hasData:function(a){for(var b in ic[a.ng339])return!0;return!1}},function(a,b){ca[b]=a});f({data:Aa,inheritedData:Ja,scope:function(a){return Z.data(a,"$scope")||
Ja(a.parentNode||a,["$isolateScope","$scope"])},isolateScope:function(a){return Z.data(a,"$isolateScope")||Z.data(a,"$isolateScopeNoTemplate")},controller:Ba,injector:function(a){return Ja(a,"$injector")},removeAttr:function(a,b){a.removeAttribute(b)},hasClass:O,css:function(a,b,c){b=xa(b);if(s(c))a.style[b]=c;else return a.style[b]},attr:function(a,b,d){var e=a.nodeType;if(e!==Sc&&2!==e&&8!==e)if(e=sa(b),Dd[e])if(s(d))d?(a[b]=!0,a.setAttribute(b,e)):(a[b]=!1,a.removeAttribute(e));else return a[b]||
(a.attributes.getNamedItem(b)||A).specified?e:c;else if(s(d))a.setAttribute(b,d);else if(a.getAttribute)return a=a.getAttribute(b,2),null===a?c:a},prop:function(a,b,c){if(s(c))a[b]=c;else return a[b]},text:function(){function a(b,c){if(B(c)){var d=b.nodeType;return d===Qb||d===Sc?b.textContent:""}b.textContent=c}a.$dv="";return a}(),val:function(a,b){if(B(b)){if(a.multiple&&"select"===W(a)){var c=[];f(a.options,function(a){a.selected&&c.push(a.value||a.text)});return 0===c.length?null:c}return a.value}a.value=
b},html:function(a,b){if(B(b))return a.innerHTML;Pa(a,!0);a.innerHTML=b},empty:lc},function(a,b){ca.prototype[b]=function(b,d){var e,f,g=this.length;if(a!==lc&&(2==a.length&&a!==O&&a!==Ba?b:d)===c){if(G(b)){for(e=0;e<g;e++)if(a===Aa)a(this[e],b);else for(f in b)a(this[e],f,b[f]);return this}e=a.$dv;g=e===c?Math.min(g,1):g;for(f=0;f<g;f++){var h=a(this[f],b,d);e=e?e+h:h}return e}for(e=0;e<g;e++)a(this[e],b,d);return this}});f({removeData:za,on:function S(a,b,c,d){if(s(d))throw Db("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");
if(ec(a)){var e=Wa(a,!0);d=e.events;var f=e.handle;f||(f=e.handle=fc(a,d));for(var e=0<=b.indexOf(" ")?b.split(" "):[b],g=e.length;g--;){b=e[g];var h=d[b];h||(d[b]=[],"mouseenter"===b||"mouseleave"===b?S(a,ff[b],function(a){var c=a.relatedTarget;c&&(c===this||this.contains(c))||f(a,b)}):"$destroy"!==b&&a.addEventListener(b,f,!1),h=d[b]);h.push(c)}}},off:lb,one:function(a,b,c){a=Z(a);a.on(b,function na(){a.off(b,c);a.off(b,na)});a.on(b,c)},replaceWith:function(a,b){var c,d=a.parentNode;Pa(a);f(new ca(b),
function(b){c?d.insertBefore(b,c.nextSibling):d.replaceChild(b,a);c=b})},children:function(a){var b=[];f(a.childNodes,function(a){a.nodeType===Qb&&b.push(a)});return b},contents:function(a){return a.contentDocument||a.childNodes||[]},append:function(a,b){var c=a.nodeType;if(c===Qb||11===c){b=new ca(b);for(var c=0,d=b.length;c<d;c++)a.appendChild(b[c])}},prepend:function(a,b){if(a.nodeType===Qb){var c=a.firstChild;f(new ca(b),function(b){a.insertBefore(b,c)})}},wrap:function(a,b){b=Z(b).eq(0).clone()[0];
var c=a.parentNode;c&&c.replaceChild(b,a);b.appendChild(a)},remove:Qa,detach:function(a){Qa(a,!0)},after:function(a,b){var c=a,d=a.parentNode;b=new ca(b);for(var e=0,f=b.length;e<f;e++){var g=b[e];d.insertBefore(g,c.nextSibling);c=g}},addClass:ma,removeClass:mb,toggleClass:function(a,b,c){b&&f(b.split(" "),function(b){var d=c;B(d)&&(d=!O(a,b));(d?ma:mb)(a,b)})},parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},next:function(a){return a.nextElementSibling},find:function(a,b){return a.getElementsByTagName?
a.getElementsByTagName(b):[]},clone:ra,triggerHandler:function(a,b,c){var d,e,g=b.type||b,h=Wa(a);if(h=(h=h&&h.events)&&h[g])d={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:A,type:g,target:a},b.type&&(d=m(d,b)),b=w(h),e=c?[d].concat(c):[d],f(b,function(b){d.isImmediatePropagationStopped()||
b.apply(a,e)})}},function(a,b){ca.prototype[b]=function(b,c,d){for(var e,f=0,g=this.length;f<g;f++)B(e)?(e=a(this[f],b,c,d),s(e)&&(e=Z(e))):nb(e,a(this[f],b,c,d));return s(e)?e:this};ca.prototype.bind=ca.prototype.on;ca.prototype.unbind=ca.prototype.off});Fa.prototype={put:function(a,b){this[xb(a,this.nextUid)]=b},get:function(a){return this[xb(a,this.nextUid)]},remove:function(a){var b=this[a=xb(a,this.nextUid)];delete this[a];return b}};var Pf=[function(){this.$get=[function(){return Fa}]}],Xc=
/^function\s*[^\(]*\(\s*([^\)]*)\)/m,gf=/,/,Qd=/^\s*(_?)(\S+?)\1\s*$/,Gc=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg,Eb=d("$injector");oa.$$annotate=function(a,b,c){var d;if("function"===typeof a){if(!(d=a.$inject)){d=[];if(a.length){if(b)throw J(c)&&c||(c=a.name||mc(a)),Eb("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",c);b=a.toString().replace(Gc,"");b=b.match(Xc);f(b[1].split(gf),function(a){a.replace(Qd,function(a,b,c){d.push(c)})})}a.$inject=d}}else ia(a)?(b=a.length-
1,kb(a[b],"fn"),d=a.slice(0,b)):kb(a,"fn",!0);return d};var sd=d("$animate"),Of=function(){this.$get=["$q","$$rAF",function(a,b){function c(){}c.all=A;c.chain=A;c.prototype={end:A,cancel:A,resume:A,pause:A,complete:A,then:function(c,d){return a(function(a){b(function(){a()})}).then(c,d)}};return c}]},ke=function(){var a=new Fa,b=[];this.$get=["$$AnimateRunner","$rootScope",function(c,d){function e(c,g,h){var k=a.get(c);k||(a.put(c,k={}),b.push(c));g&&f(g.split(" "),function(a){a&&(k[a]=!0)});h&&f(h.split(" "),
function(a){a&&(k[a]=!1)});1<b.length||d.$$postDigest(function(){f(b,function(b){var c=a.get(b);if(c){var d=Za(b.attr("class")),e="",g="";f(c,function(a,b){a!==!!d[b]&&(a?e+=(e.length?" ":"")+b:g+=(g.length?" ":"")+b)});f(b,function(a){e&&ma(a,e);g&&mb(a,g)});a.remove(b)}});b.length=0})}return{enabled:A,on:A,off:A,pin:A,push:function(a,b,d,f){f&&f();d=d||{};d.from&&a.css(d.from);d.to&&a.css(d.to);(d.addClass||d.removeClass)&&e(a,d.addClass,d.removeClass);return new c}}}]},Ze=["$provide",function(a){var b=
this;this.$$registeredAnimations=Object.create(null);this.register=function(c,d){if(c&&"."!==c.charAt(0))throw sd("notcsel","Expecting class selector starting with '.' got '{0}'.",c);var e=c+"-animation";b.$$registeredAnimations[c.substr(1)]=e;a.factory(e,d)};this.classNameFilter=function(a){if(1===arguments.length&&(this.$$classNameFilter=a instanceof RegExp?a:null)&&/(\s+|\/)ng-animate(\s+|\/)/.test(this.$$classNameFilter.toString()))throw sd("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',
"ng-animate");return this.$$classNameFilter};this.$get=["$$animateQueue",function(a){function b(a,c,d){if(d){var e;a:{for(e=0;e<d.length;e++){var f=d[e];if(1===f.nodeType){e=f;break a}}e=void 0}!e||e.parentNode||e.previousElementSibling||(d=null)}d?d.after(a):c.prepend(a)}return{on:a.on,off:a.off,pin:a.pin,enabled:a.enabled,cancel:function(a){a.end&&a.end()},enter:function(c,d,e,f){d=d&&Z(d);e=e&&Z(e);d=d||e.parent();b(c,d,e);return a.push(c,"enter",eb(f))},move:function(c,d,e,f){d=d&&Z(d);e=e&&Z(e);
d=d||e.parent();b(c,d,e);return a.push(c,"move",eb(f))},leave:function(b,c){return a.push(b,"leave",eb(c),function(){b.remove()})},addClass:function(b,c,d){d=eb(d);d.addClass=Xa(d.addclass,c);return a.push(b,"addClass",d)},removeClass:function(b,c,d){d=eb(d);d.removeClass=Xa(d.removeClass,c);return a.push(b,"removeClass",d)},setClass:function(b,c,d,e){e=eb(e);e.addClass=Xa(e.addClass,c);e.removeClass=Xa(e.removeClass,d);return a.push(b,"setClass",e)},animate:function(b,c,d,e,f){f=eb(f);f.from=f.from?
m(f.from,c):c;f.to=f.to?m(f.to,d):d;f.tempClasses=Xa(f.tempClasses,e||"ng-inline-animate");return a.push(b,"animate",f)}}}]}],bb=d("$compile");Bc.$inject=["$provide","$$sanitizeUriProvider"];var qe=/^((?:x|data)[\:\-_])/i,md=d("$controller"),pe=/^(\S+)(\s+as\s+(\w+))?$/,Yc="application/json",Ed={"Content-Type":Yc+";charset=utf-8"},Sf=/^\[|^\{(?!\{)/,Zc={"[":/]$/,"{":/}$/},af=/^\)\]\}',?\n/,Ha=yb.$interpolateMinErr=d("$interpolate");Ha.throwNoconcat=function(a){throw Ha("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",
a);};Ha.interr=function(a,b){return Ha("interr","Can't interpolate: {0}\n{1}",a,b.toString())};var Gb=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,Tf={http:80,https:443,ftp:21},Fd=d("$location"),Ce={$$html5:!1,$$replace:!1,absUrl:cd("$$absUrl"),url:function(a){if(B(a))return this.$$url;var b=Gb.exec(a);(b[1]||""===a)&&this.path(decodeURIComponent(b[1]));(b[2]||b[1]||""===a)&&this.search(b[3]||"");this.hash(b[5]||"");return this},protocol:cd("$$protocol"),host:cd("$$host"),port:cd("$$port"),path:Vd("$$path",
function(a){a=null!==a?a.toString():"";return"/"==a.charAt(0)?a:"/"+a}),search:function(a,b){switch(arguments.length){case 0:return this.$$search;case 1:if(J(a)||C(a))a=a.toString(),this.$$search=qb(a);else if(G(a))a=la(a,{}),f(a,function(b,c){null==b&&delete a[c]}),this.$$search=a;else throw Fd("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");break;default:B(b)||null===b?delete this.$$search[a]:this.$$search[a]=b}this.$$compose();return this},hash:Vd("$$hash",
function(a){return null!==a?a.toString():""}),replace:function(){this.$$replace=!0;return this}};f([Ud,vd,ud],function(a){a.prototype=Object.create(Ce);a.prototype.state=function(b){if(!arguments.length)return this.$$state;if(a!==ud||!this.$$html5)throw Fd("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");this.$$state=B(b)?null:b;return this}});var zb=d("$parse"),Uf=Function.prototype.call,se=Function.prototype.apply,bf=Function.prototype.bind,
Kc=fa();f("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(a){Kc[a]=!0});var Rd={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},nd=function(a){this.options=a};nd.prototype={constructor:nd,lex:function(a){this.text=a;this.index=0;for(this.tokens=[];this.index<this.text.length;)if(a=this.text.charAt(this.index),'"'===a||"'"===a)this.readString(a);else if(this.isNumber(a)||"."===a&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(a))this.readIdent();else if(this.is(a,
"(){}[].,;:?"))this.tokens.push({index:this.index,text:a}),this.index++;else if(this.isWhitespace(a))this.index++;else{var b=a+this.peek(),c=b+this.peek(2),d=Kc[b],e=Kc[c];Kc[a]||d||e?(a=e?c:d?b:a,this.tokens.push({index:this.index,text:a,operator:!0}),this.index+=a.length):this.throwError("Unexpected next character ",this.index,this.index+1)}return this.tokens},is:function(a,b){return-1!==b.indexOf(a)},peek:function(a){a=a||1;return this.index+a<this.text.length?this.text.charAt(this.index+a):!1},
isNumber:function(a){return"0"<=a&&"9">=a&&"string"===typeof a},isWhitespace:function(a){return" "===a||"\r"===a||"\t"===a||"\n"===a||"\v"===a||"\u00a0"===a},isIdent:function(a){return"a"<=a&&"z">=a||"A"<=a&&"Z">=a||"_"===a||"$"===a},isExpOperator:function(a){return"-"===a||"+"===a||this.isNumber(a)},throwError:function(a,b,c){c=c||this.index;b=s(b)?"s "+b+"-"+this.index+" ["+this.text.substring(b,c)+"]":" "+c;throw zb("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",a,b,this.text);},
readNumber:function(){for(var a="",b=this.index;this.index<this.text.length;){var c=sa(this.text.charAt(this.index));if("."==c||this.isNumber(c))a+=c;else{var d=this.peek();if("e"==c&&this.isExpOperator(d))a+=c;else if(this.isExpOperator(c)&&d&&this.isNumber(d)&&"e"==a.charAt(a.length-1))a+=c;else if(!this.isExpOperator(c)||d&&this.isNumber(d)||"e"!=a.charAt(a.length-1))break;else this.throwError("Invalid exponent")}this.index++}this.tokens.push({index:b,text:a,constant:!0,value:Number(a)})},readIdent:function(){for(var a=
this.index;this.index<this.text.length;){var b=this.text.charAt(this.index);if(!this.isIdent(b)&&!this.isNumber(b))break;this.index++}this.tokens.push({index:a,text:this.text.slice(a,this.index),identifier:!0})},readString:function(a){var b=this.index;this.index++;for(var c="",d=a,e=!1;this.index<this.text.length;){var f=this.text.charAt(this.index),d=d+f;if(e)"u"===f?(e=this.text.substring(this.index+1,this.index+5),e.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+e+"]"),this.index+=
4,c+=String.fromCharCode(parseInt(e,16))):c+=Rd[f]||f,e=!1;else if("\\"===f)e=!0;else{if(f===a){this.index++;this.tokens.push({index:b,text:d,constant:!0,value:c});return}c+=f}this.index++}this.throwError("Unterminated quote",b)}};var P=function(a,b){this.lexer=a;this.options=b};P.Program="Program";P.ExpressionStatement="ExpressionStatement";P.AssignmentExpression="AssignmentExpression";P.ConditionalExpression="ConditionalExpression";P.LogicalExpression="LogicalExpression";P.BinaryExpression="BinaryExpression";
P.UnaryExpression="UnaryExpression";P.CallExpression="CallExpression";P.MemberExpression="MemberExpression";P.Identifier="Identifier";P.Literal="Literal";P.ArrayExpression="ArrayExpression";P.Property="Property";P.ObjectExpression="ObjectExpression";P.ThisExpression="ThisExpression";P.NGValueParameter="NGValueParameter";P.prototype={ast:function(a){this.text=a;this.tokens=this.lexer.lex(a);a=this.program();0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]);return a},
program:function(){for(var a=[];;)if(0<this.tokens.length&&!this.peek("}",")",";","]")&&a.push(this.expressionStatement()),!this.expect(";"))return{type:P.Program,body:a}},expressionStatement:function(){return{type:P.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var a=this.expression();this.expect("|");)a=this.filter(a);return a},expression:function(){return this.assignment()},assignment:function(){var a=this.ternary();this.expect("=")&&(a={type:P.AssignmentExpression,
left:a,right:this.assignment(),operator:"="});return a},ternary:function(){var a=this.logicalOR(),b,c;return this.expect("?")&&(b=this.expression(),this.consume(":"))?(c=this.expression(),{type:P.ConditionalExpression,test:a,alternate:b,consequent:c}):a},logicalOR:function(){for(var a=this.logicalAND();this.expect("||");)a={type:P.LogicalExpression,operator:"||",left:a,right:this.logicalAND()};return a},logicalAND:function(){for(var a=this.equality();this.expect("&&");)a={type:P.LogicalExpression,
operator:"&&",left:a,right:this.equality()};return a},equality:function(){for(var a=this.relational(),b;b=this.expect("==","!=","===","!==");)a={type:P.BinaryExpression,operator:b.text,left:a,right:this.relational()};return a},relational:function(){for(var a=this.additive(),b;b=this.expect("<",">","<=",">=");)a={type:P.BinaryExpression,operator:b.text,left:a,right:this.additive()};return a},additive:function(){for(var a=this.multiplicative(),b;b=this.expect("+","-");)a={type:P.BinaryExpression,operator:b.text,
left:a,right:this.multiplicative()};return a},multiplicative:function(){for(var a=this.unary(),b;b=this.expect("*","/","%");)a={type:P.BinaryExpression,operator:b.text,left:a,right:this.unary()};return a},unary:function(){var a;return(a=this.expect("+","-","!"))?{type:P.UnaryExpression,operator:a.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var a;this.expect("(")?(a=this.filterChain(),this.consume(")")):this.expect("[")?a=this.arrayDeclaration():this.expect("{")?a=this.object():
this.constants.hasOwnProperty(this.peek().text)?a=la(this.constants[this.consume().text]):this.peek().identifier?a=this.identifier():this.peek().constant?a=this.constant():this.throwError("not a primary expression",this.peek());for(var b;b=this.expect("(","[",".");)"("===b.text?(a={type:P.CallExpression,callee:a,arguments:this.parseArguments()},this.consume(")")):"["===b.text?(a={type:P.MemberExpression,object:a,property:this.expression(),computed:!0},this.consume("]")):"."===b.text?a={type:P.MemberExpression,
object:a,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return a},filter:function(a){a=[a];for(var b={type:P.CallExpression,callee:this.identifier(),arguments:a,filter:!0};this.expect(":");)a.push(this.expression());return b},parseArguments:function(){var a=[];if(")"!==this.peekToken().text){do a.push(this.expression());while(this.expect(","))}return a},identifier:function(){var a=this.consume();a.identifier||this.throwError("is not a valid identifier",a);return{type:P.Identifier,
name:a.text}},constant:function(){return{type:P.Literal,value:this.consume().value}},arrayDeclaration:function(){var a=[];if("]"!==this.peekToken().text){do{if(this.peek("]"))break;a.push(this.expression())}while(this.expect(","))}this.consume("]");return{type:P.ArrayExpression,elements:a}},object:function(){var a=[],b;if("}"!==this.peekToken().text){do{if(this.peek("}"))break;b={type:P.Property,kind:"init"};this.peek().constant?b.key=this.constant():this.peek().identifier?b.key=this.identifier():
this.throwError("invalid key",this.peek());this.consume(":");b.value=this.expression();a.push(b)}while(this.expect(","))}this.consume("}");return{type:P.ObjectExpression,properties:a}},throwError:function(a,b){throw zb("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",b.text,a,b.index+1,this.text,this.text.substring(b.index));},consume:function(a){if(0===this.tokens.length)throw zb("ueoe","Unexpected end of expression: {0}",this.text);var b=this.expect(a);
b||this.throwError("is unexpected, expecting ["+a+"]",this.peek());return b},peekToken:function(){if(0===this.tokens.length)throw zb("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(a,b,c,d){return this.peekAhead(0,a,b,c,d)},peekAhead:function(a,b,c,d,e){if(this.tokens.length>a){a=this.tokens[a];var f=a.text;if(f===b||f===c||f===d||f===e||!(b||c||d||e))return a}return!1},expect:function(a,b,c,d){return(a=this.peek(a,b,c,d))?(this.tokens.shift(),a):!1},constants:{"true":{type:P.Literal,
value:!0},"false":{type:P.Literal,value:!1},"null":{type:P.Literal,value:null},undefined:{type:P.Literal,value:c},"this":{type:P.ThisExpression}}};Ie.prototype={compile:function(a,b){var d=this,e=this.astBuilder.ast(a);this.state={nextId:0,filters:{},expensiveChecks:b,fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]};Na(e,d.$filter);var g="",h;this.stage="assign";if(h=$d(e))this.state.computing="assign",g=this.nextId(),this.recurse(h,g),g="fn.assign="+this.generateFunction("assign",
"s,v,l");h=Zd(e.body);d.stage="inputs";f(h,function(a,b){var c="fn"+b;d.state[c]={vars:[],body:[],own:{}};d.state.computing=c;var e=d.nextId();d.recurse(a,e);d.return_(e);d.state.inputs.push(c);a.watchId=b});this.state.computing="fn";this.stage="main";this.recurse(e);g='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+g+this.watchFns()+"return fn;";g=(new Function("$filter","ensureSafeMemberName","ensureSafeObject","ensureSafeFunction","ifDefined",
"plus","text",g))(this.$filter,ac,Ib,Xd,Ge,Yd,a);this.state=this.stage=c;g.literal=bc(e);g.constant=e.constant;return g},USE:"use",STRICT:"strict",watchFns:function(){var a=[],b=this.state.inputs,c=this;f(b,function(b){a.push("var "+b+"="+c.generateFunction(b,"s"))});b.length&&a.push("fn.inputs=["+b.join(",")+"];");return a.join("")},generateFunction:function(a,b){return"function("+b+"){"+this.varsPrefix(a)+this.body(a)+"};"},filterPrefix:function(){var a=[],b=this;f(this.state.filters,function(c,
d){a.push(c+"=$filter("+b.escape(d)+")")});return a.length?"var "+a.join(",")+";":""},varsPrefix:function(a){return this.state[a].vars.length?"var "+this.state[a].vars.join(",")+";":""},body:function(a){return this.state[a].body.join("")},recurse:function(a,b,d,e,g,h){var k,m,y=this,F,n;e=e||A;if(!h&&s(a.watchId))b=b||this.nextId(),this.if_("i",this.lazyAssign(b,this.computedMember("i",a.watchId)),this.lazyRecurse(a,b,d,e,g,!0));else switch(a.type){case P.Program:f(a.body,function(b,d){y.recurse(b.expression,
c,c,function(a){m=a});d!==a.body.length-1?y.current().body.push(m,";"):y.return_(m)});break;case P.Literal:n=this.escape(a.value);this.assign(b,n);e(n);break;case P.UnaryExpression:this.recurse(a.argument,c,c,function(a){m=a});n=a.operator+"("+this.ifDefined(m,0)+")";this.assign(b,n);e(n);break;case P.BinaryExpression:this.recurse(a.left,c,c,function(a){k=a});this.recurse(a.right,c,c,function(a){m=a});n="+"===a.operator?this.plus(k,m):"-"===a.operator?this.ifDefined(k,0)+a.operator+this.ifDefined(m,
0):"("+k+")"+a.operator+"("+m+")";this.assign(b,n);e(n);break;case P.LogicalExpression:b=b||this.nextId();y.recurse(a.left,b);y.if_("&&"===a.operator?b:y.not(b),y.lazyRecurse(a.right,b));e(b);break;case P.ConditionalExpression:b=b||this.nextId();y.recurse(a.test,b);y.if_(b,y.lazyRecurse(a.alternate,b),y.lazyRecurse(a.consequent,b));e(b);break;case P.Identifier:b=b||this.nextId();d&&(d.context="inputs"===y.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",a.name)+"?l:s"),d.computed=!1,
d.name=a.name);ac(a.name);y.if_("inputs"===y.stage||y.not(y.getHasOwnProperty("l",a.name)),function(){y.if_("inputs"===y.stage||"s",function(){g&&1!==g&&y.if_(y.not(y.nonComputedMember("s",a.name)),y.lazyAssign(y.nonComputedMember("s",a.name),"{}"));y.assign(b,y.nonComputedMember("s",a.name))})},b&&y.lazyAssign(b,y.nonComputedMember("l",a.name)));(y.state.expensiveChecks||pa(a.name))&&y.addEnsureSafeObject(b);e(b);break;case P.MemberExpression:k=d&&(d.context=this.nextId())||this.nextId();b=b||this.nextId();
y.recurse(a.object,k,c,function(){y.if_(y.notNull(k),function(){if(a.computed)m=y.nextId(),y.recurse(a.property,m),y.addEnsureSafeMemberName(m),g&&1!==g&&y.if_(y.not(y.computedMember(k,m)),y.lazyAssign(y.computedMember(k,m),"{}")),n=y.ensureSafeObject(y.computedMember(k,m)),y.assign(b,n),d&&(d.computed=!0,d.name=m);else{ac(a.property.name);g&&1!==g&&y.if_(y.not(y.nonComputedMember(k,a.property.name)),y.lazyAssign(y.nonComputedMember(k,a.property.name),"{}"));n=y.nonComputedMember(k,a.property.name);
if(y.state.expensiveChecks||pa(a.property.name))n=y.ensureSafeObject(n);y.assign(b,n);d&&(d.computed=!1,d.name=a.property.name)}},function(){y.assign(b,"undefined")});e(b)},!!g);break;case P.CallExpression:b=b||this.nextId();a.filter?(m=y.filter(a.callee.name),F=[],f(a.arguments,function(a){var b=y.nextId();y.recurse(a,b);F.push(b)}),n=m+"("+F.join(",")+")",y.assign(b,n),e(b)):(m=y.nextId(),k={},F=[],y.recurse(a.callee,m,k,function(){y.if_(y.notNull(m),function(){y.addEnsureSafeFunction(m);f(a.arguments,
function(a){y.recurse(a,y.nextId(),c,function(a){F.push(y.ensureSafeObject(a))})});k.name?(y.state.expensiveChecks||y.addEnsureSafeObject(k.context),n=y.member(k.context,k.name,k.computed)+"("+F.join(",")+")"):n=m+"("+F.join(",")+")";n=y.ensureSafeObject(n);y.assign(b,n)},function(){y.assign(b,"undefined")});e(b)}));break;case P.AssignmentExpression:m=this.nextId();k={};if(!He(a.left))throw zb("lval","Trying to assing a value to a non l-value");this.recurse(a.left,c,k,function(){y.if_(y.notNull(k.context),
function(){y.recurse(a.right,m);y.addEnsureSafeObject(y.member(k.context,k.name,k.computed));n=y.member(k.context,k.name,k.computed)+a.operator+m;y.assign(b,n);e(b||n)})},1);break;case P.ArrayExpression:F=[];f(a.elements,function(a){y.recurse(a,y.nextId(),c,function(a){F.push(a)})});n="["+F.join(",")+"]";this.assign(b,n);e(n);break;case P.ObjectExpression:F=[];f(a.properties,function(a){y.recurse(a.value,y.nextId(),c,function(b){F.push(y.escape(a.key.type===P.Identifier?a.key.name:""+a.key.value)+
":"+b)})});n="{"+F.join(",")+"}";this.assign(b,n);e(n);break;case P.ThisExpression:this.assign(b,"s");e("s");break;case P.NGValueParameter:this.assign(b,"v"),e("v")}},getHasOwnProperty:function(a,b){var c=a+"."+b,d=this.current().own;d.hasOwnProperty(c)||(d[c]=this.nextId(!1,a+"&&("+this.escape(b)+" in "+a+")"));return d[c]},assign:function(a,b){if(a)return this.current().body.push(a,"=",b,";"),a},filter:function(a){this.state.filters.hasOwnProperty(a)||(this.state.filters[a]=this.nextId(!0));return this.state.filters[a]},
ifDefined:function(a,b){return"ifDefined("+a+","+this.escape(b)+")"},plus:function(a,b){return"plus("+a+","+b+")"},return_:function(a){this.current().body.push("return ",a,";")},if_:function(a,b,c){if(!0===a)b();else{var d=this.current().body;d.push("if(",a,"){");b();d.push("}");c&&(d.push("else{"),c(),d.push("}"))}},not:function(a){return"!("+a+")"},notNull:function(a){return a+"!=null"},nonComputedMember:function(a,b){return a+"."+b},computedMember:function(a,b){return a+"["+b+"]"},member:function(a,
b,c){return c?this.computedMember(a,b):this.nonComputedMember(a,b)},addEnsureSafeObject:function(a){this.current().body.push(this.ensureSafeObject(a),";")},addEnsureSafeMemberName:function(a){this.current().body.push(this.ensureSafeMemberName(a),";")},addEnsureSafeFunction:function(a){this.current().body.push(this.ensureSafeFunction(a),";")},ensureSafeObject:function(a){return"ensureSafeObject("+a+",text)"},ensureSafeMemberName:function(a){return"ensureSafeMemberName("+a+",text)"},ensureSafeFunction:function(a){return"ensureSafeFunction("+
a+",text)"},lazyRecurse:function(a,b,c,d,e,f){var g=this;return function(){g.recurse(a,b,c,d,e,f)}},lazyAssign:function(a,b){var c=this;return function(){c.assign(a,b)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)},escape:function(a){if(J(a))return"'"+a.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(C(a))return a.toString();if(!0===a)return"true";if(!1===a)return"false";if(null===a)return"null";if("undefined"===
typeof a)return"undefined";throw zb("esc","IMPOSSIBLE");},nextId:function(a,b){var c="v"+this.state.nextId++;a||this.current().vars.push(c+(b?"="+b:""));return c},current:function(){return this.state[this.state.computing]}};Je.prototype={compile:function(a,b){var c=this,d=this.astBuilder.ast(a);this.expression=a;this.expensiveChecks=b;Na(d,c.$filter);var e,g;if(e=$d(d))g=this.recurse(e);e=Zd(d.body);var h;e&&(h=[],f(e,function(a,b){var d=c.recurse(a);a.input=d;h.push(d);a.watchId=b}));var k=[];f(d.body,
function(a){k.push(c.recurse(a.expression))});e=0===d.body.length?function(){}:1===d.body.length?k[0]:function(a,b){var c;f(k,function(d){c=d(a,b)});return c};g&&(e.assign=function(a,b,c){return g(a,c,b)});h&&(e.inputs=h);e.literal=bc(d);e.constant=d.constant;return e},recurse:function(a,b,d){var e,g,h=this,k;if(a.input)return this.inputs(a.input,a.watchId);switch(a.type){case P.Literal:return this.value(a.value,b);case P.UnaryExpression:return g=this.recurse(a.argument),this["unary"+a.operator](g,
b);case P.BinaryExpression:return e=this.recurse(a.left),g=this.recurse(a.right),this["binary"+a.operator](e,g,b);case P.LogicalExpression:return e=this.recurse(a.left),g=this.recurse(a.right),this["binary"+a.operator](e,g,b);case P.ConditionalExpression:return this["ternary?:"](this.recurse(a.test),this.recurse(a.alternate),this.recurse(a.consequent),b);case P.Identifier:return ac(a.name,h.expression),h.identifier(a.name,h.expensiveChecks||pa(a.name),b,d,h.expression);case P.MemberExpression:return e=
this.recurse(a.object,!1,!!d),a.computed||(ac(a.property.name,h.expression),g=a.property.name),a.computed&&(g=this.recurse(a.property)),a.computed?this.computedMember(e,g,b,d,h.expression):this.nonComputedMember(e,g,h.expensiveChecks,b,d,h.expression);case P.CallExpression:return k=[],f(a.arguments,function(a){k.push(h.recurse(a))}),a.filter&&(g=this.$filter(a.callee.name)),a.filter||(g=this.recurse(a.callee,!0)),a.filter?function(a,d,e,f){for(var h=[],m=0;m<k.length;++m)h.push(k[m](a,d,e,f));a=g.apply(c,
h,f);return b?{context:c,name:c,value:a}:a}:function(a,c,d,e){var f=g(a,c,d,e),m;if(null!=f.value){Ib(f.context,h.expression);Xd(f.value,h.expression);m=[];for(var y=0;y<k.length;++y)m.push(Ib(k[y](a,c,d,e),h.expression));m=Ib(f.value.apply(f.context,m),h.expression)}return b?{value:m}:m};case P.AssignmentExpression:return e=this.recurse(a.left,!0,1),g=this.recurse(a.right),function(a,c,d,f){var k=e(a,c,d,f);a=g(a,c,d,f);Ib(k.value,h.expression);k.context[k.name]=a;return b?{value:a}:a};case P.ArrayExpression:return k=
[],f(a.elements,function(a){k.push(h.recurse(a))}),function(a,c,d,e){for(var f=[],g=0;g<k.length;++g)f.push(k[g](a,c,d,e));return b?{value:f}:f};case P.ObjectExpression:return k=[],f(a.properties,function(a){k.push({key:a.key.type===P.Identifier?a.key.name:""+a.key.value,value:h.recurse(a.value)})}),function(a,c,d,e){for(var f={},g=0;g<k.length;++g)f[k[g].key]=k[g].value(a,c,d,e);return b?{value:f}:f};case P.ThisExpression:return function(a){return b?{value:a}:a};case P.NGValueParameter:return function(a,
c,d,e){return b?{value:d}:d}}},"unary+":function(a,b){return function(c,d,e,f){c=a(c,d,e,f);c=s(c)?+c:0;return b?{value:c}:c}},"unary-":function(a,b){return function(c,d,e,f){c=a(c,d,e,f);c=s(c)?-c:0;return b?{value:c}:c}},"unary!":function(a,b){return function(c,d,e,f){c=!a(c,d,e,f);return b?{value:c}:c}},"binary+":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g);d=b(d,e,f,g);h=Yd(h,d);return c?{value:h}:h}},"binary-":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g);d=b(d,e,f,g);
h=(s(h)?h:0)-(s(d)?d:0);return c?{value:h}:h}},"binary*":function(a,b,c){return function(d,e,f,g){d=a(d,e,f,g)*b(d,e,f,g);return c?{value:d}:d}},"binary/":function(a,b,c){return function(d,e,f,g){d=a(d,e,f,g)/b(d,e,f,g);return c?{value:d}:d}},"binary%":function(a,b,c){return function(d,e,f,g){d=a(d,e,f,g)%b(d,e,f,g);return c?{value:d}:d}},"binary===":function(a,b,c){return function(d,e,f,g){d=a(d,e,f,g)===b(d,e,f,g);return c?{value:d}:d}},"binary!==":function(a,b,c){return function(d,e,f,g){d=a(d,
e,f,g)!==b(d,e,f,g);return c?{value:d}:d}},"binary==":function(a,b,c){return function(d,e,f,g){d=a(d,e,f,g)==b(d,e,f,g);return c?{value:d}:d}},"binary!=":function(a,b,c){return function(d,e,f,g){d=a(d,e,f,g)!=b(d,e,f,g);return c?{value:d}:d}},"binary<":function(a,b,c){return function(d,e,f,g){d=a(d,e,f,g)<b(d,e,f,g);return c?{value:d}:d}},"binary>":function(a,b,c){return function(d,e,f,g){d=a(d,e,f,g)>b(d,e,f,g);return c?{value:d}:d}},"binary<=":function(a,b,c){return function(d,e,f,g){d=a(d,e,f,
g)<=b(d,e,f,g);return c?{value:d}:d}},"binary>=":function(a,b,c){return function(d,e,f,g){d=a(d,e,f,g)>=b(d,e,f,g);return c?{value:d}:d}},"binary&&":function(a,b,c){return function(d,e,f,g){d=a(d,e,f,g)&&b(d,e,f,g);return c?{value:d}:d}},"binary||":function(a,b,c){return function(d,e,f,g){d=a(d,e,f,g)||b(d,e,f,g);return c?{value:d}:d}},"ternary?:":function(a,b,c,d){return function(e,f,g,h){e=a(e,f,g,h)?b(e,f,g,h):c(e,f,g,h);return d?{value:e}:e}},value:function(a,b){return function(){return b?{context:c,
name:c,value:a}:a}},identifier:function(a,b,d,e,f){return function(g,h,k,m){g=h&&a in h?h:g;e&&1!==e&&g&&!g[a]&&(g[a]={});h=g?g[a]:c;b&&Ib(h,f);return d?{context:g,name:a,value:h}:h}},computedMember:function(a,b,c,d,e){return function(f,g,h,k){var m=a(f,g,h,k),y,n;null!=m&&(y=b(f,g,h,k),ac(y,e),d&&1!==d&&m&&!m[y]&&(m[y]={}),n=m[y],Ib(n,e));return c?{context:m,name:y,value:n}:n}},nonComputedMember:function(a,b,d,e,f,g){return function(h,k,m,y){h=a(h,k,m,y);f&&1!==f&&h&&!h[b]&&(h[b]={});k=null!=h?h[b]:
c;(d||pa(b))&&Ib(k,g);return e?{context:h,name:b,value:k}:k}},inputs:function(a,b){return function(c,d,e,f){return f?f[b]:a(c,d,e)}}};var Fb=function(a,b,c){this.lexer=a;this.$filter=b;this.options=c;this.ast=new P(this.lexer);this.astCompiler=c.csp?new Je(this.ast,b):new Ie(this.ast,b)};Fb.prototype={constructor:Fb,parse:function(a){return this.astCompiler.compile(a,this.options.expensiveChecks)}};fa();fa();var te=Object.prototype.valueOf,Xb=d("$sce"),Ob={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",
JS:"js"},bb=d("$compile"),fb=b.createElement("a"),Hd=dc(a.location.href);Pb.$inject=["$document"];ee.$inject=["$provide"];Hc.$inject=["$locale"];we.$inject=["$locale"];var Jd=".",qd={yyyy:gb("FullYear",4),yy:gb("FullYear",2,0,!0),y:gb("FullYear",1),MMMM:pd("Month"),MMM:pd("Month",!0),MM:gb("Month",2,1),M:gb("Month",1,1),dd:gb("Date",2),d:gb("Date",1),HH:gb("Hours",2),H:gb("Hours",1),hh:gb("Hours",2,-12),h:gb("Hours",1,-12),mm:gb("Minutes",2),m:gb("Minutes",1),ss:gb("Seconds",2),s:gb("Seconds",1),
sss:gb("Milliseconds",3),EEEE:pd("Day"),EEE:pd("Day",!0),a:function(a,b){return 12>a.getHours()?b.AMPMS[0]:b.AMPMS[1]},Z:function(a,b,c){a=-1*c;return a=(0<=a?"+":"")+($c(Math[0<a?"floor":"ceil"](a/60),2)+$c(Math.abs(a%60),2))},ww:ze(2),w:ze(1),G:Kd,GG:Kd,GGG:Kd,GGGG:function(a,b){return 0>=a.getFullYear()?b.ERANAMES[0]:b.ERANAMES[1]}},cf=/((?:[^yMdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,Xf=/^\-?\d+$/;Id.$inject=["$locale"];var Vf=x(sa),Wf=x(Uc);od.$inject=["$parse"];
var of=x({restrict:"E",compile:function(a,b){if(!b.href&&!b.xlinkHref)return function(a,b){if("a"===b[0].nodeName.toLowerCase()){var c="[object SVGAnimatedString]"===Wb.call(b.prop("href"))?"xlink:href":"href";b.on("click",function(a){b.attr(c)||a.preventDefault()})}}}}),Bd={};f(Dd,function(a,b){function c(a,e,f){a.$watch(f[d],function(a){f.$set(b,!!a)})}if("multiple"!=a){var d=Lb("ng-"+b),e=c;"checked"===a&&(e=function(a,b,e){e.ngModel!==e[d]&&c(a,b,e)});Bd[d]=function(){return{restrict:"A",priority:100,
link:e}}}});f($e,function(a,b){Bd[b]=function(){return{priority:100,link:function(a,c,d){if("ngPattern"===b&&"/"==d.ngPattern.charAt(0)&&(c=d.ngPattern.match(ef))){d.$set("ngPattern",new RegExp(c[1],c[2]));return}a.$watch(d[b],function(a){d.$set(b,a)})}}}});f(["src","srcset","href"],function(a){var b=Lb("ng-"+a);Bd[b]=function(){return{priority:99,link:function(c,d,e){var f=a,g=a;"href"===a&&"[object SVGAnimatedString]"===Wb.call(d.prop("href"))&&(g="xlinkHref",e.$attr[g]="xlink:href",f=null);e.$observe(b,
function(b){b?(e.$set(g,b),Sb&&f&&d.prop(f,e[g])):"href"===a&&e.$set(g,null)})}}}});var Ld={$addControl:A,$$renameControl:function(a,b){a.$name=b},$removeControl:A,$setValidity:A,$setDirty:A,$setPristine:A,$setSubmitted:A};Ae.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var hf=function(a){return["$timeout",function(b){return{name:"form",restrict:a?"EAC":"E",controller:Ae,compile:function(d,e){d.addClass(jc).addClass(rd);var f=e.name?"name":a&&e.ngForm?"ngForm":!1;return{pre:function(a,
d,e,g){if(!("action"in e)){var h=function(b){a.$apply(function(){g.$commitViewValue();g.$setSubmitted()});b.preventDefault()};d[0].addEventListener("submit",h,!1);d.on("$destroy",function(){b(function(){d[0].removeEventListener("submit",h,!1)},0,!1)})}var k=g.$$parentForm;f&&(wd(a,g.$name,g,g.$name),e.$observe(f,function(b){g.$name!==b&&(wd(a,g.$name,c,g.$name),k.$$renameControl(g,b),wd(a,g.$name,g,g.$name))}));d.on("$destroy",function(){k.$removeControl(g);f&&wd(a,e[f],c,g.$name);m(g,Ld)})}}}}}]},
pf=hf(),xf=hf(!0),Yf=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/,Zf=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,$f=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,ag=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,Sd=/^(\d{4})-(\d{2})-(\d{2})$/,jf=/^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Td=/^(\d{4})-W(\d\d)$/,De=/^(\d{4})-(\d\d)$/,kf=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,
lf={text:function(a,b,c,d,e,f){Ic(a,b,c,d,e,f);Nd(d)},date:bd("date",Sd,ta(Sd,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":bd("datetimelocal",jf,ta(jf,"yyyy MM dd HH mm ss sss".split(" ")),"yyyy-MM-ddTHH:mm:ss.sss"),time:bd("time",kf,ta(kf,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:bd("week",Td,function(a,b){if(L(a))return a;if(J(a)){Td.lastIndex=0;var c=Td.exec(a);if(c){var d=+c[1],e=+c[2],f=c=0,g=0,h=0,k=ye(d),e=7*(e-1);b&&(c=b.getHours(),f=b.getMinutes(),g=b.getSeconds(),h=b.getMilliseconds());
return new Date(d,0,k.getDate()+e,c,f,g,h)}}return NaN},"yyyy-Www"),month:bd("month",De,ta(De,["yyyy","MM"]),"yyyy-MM"),number:function(a,b,d,e,f,g){kc(a,b,d,e);Ic(a,b,d,e,f,g);e.$$parserName="number";e.$parsers.push(function(a){return e.$isEmpty(a)?null:ag.test(a)?parseFloat(a):c});e.$formatters.push(function(a){if(!e.$isEmpty(a)){if(!C(a))throw Od("numfmt","Expected `{0}` to be a number",a);a=a.toString()}return a});if(s(d.min)||d.ngMin){var h;e.$validators.min=function(a){return e.$isEmpty(a)||
B(h)||a>=h};d.$observe("min",function(a){s(a)&&!C(a)&&(a=parseFloat(a,10));h=C(a)&&!isNaN(a)?a:c;e.$validate()})}if(s(d.max)||d.ngMax){var k;e.$validators.max=function(a){return e.$isEmpty(a)||B(k)||a<=k};d.$observe("max",function(a){s(a)&&!C(a)&&(a=parseFloat(a,10));k=C(a)&&!isNaN(a)?a:c;e.$validate()})}},url:function(a,b,c,d,e,f){Ic(a,b,c,d,e,f);Nd(d);d.$$parserName="url";d.$validators.url=function(a,b){var c=a||b;return d.$isEmpty(c)||Zf.test(c)}},email:function(a,b,c,d,e,f){Ic(a,b,c,d,e,f);Nd(d);
d.$$parserName="email";d.$validators.email=function(a,b){var c=a||b;return d.$isEmpty(c)||$f.test(c)}},radio:function(a,b,c,d){B(c.name)&&b.attr("name",++id);b.on("click",function(a){b[0].checked&&d.$setViewValue(c.value,a&&a.type)});d.$render=function(){b[0].checked=c.value==d.$viewValue};c.$observe("value",d.$render)},checkbox:function(a,b,c,d,e,f,g,h){var k=Be(h,a,"ngTrueValue",c.ngTrueValue,!0),m=Be(h,a,"ngFalseValue",c.ngFalseValue,!1);b.on("click",function(a){d.$setViewValue(b[0].checked,a&&
a.type)});d.$render=function(){b[0].checked=d.$viewValue};d.$isEmpty=function(a){return!1===a};d.$formatters.push(function(a){return R(a,k)});d.$parsers.push(function(a){return a?k:m})},hidden:A,button:A,submit:A,reset:A,file:A},Te=["$browser","$sniffer","$filter","$parse",function(a,b,c,d){return{restrict:"E",require:["?ngModel"],link:{pre:function(e,f,g,h){h[0]&&(lf[sa(g.type)]||lf.text)(e,f,g,h[0],b,a,c,d)}}}}],bg=/^(true|false|\d+)$/,je=function(){return{restrict:"A",priority:100,compile:function(a,
b){return bg.test(b.ngValue)?function(a,b,c){c.$set("value",a.$eval(c.ngValue))}:function(a,b,c){a.$watch(c.ngValue,function(a){c.$set("value",a)})}}}},Ve=["$compile",function(a){return{restrict:"AC",compile:function(b){a.$$addBindingClass(b);return function(b,d,e){a.$$addBindingInfo(d,e.ngBind);d=d[0];b.$watch(e.ngBind,function(a){d.textContent=a===c?"":a})}}}}],sf=["$interpolate","$compile",function(a,b){return{compile:function(d){b.$$addBindingClass(d);return function(d,e,f){d=a(e.attr(f.$attr.ngBindTemplate));
b.$$addBindingInfo(e,d.expressions);e=e[0];f.$observe("ngBindTemplate",function(a){e.textContent=a===c?"":a})}}}}],Wc=["$sce","$parse","$compile",function(a,b,c){return{restrict:"A",compile:function(d,e){var f=b(e.ngBindHtml),g=b(e.ngBindHtml,function(a){return(a||"").toString()});c.$$addBindingClass(d);return function(b,d,e){c.$$addBindingInfo(d,e.ngBindHtml);b.$watch(g,function(){d.html(a.getTrustedHtml(f(b))||"")})}}}}],Xe=x({restrict:"A",require:"ngModel",link:function(a,b,c,d){d.$viewChangeListeners.push(function(){a.$eval(c.ngChange)})}}),
tf=Pd("",!0),We=Pd("Odd",0),uf=Pd("Even",1),vf=tc({compile:function(a,b){b.$set("ngCloak",c);a.removeClass("ng-cloak")}}),wf=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],Ye={},cg={blur:!0,focus:!0};f("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(a){var b=Lb("ng-"+a);Ye[b]=["$parse","$rootScope",function(c,d){return{restrict:"A",compile:function(e,f){var g=
c(f[b],null,!0);return function(b,c){c.on(a,function(c){var e=function(){g(b,{$event:c})};cg[a]&&d.$$phase?b.$evalAsync(e):b.$apply(e)})}}}}]});var ie=["$animate",function(a){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(c,d,e,f,g){var h,k,m;c.$watch(e.ngIf,function(c){c?k||g(function(c,f){k=f;c[c.length++]=b.createComment(" end ngIf: "+e.ngIf+" ");h={clone:c};a.enter(c,d.parent(),d)}):(m&&(m.remove(),m=null),k&&(k.$destroy(),k=null),h&&(m=
Y(h.clone),a.leave(m).then(function(){m=null}),h=null))})}}}],zf=["$templateRequest","$anchorScroll","$animate","$sce",function(a,b,c,d){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:yb.noop,compile:function(e,f){var g=f.ngInclude||f.src,h=f.onload||"",k=f.autoscroll;return function(e,f,m,y,n){var F=0,q,p,M,w=function(){p&&(p.remove(),p=null);q&&(q.$destroy(),q=null);M&&(c.leave(M).then(function(){p=null}),p=M,M=null)};e.$watch(d.parseAsResourceUrl(g),function(d){var g=
function(){!s(k)||k&&!e.$eval(k)||b()},m=++F;d?(a(d,!0).then(function(a){if(m===F){var b=e.$new();y.template=a;a=n(b,function(a){w();c.enter(a,null,f).then(g)});q=b;M=a;q.$emit("$includeContentLoaded",d);e.$eval(h)}},function(){m===F&&(w(),e.$emit("$includeContentError",d))}),e.$emit("$includeContentRequested",d)):(w(),y.template=null)})}}}}],Nf=["$compile",function(a){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(c,d,e,f){/SVG/.test(d[0].toString())?(d.empty(),a(Va(f.template,
b).childNodes)(c,function(a){d.append(a)},{futureParentElement:d})):(d.html(f.template),a(d.contents())(c))}}}],Af=tc({priority:450,compile:function(){return{pre:function(a,b,c){a.$eval(c.ngInit)}}}}),ka=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(a,b,d,e){var g=b.attr(d.$attr.ngList)||", ",h="false"!==d.ngTrim,k=h?ya(g):g;e.$parsers.push(function(a){if(!B(a)){var b=[];a&&f(a.split(k),function(a){a&&b.push(h?ya(a):a)});return b}});e.$formatters.push(function(a){return ia(a)?
a.join(g):c});e.$isEmpty=function(a){return!a||!a.length}}}},rd="ng-valid",Jc="ng-invalid",jc="ng-pristine",ad="ng-dirty",df="ng-pending",Od=new d("ngModel"),dg=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function(a,b,d,e,g,h,k,m,y,n){this.$modelValue=this.$viewValue=Number.NaN;this.$$rawModelValue=c;this.$validators={};this.$asyncValidators={};this.$parsers=[];this.$formatters=[];this.$viewChangeListeners=[];this.$untouched=!0;
this.$touched=!1;this.$pristine=!0;this.$dirty=!1;this.$valid=!0;this.$invalid=!1;this.$error={};this.$$success={};this.$pending=c;this.$name=n(d.name||"",!1)(a);var F=g(d.ngModel),q=F.assign,p=F,M=q,w=null,r,H=this;this.$$setOptions=function(a){if((H.$options=a)&&a.getterSetter){var b=g(d.ngModel+"()"),c=g(d.ngModel+"($$$p)");p=function(a){var c=F(a);N(c)&&(c=b(a));return c};M=function(a,b){N(F(a))?c(a,{$$$p:H.$modelValue}):q(a,H.$modelValue)}}else if(!F.assign)throw Od("nonassign","Expression '{0}' is non-assignable. Element: {1}",
d.ngModel,qa(e));};this.$render=A;this.$isEmpty=function(a){return B(a)||""===a||null===a||a!==a};var I=e.inheritedData("$formController")||Ld,u=0;Md({ctrl:this,$element:e,set:function(a,b){a[b]=!0},unset:function(a,b){delete a[b]},parentForm:I,$animate:h});this.$setPristine=function(){H.$dirty=!1;H.$pristine=!0;h.removeClass(e,ad);h.addClass(e,jc)};this.$setDirty=function(){H.$dirty=!0;H.$pristine=!1;h.removeClass(e,jc);h.addClass(e,ad);I.$setDirty()};this.$setUntouched=function(){H.$touched=!1;
H.$untouched=!0;h.setClass(e,"ng-untouched","ng-touched")};this.$setTouched=function(){H.$touched=!0;H.$untouched=!1;h.setClass(e,"ng-touched","ng-untouched")};this.$rollbackViewValue=function(){k.cancel(w);H.$viewValue=H.$$lastCommittedViewValue;H.$render()};this.$validate=function(){if(!C(H.$modelValue)||!isNaN(H.$modelValue)){var a=H.$$rawModelValue,b=H.$valid,d=H.$modelValue,e=H.$options&&H.$options.allowInvalid;H.$$runValidators(a,H.$$lastCommittedViewValue,function(f){e||b===f||(H.$modelValue=
f?a:c,H.$modelValue!==d&&H.$$writeModelToScope())})}};this.$$runValidators=function(a,b,d){function e(){var c=!0;f(H.$validators,function(d,e){var f=d(a,b);c=c&&f;h(e,f)});return c?!0:(f(H.$asyncValidators,function(a,b){h(b,null)}),!1)}function g(){var d=[],e=!0;f(H.$asyncValidators,function(f,g){var k=f(a,b);if(!k||!N(k.then))throw Od("$asyncValidators","Expected asynchronous validator to return a promise but got '{0}' instead.",k);h(g,c);d.push(k.then(function(){h(g,!0)},function(a){e=!1;h(g,!1)}))});
d.length?y.all(d).then(function(){k(e)},A):k(!0)}function h(a,b){m===u&&H.$setValidity(a,b)}function k(a){m===u&&d(a)}u++;var m=u;(function(){var a=H.$$parserName||"parse";if(r===c)h(a,null);else return r||(f(H.$validators,function(a,b){h(b,null)}),f(H.$asyncValidators,function(a,b){h(b,null)})),h(a,r),r;return!0})()?e()?g():k(!1):k(!1)};this.$commitViewValue=function(){var a=H.$viewValue;k.cancel(w);if(H.$$lastCommittedViewValue!==a||""===a&&H.$$hasNativeValidators)H.$$lastCommittedViewValue=a,H.$pristine&&
this.$setDirty(),this.$$parseAndValidate()};this.$$parseAndValidate=function(){var b=H.$$lastCommittedViewValue;if(r=B(b)?c:!0)for(var d=0;d<H.$parsers.length;d++)if(b=H.$parsers[d](b),B(b)){r=!1;break}C(H.$modelValue)&&isNaN(H.$modelValue)&&(H.$modelValue=p(a));var e=H.$modelValue,f=H.$options&&H.$options.allowInvalid;H.$$rawModelValue=b;f&&(H.$modelValue=b,H.$modelValue!==e&&H.$$writeModelToScope());H.$$runValidators(b,H.$$lastCommittedViewValue,function(a){f||(H.$modelValue=a?b:c,H.$modelValue!==
e&&H.$$writeModelToScope())})};this.$$writeModelToScope=function(){M(a,H.$modelValue);f(H.$viewChangeListeners,function(a){try{a()}catch(c){b(c)}})};this.$setViewValue=function(a,b){H.$viewValue=a;H.$options&&!H.$options.updateOnDefault||H.$$debounceViewValueCommit(b)};this.$$debounceViewValueCommit=function(b){var c=0,d=H.$options;d&&s(d.debounce)&&(d=d.debounce,C(d)?c=d:C(d[b])?c=d[b]:C(d["default"])&&(c=d["default"]));k.cancel(w);c?w=k(function(){H.$commitViewValue()},c):m.$$phase?H.$commitViewValue():
a.$apply(function(){H.$commitViewValue()})};a.$watch(function(){var b=p(a);if(b!==H.$modelValue&&(H.$modelValue===H.$modelValue||b===b)){H.$modelValue=H.$$rawModelValue=b;r=c;for(var d=H.$formatters,e=d.length,f=b;e--;)f=d[e](f);H.$viewValue!==f&&(H.$viewValue=H.$$lastCommittedViewValue=f,H.$render(),H.$$runValidators(b,f,A))}return b})}],Lf=["$rootScope",function(a){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:dg,priority:1,compile:function(b){b.addClass(jc).addClass("ng-untouched").addClass(rd);
return{pre:function(a,b,c,d){var e=d[0],f=d[1]||Ld;e.$$setOptions(d[2]&&d[2].$options);f.$addControl(e);c.$observe("name",function(a){e.$name!==a&&f.$$renameControl(e,a)});a.$on("$destroy",function(){f.$removeControl(e)})},post:function(b,c,d,e){var f=e[0];if(f.$options&&f.$options.updateOn)c.on(f.$options.updateOn,function(a){f.$$debounceViewValueCommit(a&&a.type)});c.on("blur",function(c){f.$touched||(a.$$phase?b.$evalAsync(f.$setTouched):b.$apply(f.$setTouched))})}}}}}],eg=/(\s+|^)default(\s+|$)/,
Mf=function(){return{restrict:"A",controller:["$scope","$attrs",function(a,b){var d=this;this.$options=la(a.$eval(b.ngModelOptions));this.$options.updateOn!==c?(this.$options.updateOnDefault=!1,this.$options.updateOn=ya(this.$options.updateOn.replace(eg,function(){d.$options.updateOnDefault=!0;return" "}))):this.$options.updateOnDefault=!0}]}},Bf=tc({terminal:!0,priority:1E3}),ob=d("ngOptions"),fg=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,
Jf=["$compile","$parse",function(a,c){function d(a,b,f){function g(a,b,c,d,e){this.selectValue=a;this.viewValue=b;this.label=c;this.group=d;this.disabled=e}var h=a.match(fg);if(!h)throw ob("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",a,qa(b));var k=h[5]||h[7],m=h[6];a=/ as /.test(h[0])&&h[1];var y=h[9];b=c(h[2]?h[1]:k);var n=a&&c(a)||b,F=y&&c(y),q=y?function(a,b){return F(f,b)}:function(a){return xb(a)},p=function(a,
b){return q(a,s(a,b))},M=c(h[2]||h[1]),w=c(h[3]||""),r=c(h[4]||""),H=c(h[8]),I={},s=m?function(a,b){I[m]=b;I[k]=a;return I}:function(a){I[k]=a;return I};return{trackBy:y,getTrackByValue:p,getWatchables:c(H,function(a){var b=[];a=a||[];Object.keys(a).forEach(function(c){if("$"!==c.charAt(0)){var d=s(a[c],c);c=q(a[c],d);b.push(c);if(h[2]||h[1])c=M(f,d),b.push(c);h[4]&&(d=r(f,d),b.push(d))}});return b}),getOptions:function(){var a=[],b={},c=H(f)||[],d;if(!m&&e(c))d=c;else{d=[];for(var h in c)c.hasOwnProperty(h)&&
"$"!==h.charAt(0)&&d.push(h)}h=d.length;for(var k=0;k<h;k++){var F=c===d?k:d[k],I=s(c[F],F),u=n(f,I),F=q(u,I),v=M(f,I),B=w(f,I),I=r(f,I),u=new g(F,u,v,B,I);a.push(u);b[F]=u}return{items:a,selectValueMap:b,getOptionFromViewValue:function(a){return b[p(a)]},getViewValueFromOption:function(a){return y?yb.copy(a.viewValue):a.viewValue}}}}}var g=b.createElement("option"),h=b.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","?ngModel"],link:function(b,c,e,k){function m(a,b){a.element=
b;b.disabled=a.disabled;a.value!==b.value&&(b.value=a.selectValue);a.label!==b.label&&(b.label=a.label,b.textContent=a.label)}function y(a,b,c,d){b&&sa(b.nodeName)===c?c=b:(c=d.cloneNode(!1),b?a.insertBefore(c,b):a.appendChild(c));return c}function F(a){for(var b;a;)b=a.nextSibling,Qa(a),a=b}function n(a){var b=w&&w[0],c=u&&u[0];if(b||c)for(;a&&(a===b||a===c);)a=a.nextSibling;return a}function q(){var a=v&&M.readValue();v=B.getOptions();var b={},d=c[0].firstChild;s&&c.prepend(w);d=n(d);v.items.forEach(function(a){var e,
f;a.group?(e=b[a.group],e||(e=y(c[0],d,"optgroup",h),d=e.nextSibling,e.label=a.group,e=b[a.group]={groupElement:e,currentOptionElement:e.firstChild}),f=y(e.groupElement,e.currentOptionElement,"option",g),m(a,f),e.currentOptionElement=f.nextSibling):(f=y(c[0],d,"option",g),m(a,f),d=f.nextSibling)});Object.keys(b).forEach(function(a){F(b[a].currentOptionElement)});F(d);p.$render();if(!p.$isEmpty(a)){var e=M.readValue();(B.trackBy?R(a,e):a===e)||(p.$setViewValue(e),p.$render())}}var p=k[1];if(p){var M=
k[0];k=e.multiple;for(var w,r=0,H=c.children(),I=H.length;r<I;r++)if(""===H[r].value){w=H.eq(r);break}var s=!!w,u=Z(g.cloneNode(!1));u.val("?");var v,B=d(e.ngOptions,c,b);k?(p.$isEmpty=function(a){return!a||0===a.length},M.writeValue=function(a){v.items.forEach(function(a){a.element.selected=!1});a&&a.forEach(function(a){(a=v.getOptionFromViewValue(a))&&!a.disabled&&(a.element.selected=!0)})},M.readValue=function(){var a=c.val()||[],b=[];f(a,function(a){a=v.selectValueMap[a];a.disabled||b.push(v.getViewValueFromOption(a))});
return b},B.trackBy&&b.$watchCollection(function(){if(ia(p.$viewValue))return p.$viewValue.map(function(a){return B.getTrackByValue(a)})},function(){p.$render()})):(M.writeValue=function(a){var b=v.getOptionFromViewValue(a);b&&!b.disabled?c[0].value!==b.selectValue&&(u.remove(),s||w.remove(),c[0].value=b.selectValue,b.element.selected=!0,b.element.setAttribute("selected","selected")):null===a||s?(u.remove(),s||c.prepend(w),c.val(""),w.prop("selected",!0),w.attr("selected",!0)):(s||w.remove(),c.prepend(u),
c.val("?"),u.prop("selected",!0),u.attr("selected",!0))},M.readValue=function(){var a=v.selectValueMap[c.val()];return a&&!a.disabled?(s||w.remove(),u.remove(),v.getViewValueFromOption(a)):null},B.trackBy&&b.$watch(function(){return B.getTrackByValue(p.$viewValue)},function(){p.$render()}));s?(w.remove(),a(w)(b),w.removeClass("ng-scope")):w=Z(g.cloneNode(!1));q();b.$watchCollection(B.getWatchables,q)}}}}],Cf=["$locale","$interpolate","$log",function(a,b,c){var d=/{}/g,e=/^when(Minus)?(.+)$/;return{link:function(g,
h,k){function m(a){h.text(a||"")}var y=k.count,F=k.$attr.when&&h.attr(k.$attr.when),n=k.offset||0,q=g.$eval(F)||{},p={},M=b.startSymbol(),w=b.endSymbol(),r=M+y+"-"+n+w,H=yb.noop,I;f(k,function(a,b){var c=e.exec(b);c&&(c=(c[1]?"-":"")+sa(c[2]),q[c]=h.attr(k.$attr[b]))});f(q,function(a,c){p[c]=b(a.replace(d,r))});g.$watch(y,function(b){var d=parseFloat(b),e=isNaN(d);e||d in q||(d=a.pluralCat(d-n));d===I||e&&C(I)&&isNaN(I)||(H(),e=p[d],B(e)?(null!=b&&c.debug("ngPluralize: no rule defined for '"+d+"' in "+
F),H=A,m()):H=g.$watch(e,m),I=d)})}}}],Df=["$parse","$animate",function(a,g){var h=d("ngRepeat"),k=function(a,b,c,d,e,f,g){a[c]=d;e&&(a[e]=f);a.$index=b;a.$first=0===b;a.$last=b===g-1;a.$middle=!(a.$first||a.$last);a.$odd=!(a.$even=0===(b&1))};return{restrict:"A",multiElement:!0,transclude:"element",priority:1E3,terminal:!0,$$tlb:!0,compile:function(d,m){var y=m.ngRepeat,F=b.createComment(" end ngRepeat: "+y+" "),n=y.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);
if(!n)throw h("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",y);var q=n[1],p=n[2],M=n[3],w=n[4],n=q.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/);if(!n)throw h("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",q);var r=n[3]||n[1],H=n[2];if(M&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(M)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(M)))throw h("badident",
"alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",M);var I,s,u,v,B={$id:xb};w?I=a(w):(u=function(a,b){return xb(b)},v=function(a){return a});return function(a,b,d,m,n){I&&(s=function(b,c,d){H&&(B[H]=b);B[r]=c;B.$index=d;return I(a,B)});var q=fa();a.$watchCollection(p,function(d){var m,p,w=b[0],I,B=fa(),z,R,S,x,A,U,C;M&&(a[M]=d);if(e(d))A=d,p=s||u;else for(C in p=s||v,A=[],d)d.hasOwnProperty(C)&&"$"!==C.charAt(0)&&A.push(C);z=A.length;C=Array(z);for(m=0;m<z;m++)if(R=
d===A?m:A[m],S=d[R],x=p(R,S,m),q[x])U=q[x],delete q[x],B[x]=U,C[m]=U;else{if(B[x])throw f(C,function(a){a&&a.scope&&(q[a.id]=a)}),h("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",y,x,S);C[m]={id:x,scope:c,clone:c};B[x]=!0}for(I in q){U=q[I];x=Y(U.clone);g.leave(x);if(x[0].parentNode)for(m=0,p=x.length;m<p;m++)x[m].$$NG_REMOVED=!0;U.scope.$destroy()}for(m=0;m<z;m++)if(R=d===A?m:A[m],S=d[R],
U=C[m],U.scope){I=w;do I=I.nextSibling;while(I&&I.$$NG_REMOVED);U.clone[0]!=I&&g.move(Y(U.clone),null,Z(w));w=U.clone[U.clone.length-1];k(U.scope,m,r,S,H,R,z)}else n(function(a,b){U.scope=b;var c=F.cloneNode(!1);a[a.length++]=c;g.enter(a,null,Z(w));w=c;U.clone=a;B[U.id]=U;k(U.scope,m,r,S,H,R,z)});q=B})}}}}],Ef=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(b,c,d){b.$watch(d.ngShow,function(b){a[b?"removeClass":"addClass"](c,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],
yf=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(b,c,d){b.$watch(d.ngHide,function(b){a[b?"addClass":"removeClass"](c,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],Ff=tc(function(a,b,c){a.$watch(c.ngStyle,function(a,c){c&&a!==c&&f(c,function(a,c){b.css(c,"")});a&&b.css(a)},!0)}),Gf=["$animate",function(a){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(c,d,e,g){var h=[],k=[],m=[],y=[],n=function(a,b){return function(){a.splice(b,
1)}};c.$watch(e.ngSwitch||e.on,function(c){var d,e;d=0;for(e=m.length;d<e;++d)a.cancel(m[d]);d=m.length=0;for(e=y.length;d<e;++d){var F=Y(k[d].clone);y[d].$destroy();(m[d]=a.leave(F)).then(n(m,d))}k.length=0;y.length=0;(h=g.cases["!"+c]||g.cases["?"])&&f(h,function(c){c.transclude(function(d,e){y.push(e);var f=c.element;d[d.length++]=b.createComment(" end ngSwitchWhen: ");k.push({clone:d});a.enter(d,f.parent(),f)})})})}}}],Hf=tc({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,
link:function(a,b,c,d,e){d.cases["!"+c.ngSwitchWhen]=d.cases["!"+c.ngSwitchWhen]||[];d.cases["!"+c.ngSwitchWhen].push({transclude:e,element:b})}}),If=tc({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,b,c,d,e){d.cases["?"]=d.cases["?"]||[];d.cases["?"].push({transclude:e,element:b})}}),Kf=tc({restrict:"EAC",link:function(a,b,c,e,f){if(!f)throw d("ngTransclude")("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",
qa(b));f(function(a){b.empty();b.append(a)})}}),Ue=["$templateCache",function(a){return{restrict:"E",terminal:!0,compile:function(b,c){"text/ng-template"==c.type&&a.put(c.id,b[0].text)}}}],gg={$setViewValue:A,$render:A},hg=["$element","$scope","$attrs",function(a,d,e){var f=this,g=new Fa;f.ngModelCtrl=gg;f.unknownOption=Z(b.createElement("option"));f.renderUnknownOption=function(b){b="? "+xb(b)+" ?";f.unknownOption.val(b);a.prepend(f.unknownOption);a.val(b)};d.$on("$destroy",function(){f.renderUnknownOption=
A});f.removeUnknownOption=function(){f.unknownOption.parent()&&f.unknownOption.remove()};f.readValue=function(){f.removeUnknownOption();return a.val()};f.writeValue=function(b){f.hasOption(b)?(f.removeUnknownOption(),a.val(b),""===b&&f.emptyOption.prop("selected",!0)):null==b&&f.emptyOption?(f.removeUnknownOption(),a.val("")):f.renderUnknownOption(b)};f.addOption=function(a,b){Ya(a,'"option value"');""===a&&(f.emptyOption=b);var c=g.get(a)||0;g.put(a,c+1)};f.removeOption=function(a){var b=g.get(a);
b&&(1===b?(g.remove(a),""===a&&(f.emptyOption=c)):g.put(a,b-1))};f.hasOption=function(a){return!!g.get(a)}}],qf=function(){return{restrict:"E",require:["select","?ngModel"],controller:hg,link:function(a,b,c,d){var e=d[1];if(e){var g=d[0];g.ngModelCtrl=e;e.$render=function(){g.writeValue(e.$viewValue)};b.on("change",function(){a.$apply(function(){e.$setViewValue(g.readValue())})});if(c.multiple){g.readValue=function(){var a=[];f(b.find("option"),function(b){b.selected&&a.push(b.value)});return a};
g.writeValue=function(a){var c=new Fa(a);f(b.find("option"),function(a){a.selected=s(c.get(a.value))})};var h,k=NaN;a.$watch(function(){k!==e.$viewValue||R(h,e.$viewValue)||(h=w(e.$viewValue),e.$render());k=e.$viewValue});e.$isEmpty=function(a){return!a||0===a.length}}}}}},rf=["$interpolate",function(a){function b(a){a[0].hasAttribute("selected")&&(a[0].selected=!0)}return{restrict:"E",priority:100,compile:function(c,d){if(B(d.value)){var e=a(c.text(),!0);e||d.$set("value",c.text())}return function(a,
c,d){var f=c.parent(),g=f.data("$selectController")||f.parent().data("$selectController");g&&g.ngModelCtrl&&(e?a.$watch(e,function(a,e){d.$set("value",a);e!==a&&g.removeOption(e);g.addOption(a,c);g.ngModelCtrl.$render();b(c)}):(g.addOption(d.value,c),g.ngModelCtrl.$render(),b(c)),c.on("$destroy",function(){g.removeOption(d.value);g.ngModelCtrl.$render()}))}}}}],y=x({restrict:"E",terminal:!1}),F=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,c,d){d&&(c.required=!0,d.$validators.required=
function(a,b){return!c.required||!d.$isEmpty(b)},c.$observe("required",function(){d.$validate()}))}}},M=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,e,f){if(f){var g,h=e.ngPattern||e.pattern;e.$observe("pattern",function(a){J(a)&&0<a.length&&(a=new RegExp("^"+a+"$"));if(a&&!a.test)throw d("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",h,a,qa(b));g=a||c;f.$validate()});f.$validators.pattern=function(a){return f.$isEmpty(a)||B(g)||g.test(a)}}}}},
H=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,c,d){if(d){var e=-1;c.$observe("maxlength",function(a){a=u(a);e=isNaN(a)?-1:a;d.$validate()});d.$validators.maxlength=function(a,b){return 0>e||d.$isEmpty(b)||b.length<=e}}}}},I=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,c,d){if(d){var e=0;c.$observe("minlength",function(a){e=u(a)||0;d.$validate()});d.$validators.minlength=function(a,b){return d.$isEmpty(b)||b.length>=e}}}}};a.angular.bootstrap?console.log("WARNING: Tried to load angular more than once."):
(rb(),da(yb),Z(b).ready(function(){vb(b,Bb)}))})(window,document);!window.angular.$$csp()&&window.angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>');
(function(a,b,c){function d(a){var c=[];k(c,b.noop).chars(a);return c.join("")}function e(a,c){var d={},e=a.split(","),f;for(f=0;f<e.length;f++)d[c?b.lowercase(e[f]):e[f]]=!0;return d}function f(a,c){function d(a,f,g,m){f=b.lowercase(f);if(J[f])for(;k.last()&&C[k.last()];)e("",k.last());K[f]&&k.last()==f&&e("",f);(m=G[f]||!!m)||k.push(f);var n={};g.replace(p,function(a,b,c,d,e){n[b]=h(c||d||e||"")});c.start&&c.start(f,n,m)}function e(a,d){var f=0,g;if(d=b.lowercase(d))for(f=k.length-1;0<=f&&k[f]!=
d;f--);if(0<=f){for(g=k.length-1;g>=f;g--)c.end&&c.end(k[g]);k.length=f}}"string"!==typeof a&&(a=null===a||"undefined"===typeof a?"":""+a);var f,g,k=[],s=a,B;for(k.last=function(){return k[k.length-1]};a;){B="";g=!0;if(k.last()&&L[k.last()])a=a.replace(new RegExp("([\\W\\w]*)<\\s*\\/\\s*"+k.last()+"[^>]*>","i"),function(a,b){b=b.replace(A,"$1").replace(x,"$1");c.chars&&c.chars(h(b));return""}),e("",k.last());else{if(0===a.indexOf("\x3c!--"))f=a.indexOf("--",4),0<=f&&a.lastIndexOf("--\x3e",f)===f&&
(c.comment&&c.comment(a.substring(4,f)),a=a.substring(f+3),g=!1);else if(D.test(a)){if(f=a.match(D))a=a.replace(f[0],""),g=!1}else if(v.test(a)){if(f=a.match(m))a=a.substring(f[0].length),f[0].replace(m,e),g=!1}else u.test(a)&&((f=a.match(q))?(f[4]&&(a=a.substring(f[0].length),f[0].replace(q,d)),g=!1):(B+="<",a=a.substring(1)));g&&(f=a.indexOf("<"),B+=0>f?a:a.substring(0,f),a=0>f?"":a.substring(f),c.chars&&c.chars(h(B)))}if(a==s)throw n("badparse","The sanitizer was unable to parse the following block of html: {0}",
a);s=a}e()}function h(a){if(!a)return"";E.innerHTML=a.replace(/</g,"&lt;");return E.textContent}function g(a){return a.replace(/&/g,"&amp;").replace(B,function(a){var b=a.charCodeAt(0);a=a.charCodeAt(1);return"&#"+(1024*(b-55296)+(a-56320)+65536)+";"}).replace(s,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function k(a,c){var d=!1,e=b.bind(a,a.push);return{start:function(a,f,h){a=b.lowercase(a);!d&&L[a]&&(d=a);d||!0!==N[a]||(e("<"),e(a),b.forEach(f,function(d,
f){var h=b.lowercase(f),k="img"===a&&"src"===h||"background"===h;!0!==T[h]||!0===Q[h]&&!c(d,k)||(e(" "),e(f),e('="'),e(g(d)),e('"'))}),e(h?"/>":">"))},end:function(a){a=b.lowercase(a);d||!0!==N[a]||(e("</"),e(a),e(">"));a==d&&(d=!1)},chars:function(a){d||e(g(a))}}}var n=b.$$minErr("$sanitize"),q=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,m=/^<\/\s*([\w:-]+)[^>]*>/,p=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,
u=/^</,v=/^<\//,A=/\x3c!--(.*?)--\x3e/g,D=/<!DOCTYPE([^>]*?)>/i,x=/<!\[CDATA\[(.*?)]]\x3e/g,B=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,s=/([^\#-~| |!])/g,G=e("area,br,col,hr,img,wbr");a=e("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr");c=e("rp,rt");var K=b.extend({},c,a),J=b.extend({},a,e("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),C=b.extend({},c,e("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var"));
a=e("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan,use");var L=e("script,style"),N=b.extend({},G,J,C,K,a),Q=e("background,cite,href,longdesc,src,usemap,xlink:href");a=e("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width");
c=e("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",
!0);var T=b.extend({},Q,c,a),E=document.createElement("pre");b.module("ngSanitize",[]).provider("$sanitize",function(){this.$get=["$$sanitizeUri",function(a){return function(b){var c=[];f(b,k(c,function(b,c){return!/^unsafe/.test(a(b,c))}));return c.join("")}}]});b.module("ngSanitize").filter("linky",["$sanitize",function(a){var c=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,e=/^mailto:/i;return function(f,g){function h(a){a&&q.push(d(a))}function k(a,
c){q.push("<a ");b.isDefined(g)&&q.push('target="',g,'" ');q.push('href="',a.replace(/"/g,"&quot;"),'">');h(c);q.push("</a>")}if(!f)return f;for(var m,n=f,q=[],p,s;m=n.match(c);)p=m[0],m[2]||m[4]||(p=(m[3]?"http://":"mailto:")+p),s=m.index,h(n.substr(0,s)),k(p,m[0].replace(e,"")),n=n.substring(s+m[0].length);h(n);return a(q.join(""))}}])})(window,window.angular);
$(function(){var a="AREA BASE BR COL HR KEYGEN LINK META PARAM SOURCE TRACK WBR".split(" ");$.fn.compile_angular=function(){var a=$(this),b=angular.element(document.body).injector();b&&b.invoke(["$compile",function(b){var c=angular.element(a).scope();c&&(b(a)(c),c.$apply())}]);return this};var b=function(b){b.length&&$(b).each(function(){if(this.tagName&&-1===a.indexOf(this.tagName)){var b=$(this);b.hasClass("ng-scope")||b.compile_angular()}})},c=window.MutationObserver||window.WebKitMutationObserver||
window.MozMutationObserver,d=function(){$(document.body).on("DOMNodeInserted",function(a){b([a.target])})};c?function(){(new c(function(a){for(var c=0;c<a.length;c+=1)b(a[c].addedNodes)})).observe(document.body,{childList:!0,subtree:!0})}():d()});angular.module("genius",["ngSanitize"]).config(["$httpProvider",function(a){a.interceptors.push("OAuthInterceptor");a.interceptors.push("OnsiteInterceptor");a.interceptors.push("RetryFailureInterceptor")}]);
window.log=function(){log.history=log.history||[];log.history.push(arguments);this.console&&console.log(Array.prototype.slice.call(arguments))};window.app=window.app||{};
$.extend(window.app,{on_ajax_error:function(a,b){401==a.status?$.facebox(a.responseText):400==a.status?0<(a.getResponseHeader("content-type")||"").indexOf("javascript")?$.globalEval(a.responseText):$.facebox(a.responseText):b.retry_limit||$.facebox_then_reload(app.templates.ajax_error_message)},define_partial_view:function(a,b,c){app.views=app.views||{};app.views[a]=app.views[a]||{};app.views[a]["_"+b]=Backbone.View.extend(c)},set_up_tooltip_lyric_editor:function(){var a=$(".edit_annotation_form:visible"),
b=a.closest(".annotation_container").attr("data-id");$(".lyrics").hasClass("user_can_edit")?(b=app.clean_up_lyrics($("div.lyrics a[data-id='"+b+"']").html()),a.find(".lyric_text").val(b).data("old-value",b)):a.find(".lyric_editor").remove()},lyrics_editing_service:function(){return app.angular_inject_get__deprecated("LyricsEditingService")},clean_up_lyrics:function(a){try{return app.lyrics_editing_service().clean_up_lyrics__deprecated(a)}catch(b){throw b.human_readable_message&&$.facebox_then_reload(b.human_readable_message),
b;}},edit_lyrics_form_is_open:function(){return app.is_on_song_page()&&$(".lyrics")[0].editing},swap_lyrics_with:function(a){app.edit_lyrics_form_is_open()&&$(".lyrics").reset_editable();$(".lyrics").html(a);app.redraw_decorators()},save_lyrics:function(){app.ajaxQueue.add({type:"POST",url:$(".lyrics").data("update-path"),data:{_method:"put",lyrics:app.clean_up_lyrics($(".lyrics").html()),song:{updated_by_human_at:$("div.song_updated_by_human_at").text(),lyrics_updated_at:$("div.lyrics_updated_at").text()}},
success:function(a){app.update_on_page_lyrics({new_timestamps:a.timestamps,new_lyrics:a.lyrics,updated_by_current_user:!0})}})},update_on_page_lyrics:function(a){app.update_client_timestamps(a.new_timestamps);$("#latest_song_lyrics").html(a.new_lyrics);var b=$(".qtip.explanation:visible");if(app.edit_lyrics_form_is_open())a.updated_by_current_user||(b=app.sc("body_content_conflict_message",{url:document.URL}),$(document.body).prepend('<div class="alert alert_error song_lyrics_updated">'+b+"</div>"));
else if(b.length){var b=b.qtip("api"),c="function"===typeof b.onHide?b.onHide.bind(b):$.noop;b.onHide=function(){app.swap_lyrics_with(a.new_lyrics);c()};var d="function"===typeof b.beforeDestroy?b.beforeDestroy.bind(b):$.noop;b.beforeDestroy=function(){app.swap_lyrics_with(a.new_lyrics);var b=$('.lyrics a[data-id="'+$(this.elements.target).data("id")+'"]');b.replaceWith(b.html());d()}}else app.swap_lyrics_with(a.new_lyrics)},update_client_timestamps:function(a){if(a){var b=parseInt($.trim($("div.lyrics_updated_at").text())||
0,10);a.lyrics_updated_at&&parseInt(a.lyrics_updated_at,10)>b&&$("div.lyrics_updated_at").text(a.lyrics_updated_at);b=parseInt($.trim($("div.song_updated_by_human_at").text())||0,10);a.updated_by_human_at&&parseInt(a.updated_by_human_at,10)>b&&$("div.song_updated_by_human_at").text(a.updated_by_human_at)}},make_lyrics_editable:function(){var a=$(".lyrics").outerHeight();$(".lyrics").editable(function(a){return a},{placeholder:"<h1>Add some "+app.sc("name_for_body_content")+"!</h1>",type:"autogrow",
cancel:"Cancel",onblur:"ignore",name:"lyrics_editable_area",submit:"Save (shift+enter)",focus:!1,duplicate_buttons:!0,event:"make_editable",data:function(b){$("#main").addClass("lyrics_edit_mode");$(".lyrics").css("min-height",a);app.activate_generic_tool_tips();b=app.lyrics_editing_service().prepare_lyrics_for_editing(b);$(".lyrics").data("old_attrs",b.attr_hash);$(".lyrics").data("lyrics",b.markdown);return b.markdown},onreset:function(){setTimeout(function(){app.activate_generic_tool_tips()},250);
$("#main").removeClass("lyrics_edit_mode")},callback:function(a){$("#main").removeClass("lyrics_edit_mode");$(".lyrics_container").css("width","");$(".lyrics").css("min-height","auto");var c=$(".lyrics").data("old_attrs");app.swap_lyrics_with(app.lyrics_pseudo_markdown_to_html(a,c));app.save_lyrics()}})},lyrics_pseudo_markdown_to_html:function(a,b){return app.lyrics_editing_service().lyrics_pseudo_markdown_to_html__deprecated(a,b)},ie_fail:function(){$.facebox("<h1>Sorry, this doesn't work in Internet Explorer yet</h1>")},
set_up_vidyard_id_container:function(a){var b=a.nextAll(".edit_annotation_form"),c=a.find("[data-video_id]:first").attr("data-video_id");a.hasClass("current_user_can_change_video_id_on_this_annotation")&&b.find(".video_id_container").find(".video_id").val(c)},set_up_tooltip_for_impersonation:function(a){a.find(".editor_links").hide();var b=a.find(".annotation_unit[data-created_by-login="+$("#explain_as").attr("login")+"]");b.find(".editor_links").show();var c=a.find(".add_verified_explanation");b.length?
c.remove():(b=$("<a>",{"class":"add_verified_explanation",text:"Click here to add a verified "+app.sc("annotation.singular_noun")+" as "+$("#explain_as").attr("artist_name")}),b=$("<div>",{"class":"annotation_unit annotation_prompt verified"}).append(b),c.length||a.find(".annotation_unit.not_verified").before(b),b.show())},get_selection:function(){return(window.getSelection||document.getSelection||$.noop)()},select:function(a){var b=app.get_selection();b.removeAllRanges();var c=document.createRange();
c.selectNode(a);b.addRange(c);return b},delayed_nav:function(a){setTimeout(function(){document.location=a},100);return!1},fix_webkit_autocomplete_bug:function(){0<$("input.quick_search").length&&$("input[type='text']").not(".annotation_link").attr("autocomplete","off")},set_up_comments:function(){if(!$("#disqus_thread").length)return!1;$("a.show_comments").click(function(){$("#disqus_thread").show("normal");$(this).remove();return!1});$.getScript("http://disqus.com/forums/rapexegesis/embed.js")},
get_comment_counts:function(){if(!$("a[href$='#disqus_thread']").length)return!1;var a="?";$("a").each(function(b){this.href&&this.href.match(/#disqus_thread/)&&(a+="url"+b+"="+encodeURIComponent(this.href)+"&")});$.getScript("http://disqus.com/forums/rapexegesis/get_num_replies.js"+a,function(){})},next_annotation_is_on_different_line:function(a){return!(a.nextAll("a[data-id]").length&&a.offset().top==a.nextAll("a[data-id]").first().offset().top)},annotation_group_decorator_names:function(a){return a.map(function(){var a=
$(this),c=[],c=c.concat($.trim(a.attr("class")||"").split(/\s+/)),c=c.concat($.trim(a.attr("data-editorial-state")||"").split(/\s+/));return $.grep(c,function(a){return 0<a.length})}).unique_items_in_array()},decorator_group:function(a){var b=$(".lyrics a[data-id][data-group="+a+"]"),c=$("<div>",{"class":"decorator_group","data-group":a}).css({top:b.first().position().top});$.each(app.annotation_group_decorator_names(b),function(){c.append($("<span>",{"class":"decorator "+this}))});return c},clear_decorators:function(){$(".decorators").empty()},
setup_decorators:function(){var a=0;$(".lyrics a[data-id]").each(function(){var b=$(this);b.attr("data-group",a);app.next_annotation_is_on_different_line(b)&&(a+=1,window.setTimeout(function(){app.decorator_group(b.attr("data-group")).appendTo($(".decorators"))},1))})},redraw_decorators:function(){app.clear_decorators();app.setup_decorators()},recalculate_decorators_for_referent:function(a){if(a=a.attr("data-group"))$(".decorator_group[data-group="+a+"]").remove(),app.decorator_group(a).appendTo(".decorators")},
unobfuscate_url:function(a){return atob(a)},set_up_rg_audio_players:function(){mejs.MediaElementDefaults.flashName="/flash/mediaelement.swf";$('audio[data-decode="true"]').each(function(a,b){var c=$(b);c.attr("src",app.unobfuscate_url(c.attr("data-src"))).removeAttr("data-decode")});$("audio").mediaelementplayer({audioWidth:"100%",enableKeyboard:!1})},set_up_bop_fm_player:function(){0<$("#bopPlayer").length&&$.getScript("http://assets.bop.fm/embed.js")},unobfuscate_urls:function(){$("[data-decode-src]").each(function(){var a=
$(this);a.attr("src",app.unobfuscate_url(a.attr("src")))})},set_up_facebook_likebox_and_twitter_follow_buttons:function(){$(".fb_likebox").each(function(){var a=$(this),b=a.attr("data-facebook-name"),c=a.attr("data-width"),d=a.attr("data-height");a.html('<iframe src="http://www.facebook.com/plugins/likebox.php?href=http%3A%2F%2Fwww.facebook.com%2F'+b+"&amp;width="+c+"&amp;colorscheme=dark&amp;show_faces=true&amp;stream=false&amp;header=false&amp;height="+d+'" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:'+
c+"px; height:"+d+'px;" allowTransparency="true"></iframe>')});$.getScript("//platform.twitter.com/widgets.js")},load_deferred_images:function(a){$(a||"body").find("img[data-src]").each(function(){var a=$(this);a.attr("src",a.attr("data-src")).removeAttr("data-src")})},load_song_metadata:function(){var a,b,c=function(a){for(var b in a)0<$.trim(a[b]).length&&$(b).html(a[b])};return function(){app.is_on_song_page()&&(b?a&&c(a):($.ajax_with_retry({url:"/songs/"+$("div.lyrics").attr("data-id")+"/metadata",
dataType:"json",success:function(b){a=b;c(a)}}),b=!0))}}(),get_annotation_units:function(a){return $("div.annotation_unit[data-id="+a+"]")},update_bulk_loaded_annotation:function(a){if(app.bulk_annotations){a=$(a);var b=a.attr("data-id");app.bulk_annotations[b]=a}},setup_annotations:function(){if(app.is_on_song_page()){if(!MOBILE_DEVICE){var a=$("div.lyrics");a.on("mouseenter","a:not(.no_annotation, [data-id=pending], [data-real-link])",function(){$(this).referents_for_this_annotation().addClass("hover_active")});
a.on("mouseleave","a:not(.no_annotation, [data-id=pending], [data-real-link])",function(){$(this).referents_for_this_annotation().removeClass("hover_active")});a.on("mousedown","a:not(.no_annotation, [data-id=pending], [data-real-link])",function(){app.display_annotation_qtip($(this));return!1}).on("click","a:not(.no_annotation, [data-id=pending], [data-real-link])",function(){return!1})}this.load_annotation_metadata()}},load_annotation_containers:function(a){a=a||$("div.lyrics").attr("data-id");
$.ajax_with_retry({type:"GET",url:"/annotations/for_song_page",dataType:"json",data:{song_id:a},success:function(a){app.trigger_one_time_event("bulk_annotations:loaded",a)}})},loaded_annotation_container:function(a){return this.bulk_annotations&&this.bulk_annotations[a]},load_annotation_full_credits:function(){var a=!1;return function(){a||($.ajax_with_retry({url:"/annotations/full_credits",dataType:"json",data:{song_id:$("div.lyrics").attr("data-id")},success:function(a){app.trigger_one_time_event("bulk_annotations:full_credits:loaded",
a)}}),a=!0)}}(),setup_annotation_credits_button:function(){$(".show_credits").live("click",function(){var a=$(this),b=$(a.toggleClass("pressed").attr("data-target"));b.toggle();b.hasClass("loading")&&($.ajax_with_retry({url:"/annotations/full_credits",data:{annotation_id:b.attr("data-id")},success:function(a){b.html(a).removeClass("loading")}}),0===a.closest(".stand_alone_annotation_container").length&&0===a.closest(".activity_stream_event_unit").length&&app.load_annotation_full_credits())})},load_annotation_metadata:function(){var a=
$("div.lyrics").attr("data-id");$.ajax_with_retry({url:"/annotations/footers",dataType:"json",data:{song_id:a},success:function(a){app.trigger_one_time_event("bulk_annotations:footers:loaded",a)}});$.ajax_with_retry({url:"/annotations/comments",dataType:"json",data:{song_id:a},success:function(a){app.trigger_one_time_event("bulk_annotations:comments:loaded",a)}})},fixRange:function(a){var b=a.toString();try{for(;" "!=b[0]&&"\n"!=b[0];)a.setStart(a.startContainer,a.startOffset-1),b=a.toString();a.setStart(a.startContainer,
a.startOffset+1)}catch(c){}try{for(;" "!=b[b.length-1]&&"\n"!=b[b.length-1];)a.setEnd(a.endContainer,a.endOffset+1),b=a.toString();a.setEnd(a.endContainer,a.endOffset-1)}catch(d){}return a},get_referent_text_by_annotation_id:function(a){var b=[];$(".lyrics a[data-id="+a+"]").each(function(){b.push($(this).text().replace(/\n+/g," / "))});return _.uniq(b).join(" / ")},open_annotation_by_id:function(a,b,c){c=c||$.noop;a=parseInt(a,10);var d=$(".lyrics a[data-id="+a+"]");b=b||{};if(!d.length)return!1;
b.scroll&&d.scrollToCenterOfScreen();if(MOBILE_DEVICE){var e=app.get_referent_text_by_annotation_id(a),f=$("#explanation_scroller");$(".active_referent").removeClass("active_referent");d.addClass("active_referent");d.trigger("annotation:open");app.loaded_annotation_container(a)?(f.html(app.loaded_annotation_container(a).clone()),app.setup_annotation_display(f,e)):(app.setup_annotation_display(f,e),$.get("/annotations/"+a,function(a){f.html(a);app.setup_annotation_comments_and_media(f);app.swap_in_mobile_referent(e)}));
f.scrollTop(0);c()}else window.setTimeout(function(){d.first().mousedown();c()},1);return!0},setup_no_annotation_anchors:function(){var a=(location.href.split("#")[1]||"").match(/^lyric-(.*)/),b;a&&(b=a[1],location.hash="lyric",app.tracking.set_song_page_loaded_from_direct_link_to_un_annotated_line(decodeURIComponent(b)));$("a.no_annotation").each(function(){var a=$(this);b&&-1!=this.href.split("?")[1].toLowerCase().indexOf(b.toLowerCase())?(a.addClass("highlight").removeAttr("href"),setTimeout(function(){a.scrollToCenterOfScreen()},
1)):a.replaceWith(a.html())});$(".lyrics").live("mousedown",function(){app.kill_no_annotation_anchors()}).bind("make_editable",function(){app.kill_no_annotation_anchors()})},kill_no_annotation_anchors:function(){$("a.no_annotation").each(function(){var a=$(this);a.replaceWith(a.html())})},activate_faceboxes:function(){$("a.facebox, a[rel*=facebox]").live("mousedown",function(){$(this).unbind("click").facebox()})},setup_annotation_comments_and_media:function(a){if(!a.find(".comment_section").length){var b=
MOBILE_DEVICE?a.find(".annotation_container").attr("data-id"):a.closest(".qtip").qtip("api").elements.target.data("id");app.ajaxQueue.add({type:"get",url:"/annotations/"+b+"/comments",dataType:"json",success:function(b){a.find(".annotation_unit").each(function(){var a=$(this),e=$(b[a.attr("data-id")]);a.find(".comment_placeholder").replaceWith(e)})}})}app.setup_embedly(a);app.setup_embedly_pro(a);app.load_vidyard_players(a,"load_invisible_players")},swap_in_mobile_referent:function(a){$("#annotated_line").html($("<span>").text(a).text().replace(/ \/ /g,
'<span class="annotated_line-separator"> / </span>'))},setup_annotation_display:function(a,b){MOBILE_DEVICE?($("body").addClass("explanation_showing"),app.swap_in_mobile_referent(b)):app.activate_generic_tool_tips(a);app.load_deferred_images(a);app.set_up_timeago(a);MOBILE_DEVICE||app.setup_annotation_comments_and_media(a)},kill_orphaned_tooltips:function(){$(".qtip:visible").each(function(){var a=$(this);a.qtip("api").elements.target.is(":detached")&&a.qtip("destroy").hide()})},hide_all_rg_tooltips:function(){$(".toggle_rg_tooltip.pressed").removeClass("pressed");
$(".rg_tooltip").hide().removeClass("active")},ajaxify_pagination_links:function(){var a=function(){$("div.pagination").each(function(){var a=$(this);if(!a.find("a.next_page").length)return a.find("span.disabled.next_page").length&&a.remove(),!0;var c=a.find("a.next_page").attr("href");a.html($("<a>more</a>").addClass("more button").attr("href",c))})};a();$("div.pagination a.more").live("click",function(){var a=$(this);a.addClass("loading");$.ajax_with_retry({url:a.attr("href"),success:function(c){c=
$(c);a.closest("div").before(c);c.trigger("ajax:complete");a.closest("div").remove();try{app.get_comment_counts()}catch(d){}}});return!1});$(window).auto_load_more_on_scroll();$("div.pagination a.more").live("mousedown",function(){var a=this.href.replace(jQuery.urlInternalRegExp(),""),c=a.split("?")[0],a=a.split("?")[1].match(/page=(\d+)/)[1];_gaq.push(["_trackEvent","Pagination",c+" page "+a])});$(document).ajaxComplete(function(){a()});$(window).load(function(){window.setTimeout(app.activate_more_links,
250)})},setup_markdown_previews:function(){$("textarea.markdown_preview").each(function(){var a=$(this);a.after('<div class="markdown_preview_container">           <div class="preview embedly embedly_pro" '+(a.attr("data-mentions-autocomplete-url")?'data-autolink-mentions="true"':"")+">Start typing to see a preview</div>         </div>");a.next().andSelf().wrapAll('<div class="clearfix">');var b="md_preview_"+(new Date).getTime(),c="",d=function(){$(this).doTimeout(b,250,function(){var b=a.val();
b!==c&&app.markdown_to_html(b,a.siblings(".markdown_preview_container").find(".preview"),function(){c=b})})};a.keyup(d).removeClass("markdown_preview").addClass("markdown_preview_setup_complete");d()})},sc:function(a,b){"undefined"==typeof b&&(b={});var c=b.channel||CURRENT_CHANNEL;delete b.channel;c=$.extend({scope:c,defaultValue:I18n.translate(a,b)},b);return I18n.translate(a,c)},submit_annotation_state_change:function(a,b,c){var d=$.extend({_method:"put"},c);app.ajaxQueue.add({type:"post",url:b,
data:d,success:function(b){var d=$(b.annotation_container);a.closest(c.stand_alone?".stand_alone_annotation_container":".annotation_container").replaceWith(d.fadeIn("fast"));if(!c.stand_alone){app.update_editorial_state(b.base_id,b.editorial_state);var h=d.closest(".qtip");h.is(":visible")&&h.qtip("api").reposition();app.update_bulk_loaded_annotation(d)}b.deleted&&app.remove_annotation_from_page(d.find(".annotation_unit[data-id="+b.id+"]"))}})},tag_data:function(){var a=$("#tag_ids")[0].options,b=
[],c=[];$.each(a,function(a,e){var f=$(e);e.selected&&(f.data("new-tag")?c.push(f.val()):b.push(f.val()))});return{existing_tag_ids:b,new_tag_names:c}},add_tag_data_to_form:function(a){var b=app.tag_data();a.find('input[name="existing_tag_ids[]"], input[name="new_tag_names[]"]').remove();$.each(b.existing_tag_ids,function(b,d){a.append($("<input>",{name:"existing_tag_ids[]",type:"hidden",value:d}))});$.each(b.new_tag_names,function(b,d){a.append($("<input>",{name:"new_tag_names[]",type:"hidden",value:d}))})},
hydrate_edit_diffs:function(){$("[data-unhydrated-diff]").hydrate_diff().removeAttr("data-unhydrated-diff")},customize_cloudflare_banner:function(){$("#cf_alert_div").length&&$(document.body).prepend('<div class="alert alert_error alert_cf_always_on">'+app.sc("cloud_flare_always_on_message")+"</div>")}});
(function(){var a={},b={},c=function(c){b[c]&&($.each(a[c]||[],function(a,f){f($.extend(!0,{},b[c]).data)}),delete a[c])};$.extend(window.app,{add_callback_once:function(b,e){a[b]=a[b]||[];a[b].push(e);c(b)},trigger_one_time_event:function(a,e){b[a]={data:e};c(a)}})})();
$.extend(window.app,{sidebar_offset:function(){return $(".song_sidebar").offset().top},relative_window_top_position:function(){return $(window).scrollTop()-app.sidebar_offset()},qtip_top:function(a){return parseInt(a.elements.tooltip.css("top"),10)},annotation_upper_bound_above_sidebar:function(a){return app.qtip_top(a)<app.sidebar_offset()},annotation_upper_bound_above_screen:function(a){return app.qtip_top(a)<app.relative_window_top_position()},annotation_lower_bound_below_screen:function(a){return app.qtip_top(a)+
a.elements.tooltip.height()>$(window).height()+app.relative_window_top_position()},annotation_is_taller_than_viewport:function(a){return a.elements.tooltip.height()>$(window).height()},position_annotation_at_top:function(){return Math.max(0,app.relative_window_top_position())},position_annotation_at_bottom:function(a){return app.relative_window_top_position()+($(window).height()-a.elements.tooltip.height())},get_annotation_adjustment:function(a){if(app.annotation_upper_bound_above_screen(a)||app.annotation_upper_bound_above_sidebar(a)||
app.annotation_is_taller_than_viewport(a))return app.position_annotation_at_top();if(app.annotation_lower_bound_below_screen(a))return app.position_annotation_at_bottom(a)},adjust_annotation:function(a){a.elements.tooltip.css("top",app.get_annotation_adjustment(a))},show_annotation:function(a){$(".song_sidebar, .recommended_song_list").removeClass("annotation_showing annotation_prompt").addClass("annotation_shown");$("#main").css("padding-bottom",a.css("top"));a.addClass("displayed")},hide_annotation:function(a){$(".song_sidebar, .recommended_song_list").hasClass("annotation_showing")||
$(".song_sidebar, .recommended_song_list").removeClass("annotation_shown");a.removeClass("displayed");$("#main").css("padding-bottom","")},display_annotation_qtip:function(a){a.data("qtip")||app.setup_annotation_qtip(a,"prerender");a.qtip("show");a.trigger("annotation:open");return a.qtip("api")},display_annotation_vanity_url:function(a){Modernizr.history&&window.history.replaceState({},"",a.attr("href"))},hide_annotation_vanity_url:function(){Modernizr.history&&window.history.replaceState({},"",
Backbone.history.root)},setup_annotation_qtip:function(a,b){if(!a.data("qtip")){var c=app.loaded_annotation_container(a.attr("data-id"));c?app.annotation_qtip(a,{content:{text:c.clone(),prerender:!!b}}):app.setup_lazy_loading_annotation_qtip(a,b)}},setup_lazy_loading_annotation_qtip:function(a,b){app.annotation_qtip(a,{content:{text:$('<div class="annotation_is_loading"></div>'),url:a.attr("href"),prerender:!!b}})},annotation_qtip:function(a,b){var c={content:{prerender:!1},position:{type:"relative",
adjust:{y:-1*app.sidebar_offset()},container:$("#annotations"),corner:{target:"rightMiddle",tooltip:"leftMiddle"}},hide:{when:{event:"unfocus"},effect:{length:0}},show:{when:{event:"mousedown"},effect:{length:0},delay:0,solo:!0},style:{width:400,classes:{tooltip:"explanation"},border:{radius:0},name:"light"},api:{reposition:function(){if(!this.elements.tooltip.is(":not(:visible)")){var a=this.allow_position_update;this.allow_position_update=!0;this.elements.tooltip.addClass("repositioning");this.updatePosition(void 0,
!1);this.elements.tooltip.force_reflow().removeClass("repositioning");this.allow_position_update=a}},allow_position_update:!0,beforePositionUpdate:function(){return this.allow_position_update},onContentUpdate:function(){this.elements.tooltip.find(".annotation_is_loading").length||app.adjust_annotation(this)},onShow:function(){this.needs_position_adjustment&&app.adjust_annotation(this);this.needs_position_adjustment=!1;$(".song_sidebar").addClass("annotation_showing");if(this.onShowAdditions)this.onShowAdditions();
var a=$(this.elements.target),b=$(this.elements.tooltip);_gaq.push(["_trackEvent","Explanations","Open "+a.attr("data-id")]);a.referents_for_this_annotation().addClass("active");$(".lyrics a[data-current-active-referent]").removeAttr("data-current-active-referent");a.attr("data-current-active-referent",!0);app.setup_annotation_display(b);var c=this;window.setTimeout(function(){app.show_annotation(b);app.display_annotation_vanity_url(a);c.allow_position_update=!1;$("#explain_as").attr("login")&&app.set_up_tooltip_for_impersonation(b)},
1)},onHide:function(){var a=$(this.elements.tooltip);$(this.elements.target).referents_for_this_annotation().removeClass("active");$(".lyrics a[data-current-active-referent]").removeAttr("data-current-active-referent");this.allow_position_update=!0;window.setTimeout(function(){app.hide_annotation(a);app.hide_annotation_vanity_url()},1)},onPositionUpdate:function(){this.needs_position_adjustment=!0}}};return a.qtip($.extend(!0,c,b))},activate_generic_tool_tips:function(a){("undefined"===typeof a?$("[tooltip__deprecated]"):
$(a).find("[tooltip__deprecated]")).each(function(){var a=$(this);if(a.data("qtip"))return!0;var c=a.attr("tooltip__deprecated"),d=!1;if(a.attr("tooltip__deprecated").match(/^\//)||a.attr("tooltip__deprecated").match(/^http/))c="<h4 class='holder' style='text-align:center'>Loading...</h4>",d=a.attr("tooltip__deprecated");a.qtip({content:{text:c,url:d,title:{text:a.attr("tt-title")||!1}},position:{adjust:{screen:!0},corner:{target:a.attr("tt-target-corner")||"bottomMiddle",tooltip:a.attr("tt-tooltip-corner")||
"topMiddle"}},hide:{fixed:!!a.attr("tt-fixed"),delay:a.attr("tt-hide-delay")||0,when:{event:a.attr("tt-hide")||"mouseout"},effect:{length:0}},show:{delay:a.attr("tt-delay")||140,when:{event:a.attr("tt-show")||"mouseover"},effect:{length:0}},style:{tip:{corner:"topRight",size:{x:7,y:7},color:"mention_tooltip"==a.attr("tt-class")?"#ffc31c":"#222"},width:{min:0,max:a.attr("tt-width")||200},border:{radius:0},classes:{tooltip:a.attr("tt-class")||"rg_tooltip"},name:a.attr("tt-theme")||"dark"},api:{beforePositionUpdate:function(){$(this.elements.target).is(":visible")||
$(this.elements.tooltip).qtip("hide")},beforeContentUpdate:function(){$(this.elements.target).trigger("qtip:beforeContentUpdate",Array.prototype.slice.call(arguments))}}})})}});
(function(){var a={update_bodies:function(a){for(var c in a)a[c]=$(a[c]),MOBILE_DEVICE||app.load_deferred_images(a[c]);app.bulk_annotations=a},update_metadata:function(a,c){for(var d in app.bulk_annotations)app.bulk_annotations[d].find(".annotation_unit").each(function(){var d=$(this),f=d.attr("data-id");c[f]&&d.find(a).replaceWith(c[f])});$(".annotation_unit").each(function(){var d=$(this);d.find(a).replaceWith(c[d.attr("data-id")])})}};app.add_callback_once("bulk_annotations:loaded",function(b){a.update_bodies(b);
app.add_callback_once("bulk_annotations:comments:loaded",function(b){a.update_metadata(".comment_placeholder",b)});app.add_callback_once("bulk_annotations:footers:loaded",function(b){a.update_metadata(".footer_placeholder",b)});app.add_callback_once("bulk_annotations:full_credits:loaded",function(b){a.update_metadata(".full_credits_placeholder",b)})})})();
var Tracking=function(){this.annotations_opened=0;this.line_item_opens={};this.song_page_loaded_from_direct_link_to_un_annotated_line=this.enabled=!1};
Tracking.prototype={start_tracking:function(){if("undefined"===typeof mixpanel)return!1;this.enabled=!0;var a;"undefined"!==typeof CURRENT_TAG&&CURRENT_TAG&&(a=CURRENT_TAG.tag.slug);mixpanel.register({"Logged In":!!CURRENT_USER,"Is Editor":CURRENT_USER&&CURRENT_USER.is_editor,"Is Moderator":CURRENT_USER&&CURRENT_USER.is_moderator,"Mobile Site":MOBILE_DEVICE,Channel:CURRENT_CHANNEL,Tag:a});CURRENT_USER&&mixpanel.identify(CURRENT_USER.id);app.is_on_song_page&&app.is_on_song_page()&&this.track("Song Page Load");
mixpanel.track_links(".android_interstitial-download","clicked_download_from_android_interstitial",{"from url":document.location.href})},track:function(a,b){if(!this.enabled)return!1;var c;-1<["Annotation Browser Navigation","play_song_media","opened_what_is_genius_dropdown"].indexOf(a)?c=b:"Song Page Load"===a?c={"Un-annotated direct link":!!this.song_page_loaded_from_direct_link_to_un_annotated_line,"Un-annotated line":this.song_page_loaded_from_direct_link_to_un_annotated_line}:"Wrapped Web Page Load"===
a||"Annotated Web Page Load"==a?c={"Source location":b.source_location,script_source:b.script_source,script_source_version:b.script_source_version,"Host Page Referrer":b.referrer}:"Open Annotation"===a||"Engaged Annotation View"===a?(this.annotations_opened++,c={"Annotation ID":b.annotation_id,"Annotator Login":b.annotator_login,"Annotatable Type":b.annotatable_type,script_source:b.script_source,script_source_version:b.script_source_version},b.skip_counters||$.extend(c,{"Cumulative Annos Opened":this.annotations_opened,
"Anno Opened from Permalink":b.annotation_id===this.annotation_id_opened_from_permalink,"First Anno was Permalink":!!this.annotation_id_opened_from_permalink})):"Offsite Filter Selection"===a?c={"Filter Type":b.filter_type,"Filter Arguments":b.filter_args,"Filter Reason":b.reason,script_source:b.script_source,script_source_version:b.script_source_version}:"Inbox Open"===a?c={"Inbox Name":b.inbox_name,"Unread Count When Opened":b.unread_count}:"Line Item Open"===a&&("undefined"==typeof this.line_item_opens[b.inbox_name]&&
(this.line_item_opens[b.inbox_name]=0),c={"Inbox Name":b.inbox_name,"Line Item Index":b.index,"Action Name":b.action_name,"Target Type":b.target_type,"Viewing Context":b.viewing_context,"Cumulative Line Items Opened":this.line_item_opens[b.inbox_name]++,"Line Item Strategy":b.strategy_name});mixpanel.track(a,$.extend({},TRACKING_DATA,c,{genius_platform:"web"}))},set_annotation_opened_from_permalink:function(a){this.annotation_id_opened_from_permalink=a},set_song_page_loaded_from_direct_link_to_un_annotated_line:function(a){this.song_page_loaded_from_direct_link_to_un_annotated_line=
a}};$.extend(window.app,{tracking:new Tracking});$(function(){$(document.body).on("annotation:open","a[data-id]",function(){app.tracking.track("Open Annotation",{annotation_id:$(this).attr("data-id")})});$(document).on("click",".show_help:not(.pressed)",function(){app.tracking.track("opened_what_is_genius_dropdown",{standalone_annotation:0<$(this).closest(".stand_alone_annotation_container").length})})});
(function(){function a(a,b){if(a!==b){var c=null===a,d=a===s,e=a===a,f=null===b,g=b===s,h=b===b;if(a>b&&!f||!e||c&&!g&&h||d&&h)return 1;if(a<b&&!c||!h||f&&!d&&e||g&&e)return-1}return 0}function b(a,b,c){for(var d=a.length,e=c?d:-1;c?e--:++e<d;)if(b(a[e],e,a))return e;return-1}function c(a,b,c){if(b!==b)return m(a,c);c-=1;for(var d=a.length;++c<d;)if(a[c]===b)return c;return-1}function d(a){return"function"==typeof a||!1}function e(a){return"string"==typeof a?a:null==a?"":a+""}function f(a,b){for(var c=
-1,d=a.length;++c<d&&-1<b.indexOf(a.charAt(c)););return c}function h(a,b){for(var c=a.length;c--&&-1<b.indexOf(a.charAt(c)););return c}function g(b,c){return a(b.criteria,c.criteria)||b.index-c.index}function k(a){return vb[a]}function n(a){return Bb[a]}function q(a){return"\\"+ib[a]}function m(a,b,c){var d=a.length;for(b+=c?0:-1;c?b--:++b<d;){var e=a[b];if(e!==e)return b}return-1}function p(a){return!!a&&"object"==typeof a}function u(a){return 160>=a&&9<=a&&13>=a||32==a||160==a||5760==a||6158==a||
8192<=a&&(8202>=a||8232==a||8233==a||8239==a||8287==a||12288==a||65279==a)}function v(a,b){for(var c=-1,d=a.length,e=-1,f=[];++c<d;)a[c]===b&&(a[c]="__lodash_placeholder__",f[++e]=c);return f}function A(a){for(var b=-1,c=a.length;++b<c&&u(a.charCodeAt(b)););return b}function D(a){for(var b=a.length;b--&&u(a.charCodeAt(b)););return b}function x(a){return wb[a]}function B(u){function z(a){if(p(a)&&!ka(a)&&!(a instanceof da)){if(a instanceof va)return a;if(Ga.call(a,"__chain__")&&Ga.call(a,"__wrapped__"))return ee(a)}return new va(a)}
function Ua(){}function va(a,b,c){this.__wrapped__=a;this.__actions__=c||[];this.__chain__=!!b}function da(a){this.__wrapped__=a;this.__actions__=null;this.__dir__=1;this.__dropCount__=0;this.__filtered__=!1;this.__iteratees__=null;this.__takeCount__=se;this.__views__=null}function xa(){this.__data__={}}function Ya(a){var b=a?a.length:0;for(this.data={hash:Ed(null),set:new Ze};b--;)this.push(a[b])}function Va(a,b){var c=a.data;return("string"==typeof b||Ia(b)?c.set.has(b):c.hash[b])?0:-1}function ca(a,
b){var c=-1,d=a.length;for(b||(b=Ca(d));++c<d;)b[c]=a[c];return b}function ra(a,b){for(var c=-1,d=a.length;++c<d&&!1!==b(a[c],c,a););return a}function Pa(a,b){for(var c=-1,d=a.length;++c<d;)if(!b(a[c],c,a))return!1;return!0}function lb(a,b){for(var c=-1,d=a.length,e=-1,f=[];++c<d;){var g=a[c];b(g,c,a)&&(f[++e]=g)}return f}function za(a,b){for(var c=-1,d=a.length,e=Ca(d);++c<d;)e[c]=b(a[c],c,a);return e}function Wa(a,b,c,d){var e=-1,f=a.length;for(d&&f&&(c=a[++e]);++e<f;)c=b(c,a[e],e,a);return c}function Aa(a,
b){for(var c=-1,d=a.length;++c<d;)if(b(a[c],c,a))return!0;return!1}function O(a,b){return a===s?b:a}function mb(a,b,c,d){return a!==s&&Ga.call(d,c)?a:b}function ma(a,b,c){for(var d=-1,e=ob(b),f=e.length;++d<f;){var g=e[d],h=a[g],k=c(h,b[g],g,a,b);(k===k?k===h:h!==h)&&(h!==s||g in a)||(a[g]=k)}return a}function nb(a,b){return null==b?a:Ja(b,ob(b),a)}function Ba(a,b){for(var c=-1,d=null==a,e=!d&&cb(a),f=e?a.length:0,g=b.length,h=Ca(g);++c<g;){var k=b[c];h[c]=e?cc(k,f)?a[k]:s:d?s:a[k]}return h}function Ja(a,
b,c){c||(c={});for(var d=-1,e=b.length;++d<e;){var f=b[d];c[f]=a[f]}return c}function Oa(a,b,c){var d=typeof a;return"function"==d?b===s?a:sb(a,b,c):null==a?Rb:"object"==d?ib(a):b===s?kd(a):wc(a,b)}function Qa(a,b,c,d,e,f,g){var h;c&&(h=e?c(a,d,e):c(a));if(h!==s)return h;if(!Ia(a))return a;if(d=ka(a)){if(h=Le(a),!b)return ca(a,h)}else{var k=ab.call(a),m="[object Function]"==k;if("[object Object]"==k||"[object Arguments]"==k||m&&!e){if(h=nf(m?{}:a),!b)return nb(h,a)}else return ea[k]?mf(a,k,b):e?a:
{}}f||(f=[]);g||(g=[]);for(e=f.length;e--;)if(f[e]==a)return g[e];f.push(a);g.push(h);(d?ra:oa)(a,function(d,e){h[e]=Qa(d,b,c,e,a,f,g)});return h}function db(a,b,c){if("function"!=typeof a)throw new Db("Expected a function");return bb(function(){a.apply(s,c)},b)}function Ma(a,b){var d=a?a.length:0,e=[];if(!d)return e;var f=-1,g=Mc(),h=g==c,k=h&&200<=b.length?Hd(b):null,m=b.length;k&&(g=Va,h=!1,b=k);a:for(;++f<d;)if(k=a[f],h&&k===k){for(var n=m;n--;)if(b[n]===k)continue a;e.push(k)}else 0>g(b,k,0)&&
e.push(k);return e}function jb(a,b){var c=!0;Fb(a,function(a,d,e){return c=!!b(a,d,e)});return c}function kb(a,b,c,d){var e=d,f=e;Fb(a,function(a,g,h){g=+b(a,g,h);if(c(g,e)||g===d&&g===f)e=g,f=a});return f}function rb(a,b){var c=[];Fb(a,function(a,d,e){b(a,d,e)&&c.push(a)});return c}function xb(a,b,c,d){var e;c(a,function(a,c,f){if(b(a,c,f))return e=d?c:a,!1});return e}function Fa(a,b,c){for(var d=-1,e=a.length,f=-1,g=[];++d<e;){var h=a[d];if(p(h)&&cb(h)&&(c||ka(h)||kc(h))){b&&(h=Fa(h,b,c));for(var k=
-1,m=h.length;++k<m;)g[++f]=h[k]}else c||(g[++f]=h)}return g}function vb(a,b){return Xb(a,b,uc)}function oa(a,b){return Xb(a,b,ob)}function ga(a,b){return Ob(a,b,ob)}function Xa(a,b){for(var c=-1,d=b.length,e=-1,f=[];++c<d;){var g=b[c];Jc(a[g])&&(f[++e]=g)}return f}function Za(a,b,c){if(null!=a){c!==s&&c in Pb(a)&&(b=[c]);c=0;for(var d=b.length;null!=a&&c<d;)a=a[b[c++]];return c&&c==d?a:s}}function eb(a,b,c,d,e,f){if(a===b)return!0;if(null==a||null==b||!Ia(a)&&!p(b))return a!==a&&b!==b;a:{var g=eb,
h=ka(a),k=ka(b),m="[object Array]",n="[object Array]";h||(m=ab.call(a),"[object Arguments]"==m?m="[object Object]":"[object Object]"!=m&&(h=Sb(a)));k||(n=ab.call(b),"[object Arguments]"==n?n="[object Object]":"[object Object]"!=n&&Sb(b));var q="[object Object]"==m,k="[object Object]"==n,n=m==n;if(!n||h||q){if(!d&&(m=q&&Ga.call(a,"__wrapped__"),k=k&&Ga.call(b,"__wrapped__"),m||k)){a=g(m?a.value():a,k?b.value():b,c,d,e,f);break a}if(n){e||(e=[]);f||(f=[]);for(m=e.length;m--;)if(e[m]==a){a=f[m]==b;break a}e.push(a);
f.push(b);a=(h?Ie:wd)(a,b,g,c,d,e,f);e.pop();f.pop()}else a=!1}else a=Je(a,b,m)}return a}function Bb(a,b,c){var d=b.length,e=d,f=!c;if(null==a)return!e;for(a=Pb(a);d--;){var g=b[d];if(f&&g[2]?g[1]!==a[g[0]]:!(g[0]in a))return!1}for(;++d<e;){var g=b[d],h=g[0],k=a[h],m=g[1];if(f&&g[2]){if(k===s&&!(h in a))return!1}else if(g=c?c(k,m,h):s,g===s?!eb(m,k,c,!0):!g)return!1}return!0}function wb(a,b){var c=-1,d=cb(a)?Ca(a.length):[];Fb(a,function(a,e,f){d[++c]=b(a,e,f)});return d}function ib(a){var b=Ke(a);
if(1==b.length&&b[0][2]){var c=b[0][0],d=b[0][1];return function(a){return null==a?!1:a[c]===d&&(d!==s||c in Pb(a))}}return function(a){return Bb(a,b)}}function wc(a,b){var c=ka(a),d=Ac(a)&&b===b&&!Ia(b),e=a+"";a=nc(a);return function(f){if(null==f)return!1;var g=e;f=Pb(f);if(!(!c&&d||g in f)){f=1==a.length?f:Za(f,Ra(a,0,-1));if(null==f)return!1;g=Hc(a);f=Pb(f)}return f[g]===b?b!==s||g in f:eb(b,f[g],s,!0)}}function yd(a,b,c,d,e){if(!Ia(a))return a;var f=cb(b)&&(ka(b)||Sb(b)),g=f?null:ob(b);ra(g||
b,function(h,k){g&&(k=h,h=b[k]);if(p(h)){d||(d=[]);e||(e=[]);a:{for(var m=k,n=d,q=e,w=n.length,r=b[m];w--;)if(n[w]==r){a[m]=q[w];break a}var w=a[m],u=c?c(w,r,m,a,b):s,v=u===s;v&&(u=r,cb(r)&&(ka(r)||Sb(r))?u=ka(w)?w:cb(w)?ca(w):[]:jc(r)||kc(r)?u=kc(w)?Vb(w):jc(w)?w:{}:v=!1);n.push(r);q.push(u);if(v)a[m]=yd(u,r,c,n,q);else if(u===u?u!==w:w===w)a[m]=u}}else m=a[k],n=c?c(m,h,k,a,b):s,(q=n===s)&&(n=h),n===s&&(!f||k in a)||!q&&(n===n?n===m:m!==m)||(a[k]=n)});return a}function Bc(a){return function(b){return null==
b?s:b[a]}}function Lb(a){var b=a+"";a=nc(a);return function(c){return Za(c,a,b)}}function xc(a,b){for(var c=a?b.length:0;c--;){var d=b[c];if(d!=e&&cc(d)){var e=d;qe.call(a,d,1)}}return a}function Cc(a,b){return a+Eb(zb()*(b-a+1))}function gc(a,b,c,d,e){e(a,function(a,e,f){c=d?(d=!1,a):b(c,a,e,f)});return c}function Ra(a,b,c){var d=-1,e=a.length;b=null==b?0:+b||0;0>b&&(b=-b>e?0:e+b);c=c===s||c>e?e:+c||0;0>c&&(c+=e);e=b>c?0:c-b>>>0;b>>>=0;for(c=Ca(e);++d<e;)c[d]=a[d+b];return c}function zd(a,b){var c;
Fb(a,function(a,d,e){c=b(a,d,e);return!c});return!!c}function ed(a,b){var c=a.length;for(a.sort(b);c--;)a[c]=a[c].value;return a}function Ad(b,c,d){var e=pa(),f=-1;c=za(c,function(a){return e(a)});b=wb(b,function(a){return{criteria:za(c,function(b){return b(a)}),index:++f,value:a}});return ed(b,function(b,c){var e;a:{e=-1;for(var f=b.criteria,g=c.criteria,h=f.length,k=d.length;++e<h;){var m=a(f[e],g[e]);if(m){if(e>=k){e=m;break a}e=m*(d[e]?1:-1);break a}}e=b.index-c.index}return e})}function Oc(a,
b){var c=0;Fb(a,function(a,d,e){c+=+b(a,d,e)||0});return c}function hc(a,b){var d=-1,e=Mc(),f=a.length,g=e==c,h=g&&200<=f,k=h?Hd():null,m=[];k?(e=Va,g=!1):(h=!1,k=b?[]:m);a:for(;++d<f;){var n=a[d],q=b?b(n,d,a):n;if(g&&n===n){for(var p=k.length;p--;)if(k[p]===q)continue a;b&&k.push(q);m.push(n)}else 0>e(k,q,0)&&((b||h)&&k.push(q),m.push(n))}return m}function Pc(a,b){for(var c=-1,d=b.length,e=Ca(d);++c<d;)e[c]=a[b[c]];return e}function Mb(a,b,c,d){for(var e=a.length,f=d?e:-1;(d?f--:++f<e)&&b(a[f],f,
a););return c?Ra(a,d?0:f,d?f+1:e):Ra(a,d?f+1:0,d?e:f)}function zc(a,b){var c=a;c instanceof da&&(c=c.value());for(var d=-1,e=b.length;++d<e;){var c=[c],f=b[d];ke.apply(c,f.args);c=f.func.apply(f.thisArg,c)}return c}function tb(a,b,c){var d=0,e=a?a.length:d;if("number"==typeof b&&b===b&&2147483647>=e){for(;d<e;){var f=d+e>>>1,g=a[f];(c?g<=b:g<b)&&null!==g?d=f+1:e=f}return e}return $b(a,b,Rb,c)}function $b(a,b,c,d){b=c(b);for(var e=0,f=a?a.length:0,g=b!==b,h=null===b,k=b===s;e<f;){var m=Eb((e+f)/2),
n=c(a[m]),q=n!==s,p=n===n;(g?p||d:h?p&&q&&(d||null!=n):k?p&&(d||q):null==n?0:d?n<=b:n<b)?e=m+1:f=m}return Gb(f,4294967294)}function sb(a,b,c){if("function"!=typeof a)return Rb;if(b===s)return a;switch(c){case 1:return function(c){return a.call(b,c)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)};case 5:return function(c,d,e,f,g){return a.call(b,c,d,e,f,g)}}return function(){return a.apply(b,arguments)}}function gd(a){return gf.call(a,
0)}function Dc(a,b,c){for(var d=c.length,e=-1,f=Ha(a.length-d,0),g=-1,h=b.length,k=Ca(f+h);++g<h;)k[g]=b[g];for(;++e<d;)k[c[e]]=a[e];for(;f--;)k[g++]=a[e++];return k}function yc(a,b,c){for(var d=-1,e=c.length,f=-1,g=Ha(a.length-e,0),h=-1,k=b.length,m=Ca(g+k);++f<g;)m[f]=a[f];for(g=f;++h<k;)m[g+h]=b[h];for(;++d<e;)m[g+c[d]]=a[f++];return m}function Zb(a,b){return function(c,d,e){var f=b?b():{};d=pa(d,e,3);if(ka(c)){e=-1;for(var g=c.length;++e<g;){var h=c[e];a(f,h,d(h,e,c),c)}}else Fb(c,function(b,
c,e){a(f,b,d(b,c,e),e)});return f}}function Ec(a){return ta(function(b,c){var d=-1,e=null==b?0:c.length,f=2<e?c[e-2]:s,g=2<e?c[2]:s,h=1<e?c[e-1]:s;"function"==typeof f?(f=sb(f,h,5),e-=2):(f="function"==typeof h?h:s,e-=f?1:0);g&&ja(c[0],c[1],g)&&(f=3>e?s:f,e=1);for(;++d<e;)(g=c[d])&&a(b,g,f);return b})}function hd(a,b){return function(c,d){var e=c?qd(c):0;if(!Ub(e))return a(c,d);for(var f=b?e:-1,g=Pb(c);(b?f--:++f<e)&&!1!==d(g[f],f,g););return c}}function Qc(a){return function(b,c,d){var e=Pb(b);d=
d(b);for(var f=d.length,g=a?f:-1;a?g--:++g<f;){var h=d[g];if(!1===c(e[h],h,e))break}return b}}function Yb(a,b){function c(){return(this&&this!==Ta&&this instanceof c?d:a).apply(b,arguments)}var d=vc(a);return c}function Tb(a){return function(b){var c=-1;b=he(qc(b));for(var d=b.length,e="";++c<d;)e=a(e,b[c],c);return e}}function vc(a){return function(){var b=arguments;switch(b.length){case 0:return new a;case 1:return new a(b[0]);case 2:return new a(b[0],b[1]);case 3:return new a(b[0],b[1],b[2]);case 4:return new a(b[0],
b[1],b[2],b[3]);case 5:return new a(b[0],b[1],b[2],b[3],b[4])}var c=P(a.prototype),b=a.apply(c,b);return Ia(b)?b:c}}function td(a){function b(c,d,e){e&&ja(c,d,e)&&(d=null);c=bc(c,a,null,null,null,null,null,d);c.placeholder=b.placeholder;return c}return b}function ud(a,b){return function(c,d,e){e&&ja(c,d,e)&&(d=null);d=pa(d,e,3);if(1==d.length){e=c=ce(c);for(var f=d,g=-1,h=e.length,k=b,m=k;++g<h;){var n=e[g],q=+f(n);a(q,k)&&(k=q,m=n)}e=m;if(!c.length||e!==b)return e}return kb(c,d,a,b)}}function vd(a,
c){return function(d,e,f){e=pa(e,f,3);return ka(d)?(e=b(d,e,c),-1<e?d[e]:s):xb(d,e,a)}}function Ud(a){return function(c,d,e){if(!c||!c.length)return-1;d=pa(d,e,3);return b(c,d,a)}}function cd(a){return function(b,c,d){c=pa(c,d,3);return xb(b,c,a,!0)}}function Vd(a){return function(){for(var b,c=arguments.length,d=a?c:-1,e=0,f=Ca(c);a?d--:++d<c;){var g=f[e++]=arguments[d];if("function"!=typeof g)throw new Db("Expected a function");!b&&va.prototype.thru&&"wrapper"==Lc(g)&&(b=new va([]))}for(d=b?-1:
c;++d<c;){var g=f[d],e=Lc(g),h="wrapper"==e?Jd(g):null;b=h&&ae(h[0])&&424==h[1]&&!h[4].length&&1==h[9]?b[Lc(h[0])].apply(b,h[3]):1==g.length&&ae(g)?b[e]():b.thru(g)}return function(){var a=arguments;if(b&&1==a.length&&ka(a[0]))return b.plant(a[0]).value();for(var d=0,a=c?f[d].apply(this,a):a[0];++d<c;)a=f[d].call(this,a);return a}}}function Ee(a,b){return function(c,d,e){return"function"==typeof d&&e===s&&ka(c)?a(c,d):b(c,sb(d,e,3))}}function Fe(a){return function(b,c,d){if("function"!=typeof c||
d!==s)c=sb(c,d,3);return a(b,c,uc)}}function ac(a){return function(b,c,d){if("function"!=typeof c||d!==s)c=sb(c,d,3);return a(b,c)}}function Ib(a){return function(b,c,d){var e={};c=pa(c,d,3);oa(b,function(b,d,f){f=c(b,d,f);d=a?f:d;b=a?b:f;e[d]=b});return e}}function Xd(a){return function(b,c,d){b=e(b);return(a?b:"")+Zd(b,c,d)+(a?"":b)}}function Ge(a){var b=ta(function(c,d){var e=v(d,b.placeholder);return bc(c,a,null,d,e)});return b}function Yd(a,b){return function(c,d,e,f){var g=3>arguments.length;
return"function"==typeof d&&f===s&&ka(c)?a(c,d,e,g):gc(c,pa(d,f,4),e,g,b)}}function Na(a,b,c,d,e,f,g,h,k,m){function n(){for(var A=arguments.length,z=A,R=Ca(A);z--;)R[z]=arguments[z];d&&(R=Dc(R,d,e));f&&(R=yc(R,f,g));if(r||B){var z=n.placeholder,U=v(R,z),A=A-U.length;if(A<m){var C=h?ca(h):null,A=Ha(m-A,0),D=r?U:null,U=r?null:U,E=r?R:null,R=r?null:R;b|=r?32:64;b&=~(r?64:32);u||(b&=-4);R=[a,b,c,E,D,R,U,C,k,A];C=Na.apply(s,R);ae(a)&&cf(C,R);C.placeholder=z;return C}}z=p?c:this;C=w?z[a]:a;if(h)for(A=
R.length,D=Gb(h.length,A),U=ca(R);D--;)E=h[D],R[D]=cc(E,A)?U[E]:s;q&&k<R.length&&(R.length=k);this&&this!==Ta&&this instanceof n&&(C=x||vc(a));return C.apply(z,R)}var q=b&128,p=b&1,w=b&2,r=b&8,u=b&4,B=b&16,x=w?null:vc(a);return n}function Zd(a,b,c){a=a.length;b=+b;if(a>=b||!Zc(b))return"";b-=a;c=null==c?" ":c+"";return id(c,Qd(b/c.length)).slice(0,b)}function He(a,b,c,d){function e(){for(var b=-1,h=arguments.length,k=-1,m=d.length,n=Ca(h+m);++k<m;)n[k]=d[k];for(;h--;)n[k++]=arguments[++b];return(this&&
this!==Ta&&this instanceof e?g:a).apply(f?c:this,n)}var f=b&1,g=vc(a);return e}function $d(a){return function(b,c,d,e){var f=pa(d);return null==d&&f===Oa?tb(b,c,a):$b(b,c,f(d,e,1),a)}}function bc(a,b,c,d,e,f,g,h){var k=b&2;if(!k&&"function"!=typeof a)throw new Db("Expected a function");var m=d?d.length:0;m||(b&=-97,d=e=null);m-=e?e.length:0;if(b&64){var n=d,q=e;d=e=null}var p=k?null:Jd(a);c=[a,b,c,d,e,n,q,f,g,h];if(p){d=c[1];b=p[1];h=d|b;e=128==b&&8==d||128==b&&256==d&&c[7].length<=p[8]||384==b&&
8==d;if(128>h||e){b&1&&(c[2]=p[2],h|=d&1?0:4);if(d=p[3])e=c[3],c[3]=e?Dc(e,d,p[4]):ca(d),c[4]=e?v(c[3],"__lodash_placeholder__"):ca(p[4]);if(d=p[5])e=c[5],c[5]=e?yc(e,d,p[6]):ca(d),c[6]=e?v(c[5],"__lodash_placeholder__"):ca(p[6]);(d=p[7])&&(c[7]=ca(d));b&128&&(c[8]=null==c[8]?p[8]:Gb(c[8],p[8]));null==c[9]&&(c[9]=p[9]);c[0]=p[0];c[1]=h}b=c[1];h=c[9]}c[9]=null==h?k?0:a.length:Ha(h-m,0)||0;a=1==b?Yb(c[0],c[2]):32!=b&&33!=b||c[4].length?Na.apply(s,c):He.apply(s,c);return(p?fb:cf)(a,c)}function Ie(a,
b,c,d,e,f,g){var h=-1,k=a.length,m=b.length;if(k!=m&&!(e&&m>k))return!1;for(;++h<k;){var n=a[h],m=b[h],q=d?d(e?m:n,e?n:m,h):s;if(q!==s){if(q)continue;return!1}if(e){if(!Aa(b,function(a){return n===a||c(n,a,d,e,f,g)}))return!1}else if(n!==m&&!c(n,m,d,e,f,g))return!1}return!0}function Je(a,b,c){switch(c){case "[object Boolean]":case "[object Date]":return+a==+b;case "[object Error]":return a.name==b.name&&a.message==b.message;case "[object Number]":return a!=+a?b!=+b:a==+b;case "[object RegExp]":case "[object String]":return a==
b+""}return!1}function wd(a,b,c,d,e,f,g){var h=ob(a),k=h.length,m=ob(b).length;if(k!=m&&!e)return!1;for(m=k;m--;){var n=h[m];if(!(e?n in b:Ga.call(b,n)))return!1}for(var q=e;++m<k;){var n=h[m],p=a[n],w=b[n],r=d?d(e?w:p,e?p:w,n):s;if(r===s?!c(p,w,d,e,f,g):!r)return!1;q||(q="constructor"==n)}return q||(c=a.constructor,d=b.constructor,!(c!=d&&"constructor"in a&&"constructor"in b)||"function"==typeof c&&c instanceof c&&"function"==typeof d&&d instanceof d)?!0:!1}function pa(a,b,c){var d=z.callback||ya,
d=d===ya?Oa:d;return c?d(a,b,c):d}function Lc(a){for(var b=a.name,c=Rd[b],d=c?c.length:0;d--;){var e=c[d],f=e.func;if(null==f||f==a)return e.name}return b}function Mc(a,b,d){var e=z.indexOf||fd,e=e===fd?c:e;return a?e(a,b,d):e}function Ke(a){a=Wb(a);for(var b=a.length;b--;){var c=a[b],d;d=a[b][1];d=d===d&&!Ia(d);c[2]=d}return a}function Ab(a,b){var c=null==a?s:a[b];return ef(c)?c:s}function Le(a){var b=a.length,c=new a.constructor(b);b&&"string"==typeof a[0]&&Ga.call(a,"index")&&(c.index=a.index,
c.input=a.input);return c}function nf(a){a=a.constructor;"function"==typeof a&&a instanceof a||(a=sc);return new a}function mf(a,b,c){var d=a.constructor;switch(b){case "[object ArrayBuffer]":return gd(a);case "[object Boolean]":case "[object Date]":return new d(+a);case "[object Float32Array]":case "[object Float64Array]":case "[object Int8Array]":case "[object Int16Array]":case "[object Int32Array]":case "[object Uint8Array]":case "[object Uint8ClampedArray]":case "[object Uint16Array]":case "[object Uint32Array]":return b=
a.buffer,new d(c?gd(b):b,a.byteOffset,a.length);case "[object Number]":case "[object String]":return new d(a);case "[object RegExp]":var e=new d(a.source,ua.exec(a));e.lastIndex=a.lastIndex}return e}function Wd(a,b,c){null==a||Ac(b,a)||(b=nc(b),a=1==b.length?a:Za(a,Ra(b,0,-1)),b=Hc(b));b=null==a?a:a[b];return null==b?s:b.apply(a,c)}function cb(a){return null!=a&&Ub(qd(a))}function cc(a,b){a="number"==typeof a||pb.test(a)?+a:-1;return-1<a&&0==a%1&&a<(null==b?9007199254740991:b)}function ja(a,b,c){if(!Ia(c))return!1;
var d=typeof b;return("number"==d?cb(c)&&cc(b,c.length):"string"==d&&b in c)?(b=c[b],a===a?a===b:b!==b):!1}function Ac(a,b){var c=typeof a;return"string"==c&&r.test(a)||"number"==c?!0:ka(a)?!1:!aa.test(a)||null!=b&&a in Pb(b)}function ae(a){var b=Lc(a);if(!(b in da.prototype))return!1;b=z[b];if(a===b)return!0;b=Jd(b);return!!b&&a===b[0]}function Ub(a){return"number"==typeof a&&-1<a&&0==a%1&&9007199254740991>=a}function Me(a,b){a=Pb(a);for(var c=-1,d=b.length,e={};++c<d;){var f=b[c];f in a&&(e[f]=
a[f])}return e}function Ne(a,b){var c={};vb(a,function(a,d,e){b(a,d,e)&&(c[d]=a)});return c}function dc(a){var b;if(!p(a)||"[object Object]"!=ab.call(a)||!(Ga.call(a,"constructor")||(b=a.constructor,"function"!=typeof b||b instanceof b)))return!1;var c;vb(a,function(a,b){c=b});return c===s||Ga.call(a,c)}function be(a){for(var b=uc(a),c=b.length,d=c&&a.length,e=!!d&&Ub(d)&&(ka(a)||kc(a)),f=-1,g=[];++f<c;){var h=b[f];(e&&cc(h,d)||Ga.call(a,h))&&g.push(h)}return g}function ce(a){return null==a?[]:cb(a)?
Ia(a)?a:sc(a):jd(a)}function Pb(a){return Ia(a)?a:sc(a)}function nc(a){if(ka(a))return a;var b=[];e(a).replace(W,function(a,c,d,e){b.push(d?e.replace(R,"$1"):c||a)});return b}function ee(a){return a instanceof da?a.clone():new va(a.__wrapped__,a.__chain__,ca(a.__actions__))}function Oe(a,b,c){if(!a||!a.length)return[];if(c?ja(a,b,c):null==b)b=1;return Ra(a,0>b?0:b)}function Pe(a,b,c){var d=a?a.length:0;if(!d)return[];if(c?ja(a,b,c):null==b)b=1;b=d-(+b||0);return Ra(a,0,0>b?0:b)}function oc(a){return a?
a[0]:s}function fd(a,b,d){var e=a?a.length:0;if(!e)return-1;if("number"==typeof d)d=0>d?Ha(e+d,0):d;else if(d)return d=tb(a,b),a=a[d],(b===b?b===a:a!==a)?d:-1;return c(a,b,d||0)}function Hc(a){var b=a?a.length:0;return b?a[b-1]:s}function we(a){return Oe(a,1)}function xe(a,b,d,e){if(!a||!a.length)return[];null!=b&&"boolean"!=typeof b&&(e=d,d=ja(a,b,e)?null:b,b=!1);var f=pa();if(null!=d||f!==Oa)d=f(d,e,3);if(b&&Mc()==c){b=d;var g;d=-1;e=a.length;for(var f=-1,h=[];++d<e;){var k=a[d],m=b?b(k,d,a):k;
d&&g===m||(g=m,h[++f]=k)}a=h}else a=hc(a,d);return a}function $c(a){if(!a||!a.length)return[];var b=-1,c=0;a=lb(a,function(a){if(cb(a))return c=Ha(a.length,c),!0});for(var d=Ca(c);++b<c;)d[b]=za(a,Bc(b));return d}function gb(a,b,c){if(!a||!a.length)return[];a=$c(a);if(null==b)return a;b=sb(b,c,4);return za(a,function(a){return Wa(a,b,s,!0)})}function pd(a,b){var c=-1,d=a?a.length:0,e={};for(!d||b||ka(a[0])||(b=[]);++c<d;){var f=a[c];b?e[f]=b[c]:f&&(e[f[0]]=f[1])}return e}function ye(a){a=z(a);a.__chain__=
!0;return a}function ze(a,b,c){return b.call(c,a)}function Kd(a,b,c){var d=ka(a)?Pa:jb;c&&ja(a,b,c)&&(b=null);if("function"!=typeof b||c!==s)b=pa(b,c,3);return d(a,b)}function Id(a,b,c){var d=ka(a)?lb:rb;b=pa(b,c,3);return d(a,b)}function ue(a,b,c,d){var e=a?qd(a):0;Ub(e)||(a=jd(a),e=a.length);if(!e)return!1;c="number"!=typeof c||d&&ja(b,c,d)?0:0>c?Ha(e+c,0):c||0;return"string"==typeof a||!ka(a)&&Uc(a)?c<e&&-1<a.indexOf(b,c):-1<Mc(a,b,c)}function ve(a,b,c){var d=ka(a)?za:wb;b=pa(b,c,3);return d(a,
b)}function od(a,b,c){if(c?ja(a,b,c):null==b){a=ce(a);var d=a.length;return 0<d?a[Cc(0,d-1)]:s}c=-1;a=Cb(a);var d=a.length,e=d-1;for(b=Gb(0>b?0:+b||0,d);++c<b;){var d=Cc(c,e),f=a[d];a[d]=a[c];a[c]=f}a.length=b;return a}function tc(a,b,c){var d=ka(a)?Aa:zd;c&&ja(a,b,c)&&(b=null);if("function"!=typeof b||c!==s)b=pa(b,c,3);return d(a,b)}function Ae(a,b){var c;if("function"!=typeof b)if("function"==typeof a){var d=a;a=b;b=d}else throw new Db("Expected a function");return function(){0<--a&&(c=b.apply(this,
arguments));1>=a&&(b=null);return c}}function Nd(a,b,c){function d(){var c=b-(Wc()-m);0>=c||c>b?(h&&Gc(h),c=p,h=q=p=s,c&&(w=Wc(),k=a.apply(n,g),q||h||(g=n=null))):q=bb(d,c)}function e(){q&&Gc(q);h=q=p=s;if(u||r!==b)w=Wc(),k=a.apply(n,g),q||h||(g=n=null)}function f(){g=arguments;m=Wc();n=this;p=u&&(q||!v);if(!1===r)var c=v&&!q;else{h||v||(w=m);var M=r-(m-w),s=0>=M||M>r;s?(h&&(h=Gc(h)),w=m,k=a.apply(n,g)):h||(h=bb(e,M))}s&&q?q=Gc(q):q||b===r||(q=bb(d,b));c&&(s=!0,k=a.apply(n,g));!s||q||h||(g=n=null);
return k}var g,h,k,m,n,q,p,w=0,r=!1,u=!0;if("function"!=typeof a)throw new Db("Expected a function");b=0>b?0:+b||0;if(!0===c)var v=!0,u=!1;else Ia(c)&&(v=c.leading,r="maxWait"in c&&Ha(+c.maxWait||0,b),u="trailing"in c?c.trailing:u);f.cancel=function(){q&&Gc(q);h&&Gc(h);h=q=p=s};return f}function Ic(a,b){if("function"!=typeof a||b&&"function"!=typeof b)throw new Db("Expected a function");var c=function(){var d=arguments,e=b?b.apply(this,d):d[0],f=c.cache;if(f.has(e))return f.get(e);d=a.apply(this,
d);c.cache=f.set(e,d);return d};c.cache=new Ic.Cache;return c}function ta(a,b){if("function"!=typeof a)throw new Db("Expected a function");b=Ha(b===s?a.length-1:+b||0,0);return function(){for(var c=arguments,d=-1,e=Ha(c.length-b,0),f=Ca(e);++d<e;)f[d]=c[b+d];switch(b){case 0:return a.call(this,f);case 1:return a.call(this,c[0],f);case 2:return a.call(this,c[0],c[1],f)}e=Ca(b+1);for(d=-1;++d<b;)e[d]=c[d];e[b]=f;return a.apply(this,e)}}function bd(a,b){return a>b}function kc(a){return p(a)&&cb(a)&&
"[object Arguments]"==ab.call(a)}function Be(a){return!!a&&1===a.nodeType&&p(a)&&-1<ab.call(a).indexOf("Element")}function Pd(a,b,c,d){d=(c="function"==typeof c?sb(c,d,3):s)?c(a,b):s;return d===s?eb(a,b,c):!!d}function Md(a){return p(a)&&"string"==typeof a.message&&"[object Error]"==ab.call(a)}function Ia(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}function ef(a){return null==a?!1:"[object Function]"==ab.call(a)?Pf.test(Nb.call(a)):p(a)&&ub.test(a)}function sa(a){return"number"==typeof a||
p(a)&&"[object Number]"==ab.call(a)}function Rc(a){return p(a)&&"[object RegExp]"==ab.call(a)}function Uc(a){return"string"==typeof a||p(a)&&"[object String]"==ab.call(a)}function Sb(a){return p(a)&&Ub(a.length)&&!!ha[ab.call(a)]}function Z(a,b){return a<b}function Cb(a){var b=a?qd(a):0;return Ub(b)?b?ca(a):[]:jd(a)}function Vb(a){return Ja(a,uc(a))}function re(a){return Xa(a,uc(a))}function uc(a){if(null==a)return[];Ia(a)||(a=sc(a));for(var b=a.length,b=b&&Ub(b)&&(ka(a)||kc(a))&&b||0,c=a.constructor,
d=-1,c="function"==typeof c&&c.prototype===a,e=Ca(b),f=0<b;++d<b;)e[d]=d+"";for(var g in a)f&&cc(g,b)||"constructor"==g&&(c||!Ga.call(a,g))||e.push(g);return e}function Wb(a){a=Pb(a);for(var b=-1,c=ob(a),d=c.length,e=Ca(d);++b<d;){var f=c[b];e[b]=[f,a[f]]}return e}function jd(a){return Pc(a,ob(a))}function qc(a){return(a=e(a))&&a.replace(V,k).replace(w,"")}function yb(a){return(a=e(a))&&la.test(a)?a.replace(ba,"\\$&"):a}function Vc(a,b,c){c&&ja(a,b,c)&&(b=0);return Ce(a,b)}function id(a,b){var c=
"";a=e(a);b=+b;if(1>b||!a||!Zc(b))return c;do b%2&&(c+=a),b=Eb(b/2),a+=a;while(b);return c}function ia(a,b,c){var d=a;a=e(a);if(!a)return a;if(c?ja(d,b,c):null==b)return a.slice(A(a),D(a)+1);b+="";return a.slice(f(a,b),h(a,b)+1)}function he(a,b,c){c&&ja(a,b,c)&&(b=null);a=e(a);return a.match(b||Jb)||[]}function ya(a,b,c){c&&ja(a,b,c)&&(b=null);return p(a)?ld(a):Oa(a,b)}function Gd(a){return function(){return a}}function Rb(a){return a}function ld(a){return ib(Qa(a,!0))}function rc(a,b,c){if(null==
c){var d=Ia(b),e=d?ob(b):null;((e=e&&e.length?Xa(b,e):null)?e.length:d)||(e=!1,c=b,b=a,a=this)}e||(e=Xa(b,ob(b)));var f=!0,d=-1,g=Jc(a),h=e.length;!1===c?f=!1:Ia(c)&&"chain"in c&&(f=c.chain);for(;++d<h;){c=e[d];var k=b[c];a[c]=k;g&&(a.prototype[c]=function(b){return function(){var c=this.__chain__;if(f||c){var d=a(this.__wrapped__);(d.__actions__=ca(this.__actions__)).push({func:b,args:arguments,thisArg:a});d.__chain__=c;return d}c=[this.value()];ke.apply(c,arguments);return b.apply(a,c)}}(k))}return a}
function Qe(){}function kd(a){return Ac(a)?Bc(a):Lb(a)}u=u?Y.defaults(Ta.Object(),u,Y.pick(Ta,qb)):Ta;var Ca=u.Array,Qb=u.Date,Sc=u.Error,Se=u.Function,ic=u.Math,oe=u.Number,sc=u.Object,le=u.RegExp,ff=u.String,Db=u.TypeError,ne=Ca.prototype,Cd=sc.prototype,Qf=ff.prototype,me=(me=u.window)?me.document:null,Nb=Se.prototype.toString,Ga=Cd.hasOwnProperty,Dd=0,ab=Cd.toString,$e=u._,Pf=le("^"+yb(Nb.call(Ga)).replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Xc=Ab(u,"ArrayBuffer"),
gf=Ab(Xc&&new Xc(0),"slice"),Qd=ic.ceil,Gc=u.clearTimeout,Eb=ic.floor,sd=Ab(sc,"getPrototypeOf"),Of=u.parseFloat,ke=ne.push,Ze=Ab(u,"Set"),bb=u.setTimeout,qe=ne.splice,md=Ab(u,"Uint8Array"),pe=Ab(u,"WeakMap"),Yc=function(){try{var a=Ab(u,"Float64Array"),b=new a(new Xc(10),0,1)&&a}catch(c){}return b||null}(),Ed=Ab(sc,"create"),Sf=Ab(Ca,"isArray"),Zc=u.isFinite,af=Ab(sc,"keys"),Ha=ic.max,Gb=ic.min,Tf=Ab(Qb,"now"),Fd=Ab(oe,"isFinite"),Ce=u.parseInt,zb=ic.random,Uf=oe.NEGATIVE_INFINITY,se=oe.POSITIVE_INFINITY,
bf=Yc?Yc.BYTES_PER_ELEMENT:0,Kc=pe&&new pe,Rd={},nd=z.support={};(function(a){var b=function(){this.x=a},c=[];b.prototype={valueOf:a,y:a};for(var d in new b)c.push(d);try{nd.dom=11===me.createDocumentFragment().nodeType}catch(e){nd.dom=!1}})(1,0);z.templateSettings={escape:T,evaluate:E,interpolate:X,variable:"",imports:{_:z}};var P=function(){function a(){}return function(b){if(Ia(b)){a.prototype=b;var c=new a;a.prototype=null}return c||{}}}(),Fb=hd(oa),te=hd(ga,!0),Xb=Qc(),Ob=Qc(!0),fb=Kc?function(a,
b){Kc.set(a,b);return a}:Rb;gf||(gd=Xc&&md?function(a){var b=a.byteLength,c=Yc?Eb(b/bf):0,d=c*bf,e=new Xc(b);if(c){var f=new Yc(e,0,c);f.set(new Yc(a,0,c))}b!=d&&(f=new md(e,d),f.set(new md(a,d)));return e}:Gd(null));var Hd=Ed&&Ze?function(a){return new Ya(a)}:Gd(null),Jd=Kc?function(a){return Kc.get(a)}:Qe,qd=Bc("length"),cf=function(){var a=0,b=0;return function(c,d){var e=Wc(),f=16-(e-b);b=e;if(0<f){if(150<=++a)return c}else a=0;return fb(c,d)}}(),Xf=ta(function(a,b){return cb(a)?Ma(a,Fa(b,!1,
!0)):[]}),Vf=Ud(),Wf=Ud(!0),of=ta(function(a){for(var b=a.length,d=b,e=Ca(n),f=Mc(),g=f==c,h=[];d--;){var k=a[d]=cb(k=a[d])?k:[];e[d]=g&&120<=k.length?Hd(d&&k):null}var g=a[0],m=-1,n=g?g.length:0,q=e[0];a:for(;++m<n;)if(k=g[m],0>(q?Va(q,k):f(h,k,0))){for(d=b;--d;){var p=e[d];if(0>(p?Va(p,k):f(a[d],k,0)))continue a}q&&q.push(k);h.push(k)}return h}),Bd=ta(function(b,c){c=Fa(c);var d=Ba(b,c);xc(b,c.sort(a));return d}),Ld=$d(),hf=$d(!0),pf=ta(function(a){return hc(Fa(a,!1,!0))}),xf=ta(function(a,b){return cb(a)?
Ma(a,b):[]}),Yf=ta($c),Zf=ta(function(a){var b=a.length,c=2<b?a[b-2]:s,d=1<b?a[b-1]:s;2<b&&"function"==typeof c?b-=2:(c=1<b&&"function"==typeof d?(--b,d):s,d=s);a.length=b;return gb(a,c,d)}),$f=ta(function(a,b){return Ba(a,Fa(b))}),ag=Zb(function(a,b,c){Ga.call(a,c)?++a[c]:a[c]=1}),Sd=vd(Fb),jf=vd(te,!0),Td=Ee(ra,Fb),De=Ee(function(a,b){for(var c=a.length;c--&&!1!==b(a[c],c,a););return a},te),kf=Zb(function(a,b,c){Ga.call(a,c)?a[c].push(b):a[c]=[b]}),lf=Zb(function(a,b,c){a[c]=b}),Te=ta(function(a,
b,c){var d=-1,e="function"==typeof b,f=Ac(b),g=cb(a)?Ca(a.length):[];Fb(a,function(a){var h=e?b:f&&null!=a?a[b]:null;g[++d]=h?h.apply(a,c):Wd(a,b,c)});return g}),bg=Zb(function(a,b,c){a[c?0:1].push(b)},function(){return[[],[]]}),je=Yd(Wa,Fb),Ve=Yd(function(a,b,c,d){var e=a.length;for(d&&e&&(c=a[--e]);e--;)c=b(c,a[e],e,a);return c},te),sf=ta(function(a,b){if(null==a)return[];var c=b[2];c&&ja(b[0],b[1],c)&&(b.length=1);return Ad(a,Fa(b),[])}),Wc=Tf||function(){return(new Qb).getTime()},Xe=ta(function(a,
b,c){var d=1;if(c.length)var e=v(c,Xe.placeholder),d=d|32;return bc(a,d,b,c,e)}),tf=ta(function(a,b){b=b.length?Fa(b):re(a);for(var c=-1,d=b.length;++c<d;){var e=b[c];a[e]=bc(a[e],1,a)}return a}),We=ta(function(a,b,c){var d=3;if(c.length)var e=v(c,We.placeholder),d=d|32;return bc(b,d,a,c,e)}),uf=td(8),vf=td(16),wf=ta(function(a,b){return db(a,1,b)}),Ye=ta(function(a,b,c){return db(a,b,c)}),cg=Vd(),ie=Vd(!0),zf=Ge(32),Nf=Ge(64),Af=ta(function(a,b){return bc(a,256,null,null,null,Fa(b))}),ka=Sf||function(a){return p(a)&&
Ub(a.length)&&"[object Array]"==ab.call(a)};nd.dom||(Be=function(a){return!!a&&1===a.nodeType&&p(a)&&!jc(a)});var rd=Fd||function(a){return"number"==typeof a&&Zc(a)},Jc=d(/x/)||md&&!d(md)?function(a){return"[object Function]"==ab.call(a)}:d,jc=sd?function(a){if(!a||"[object Object]"!=ab.call(a))return!1;var b=Ab(a,"valueOf"),c=b&&(c=sd(b))&&sd(c);return c?a==c||sd(a)==c:dc(a)}:dc,ad=Ec(function(a,b,c){return c?ma(a,b,c):nb(a,b)}),df=ta(function(a){var b=a[0];if(null==b)return b;a.push(O);return ad.apply(s,
a)}),Od=cd(oa),dg=cd(ga),Lf=Fe(Xb),eg=Fe(Ob),Mf=ac(oa),Bf=ac(ga),ob=af?function(a){var b=null==a?null:a.constructor;return"function"==typeof b&&b.prototype===a||"function"!=typeof a&&cb(a)?be(a):Ia(a)?af(a):[]}:be,fg=Ib(!0),Jf=Ib(),Cf=Ec(yd),Df=ta(function(a,b){if(null==a)return{};if("function"!=typeof b[0])return b=za(Fa(b),ff),Me(a,Ma(uc(a),b));var c=sb(b[0],b[1],3);return Ne(a,function(a,b,d){return!c(a,b,d)})}),Ef=ta(function(a,b){return null==a?{}:"function"==typeof b[0]?Ne(a,sb(b[0],b[1],3)):
Me(a,Fa(b))}),yf=Tb(function(a,b,c){b=b.toLowerCase();return a+(c?b.charAt(0).toUpperCase()+b.slice(1):b)}),Ff=Tb(function(a,b,c){return a+(c?"-":"")+b.toLowerCase()}),Gf=Xd(),Hf=Xd(!0);8!=Ce(" \t\x0B\f\u00a0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u300008")&&(Vc=function(a,b,c){(c?ja(a,b,c):null==b)?b=0:b&&(b=+b);a=ia(a);return Ce(a,b||(wa.test(a)?16:10))});var If=Tb(function(a,b,c){return a+(c?"_":"")+b.toLowerCase()}),Kf=Tb(function(a,
b,c){return a+(c?" ":"")+(b.charAt(0).toUpperCase()+b.slice(1))}),Ue=ta(function(a,b){try{return a.apply(s,b)}catch(c){return Md(c)?c:new Sc(c)}}),gg=ta(function(a,b){return function(c){return Wd(c,a,b)}}),hg=ta(function(a,b){return function(c){return Wd(a,c,b)}}),qf=ud(bd,Uf),rf=ud(Z,se);z.prototype=Ua.prototype;va.prototype=P(Ua.prototype);va.prototype.constructor=va;da.prototype=P(Ua.prototype);da.prototype.constructor=da;xa.prototype["delete"]=function(a){return this.has(a)&&delete this.__data__[a]};
xa.prototype.get=function(a){return"__proto__"==a?s:this.__data__[a]};xa.prototype.has=function(a){return"__proto__"!=a&&Ga.call(this.__data__,a)};xa.prototype.set=function(a,b){"__proto__"!=a&&(this.__data__[a]=b);return this};Ya.prototype.push=function(a){var b=this.data;"string"==typeof a||Ia(a)?b.set.add(a):b.hash[a]=!0};Ic.Cache=xa;z.after=function(a,b){if("function"!=typeof b)if("function"==typeof a){var c=a;a=b;b=c}else throw new Db("Expected a function");a=Zc(a=+a)?a:0;return function(){if(1>
--a)return b.apply(this,arguments)}};z.ary=function(a,b,c){c&&ja(a,b,c)&&(b=null);b=a&&null==b?a.length:Ha(+b||0,0);return bc(a,128,null,null,null,null,b)};z.assign=ad;z.at=$f;z.before=Ae;z.bind=Xe;z.bindAll=tf;z.bindKey=We;z.callback=ya;z.chain=ye;z.chunk=function(a,b,c){b=(c?ja(a,b,c):null==b)?1:Ha(+b||1,1);c=0;for(var d=a?a.length:0,e=-1,f=Ca(Qd(d/b));c<d;)f[++e]=Ra(a,c,c+=b);return f};z.compact=function(a){for(var b=-1,c=a?a.length:0,d=-1,e=[];++b<c;){var f=a[b];f&&(e[++d]=f)}return e};z.constant=
Gd;z.countBy=ag;z.create=function(a,b,c){var d=P(a);c&&ja(a,b,c)&&(b=null);return b?nb(d,b):d};z.curry=uf;z.curryRight=vf;z.debounce=Nd;z.defaults=df;z.defer=wf;z.delay=Ye;z.difference=Xf;z.drop=Oe;z.dropRight=Pe;z.dropRightWhile=function(a,b,c){return a&&a.length?Mb(a,pa(b,c,3),!0,!0):[]};z.dropWhile=function(a,b,c){return a&&a.length?Mb(a,pa(b,c,3),!0):[]};z.fill=function(a,b,c,d){var e=a?a.length:0;if(!e)return[];c&&"number"!=typeof c&&ja(a,b,c)&&(c=0,d=e);e=a.length;c=null==c?0:+c||0;0>c&&(c=
-c>e?0:e+c);d=d===s||d>e?e:+d||0;0>d&&(d+=e);e=c>d?0:d>>>0;for(c>>>=0;c<e;)a[c++]=b;return a};z.filter=Id;z.flatten=function(a,b,c){var d=a?a.length:0;c&&ja(a,b,c)&&(b=!1);return d?Fa(a,b):[]};z.flattenDeep=function(a){return a&&a.length?Fa(a,!0):[]};z.flow=cg;z.flowRight=ie;z.forEach=Td;z.forEachRight=De;z.forIn=Lf;z.forInRight=eg;z.forOwn=Mf;z.forOwnRight=Bf;z.functions=re;z.groupBy=kf;z.indexBy=lf;z.initial=function(a){return Pe(a,1)};z.intersection=of;z.invert=function(a,b,c){c&&ja(a,b,c)&&(b=
null);c=-1;for(var d=ob(a),e=d.length,f={};++c<e;){var g=d[c],h=a[g];b?Ga.call(f,h)?f[h].push(g):f[h]=[g]:f[h]=g}return f};z.invoke=Te;z.keys=ob;z.keysIn=uc;z.map=ve;z.mapKeys=fg;z.mapValues=Jf;z.matches=ld;z.matchesProperty=function(a,b){return wc(a,Qa(b,!0))};z.memoize=Ic;z.merge=Cf;z.method=gg;z.methodOf=hg;z.mixin=rc;z.negate=function(a){if("function"!=typeof a)throw new Db("Expected a function");return function(){return!a.apply(this,arguments)}};z.omit=Df;z.once=function(a){return Ae(2,a)};z.pairs=
Wb;z.partial=zf;z.partialRight=Nf;z.partition=bg;z.pick=Ef;z.pluck=function(a,b){return ve(a,kd(b))};z.property=kd;z.propertyOf=function(a){return function(b){return Za(a,nc(b),b+"")}};z.pull=function(){var a=arguments,b=a[0];if(!b||!b.length)return b;for(var c=0,d=Mc(),e=a.length;++c<e;)for(var f=0,g=a[c];-1<(f=d(b,g,f));)qe.call(b,f,1);return b};z.pullAt=Bd;z.range=function(a,b,c){c&&ja(a,b,c)&&(b=c=null);a=+a||0;c=null==c?1:+c||0;null==b?(b=a,a=0):b=+b||0;var d=-1;b=Ha(Qd((b-a)/(c||1)),0);for(var e=
Ca(b);++d<b;)e[d]=a,a+=c;return e};z.rearg=Af;z.reject=function(a,b,c){var d=ka(a)?lb:rb;b=pa(b,c,3);return d(a,function(a,c,d){return!b(a,c,d)})};z.remove=function(a,b,c){var d=[];if(!a||!a.length)return d;var e=-1,f=[],g=a.length;for(b=pa(b,c,3);++e<g;)c=a[e],b(c,e,a)&&(d.push(c),f.push(e));xc(a,f);return d};z.rest=we;z.restParam=ta;z.set=function(a,b,c){if(null==a)return a;var d=b+"";b=null!=a[d]||Ac(b,a)?[d]:nc(b);for(var d=-1,e=b.length,f=e-1,g=a;null!=g&&++d<e;){var h=b[d];Ia(g)&&(d==f?g[h]=
c:null==g[h]&&(g[h]=cc(b[d+1])?[]:{}));g=g[h]}return a};z.shuffle=function(a){return od(a,se)};z.slice=function(a,b,c){var d=a?a.length:0;if(!d)return[];c&&"number"!=typeof c&&ja(a,b,c)&&(b=0,c=d);return Ra(a,b,c)};z.sortBy=function(a,b,c){if(null==a)return[];c&&ja(a,b,c)&&(b=null);var d=-1;b=pa(b,c,3);a=wb(a,function(a,c,e){return{criteria:b(a,c,e),index:++d,value:a}});return ed(a,g)};z.sortByAll=sf;z.sortByOrder=function(a,b,c,d){if(null==a)return[];d&&ja(b,c,d)&&(c=null);ka(b)||(b=null==b?[]:[b]);
ka(c)||(c=null==c?[]:[c]);return Ad(a,b,c)};z.spread=function(a){if("function"!=typeof a)throw new Db("Expected a function");return function(b){return a.apply(this,b)}};z.take=function(a,b,c){if(!a||!a.length)return[];if(c?ja(a,b,c):null==b)b=1;return Ra(a,0,0>b?0:b)};z.takeRight=function(a,b,c){var d=a?a.length:0;if(!d)return[];if(c?ja(a,b,c):null==b)b=1;b=d-(+b||0);return Ra(a,0>b?0:b)};z.takeRightWhile=function(a,b,c){return a&&a.length?Mb(a,pa(b,c,3),!1,!0):[]};z.takeWhile=function(a,b,c){return a&&
a.length?Mb(a,pa(b,c,3)):[]};z.tap=function(a,b,c){b.call(c,a);return a};z.throttle=function(a,b,c){var d=!0,e=!0;if("function"!=typeof a)throw new Db("Expected a function");!1===c?d=!1:Ia(c)&&(d="leading"in c?!!c.leading:d,e="trailing"in c?!!c.trailing:e);Kb.leading=d;Kb.maxWait=+b;Kb.trailing=e;return Nd(a,b,Kb)};z.thru=ze;z.times=function(a,b,c){a=Eb(a);if(1>a||!Zc(a))return[];var d=-1,e=Ca(Gb(a,4294967295));for(b=sb(b,c,1);++d<a;)4294967295>d?e[d]=b(d):b(d);return e};z.toArray=Cb;z.toPlainObject=
Vb;z.transform=function(a,b,c,d){var e=ka(a)||Sb(a);b=pa(b,d,4);null==c&&(e||Ia(a)?(d=a.constructor,c=e?ka(a)?new d:[]:P(Jc(d)?d.prototype:null)):c={});(e?ra:oa)(a,function(a,d,e){return b(c,a,d,e)});return c};z.union=pf;z.uniq=xe;z.unzip=$c;z.unzipWith=gb;z.values=jd;z.valuesIn=function(a){return Pc(a,uc(a))};z.where=function(a,b){return Id(a,ib(b))};z.without=xf;z.wrap=function(a,b){b=null==b?Rb:b;return bc(b,32,null,[a],[])};z.xor=function(){for(var a=-1,b=arguments.length;++a<b;){var c=arguments[a];
if(cb(c))var d=d?Ma(d,c).concat(Ma(c,d)):c}return d?hc(d):[]};z.zip=Yf;z.zipObject=pd;z.zipWith=Zf;z.backflow=ie;z.collect=ve;z.compose=ie;z.each=Td;z.eachRight=De;z.extend=ad;z.iteratee=ya;z.methods=re;z.object=pd;z.select=Id;z.tail=we;z.unique=xe;rc(z,z);z.add=function(a,b){return(+a||0)+(+b||0)};z.attempt=Ue;z.camelCase=yf;z.capitalize=function(a){return(a=e(a))&&a.charAt(0).toUpperCase()+a.slice(1)};z.clone=function(a,b,c,d){b&&"boolean"!=typeof b&&ja(a,b,c)?b=!1:"function"==typeof b&&(d=c,c=
b,b=!1);return"function"==typeof c?Qa(a,b,sb(c,d,1)):Qa(a,b)};z.cloneDeep=function(a,b,c){return"function"==typeof b?Qa(a,!0,sb(b,c,1)):Qa(a,!0)};z.deburr=qc;z.endsWith=function(a,b,c){a=e(a);b+="";var d=a.length;c=c===s?d:Gb(0>c?0:+c||0,d);c-=b.length;return 0<=c&&a.indexOf(b,c)==c};z.escape=function(a){return(a=e(a))&&Q.test(a)?a.replace(L,n):a};z.escapeRegExp=yb;z.every=Kd;z.find=Sd;z.findIndex=Vf;z.findKey=Od;z.findLast=jf;z.findLastIndex=Wf;z.findLastKey=dg;z.findWhere=function(a,b){return Sd(a,
ib(b))};z.first=oc;z.get=function(a,b,c){a=null==a?s:Za(a,nc(b),b+"");return a===s?c:a};z.gt=bd;z.gte=function(a,b){return a>=b};z.has=function(a,b){if(null==a)return!1;var c=Ga.call(a,b);if(!c&&!Ac(b)){b=nc(b);a=1==b.length?a:Za(a,Ra(b,0,-1));if(null==a)return!1;b=Hc(b);c=Ga.call(a,b)}return c||Ub(a.length)&&cc(b,a.length)&&(ka(a)||kc(a))};z.identity=Rb;z.includes=ue;z.indexOf=fd;z.inRange=function(a,b,c){b=+b||0;"undefined"===typeof c?(c=b,b=0):c=+c||0;return a>=Gb(b,c)&&a<Ha(b,c)};z.isArguments=
kc;z.isArray=ka;z.isBoolean=function(a){return!0===a||!1===a||p(a)&&"[object Boolean]"==ab.call(a)};z.isDate=function(a){return p(a)&&"[object Date]"==ab.call(a)};z.isElement=Be;z.isEmpty=function(a){return null==a?!0:cb(a)&&(ka(a)||Uc(a)||kc(a)||p(a)&&Jc(a.splice))?!a.length:!ob(a).length};z.isEqual=Pd;z.isError=Md;z.isFinite=rd;z.isFunction=Jc;z.isMatch=function(a,b,c,d){c="function"==typeof c?sb(c,d,3):s;return Bb(a,Ke(b),c)};z.isNaN=function(a){return sa(a)&&a!=+a};z.isNative=ef;z.isNull=function(a){return null===
a};z.isNumber=sa;z.isObject=Ia;z.isPlainObject=jc;z.isRegExp=Rc;z.isString=Uc;z.isTypedArray=Sb;z.isUndefined=function(a){return a===s};z.kebabCase=Ff;z.last=Hc;z.lastIndexOf=function(a,b,c){var d=a?a.length:0;if(!d)return-1;var e=d;if("number"==typeof c)e=(0>c?Ha(d+c,0):Gb(c||0,d-1))+1;else if(c)return e=tb(a,b,!0)-1,a=a[e],(b===b?b===a:a!==a)?e:-1;if(b!==b)return m(a,e,!0);for(;e--;)if(a[e]===b)return e;return-1};z.lt=Z;z.lte=function(a,b){return a<=b};z.max=qf;z.min=rf;z.noConflict=function(){u._=
$e;return this};z.noop=Qe;z.now=Wc;z.pad=function(a,b,c){a=e(a);b=+b;var d=a.length;if(d>=b||!Zc(b))return a;d=(b-d)/2;b=Eb(d);d=Qd(d);c=Zd("",d,c);return c.slice(0,b)+a+c};z.padLeft=Gf;z.padRight=Hf;z.parseInt=Vc;z.random=function(a,b,c){c&&ja(a,b,c)&&(b=c=null);var d=null==a,e=null==b;null==c&&(e&&"boolean"==typeof a?(c=a,a=1):"boolean"==typeof b&&(c=b,e=!0));d&&e&&(b=1,e=!1);a=+a||0;e?(b=a,a=0):b=+b||0;return c||a%1||b%1?(c=zb(),Gb(a+c*(b-a+Of("1e-"+((c+"").length-1))),b)):Cc(a,b)};z.reduce=je;
z.reduceRight=Ve;z.repeat=id;z.result=function(a,b,c){var d=null==a?s:a[b];d===s&&(null==a||Ac(b,a)||(b=nc(b),a=1==b.length?a:Za(a,Ra(b,0,-1)),d=null==a?s:a[Hc(b)]),d=d===s?c:d);return Jc(d)?d.call(a):d};z.runInContext=B;z.size=function(a){var b=a?qd(a):0;return Ub(b)?b:ob(a).length};z.snakeCase=If;z.some=tc;z.sortedIndex=Ld;z.sortedLastIndex=hf;z.startCase=Kf;z.startsWith=function(a,b,c){a=e(a);c=null==c?0:Gb(0>c?0:+c||0,a.length);return a.lastIndexOf(b,c)==c};z.sum=function(a,b,c){c&&ja(a,b,c)&&
(b=null);var d=pa(),e=null==b;e&&d===Oa||(e=!1,b=d(b,c,3));if(e){a=ka(a)?a:ce(a);b=a.length;for(c=0;b--;)c+=+a[b]||0;a=c}else a=Oc(a,b);return a};z.template=function(a,b,c){var d=z.templateSettings;c&&ja(a,b,c)&&(b=c=null);a=e(a);b=ma(nb({},c||b),d,mb);c=ma(nb({},b.imports),d.imports,mb);var f=ob(c),g=Pc(c,f),h,k,m=0;c=b.interpolate||Da;var n="__p += '";c=le((b.escape||Da).source+"|"+c.source+"|"+(c===X?U:Da).source+"|"+(b.evaluate||Da).source+"|$","g");var p="//# sourceURL="+("sourceURL"in b?b.sourceURL:
"lodash.templateSources["+ ++hb+"]")+"\n";a.replace(c,function(b,c,d,e,f,g){d||(d=e);n+=a.slice(m,g).replace(qa,q);c&&(h=!0,n+="' +\n__e("+c+") +\n'");f&&(k=!0,n+="';\n"+f+";\n__p += '");d&&(n+="' +\n((__t = ("+d+")) == null ? '' : __t) +\n'");m=g+b.length;return b});n+="';\n";(b=b.variable)||(n="with (obj) {\n"+n+"\n}\n");n=(k?n.replace(G,""):n).replace(K,"$1").replace(J,"$1;");n="function("+(b||"obj")+") {\n"+(b?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(h?", __e = _.escape":"")+(k?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":
";\n")+n+"return __p\n}";b=Ue(function(){return Se(f,p+"return "+n).apply(s,g)});b.source=n;if(Md(b))throw b;return b};z.trim=ia;z.trimLeft=function(a,b,c){var d=a;return(a=e(a))?(c?ja(d,b,c):null==b)?a.slice(A(a)):a.slice(f(a,b+"")):a};z.trimRight=function(a,b,c){var d=a;return(a=e(a))?(c?ja(d,b,c):null==b)?a.slice(0,D(a)+1):a.slice(0,h(a,b+"")+1):a};z.trunc=function(a,b,c){c&&ja(a,b,c)&&(b=null);var d=30;c="...";if(null!=b)if(Ia(b)){var f="separator"in b?b.separator:f,d="length"in b?+b.length||
0:d;c="omission"in b?e(b.omission):c}else d=+b||0;a=e(a);if(d>=a.length)return a;d-=c.length;if(1>d)return c;b=a.slice(0,d);if(null==f)return b+c;if(Rc(f)){if(a.slice(d).search(f)){var g,h=a.slice(0,d);f.global||(f=le(f.source,(ua.exec(f)||"")+"g"));for(f.lastIndex=0;a=f.exec(h);)g=a.index;b=b.slice(0,null==g?d:g)}}else a.indexOf(f,d)!=d&&(f=b.lastIndexOf(f),-1<f&&(b=b.slice(0,f)));return b+c};z.unescape=function(a){return(a=e(a))&&N.test(a)?a.replace(C,x):a};z.uniqueId=function(a){var b=++Dd;return e(a)+
b};z.words=he;z.all=Kd;z.any=tc;z.contains=ue;z.eq=Pd;z.detect=Sd;z.foldl=je;z.foldr=Ve;z.head=oc;z.include=ue;z.inject=je;rc(z,function(){var a={};oa(z,function(b,c){z.prototype[c]||(a[c]=b)});return a}(),!1);z.sample=od;z.prototype.sample=function(a){return this.__chain__||null!=a?this.thru(function(b){return od(b,a)}):od(this.value())};z.VERSION="3.9.3";ra("bind bindKey curry curryRight partial partialRight".split(" "),function(a){z[a].placeholder=z});ra(["dropWhile","filter","map","takeWhile"],
function(a,b){var c=2!=b,d=0==b;da.prototype[a]=function(a,e){var f=this.__filtered__,g=f&&d?new da(this):this.clone();(g.__iteratees__||(g.__iteratees__=[])).push({done:!1,count:0,index:0,iteratee:pa(a,e,1),limit:-1,type:b});g.__filtered__=f||c;return g}});ra(["drop","take"],function(a,b){var c=a+"While";da.prototype[a]=function(c){var d=this.__filtered__,e=d&&!b?this.dropWhile():this.clone();c=null==c?1:Ha(Eb(c)||0,0);d?b?e.__takeCount__=Gb(e.__takeCount__,c):Hc(e.__iteratees__).limit=c:(e.__views__||
(e.__views__=[])).push({size:c,type:a+(0>e.__dir__?"Right":"")});return e};da.prototype[a+"Right"]=function(b){return this.reverse()[a](b).reverse()};da.prototype[a+"RightWhile"]=function(a,b){return this.reverse()[c](a,b).reverse()}});ra(["first","last"],function(a,b){var c="take"+(b?"Right":"");da.prototype[a]=function(){return this[c](1).value()[0]}});ra(["initial","rest"],function(a,b){var c="drop"+(b?"":"Right");da.prototype[a]=function(){return this[c](1)}});ra(["pluck","where"],function(a,
b){var c=b?"filter":"map",d=b?ib:kd;da.prototype[a]=function(a){return this[c](d(a))}});da.prototype.compact=function(){return this.filter(Rb)};da.prototype.reject=function(a,b){a=pa(a,b,1);return this.filter(function(b){return!a(b)})};da.prototype.slice=function(a,b){a=null==a?0:+a||0;var c=this;0>a?c=this.takeRight(-a):a&&(c=this.drop(a));b!==s&&(b=+b||0,c=0>b?c.dropRight(-b):c.take(b-a));return c};da.prototype.toArray=function(){return this.drop(0)};oa(da.prototype,function(a,b){var c=z[b];if(c){var d=
/^(?:filter|map|reject)|While$/.test(b),e=/^(?:first|last)$/.test(b);z.prototype[b]=function(){var b=arguments,f=this.__chain__,g=this.__wrapped__,h=!!this.__actions__.length,k=g instanceof da,m=b[0],n=k||ka(g);n&&d&&"function"==typeof m&&1!=m.length&&(k=n=!1);m=k&&!h;if(e&&!f)return m?a.call(g):c.call(z,this.value());k=function(a){a=[a];ke.apply(a,b);return c.apply(z,a)};return n?(g=m?g:new da(this),g=a.apply(g,b),e||!h&&!g.__actions__||(g.__actions__||(g.__actions__=[])).push({func:ze,args:[k],
thisArg:z}),new va(g,f)):this.thru(k)}}});ra("concat join pop push replace shift sort splice split unshift".split(" "),function(a){var b=(/^(?:replace|split)$/.test(a)?Qf:ne)[a],c=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",d=/^(?:join|pop|replace|shift)$/.test(a);z.prototype[a]=function(){var a=arguments;return d&&!this.__chain__?b.apply(this.value(),a):this[c](function(c){return b.apply(c,a)})}});oa(da.prototype,function(a,b){var c=z[b];if(c){var d=c.name;(Rd[d]||(Rd[d]=[])).push({name:b,func:c})}});
Rd[Na(null,2).name]=[{name:"wrapper",func:null}];da.prototype.clone=function(){var a=this.__actions__,b=this.__iteratees__,c=this.__views__,d=new da(this.__wrapped__);d.__actions__=a?ca(a):null;d.__dir__=this.__dir__;d.__filtered__=this.__filtered__;d.__iteratees__=b?ca(b):null;d.__takeCount__=this.__takeCount__;d.__views__=c?ca(c):null;return d};da.prototype.reverse=function(){if(this.__filtered__){var a=new da(this);a.__dir__=-1;a.__filtered__=!0}else a=this.clone(),a.__dir__*=-1;return a};da.prototype.value=
function(){var a,b=this.__wrapped__.value();if(!ka(b))return zc(b,this.__actions__);var c=this.__dir__,d=0>c;a=0;for(var e=b.length,f=this.__views__,g=-1,h=f?f.length:0;++g<h;){var k=f[g],m=k.size;switch(k.type){case "drop":a+=m;break;case "dropRight":e-=m;break;case "take":e=Gb(e,a+m);break;case "takeRight":a=Ha(a,e-m)}}f=e;e=f-a;a=d?f:a-1;f=Gb(e,this.__takeCount__);h=(g=this.__iteratees__)?g.length:0;k=0;m=[];a:for(;e--&&k<f;){a+=c;for(var n=-1,q=b[a];++n<h;){var p=g[n],w=p.iteratee,r=p.type;if(0==
r){if(p.done&&(d?a>p.index:a<p.index)&&(p.count=0,p.done=!1),p.index=a,!(p.done||(r=p.limit,p.done=-1<r?p.count++>=r:!w(q))))continue a}else if(p=w(q),2==r)q=p;else if(!p)if(1==r)continue a;else break a}m[k++]=q}return m};z.prototype.chain=function(){return ye(this)};z.prototype.commit=function(){return new va(this.value(),this.__chain__)};z.prototype.plant=function(a){for(var b,c=this;c instanceof Ua;){var d=ee(c);b?e.__wrapped__=d:b=d;var e=d,c=c.__wrapped__}e.__wrapped__=a;return b};z.prototype.reverse=
function(){var a=this.__wrapped__;return a instanceof da?(this.__actions__.length&&(a=new da(this)),new va(a.reverse(),this.__chain__)):this.thru(function(a){return a.reverse()})};z.prototype.toString=function(){return this.value()+""};z.prototype.run=z.prototype.toJSON=z.prototype.valueOf=z.prototype.value=function(){return zc(this.__wrapped__,this.__actions__)};z.prototype.collect=z.prototype.map;z.prototype.head=z.prototype.first;z.prototype.select=z.prototype.filter;z.prototype.tail=z.prototype.rest;
return z}var s,G=/\b__p \+= '';/g,K=/\b(__p \+=) '' \+/g,J=/(__e\(.*?\)|\b__t\)) \+\n'';/g,C=/&(?:amp|lt|gt|quot|#39|#96);/g,L=/[&<>"'`]/g,N=RegExp(C.source),Q=RegExp(L.source),T=/<%-([\s\S]+?)%>/g,E=/<%([\s\S]+?)%>/g,X=/<%=([\s\S]+?)%>/g,aa=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,r=/^\w*$/,W=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,ba=/[.*+?^${}()|[\]\/\\]/g,la=RegExp(ba.source),w=/[\u0300-\u036f\ufe20-\ufe23]/g,R=/\\(\\)?/g,U=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,
ua=/\w*$/,wa=/^0[xX]/,ub=/^\[object .+?Constructor\]$/,pb=/^\d+$/,V=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Da=/($^)/,qa=/['\n\r\u2028\u2029\\]/g,Jb=/[A-Z\xc0-\xd6\xd8-\xde]+(?=[A-Z\xc0-\xd6\xd8-\xde][a-z\xdf-\xf6\xf8-\xff]+)|[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+|[A-Z\xc0-\xd6\xd8-\xde]+|[0-9]+/g,qb="Array ArrayBuffer Date Error Float32Array Float64Array Function Int8Array Int16Array Int32Array Math Number Object RegExp Set String _ clearTimeout document isFinite parseFloat parseInt setTimeout TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array WeakMap window".split(" "),
hb=-1,ha={};ha["[object Float32Array]"]=ha["[object Float64Array]"]=ha["[object Int8Array]"]=ha["[object Int16Array]"]=ha["[object Int32Array]"]=ha["[object Uint8Array]"]=ha["[object Uint8ClampedArray]"]=ha["[object Uint16Array]"]=ha["[object Uint32Array]"]=!0;ha["[object Arguments]"]=ha["[object Array]"]=ha["[object ArrayBuffer]"]=ha["[object Boolean]"]=ha["[object Date]"]=ha["[object Error]"]=ha["[object Function]"]=ha["[object Map]"]=ha["[object Number]"]=ha["[object Object]"]=ha["[object RegExp]"]=
ha["[object Set]"]=ha["[object String]"]=ha["[object WeakMap]"]=!1;var ea={};ea["[object Arguments]"]=ea["[object Array]"]=ea["[object ArrayBuffer]"]=ea["[object Boolean]"]=ea["[object Date]"]=ea["[object Float32Array]"]=ea["[object Float64Array]"]=ea["[object Int8Array]"]=ea["[object Int16Array]"]=ea["[object Int32Array]"]=ea["[object Number]"]=ea["[object Object]"]=ea["[object RegExp]"]=ea["[object String]"]=ea["[object Uint8Array]"]=ea["[object Uint8ClampedArray]"]=ea["[object Uint16Array]"]=ea["[object Uint32Array]"]=
!0;ea["[object Error]"]=ea["[object Function]"]=ea["[object Map]"]=ea["[object Set]"]=ea["[object WeakMap]"]=!1;var Kb={leading:!1,maxWait:0,trailing:!1},vb={"\u00c0":"A","\u00c1":"A","\u00c2":"A","\u00c3":"A","\u00c4":"A","\u00c5":"A","\u00e0":"a","\u00e1":"a","\u00e2":"a","\u00e3":"a","\u00e4":"a","\u00e5":"a","\u00c7":"C","\u00e7":"c","\u00d0":"D","\u00f0":"d","\u00c8":"E","\u00c9":"E","\u00ca":"E","\u00cb":"E","\u00e8":"e","\u00e9":"e","\u00ea":"e","\u00eb":"e","\u00cc":"I","\u00cd":"I","\u00ce":"I",
"\u00cf":"I","\u00ec":"i","\u00ed":"i","\u00ee":"i","\u00ef":"i","\u00d1":"N","\u00f1":"n","\u00d2":"O","\u00d3":"O","\u00d4":"O","\u00d5":"O","\u00d6":"O","\u00d8":"O","\u00f2":"o","\u00f3":"o","\u00f4":"o","\u00f5":"o","\u00f6":"o","\u00f8":"o","\u00d9":"U","\u00da":"U","\u00db":"U","\u00dc":"U","\u00f9":"u","\u00fa":"u","\u00fb":"u","\u00fc":"u","\u00dd":"Y","\u00fd":"y","\u00ff":"y","\u00c6":"Ae","\u00e6":"ae","\u00de":"Th","\u00fe":"th","\u00df":"ss"},Bb={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;",
"'":"&#39;","`":"&#96;"},wb={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Oa={"function":!0,object:!0},ib={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},rb=Oa[typeof exports]&&exports&&!exports.nodeType&&exports,jb=Oa[typeof module]&&module&&!module.nodeType&&module,kb=Oa[typeof self]&&self&&self.Object&&self,Oa=Oa[typeof window]&&window&&window.Object&&window,Ya=jb&&jb.exports===rb&&rb,Ta=rb&&jb&&"object"==typeof global&&global&&global.Object&&
global||Oa!==(this&&this.window)&&Oa||kb||this,Y=B();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Ta._=Y,define(function(){return Y})):rb&&jb?Ya?(jb.exports=Y)._=Y:rb._=Y:Ta._=Y}).call(this);
angular.module("genius").run(["$templateCache",function(a){a.put("calendar.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M15.4 4.1v9.7c0 .9-.7 1.6-1.6 1.6H2.2c-.9 0-1.6-.8-1.6-1.6V4.1c0-.9.7-1.6 1.6-1.6h1.5v.6c0 .6.5 1.1 1.1 1.1.6 0 1.1-.5 1.1-1.1v-.6H10v.6c0 .6.5 1.1 1.1 1.1.6 0 1.1-.5 1.1-1.1v-.6h1.6c.9 0 1.6.7 1.6 1.6zM4.3 5.7H2.1v2.1h2.3V5.7zm0 3H2.1v2.1h2.3V8.7zm0 2.9H2.1v2.1h2.3v-2.1zm-.2-8.5V1.3c0-.4.3-.7.7-.7.4 0 .7.3.7.7v1.8c0 .4-.3.7-.7.7-.4 0-.7-.3-.7-.7zm3.5 2.6H5.2v2.1h2.3V5.7zm0 3H5.2v2.1h2.3V8.7zm0 2.9H5.2v2.1h2.3v-2.1zm3.2-5.9H8.4v2.1h2.3V5.7zm0 3H8.4v2.1h2.3V8.7zm0 2.9H8.4v2.1h2.3v-2.1zm-.4-8.5V1.3c0-.4.3-.7.7-.7.4 0 .7.3.7.7v1.8c0 .4-.3.7-.7.7-.3 0-.7-.3-.7-.7zm3.5 2.6h-2.3v2.1h2.3V5.7zm0 3h-2.3v2.1h2.3V8.7zm0 2.9h-2.3v2.1h2.3v-2.1z"/></svg>');a.put("chart.svg",
'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M4.1 15.7H0V5h4.1v10.7zm5.7 0H5.7v-8h4.1v8zm5.7 0h-4.1V.9h4.1v14.8z"/></svg>');a.put("checky.svg",'<svg width="11px" height="11px" viewBox="0 0 11 11">\n  <polygon points="5.5 0 10.2631397 2.75 10.2631397 8.25 5.5 11 0.736860279 8.25 0.736860279 2.75 "></polygon>\n  <path d="M2.5,5.5 L4.5,7.5" stroke-width="1.2" stroke-linecap="square"></path>\n  <path d="M4.5,7.5 L8.5,3.5" stroke-width="1.2" stroke-linecap="square"></path>\n</svg>\n');
a.put("circle.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="32.5 47.5 84 84">\n  <circle cx="74.5" cy="89.5" r="40"/>\n</svg>\n');a.put("clock.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M8 .7C4 .7.7 4 .7 8S4 15.3 8 15.3 15.3 12 15.3 8 12 .7 8 .7zm0 12.8C5 13.5 2.5 11 2.5 8S5 2.5 8 2.5 13.5 5 13.5 8 11 13.5 8 13.5z"/><path d="M11.5 9.6L8.7 7.7V4.3c0-.1 0-.2-.1-.2S8.4 4 8.3 4h-.7c-.1 0-.2 0-.2.1l-.2.2v4c0 .1 0 .2.1.2l.1.1 3.4 2.3c.1 0 .1.1.2.1h.1c.1 0 .1-.1.2-.1l.4-.7c0-.3 0-.5-.2-.6z"/></svg>');
a.put("comment.svg",'<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">\n  <path d="M2.132 0C.69-.03 0 .66 0 2.134v9.654c0 1.442.69 2.1 2.132 2.1h2.35L2.916 20l7.586-6.113h6.866c1.442 0 2.1-.658 2.1-2.037V2.133C19.466.66 18.808 0 17.366 0H2.132zm1.88 3.95h11.442v2.07H4.012V3.95zM15.454 9.94H4.012v-2.07h11.442v2.07z" fill-rule="evenodd"/>\n</svg>\n');a.put("down_arrow.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 30 30.5 16">\n  <path d="M29.4 31L15.2 43.4 1.1 31"/>\n</svg>\n');
a.put("eye.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 13"><path d="M17.4 6S14 11.9 9 11.9.6 6 .6 6 4 .1 9 .1 17.4 6 17.4 6zm-4.3 0c0-2.3-1.9-4.1-4.1-4.1-2.3 0-4.1 1.8-4.1 4.1s1.9 4.1 4.1 4.1c2.3 0 4.1-1.8 4.1-4.1zM9 4.5c-.8 0-1.5.7-1.5 1.5S8.2 7.5 9 7.5s1.5-.7 1.5-1.5S9.8 4.5 9 4.5z"/></svg>\n');a.put("facebook.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="-34.3 29.2 19.3 23.8"><path d="M-21.3 34.4c-1.5 0-1.7.9-1.7 1.8v1.4h3.6l-.4 4.5H-23v9.7h-4.5v-9.7H-30v-4.4h2.6v-3.3c0-2.7 1.5-4.1 4.5-4.1h3.6v4.1h-2z"/></svg>');
a.put("hidden.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="-30 33.1 18 15.8"><path d="M-12.6 41s-3.4 5.9-8.4 5.9-8.4-5.9-8.4-5.9 3.4-5.9 8.4-5.9 8.4 5.9 8.4 5.9zm-4.3 0c0-2.3-1.9-4.1-4.1-4.1-2.3 0-4.1 1.8-4.1 4.1s1.9 4.1 4.1 4.1c2.3 0 4.1-1.8 4.1-4.1zm-4.1-1.5c-.8 0-1.5.7-1.5 1.5s.7 1.5 1.5 1.5 1.5-.7 1.5-1.5-.7-1.5-1.5-1.5z"/><path d="M-14.3 48.2c-.2 0-.4-.1-.6-.2l-13.5-12.8c-.4-.3-.4-.9 0-1.2.3-.4.9-.4 1.2 0l13.5 12.8c.4.3.4.9 0 1.2-.1.2-.3.2-.6.2z"/></svg>');a.put("left_arrow.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 128 128"><path d="M95 128L39 63.8 95 0"/></svg>');
a.put("lightning.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="7 30 16 30">\n  <path d="M7.3 39.4c-.5 0-.2-.5-.2-.5l8.4-8.9s4.1 8.1 4.5 8.8c.4.9-.4.8-.4.8h-3.1c-.9 2.8-1.9 6.9-1.9 7h8L15.4 60s.9-9.5.9-9.6h-8l4.3-11.1s-4.6.1-5.3.1z" />\n</svg>\n');a.put("locked.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 9 13"><path d="M8.8 8.5c0 2.4-1.9 4.3-4.3 4.3S.2 10.9.2 8.5c0-1.1.4-2.1 1-2.8l.1-2.2C1.3 1.7 2.7.3 4.5.3c1.8 0 3.2 1.4 3.2 3.2v2.2c.7.7 1.1 1.7 1.1 2.8zm-7.2.3h1.2l.2-.3-.2-.4H1.6v.7zm1.6.8v-.3L2.9 9l-1 .6.3.5 1-.5zM1.8 7.2l1 .6.3-.2v-.3l-1-.6-.3.5zm.9-2.6c1.1-.5 2.5-.5 3.7 0V3.4c0-1-.8-1.8-1.9-1.8s-1.8.8-1.8 1.8v1.2zm1.2 5.5l-.2-.3h-.3l-.6 1.1.5.3.6-1.1zm0-3.3l-.6-1-.5.3.6 1.1h.3l.2-.4zm.9 3.4l-.3-.2-.3.2v1.2h.6v-1.2zm0-4.7h-.6v1.2l.3.2.3-.2V5.5zm.8 4.3h-.3l-.2.3.6 1 .5-.3-.6-1zm.7-3.7l-.6-.3-.6 1 .2.3h.3l.7-1zm-.2 3l-.2.2v.3l1.1.6.3-.5-1.2-.6zm-.2-1.7v.3l.3.2 1.1-.6-.4-.5-1 .6zm1.5.8H6.3l-.2.3.2.3h1.2v-.6z"/></svg>');
a.put("magnifying_glass.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18"><path d="M2.7 10.1c-1-1.2-1.4-2.7-1.3-4.2C1.7 2.8 4.5.4 7.7.6c3.1.3 5.5 3.1 5.3 6.2-.1 1.3-.7 2.7-1.7 3.6l2.5 1.3 2.7 3.2c.2.3.3.6.2 1-.1.8-.9 1.5-1.7 1.4-.3 0-.7-.1-.9-.4l-2.7-3.2-.8-2.7c-1.2.8-2.5 1.2-3.9 1-1.5 0-3-.7-4-1.9zm6.8-1c.8-.6 1.2-1.5 1.2-2.4.2-1.9-1.3-3.7-3.3-3.8-1.8-.2-3.6 1.3-3.8 3.2C3.4 8 4.9 9.8 6.8 10c.9 0 1.9-.3 2.7-.9z"/></svg>');a.put("pause.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="55 -75 188 188">\n  <circle cx="149" cy="19" r="80"/>\n  <path d="M129-18v75m40-75v75"/>\n</svg>\n');
a.put("phone.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 17"><path d="M8.7 0h.5M8.7 0H1.3C.6 0 0 .6 0 1.4v14.2c0 .8.6 1.4 1.3 1.4h7.3c.7 0 1.3-.6 1.3-1.4V1.4C10 .6 9.4 0 8.7 0zM5 16.2c-.7 0-1.2-.6-1.2-1.2 0-.7.6-1.2 1.2-1.2.7 0 1.2.6 1.2 1.2.1.7-.5 1.2-1.2 1.2zM9 13H1V3h8v10z"/></svg>');a.put("play.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="55 85 188 188">\n  <circle cx="149" cy="179" r="80"/>\n  <path d="M129 219v-80l60 40-60 40z"/>\n</svg>\n');a.put("right_arrow.svg",
'<svg x="0px" y="0px" viewBox="0 0 17 35" enable-background="new 0 0 17 35">\n  <polyline points="1,1 15.5,17.5 1,34" />\n</svg>\n');a.put("tag.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M7 15.2l7.6-7.6c.2-.2.4-.5.4-.8l.4-4.1c0-.3-.1-.6-.3-.8l-.9-.9c-.2-.2-.5-.3-.8-.3L9.2 1c-.3 0-.6.2-.8.4L.8 9c-.2.2-.2.5 0 .7l5.6 5.6c.1.1.4.1.6-.1zM11.9 4c-.5-.5-.5-1.3 0-1.9.5-.5 1.3-.5 1.9 0 .5.5.5 1.3 0 1.9-.5.6-1.3.6-1.9 0z"/></svg>\n');a.put("thumbs_down.svg",'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7.222 19.975c.522-.094 1.017-.447 1.338-.982.428-.713 3.13-6.162 3.7-6.732.57-.57 1.15-.847 2.007-.847V0H4.28c-.57 0-1.15.42-1.293.847C2.987.847 0 9.13 0 9.987c0 .856.57 1.426 1.427 1.426h4.28c.856 0 1.426.714 1.426 1.427 0 .713-1.14 4.548-1.426 5.262-.143.713.268 1.587.98 1.873.18.035.362.03.536 0zm8.47-8.56h4.28V0h-4.28v11.415z" fill-rule="evenodd"/></svg>\n');
a.put("thumbs_up.svg",'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.752.025c-.523.094-1.018.447-1.34.982-.427.713-3.13 6.162-3.7 6.732-.57.57-1.15.847-2.005.847V20h9.986c.57 0 1.15-.42 1.293-.847 0 0 2.987-8.284 2.987-9.14 0-.856-.57-1.426-1.426-1.426h-4.28c-.856 0-1.427-.714-1.427-1.427 0-.713 1.14-4.548 1.427-5.262C14.41 1.185 14 .31 13.285.025c-.178-.035-.36-.03-.535 0h.002zM0 20h4.28V8.584H0V20z" fill-rule="evenodd"/></svg>\n');a.put("twitter.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14.8 12.2"><path d="M14.8 1.4L13.1 3v.5c-.1 1.5-.2 4.2-2.7 6.6-3.7 3.8-9.7 1.3-10.4.6 0 0 2.8.1 4.3-1.3 0 0-2.1-.2-2.6-2.1h1.5S.6 6.7.6 4.3c0 0 .8.3 1.6.4 0 0-2.3-1.7-1.1-4 0 0 2.3 3 6.2 3.1C6.5 2 7.8 0 10 0c.7 0 1.4.2 1.9.8.5-.1 1.6-.2 2.4-.6L13 1.6c.1.1 1.1-.1 1.8-.2z"/></svg>');
a.put("up_arrow.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 30 30.5 14.5">\n  <path d="M1.1 43.4L15.2 31l14.2 12.4"/>\n</svg>\n');a.put("x.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 35 35">\n  <path fill="none" d="M1 1l33 33M1 34L34 1" />\n</svg>\n')}]);
angular.module("genius").run(["$templateCache",function(a){a.put("header_menu_item.html",'<li class="nav_menu-item" click-outside="opened = false" ng-if="!url">\n  <a ng-click="opened = !opened" class="nav_menu-link nav_menu-link--has_dropdown" ng-class="{pressed: opened}">{{ name }}</a>\n  <div ng-transclude ng-show="opened"></div>\n</li>\n\n<li class="nav_menu-item" ng-if="url">\n  <a class="nav_menu-link" ng-href="{{ url }}">{{ name }}</a>\n</li>\n');a.put("notification_inbox.html",'<a href="#"\n   id="{{ inbox_name }}_icon"\n   class="header-inbox_icon header-inbox_icon--{{ icon_modifier }} prevent_default"\n   ng-class="{active:inbox_tooltip_open,has_unread_items:unread_count && unread_count > 0}">\n  <span id="unread_{{ inbox_name }}_items_count" class="inbox_icon-inbox_count">{{ unread_count_for_display }}</span>\n</a>\n');
a.put("search_form.html",'<form action="{{ path }}" method="get" class="global_search global_search--{{ style }}" ng-class="{\'global_search--focused\':focused}" click-outside="unfocus()">\n  <kb shortcut="/" action="focus()"></kb>\n  <input ng-model="search_text" ng-disabled="submitting" name="q" type="text" class="quick_search autocomplete search quick_search--{{ style }}" placeholder="Search lyrics &amp; more" ng-class="{\'quick_search--focused\':focused}" quick-search />\n  <div class="global_search-submit_button" ng-class="{\'global_search-submit_button--focused\':focused}" ng-click="submit_form()">\n    <genius-svg src="magnifying_glass.svg" class="global_search-magnifying_glass"></genius-svg>\n  </div>\n</form>\n')}]);
angular.module("genius").controller("CustomAppNotificationCtrl",["$scope","CustomAppNotificationService",function(a,b){a.send_preview_notification=function(){b.send_preview_notification(a.notification).then(function(){alert("sent a preview notification to your devices, take a look")})}}]);
angular.module("genius").controller("DevCtrl",["$window","$scope","$http","AppConfig",function(a,b,c,d){b.search={query:""};b.saving=!1;b.build_scenario=function(){if(!b.saving){b.saving=!0;var e=b.current_scenario.traits.filter(function(a){return a.enabled}).map(function(a){return a.name});c.post(d.api_root_url+"/scenarios?id="+b.current_scenario.id,{scenario:{traits:e}}).then(function(c){a.location.href=c.data.url;b.saving=!1})}};b.configure_scenario=function(a){b.current_scenario=a};b.clear_scenario=
function(){b.current_scenario=void 0};var e=_.once(function(){c.get(d.api_root_url+"/scenarios").then(function(a){b.results=a.data.scenarios})});b.open_search=function(){e();b.open=!0};b.close_search=function(){b.open=!1}}]);angular.module("genius").controller("HeaderCtrl",["$scope",function(a){a.toggle_menu=function(){a.menu_open=!a.menu_open};a.close_menu=function(){a.menu_open=!1}}]);
angular.module("genius").controller("HomepageCtrl",["$scope","$interval",function(a,b){var c=0;b(function(){a.total_iq+=c;c=0},1E3);a.increment_iq=function(a){c+=a};a.details_expanded=!1;a.expand_details=function(){a.details_expanded=!0}}]);
angular.module("genius").controller("SongCtrl",["$scope","$window","$q","$location","Preloader","SongService","ReferentService","Tracking","Session","$timeout",function(a,b,c,d,e,f,h,g,k,n){g.track("Song Page Load");var q=new e(function(a){return h.bulk_load(a)}),m=[],p={};a.reference_elements={};a.register_fragment=function(b,c){m.push(b.id);p[b.id]=p[b.id]||b;a.reference_elements[b.id]=a.reference_elements[b.id]||c;return p[b.id]};a.update_reference_element=function(b,c){a.reference_elements[b]=
c};a.$evalAsync(function(){f.count_view(a.song.id);a.preloaded_referent&&q.insert(a.preloaded_referent.id,a.preloaded_referent);q.bulk_load(m.slice(0,5))});a.featured_media=function(){return _(a.song.media).detect(function(a){return"youtube"===a.provider})};a.open_song_description_pane=function(){g.track("Open Song Description Pane");a.current_referent=a.song.description_annotation};a.open_metadata_pane=function(){g.track("Open Metadata Pane");a.open_metadata=!0};a.close_metadata_pane=function(){a.open_metadata=
!1};a.toggle_ellipsis_menu=function(){a.showing_ellipsis_menu=!a.showing_ellipsis_menu};a.dismiss_video_player=function(){g.track("Dismiss Video Player");a.video_player_dismissed=!0};a.toggle_audio_player=function(){a.audio_player_playing=!a.audio_player_playing};a.next_track=function(){var b=!1;return _.detect(a.primary_album_tracks,function(c){if(b)return!0;b=c.song.id===a.song.id})};var u=function(a){var b=m.indexOf(a);a=_(m).sortBy(function(a,c){return Math.abs(c-b)}).value();a=q.filter_unloaded(a).slice(0,
10);q.bulk_load(a)},v=function(b){g.track("Open Annotation",{annotation_id:b.id});a.highlighted_fragment_id=b.id;a.current_referent=b;u(b.id);q.load(b.id).then(function(c){a.current_referent&&c.id===a.current_referent.id&&(c.fragment=b.fragment,a.current_referent=c)})},A=!1;a.clear_current_referent=function(){delete a.highlighted_fragment_id;delete a.current_referent;d.url(a.song.path);d.replace()};var D=function(a){var b=c.defer();$(window).on("load",function(){var c=a.offset().top+a.height()/2-
$(window).height()/2;$("body,html").animate({scrollTop:c},200).promise().then(b.resolve)});return b.promise};a.bop={};var x=a.$watch("bop.is_playing",function(a){a&&(g.track("Bop play"),x())});a.open_referent=function(b){a.highlighted_fragment_id=b;n(function(){d.url("/"+b);A?d.replace():A=!0})};a.can_perform=function(b){return k.has_permission(b,a.song)};a.perform=function(b){f.perform_action(a.song.id,b).then(function(b){a.song=b})};a.actions="pin_to_homepage_hot_songs unpin_from_homepage_hot_songs pin_to_hot_songs unpin_from_hot_songs allow_in_hot_songs exclude_from_hot_songs".split(" ");
a.$on("$locationChangeSuccess",function(){var b=d.url();if(b===a.song.path)delete a.current_referent;else{var c=Number(d.search().referent_id);c?(g.set_annotation_opened_from_permalink(c),D(a.reference_elements[c]).then(function(){d.url("/"+c);d.replace()})):(b=Number(b.slice(1)),v(p[b]))}});a.set_current_hover=function(b){a.hover_referent_id=b}}]);
angular.module("genius").controller("SpotifyAnnotationEditCtrl",["$scope",function(a){a.set_timestamp_to_now=function(){a.annotation.timestamp_in_ms=a.time};a.annotation_duration=function(){var b=a.annotations.indexOf(a.annotation),b=a.annotations[b+1];return(b?b.timestamp_in_ms:a.duration)-a.annotation.timestamp_in_ms}}]);
angular.module("genius").controller("SpotifySimulatorCtrl",["$scope",function(a){a.annotation_percentage=function(){if(!a.current_annotation)return 0;var b=a.annotations[a.current_annotation_index+1],b=b?b.timestamp_in_ms:a.duration;return(b-a.time)/(b-a.current_annotation.timestamp_in_ms)}}]);
angular.module("genius").controller("SpotifySongEditCtrl",["$scope","$debounce","SpotifyAnnotationService","orderByFilter",function(a,b,c,d){a.time=0;a.is_playing=!1;a.song_id=$("[data-song-id]").attr("data-song-id");a.toggle_play_pause=function(){(a.is_playing?Bop.pause:Bop.play)()};a.toggle_fullscreen=function(){a.apple=!1;a.fullscreen=!a.fullscreen};a.toggle_apple=function(){a.apple=!a.apple};a.is_spotify_intro_card_with_album_image=function(){return"intro"==a.current_annotation.content_type&&
a.album&&a.album.images.length&&!a.apple};a.remove_annotation=function(b){b=a.annotations.indexOf(b);a.annotations.splice(b,1)};a.seek_to_percentage=function(a){Bop.seek(a)};a.seek_to=function(b){a.seek_to_percentage(b/a.duration)};a.add_annotation=function(){a.annotations.push({content_type:"iq",timestamp_in_ms:a.time})};c.load_song(a.song_id).success(function(b){a.spotify_song=b.spotify_song;a.album=a.spotify_song.metadata.album;a.duration=a.spotify_song.metadata.duration_ms;a.annotations=b.spotify_annotations;
_.any(a.annotations,{content_type:"credits"})||a.annotations.push({content_type:"credits",content:"Check out the full lyrics and annotations on Genius for contributors, sources, and even more knowledge.",timestamp_in_ms:a.duration-3E3});h()});var e=!1,f=function(){a.saving_disabled?e=!0:(a.saving_disabled=!0,c.save_song(a.song_id,a.spotify_song,a.annotations).success(function(b){a.spotify_song=b.spotify_song;a.save_error=void 0}).error(function(b){a.save_error=b.message||"Failed to save";a.conflicted=
"conflict"===b.error}).finally(function(){a.saving_disabled=!1;e&&(e=!1,f())}))};a.is_spotify=function(){return"spotify"===a.service||"spotify-seek"===a.service};var h=function(){var c={content_type:"intro",timestamp_in_ms:0};a.$watchGroup(["time","saving_disabled"],function(){var b=a.annotations.filter(function(b){return b.timestamp_in_ms<=a.time});a.current_annotation_index=b.length-1;a.current_annotation=a.annotations[a.current_annotation_index]||c});var e=b(f,1E3);a.$watch("annotations",function(){a.annotations=
d(a.annotations,["timestamp_in_ms","id"])},!0);a.$watchGroup(["annotations","spotify_song.note","spotify_song.finalized"],function(){e()},!0)}}]);angular.module("genius").directive("additionalArtists",function(){return{templateUrl:"additional_artists.html",restrict:"E",scope:{artists:"=",label:"@"},link:function(a){a.preview_limit=3;a.more_to_show=function(){return a.artists.length>a.preview_limit};a.show_more=function(){delete a.preview_limit}}}});
angular.module("genius").directive("androidBanner",["Bowser","AppConfig",function(a,b){return{restrict:"E",scope:!0,templateUrl:"android_banner.html",link:function(c){c.is_android=a.android;c.play_store_url=b.play_store_url}}}]);
angular.module("genius").directive("annotation",["Session","AnnotationService",function(a,b){return{restrict:"E",templateUrl:"annotation.html",scope:{annotation:"=object",isDescription:"=",onDarkBackground:"="},link:function(c){c.can_edit=a.has_permission("edit",c.annotation);c.toggle_voters=function(){c.showing_voters=!c.showing_voters};c.$on("images_loaded",function(){c.loaded=!0;c.$emit("annotation_loaded")});c.toggle_contributors=function(){c.showing_contributors=!c.showing_contributors};c.toggle_ellipsis_menu=
function(){c.showing_ellipsis_menu=!c.showing_ellipsis_menu};c.start_editing=function(){c.loading_editing=!0;b.load_annotation(c.annotation.id,{format:"markdown"}).then(function(a){c.annotation.editable_markdown=a.body.markdown}).finally(function(){c.loading_editing=!1})};c.cancel_editing=function(){delete c.annotation.editable_markdown};c.finish_editing=function(){c.saving||(c.saving=!0,b.save_annotation(c.annotation.id,{annotation:{body:{markdown:c.annotation.editable_markdown}}}).then(function(a){c.annotation.body=
a.body;delete c.annotation.editable_markdown}).finally(function(){c.saving=!1}))}}}}]);
angular.module("genius").directive("annotationFragment",function(){return{restrict:"A",replace:!0,transclude:!0,templateUrl:"annotation_fragment.html",scope:!0,link:function(a,b,c){a.fragment_id=a.$eval(c.annotationFragment);a.classification=c.classification;a.image=a.$eval(c.image);c=a.register_fragment({id:a.fragment_id,stub:!0,fragments:[],is_image:a.image},b);c.fragments.push(b.text());c.fragment=_.uniq(c.fragments).join("\n");a.open=function(){a.update_reference_element(a.fragment_id,b);a.open_referent(a.fragment_id)}}}});
angular.module("genius").directive("annotationPlaceholder",function(){return{restrict:"E",templateUrl:"annotation_placeholder.html",scope:{showCondition:"=",onDarkBackground:"="}}});
angular.module("genius").directive("annotationSidebar",function(){return{restrict:"E",transclude:!0,replace:!0,templateUrl:"annotation_sidebar.html",link:function(a,b){var c=function(){if(a.current_referent&&0!==b.height()){var c=a.reference_elements[a.current_referent.id],e,f=b.height();e=c.offset().top;var h=e+f,g=e-c.position().top,k=g+c.offsetParent().height(),n=$(window).scrollTop(),q=n+$(window).height(),g=Math.max(g,n)+16,k=Math.min(k,q)-32,f=-f/2,h=h+f-k;0<h&&(f-=h);e=g-(e+f);0<e&&(f+=e);
e=f;a.margin=c.position().top+e;a.arrow_margin=c.height()/2-e-10;a.arrow_margin=Math.max(a.arrow_margin,10);a.arrow_margin=Math.min(a.arrow_margin,b.height()-10)}};a.$watch("current_referent",c);a.$on("annotation_loaded",c)}}});angular.module("genius").directive("artistBadge",function(){return{restrict:"E",templateUrl:"artist_badge.html",scope:{artist:"=object",type:"@"}}});
angular.module("genius").directive("clickOutside",["$document",function(a){return{restrict:"A",link:function(b,c,d){var e=function(a){document.body.contains(a.target)&&(c[0].contains(a.target)||b.$apply(function(){b.$eval(d.clickOutside)}))};a.on("click",e);b.$on("$destroy",function(){a.off("click",e)})}}}]);
angular.module("genius").directive("clickToLoad",function(){return{scope:{message:"@"},restrict:"E",transclude:!0,templateUrl:"click_to_load.html",link:function(a){a.load=function(){a.loading=!0}}}});angular.module("genius").directive("clippedBackgroundImage",function(){return{link:function(a,b,c){a.$watch(c.clippedBackgroundImage,function(a){a&&b.addClass("clipped_background_image").css("background-image","url("+a+")")})}}});
angular.module("genius").directive("comment",["$sce",function(a){return{restrict:"E",templateUrl:"comment.html",scope:{comment:"=object"},link:function(b){b.trusted_body=a.trustAsHtml(b.comment.body.html);b.toggle_voters=function(){b.showing_voters=!b.showing_voters}}}}]);
angular.module("genius").directive("comments",["CommentService","Session",function(a,b){return{scope:{type:"@",commentable:"=",onDarkBackground:"="},restrict:"E",templateUrl:"comments.html",link:function(c){c.current_user=b.current_user;c.can_create_comment=b.has_permission("create_comment",c.commentable);var d=0;c.comments=[];c.is_loading=!1;c.load_next_page=function(){!c.is_loading&&c.commentable.comment_count&&(c.is_loading=!0,a.load(c.type,c.commentable.id,{text_format:"html",page:d+1,per_page:10}).then(function(a){c.comments=
c.comments.concat(a.comments);c.is_loading=!1;c.has_more_pages=c.comments.length<a.total_count;d+=1}))};c.toggle_comments=function(){c.showing_comments?c.showing_comments=!1:(c.showing_comments=!0,0===d&&c.load_next_page())};c.save_comment=function(){c.saving=!0;c.showing_comments=!0;0===d&&c.load_next_page();a.create(c.type,c.commentable.id,{comment:c.new_comment}).then(function(a){a._new=!0;c.comments.unshift(a);c.commentable.comment_count+=1;delete c.new_comment}).finally(function(){c.saving=!1})}}}}]);
angular.module("genius").directive("commentsPlaceholder",function(){return{restrict:"E",templateUrl:"comments_placeholder.html",scope:{showCondition:"="},link:function(a){a.placeholder_user={name:"username",iq:"1738",avatar:{thumb:{url:""}}}}}});angular.module("genius").directive("confirm",["$window",function(a){return{priority:-1,restrict:"A",scope:{message:"@confirm"},link:function(b,c){c.on("click",function(c){a.confirm(b.message)||(c.stopImmediatePropagation(),c.preventDefault())})}}}]);
angular.module("genius").directive("copyToClipboard",["ZeroClipboard","$timeout",function(a,b){var c=function(a,c){var f=a.text();a.text(c);b(function(){a.text(f)},750)};return{restrict:"A",link:function(b,e,f){var h=new a(e[0]);h.on("ready",function(){h.on("copy",function(a){a.clipboardData.setData("text/plain",b.$eval(f.copyToClipboard))});h.on("aftercopy",function(){f.textToShowAfterCopy&&c(e,f.textToShowAfterCopy)})});h.on("error",function(){e.remove();h.destroy()})}}}]);
angular.module("genius").directive("delimitedBy",function(){return{template:"<span>{{ delimiter() }}<ng-transclude></ng-transclude></span>",transclude:"element",replace:!0,link:function(a,b,c){a.delimiter=function(){if(!a.$first)return a.$last?a.$eval(c.lastDelimiter):a.$eval(c.delimitedBy)}}}});
angular.module("genius").directive("displayUnlessCookie",["$cookies",function(a){return{transclude:!0,scope:{name:"@",expiresInMs:"="},template:'<ng-transclude ng-if="!hidden"></ng-transclude>',link:function(b){b.hidden=a.get(b.name)},controller:["$scope",function(b){this.set_cookie_and_close=function(){var c=new Date;c.setTime(c.getTime()+b.expiresInMs);a.put(b.name,1,{expires:c,path:"/"});b.hidden=!0}}]}}]);
angular.module("genius").directive("editableMarkdown",["$sce",function(a){return{restrict:"E",replace:!0,templateUrl:"editable_markdown.html",scope:{html:"=",markdown:"="},link:function(b,c){b.editable=b;b.resize_textarea=function(){b.$evalAsync(function(){var a=c.find("textarea");a.autosize({callback:function(){delete b.frozen_height;a.focus()}})})};b.$watch("html",function(c){b.trusted_html=a.trustAsHtml(c)});b.$watch("!!markdown",function(a){a&&(b.frozen_height=c.height());b.editing=a})}}}]);
window.app=window.app||{};window.app.twitterURLre=/((http:\/\/(twitter\.com\/.*\/status\/.*\/photo\/.*|twitter\.com\/.*\/statuses\/.*\/photo|pic\.twitter\.com\/.*|www\.twitter\.com\/.*\/statuses\/.*\/photo\/.*|mobile\.twitter\.com\/.*\/status\/.*\/photo\/.*|mobile\.twitter\.com\/.*\/statuses\/.*\/photo\/.*|twitter\.com\/.*\/status\/.*|twitter\.com\/.*\/statuses\/.*|www\.twitter\.com\/.*\/status\/.*|www\.twitter\.com\/.*\/statuses\/.*|mobile\.twitter\.com\/.*\/status\/.*|mobile\.twitter\.com\/.*\/statuses\/.*))|(https:\/\/(twitter\.com\/.*\/status\/.*\/photo\/.*|twitter\.com\/.*\/statuses\/.*\/photo\/.*|www\.twitter\.com\/.*\/status\/.*\/photo\/.*|www\.twitter\.com\/.*\/statuses\/.*\/photo\/.*|mobile\.twitter\.com\/.*\/status\/.*\/photo\/.*|mobile\.twitter\.com\/.*\/statuses\/.*\/photo\/.*|twitter\.com\/.*\/status\/.*|twitter\.com\/.*\/statuses\/.*|www\.twitter\.com\/.*\/status\/.*|www\.twitter\.com\/.*\/statuses\/.*|mobile\.twitter\.com\/.*\/status\/.*|mobile\.twitter\.com\/.*\/statuses\/.*)))/i;
window.app.rgURLre=/^(https?:\/\/(.+\.)?((?:rap)?genius\.com|genius\.com)\/(\d+)(?:\/|\?|$))/i;window.app.embedlyURLre=/((https?:\/\/(.*yfrog\..*\/.*|www\.flickr\.com\/photos\/.*|flic\.kr\/.*|twitpic\.com\/.*|www\.twitpic\.com\/.*|twitpic\.com\/photos\/.*|www\.twitpic\.com\/photos\/.*|.*imgur\.com\/.*|.*\.posterous\.com\/.*|post\.ly\/.*|twitgoo\.com\/.*|i.*\.photobucket\.com\/albums\/.*|s.*\.photobucket\.com\/albums\/.*|phodroid\.com\/.*\/.*\/.*|www\.mobypicture\.com\/user\/.*\/view\/.*|moby\.to\/.*|xkcd\.com\/.*|www\.xkcd\.com\/.*|imgs\.xkcd\.com\/.*|www\.asofterworld\.com\/index\.php\?id=.*|www\.asofterworld\.com\/.*\.jpg|asofterworld\.com\/.*\.jpg|www\.qwantz\.com\/index\.php\?comic=.*|23hq\.com\/.*\/photo\/.*|www\.23hq\.com\/.*\/photo\/.*|.*dribbble\.com\/shots\/.*|drbl\.in\/.*|.*\.smugmug\.com\/.*|.*\.smugmug\.com\/.*#.*|emberapp\.com\/.*\/images\/.*|emberapp\.com\/.*\/images\/.*\/sizes\/.*|emberapp\.com\/.*\/collections\/.*\/.*|emberapp\.com\/.*\/categories\/.*\/.*\/.*|embr\.it\/.*|picasaweb\.google\.com.*\/.*\/.*#.*|picasaweb\.google\.com.*\/lh\/photo\/.*|picasaweb\.google\.com.*\/.*\/.*|dailybooth\.com\/.*\/.*|brizzly\.com\/pic\/.*|pics\.brizzly\.com\/.*\.jpg|img\.ly\/.*|www\.tinypic\.com\/view\.php.*|tinypic\.com\/view\.php.*|www\.tinypic\.com\/player\.php.*|tinypic\.com\/player\.php.*|www\.tinypic\.com\/r\/.*\/.*|tinypic\.com\/r\/.*\/.*|.*\.tinypic\.com\/.*\.jpg|.*\.tinypic\.com\/.*\.png|meadd\.com\/.*\/.*|meadd\.com\/.*|.*\.deviantart\.com\/art\/.*|.*\.deviantart\.com\/gallery\/.*|.*\.deviantart\.com\/#\/.*|fav\.me\/.*|.*\.deviantart\.com|.*\.deviantart\.com\/gallery|.*\.deviantart\.com\/.*\/.*\.jpg|.*\.deviantart\.com\/.*\/.*\.gif|.*\.deviantart\.net\/.*\/.*\.jpg|.*\.deviantart\.net\/.*\/.*\.gif|www\.fotopedia\.com\/.*\/.*|fotopedia\.com\/.*\/.*|photozou\.jp\/photo\/show\/.*\/.*|photozou\.jp\/photo\/photo_only\/.*\/.*|instagr\.am\/p\/.*|instagram\.com\/p\/.*|skitch\.com\/.*\/.*\/.*|img\.skitch\.com\/.*|share\.ovi\.com\/media\/.*\/.*|www\.questionablecontent\.net\/|questionablecontent\.net\/|www\.questionablecontent\.net\/view\.php.*|questionablecontent\.net\/view\.php.*|questionablecontent\.net\/comics\/.*\.png|www\.questionablecontent\.net\/comics\/.*\.png|picplz\.com\/user\/.*\/pic\/.*\/|twitrpix\.com\/.*|.*\.twitrpix\.com\/.*|www\.someecards\.com\/.*\/.*|someecards\.com\/.*\/.*|some\.ly\/.*|www\.some\.ly\/.*|pikchur\.com\/.*|achewood\.com\/.*|www\.achewood\.com\/.*|achewood\.com\/index\.php.*|www\.achewood\.com\/index\.php.*|www\.whosay\.com\/content\/.*|www\.whosay\.com\/photos\/.*|www\.whosay\.com\/videos\/.*|say\.ly\/.*|ow\.ly\/i\/.*|color\.com\/s\/.*|bnter\.com\/convo\/.*|mlkshk\.com\/p\/.*|lockerz\.com\/s\/.*|soundcloud\.com\/.*|soundcloud\.com\/.*\/.*|soundcloud\.com\/.*\/sets\/.*|soundcloud\.com\/groups\/.*|snd\.sc\/.*|www\.last\.fm\/music\/.*|www\.last\.fm\/music\/+videos\/.*|www\.last\.fm\/music\/+images\/.*|www\.last\.fm\/music\/.*\/_\/.*|www\.last\.fm\/music\/.*\/.*|www\.mixcloud\.com\/.*\/.*\/|www\.radionomy\.com\/.*\/radio\/.*|radionomy\.com\/.*\/radio\/.*|www\.hark\.com\/clips\/.*|www\.rdio\.com\/#\/artist\/.*\/album\/.*|www\.rdio\.com\/artist\/.*\/album\/.*|www\.zero-inch\.com\/.*|.*\.bandcamp\.com\/|.*\.bandcamp\.com\/track\/.*|.*\.bandcamp\.com\/album\/.*|freemusicarchive\.org\/music\/.*|www\.freemusicarchive\.org\/music\/.*|freemusicarchive\.org\/curator\/.*|www\.freemusicarchive\.org\/curator\/.*|www\.npr\.org\/.*\/.*\/.*\/.*\/.*|www\.npr\.org\/.*\/.*\/.*\/.*\/.*\/.*|www\.npr\.org\/.*\/.*\/.*\/.*\/.*\/.*\/.*|www\.npr\.org\/templates\/story\/story\.php.*|huffduffer\.com\/.*\/.*|www\.audioboo\.fm\/boos\/.*|audioboo\.fm\/boos\/.*|boo\.fm\/b.*|www\.xiami\.com\/song\/.*|xiami\.com\/song\/.*|www\.saynow\.com\/playMsg\.html.*|www\.saynow\.com\/playMsg\.html.*|grooveshark\.com\/s\/.*|listen\.grooveshark\.com\/s\/.*|radioreddit\.com\/songs.*|www\.radioreddit\.com\/songs.*|radioreddit\.com\/\?q=songs.*|www\.radioreddit\.com\/\?q=songs.*|www\.gogoyoko\.com\/song\/.*|.*amazon\..*\/gp\/product\/.*|.*amazon\..*\/.*\/dp\/.*|.*amazon\..*\/dp\/.*|.*amazon\..*\/o\/ASIN\/.*|.*amazon\..*\/gp\/offer-listing\/.*|.*amazon\..*\/.*\/ASIN\/.*|.*amazon\..*\/gp\/product\/images\/.*|.*amazon\..*\/gp\/aw\/d\/.*|www\.amzn\.com\/.*|amzn\.com\/.*|www\.shopstyle\.com\/browse.*|www\.shopstyle\.com\/action\/apiVisitRetailer.*|api\.shopstyle\.com\/action\/apiVisitRetailer.*|www\.shopstyle\.com\/action\/viewLook.*|gist\.github\.com\/.*|twitter\.com\/.*\/status\/.*|twitter\.com\/.*\/statuses\/.*|www\.twitter\.com\/.*\/status\/.*|www\.twitter\.com\/.*\/statuses\/.*|mobile\.twitter\.com\/.*\/status\/.*|mobile\.twitter\.com\/.*\/statuses\/.*|www\.crunchbase\.com\/.*\/.*|crunchbase\.com\/.*\/.*|www\.slideshare\.net\/.*\/.*|www\.slideshare\.net\/mobile\/.*\/.*|slidesha\.re\/.*|scribd\.com\/doc\/.*|www\.scribd\.com\/doc\/.*|scribd\.com\/mobile\/documents\/.*|www\.scribd\.com\/mobile\/documents\/.*|screenr\.com\/.*|polldaddy\.com\/community\/poll\/.*|polldaddy\.com\/poll\/.*|answers\.polldaddy\.com\/poll\/.*|www\.5min\.com\/Video\/.*|www\.howcast\.com\/videos\/.*|www\.screencast\.com\/.*\/media\/.*|screencast\.com\/.*\/media\/.*|www\.screencast\.com\/t\/.*|screencast\.com\/t\/.*|issuu\.com\/.*\/docs\/.*|www\.kickstarter\.com\/projects\/.*\/.*|www\.scrapblog\.com\/viewer\/viewer\.aspx.*|ping\.fm\/p\/.*|chart\.ly\/symbols\/.*|chart\.ly\/.*|maps\.google\.com\/maps\?.*|maps\.google\.com\/\?.*|maps\.google\.com\/maps\/ms\?.*|.*\.craigslist\.org\/.*\/.*|my\.opera\.com\/.*\/albums\/show\.dml\?id=.*|my\.opera\.com\/.*\/albums\/showpic\.dml\?album=.*&picture=.*|tumblr\.com\/.*|.*\.tumblr\.com\/post\/.*|www\.polleverywhere\.com\/polls\/.*|www\.polleverywhere\.com\/multiple_choice_polls\/.*|www\.polleverywhere\.com\/free_text_polls\/.*|www\.quantcast\.com\/wd:.*|www\.quantcast\.com\/.*|siteanalytics\.compete\.com\/.*|statsheet\.com\/statplot\/charts\/.*\/.*\/.*\/.*|statsheet\.com\/statplot\/charts\/e\/.*|statsheet\.com\/.*\/teams\/.*\/.*|statsheet\.com\/tools\/chartlets\?chart=.*|.*\.status\.net\/notice\/.*|identi\.ca\/notice\/.*|brainbird\.net\/notice\/.*|shitmydadsays\.com\/notice\/.*|www\.studivz\.net\/Profile\/.*|www\.studivz\.net\/l\/.*|www\.studivz\.net\/Groups\/Overview\/.*|www\.studivz\.net\/Gadgets\/Info\/.*|www\.studivz\.net\/Gadgets\/Install\/.*|www\.studivz\.net\/.*|www\.meinvz\.net\/Profile\/.*|www\.meinvz\.net\/l\/.*|www\.meinvz\.net\/Groups\/Overview\/.*|www\.meinvz\.net\/Gadgets\/Info\/.*|www\.meinvz\.net\/Gadgets\/Install\/.*|www\.meinvz\.net\/.*|www\.schuelervz\.net\/Profile\/.*|www\.schuelervz\.net\/l\/.*|www\.schuelervz\.net\/Groups\/Overview\/.*|www\.schuelervz\.net\/Gadgets\/Info\/.*|www\.schuelervz\.net\/Gadgets\/Install\/.*|www\.schuelervz\.net\/.*|myloc\.me\/.*|pastebin\.com\/.*|pastie\.org\/.*|www\.pastie\.org\/.*|redux\.com\/stream\/item\/.*\/.*|redux\.com\/f\/.*\/.*|www\.redux\.com\/stream\/item\/.*\/.*|www\.redux\.com\/f\/.*\/.*|cl\.ly\/.*|cl\.ly\/.*\/content|speakerdeck\.com\/u\/.*\/p\/.*|www\.kiva\.org\/lend\/.*|www\.timetoast\.com\/timelines\/.*|storify\.com\/.*\/.*|.*meetup\.com\/.*|meetu\.ps\/.*|www\.dailymile\.com\/people\/.*\/entries\/.*|.*\.kinomap\.com\/.*|www\.metacdn\.com\/api\/users\/.*\/content\/.*|www\.metacdn\.com\/api\/users\/.*\/media\/.*|prezi\.com\/.*\/.*|.*\.uservoice\.com\/.*\/suggestions\/.*|formspring\.me\/.*|www\.formspring\.me\/.*|formspring\.me\/.*\/q\/.*|www\.formspring\.me\/.*\/q\/.*|twitlonger\.com\/show\/.*|www\.twitlonger\.com\/show\/.*|tl\.gd\/.*|www\.qwiki\.com\/q\/.*|crocodoc\.com\/.*|.*\.crocodoc\.com\/.*|.*youtube\.com\/watch.*|.*\.youtube\.com\/v\/.*|youtu\.be\/.*|.*\.youtube\.com\/user\/.*|.*\.youtube\.com\/.*#.*\/.*|m\.youtube\.com\/watch.*|m\.youtube\.com\/index.*|.*\.youtube\.com\/profile.*|.*\.youtube\.com\/view_play_list.*|.*\.youtube\.com\/playlist.*|www\.vevo\.com\/watch\/.*|www\.vevo\.com\/video\/.*|.*justin\.tv\/.*|.*justin\.tv\/.*\/b\/.*|.*justin\.tv\/.*\/w\/.*|www\.ustream\.tv\/recorded\/.*|www\.ustream\.tv\/channel\/.*|www\.ustream\.tv\/.*|qik\.com\/video\/.*|qik\.com\/.*|qik\.ly\/.*|.*revision3\.com\/.*|.*\.dailymotion\.com\/video\/.*|.*\.dailymotion\.com\/.*\/video\/.*|collegehumor\.com\/video:.*|collegehumor\.com\/video\/.*|www\.collegehumor\.com\/video:.*|www\.collegehumor\.com\/video\/.*|.*twitvid\.com\/.*|www\.break\.com\/.*\/.*|vids\.myspace\.com\/index\.cfm\?fuseaction=vids\.individual&videoid.*|www\.myspace\.com\/index\.cfm\?fuseaction=.*&videoid.*|www\.metacafe\.com\/watch\/.*|www\.metacafe\.com\/w\/.*|blip\.tv\/file\/.*|.*\.blip\.tv\/file\/.*|video\.google\.com\/videoplay\?.*|.*revver\.com\/video\/.*|video\.yahoo\.com\/watch\/.*\/.*|video\.yahoo\.com\/network\/.*|.*viddler\.com\/explore\/.*\/videos\/.*|liveleak\.com\/view\?.*|www\.liveleak\.com\/view\?.*|animoto\.com\/play\/.*|dotsub\.com\/view\/.*|www\.overstream\.net\/view\.php\?oid=.*|www\.livestream\.com\/.*|www\.worldstarhiphop\.com\/videos\/video.*\.php\?v=.*|worldstarhiphop\.com\/videos\/video.*\.php\?v=.*|teachertube\.com\/viewVideo\.php.*|www\.teachertube\.com\/viewVideo\.php.*|www1\.teachertube\.com\/viewVideo\.php.*|www2\.teachertube\.com\/viewVideo\.php.*|bambuser\.com\/v\/.*|bambuser\.com\/channel\/.*|bambuser\.com\/channel\/.*\/broadcast\/.*|www\.schooltube\.com\/video\/.*\/.*|bigthink\.com\/ideas\/.*|bigthink\.com\/series\/.*|sendables\.jibjab\.com\/view\/.*|sendables\.jibjab\.com\/originals\/.*|www\.xtranormal\.com\/watch\/.*|socialcam\.com\/v\/.*|www\.socialcam\.com\/v\/.*|dipdive\.com\/media\/.*|dipdive\.com\/member\/.*\/media\/.*|dipdive\.com\/v\/.*|.*\.dipdive\.com\/media\/.*|.*\.dipdive\.com\/v\/.*|v\.youku\.com\/v_show\/.*\.html|v\.youku\.com\/v_playlist\/.*\.html|www\.snotr\.com\/video\/.*|snotr\.com\/video\/.*|video\.jardenberg\.se\/.*|www\.clipfish\.de\/.*\/.*\/video\/.*|www\.myvideo\.de\/watch\/.*|www\.whitehouse\.gov\/photos-and-video\/video\/.*|www\.whitehouse\.gov\/video\/.*|wh\.gov\/photos-and-video\/video\/.*|wh\.gov\/video\/.*|www\.hulu\.com\/watch.*|www\.hulu\.com\/w\/.*|hulu\.com\/watch.*|hulu\.com\/w\/.*|.*crackle\.com\/c\/.*|www\.fancast\.com\/.*\/videos|www\.funnyordie\.com\/videos\/.*|www\.funnyordie\.com\/m\/.*|funnyordie\.com\/videos\/.*|funnyordie\.com\/m\/.*|www\.vimeo\.com\/groups\/.*\/videos\/.*|www\.vimeo\.com\/.*|vimeo\.com\/groups\/.*\/videos\/.*|vimeo\.com\/.*|vimeo\.com\/m\/#\/.*|www\.ted\.com\/talks\/.*\.html.*|www\.ted\.com\/talks\/lang\/.*\/.*\.html.*|www\.ted\.com\/index\.php\/talks\/.*\.html.*|www\.ted\.com\/index\.php\/talks\/lang\/.*\/.*\.html.*|.*nfb\.ca\/film\/.*|www\.thedailyshow\.com\/watch\/.*|www\.thedailyshow\.com\/full-episodes\/.*|www\.thedailyshow\.com\/collection\/.*\/.*\/.*|movies\.yahoo\.com\/movie\/.*\/video\/.*|movies\.yahoo\.com\/movie\/.*\/trailer|movies\.yahoo\.com\/movie\/.*\/video|www\.colbertnation\.com\/the-colbert-report-collections\/.*|www\.colbertnation\.com\/full-episodes\/.*|www\.colbertnation\.com\/the-colbert-report-videos\/.*|www\.comedycentral\.com\/videos\/index\.jhtml\?.*|www\.theonion\.com\/video\/.*|theonion\.com\/video\/.*|wordpress\.tv\/.*\/.*\/.*\/.*\/|www\.traileraddict\.com\/trailer\/.*|www\.traileraddict\.com\/clip\/.*|www\.traileraddict\.com\/poster\/.*|www\.escapistmagazine\.com\/videos\/.*|www\.trailerspy\.com\/trailer\/.*\/.*|www\.trailerspy\.com\/trailer\/.*|www\.trailerspy\.com\/view_video\.php.*|www\.atom\.com\/.*\/.*\/|fora\.tv\/.*\/.*\/.*\/.*|www\.spike\.com\/video\/.*|www\.gametrailers\.com\/video\/.*|gametrailers\.com\/video\/.*|www\.koldcast\.tv\/video\/.*|www\.koldcast\.tv\/#video:.*|techcrunch\.tv\/watch.*|techcrunch\.tv\/.*\/watch.*|mixergy\.com\/.*|video\.pbs\.org\/video\/.*|www\.zapiks\.com\/.*|tv\.digg\.com\/diggnation\/.*|tv\.digg\.com\/diggreel\/.*|tv\.digg\.com\/diggdialogg\/.*|www\.trutv\.com\/video\/.*|www\.nzonscreen\.com\/title\/.*|nzonscreen\.com\/title\/.*|app\.wistia\.com\/embed\/medias\/.*|hungrynation\.tv\/.*\/episode\/.*|www\.hungrynation\.tv\/.*\/episode\/.*|hungrynation\.tv\/episode\/.*|www\.hungrynation\.tv\/episode\/.*|indymogul\.com\/.*\/episode\/.*|www\.indymogul\.com\/.*\/episode\/.*|indymogul\.com\/episode\/.*|www\.indymogul\.com\/episode\/.*|channelfrederator\.com\/.*\/episode\/.*|www\.channelfrederator\.com\/.*\/episode\/.*|channelfrederator\.com\/episode\/.*|www\.channelfrederator\.com\/episode\/.*|tmiweekly\.com\/.*\/episode\/.*|www\.tmiweekly\.com\/.*\/episode\/.*|tmiweekly\.com\/episode\/.*|www\.tmiweekly\.com\/episode\/.*|99dollarmusicvideos\.com\/.*\/episode\/.*|www\.99dollarmusicvideos\.com\/.*\/episode\/.*|99dollarmusicvideos\.com\/episode\/.*|www\.99dollarmusicvideos\.com\/episode\/.*|ultrakawaii\.com\/.*\/episode\/.*|www\.ultrakawaii\.com\/.*\/episode\/.*|ultrakawaii\.com\/episode\/.*|www\.ultrakawaii\.com\/episode\/.*|barelypolitical\.com\/.*\/episode\/.*|www\.barelypolitical\.com\/.*\/episode\/.*|barelypolitical\.com\/episode\/.*|www\.barelypolitical\.com\/episode\/.*|barelydigital\.com\/.*\/episode\/.*|www\.barelydigital\.com\/.*\/episode\/.*|barelydigital\.com\/episode\/.*|www\.barelydigital\.com\/episode\/.*|threadbanger\.com\/.*\/episode\/.*|www\.threadbanger\.com\/.*\/episode\/.*|threadbanger\.com\/episode\/.*|www\.threadbanger\.com\/episode\/.*|vodcars\.com\/.*\/episode\/.*|www\.vodcars\.com\/.*\/episode\/.*|vodcars\.com\/episode\/.*|www\.vodcars\.com\/episode\/.*|confreaks\.net\/videos\/.*|www\.confreaks\.net\/videos\/.*|video\.allthingsd\.com\/video\/.*|videos\.nymag\.com\/.*|aniboom\.com\/animation-video\/.*|www\.aniboom\.com\/animation-video\/.*|clipshack\.com\/Clip\.aspx\?.*|www\.clipshack\.com\/Clip\.aspx\?.*|grindtv\.com\/.*\/video\/.*|www\.grindtv\.com\/.*\/video\/.*|ifood\.tv\/recipe\/.*|ifood\.tv\/video\/.*|ifood\.tv\/channel\/user\/.*|www\.ifood\.tv\/recipe\/.*|www\.ifood\.tv\/video\/.*|www\.ifood\.tv\/channel\/user\/.*|logotv\.com\/video\/.*|www\.logotv\.com\/video\/.*|lonelyplanet\.com\/Clip\.aspx\?.*|www\.lonelyplanet\.com\/Clip\.aspx\?.*|streetfire\.net\/video\/.*\.htm.*|www\.streetfire\.net\/video\/.*\.htm.*|trooptube\.tv\/videos\/.*|www\.trooptube\.tv\/videos\/.*|sciencestage\.com\/v\/.*\.html|sciencestage\.com\/a\/.*\.html|www\.sciencestage\.com\/v\/.*\.html|www\.sciencestage\.com\/a\/.*\.html|www\.godtube\.com\/featured\/video\/.*|godtube\.com\/featured\/video\/.*|www\.godtube\.com\/watch\/.*|godtube\.com\/watch\/.*|www\.tangle\.com\/view_video.*|mediamatters\.org\/mmtv\/.*|www\.clikthrough\.com\/theater\/video\/.*|espn\.go\.com\/video\/clip.*|espn\.go\.com\/.*\/story.*|abcnews\.com\/.*\/video\/.*|abcnews\.com\/video\/playerIndex.*|abcnews\.go\.com\/.*\/video\/.*|abcnews\.go\.com\/video\/playerIndex.*|washingtonpost\.com\/wp-dyn\/.*\/video\/.*\/.*\/.*\/.*|www\.washingtonpost\.com\/wp-dyn\/.*\/video\/.*\/.*\/.*\/.*|www\.boston\.com\/video.*|boston\.com\/video.*|www\.facebook\.com\/photo\.php.*|www\.facebook\.com\/video\/video\.php.*|www\.facebook\.com\/v\/.*|www\.facebook\.com\/.*\/videos\/.*|cnbc\.com\/id\/.*\?.*video.*|www\.cnbc\.com\/id\/.*\?.*video.*|cnbc\.com\/id\/.*\/play\/1\/video\/.*|www\.cnbc\.com\/id\/.*\/play\/1\/video\/.*|cbsnews\.com\/video\/watch\/.*|www\.google\.com\/buzz\/.*\/.*\/.*|www\.google\.com\/buzz\/.*|www\.google\.com\/profiles\/.*|google\.com\/buzz\/.*\/.*\/.*|google\.com\/buzz\/.*|google\.com\/profiles\/.*|www\.cnn\.com\/video\/.*|edition\.cnn\.com\/video\/.*|money\.cnn\.com\/video\/.*|today\.msnbc\.msn\.com\/id\/.*\/vp\/.*|www\.msnbc\.msn\.com\/id\/.*\/vp\/.*|www\.msnbc\.msn\.com\/id\/.*\/ns\/.*|today\.msnbc\.msn\.com\/id\/.*\/ns\/.*|multimedia\.foxsports\.com\/m\/video\/.*\/.*|msn\.foxsports\.com\/video.*|www\.globalpost\.com\/video\/.*|www\.globalpost\.com\/dispatch\/.*|guardian\.co\.uk\/.*\/video\/.*\/.*\/.*\/.*|www\.guardian\.co\.uk\/.*\/video\/.*\/.*\/.*\/.*|bravotv\.com\/.*\/.*\/videos\/.*|www\.bravotv\.com\/.*\/.*\/videos\/.*|video\.nationalgeographic\.com\/.*\/.*\/.*\.html|dsc\.discovery\.com\/videos\/.*|animal\.discovery\.com\/videos\/.*|health\.discovery\.com\/videos\/.*|investigation\.discovery\.com\/videos\/.*|military\.discovery\.com\/videos\/.*|planetgreen\.discovery\.com\/videos\/.*|science\.discovery\.com\/videos\/.*|tlc\.discovery\.com\/videos\/.*|video\.forbes\.com\/fvn\/.*|vine\.co\/v\/.*|www\.vine\.co\/v\/.*|video\.foxnews\.com\/v\/.*|nbcnews\.com\/.*|www\.nbcnews\.com\/.*)))/i;
window.app=window.app||{};
$.extend(window.app,{load_vidyard_players:function(a,b,c){var d;"function"===typeof a?(d=a,a=$("body")):(a=$(a||"body"),d=c||$.noop);c=a.find(".vidyard_container[data-vidyard-id]");b||(c=c.filter(":visible"));c.each(function(){var a=$(this),b=a.attr("data-vidyard-id"),c=$("#vidyard_"+b+":first");c.length?(a.replaceWith(c.remove()),d()):(a.attr("id","vidyard_"+b).removeAttr("data-vidyard-id"),c=MOBILE_DEVICE||window.RG_EMBEDDED_PAGE?"?width="+a.parent().width():"",$.getScript("//embed.vidyard.com/embed/"+b+
"/iframe/"+c,function(){a.removeClass("loading_with_indicator");d()}))})}});
angular.module("genius").directive("embedly",function(){var a=/^https?:\/\//i,b=function(b){return b.find("a").filter(function(){return a.test($.trim($(this).text()))})},c=_.template('<blockquote class="twitter-tweet"><a href="<%- tweet_url %>"></a></blockquote>'),d=_.template("<div class='embedly_preview u-vertical_margins'><div class='gray_container'><% if (embed.thumbnail_url) { %><div class='embedly_preview-thumb'><img src='<%- embed.thumbnail_url %>' style='<%- embed.style %>'/></div><% } %><div class='embedly_preview-text'><a href='<%- embed.original_url %>' class='embedly_preview-title'><%- embed.title %></a><% if (embed.provider_name) { %><a href='<%- embed.provider_url %>' class='embedly_preview-provider'><%- embed.provider_name %></a><% } %><% if (embed.description) { %><div class='embedly_preview-description'><%- embed.description %></div><% } %></div></div></div>"),e=
_.template('<div class="embedly_preview u-vertical_margins embedly_preview--<%- embed.provider_name %>"><%= embed.html %></div>'),f=_.template('<blockquote class="rg_standalone_container" data-src="//'+CANONICAL_DOMAIN+'/annotations/<%- annotation_id %>/standalone_embed"></blockquote>'),h=function(a){var h=$(a||".embedly:visible");b(h).each(function(){var a=$(this),b;if(app.twitterURLre.test(this.href))a.replaceWith(c({tweet_url:this.href})),$.getScript("//platform.twitter.com/widgets.js");else if(app.rgURLre.test(this.href)&&
this.href===a.text()&&!a.closest(".embedded_annotation.standalone_embed").length)b=app.rgURLre.exec(this.href).pop(),a.replaceWith(f({annotation_id:b})),$.getScript("//"+CANONICAL_DOMAIN+"/annotations/load_standalone_embeds.js");else{if(b=this.href.match(/https?:\/\/embed\.vidyard\.com\/(landingpage|share)\/(.*)/i)){a.addClass("vidyard_container").attr("data-vidyard-id",b[2]).removeAttr("href");app.load_vidyard_players(h,!1);return}if(app.embedlyURLre.test(this.href))a.embedly({addImageStyles:!1,
className:"embedly_preview",secure:!0,query:{luxe:!MOBILE_DEVICE,secure:"true"},display:function(b){var c=b.html;/soundcloud\.com/.test(c)?(b.html=c.replace("visual%3Dtrue","visual%3Dfalse").replace(/height="\d+"/,'height="165"'),b.height=165):"video"==b.type?a.replaceWith(e({embed:b})):"photo"!==b.type&&"rich"!==b.type&&a.replaceWith(d({embed:b}));b.display()}});else return}a.text("Loading embed...")});g(a)},g=function(a){a=$(a||".embedly_pro:visible");b(a).each(function(){if(app.embedlyURLre.test(this.href))return!0;
var a=$(this);a.embedly({secure:!0,query:{secure:"true"},display:function(b){b.description&&a.parent().contents().last()[0]===a[0]&&a.is(":only-child")?a.replaceWith(d({embed:b})):a.text(b.title)}});a.text("Loading embed...")})};return{restrict:"A",link:function(a,b,c){a.$watch(c.embedly||c.ngBindHtml,function(a){a&&h(b)})}}});
angular.module("genius").directive("expandableContent",["Waypoint","setImmediate",function(a,b){return{transclude:!0,templateUrl:"expandable_content.html",link:function(c,d){c.$on("annotation_loaded",function(){d.find(".expandable_content-inner").height()>d.find(".expandable_content").height()&&(c.content_is_taller_than_max_height=!0)});c.expand_content=function(){c.expanded=!0;c.content_is_taller_than_max_height=!1;b(a.refreshAll)}}}}]);
angular.module("genius").directive("facebookShareButton",["Facebook","Tracking",function(a,b){return{restrict:"E",scope:{url:"="},templateUrl:"facebook_share_button.html",link:function(c){c.share_on_facebook=function(){b.track("Bagon Facebook Share");a.share(c.url)}}}}]);angular.module("genius").directive("focusOnChange",function(){return{restrict:"A",link:function(a,b,c){a.$watch(c.focusOnChange,function(){b.focus()})}}});
angular.module("genius").directive("followButton",["FollowService","Session","Tracking",function(a,b,c){return{restrict:"E",scope:{following:"=",id:"=",type:"@"},templateUrl:"follow_button.html",link:function(d){var e;d.user_signed_in=b.user_signed_in;d.label=function(){return d.hoverLabel||(d.following?"Following":"Follow")};d.toggle_following=function(){e||(e=!0,d.following=!d.following,c.track(d.following?"Follow Button":"Unfollow Button"),a.set_following(d.type,d.id,d.following).catch(function(){d.following=
!d.following}).finally(function(){d.hoverLabel=null;e=!1}))}}}}]);
angular.module("genius").directive("geniusBop",[function(){var a=[],b=function(b,c){a.forEach(function(a){a.$apply(function(){a[b]=c})})},c,d,e=function(a){var d=0;clearInterval(c);b("time",a);c=setInterval(function(){d+=100;b("time",a+d)},100)};window._bopPlayerReady=function(){b("isLoaded",!0);Bop.on("songPause",function(){clearInterval(c);b("isPlaying",!1)});Bop.on("songResume",function(){b("isPlaying",!0)});Bop.on("songStart",function(a){b("isPlaying",!0);e(1E3*a.time)});Bop.on("songEnd",function(){Bop.pause();
Bop.seek(0)});Bop.on("positionChange",function(a){e(a.perc/100*d)});Bop.on("serviceSwitch",function(a){b("service",a.service)})};$.getScript("https://assets.bop.fm/embed.js");return{scope:{time:"=",service:"=",bopHref:"@",duration:"=",isPlaying:"=",isLoaded:"=",theme:"@",color:"@"},template:'<a id="bopPlayer" data-height="70" data-width="100%" data-bop-link href="{{ bopHref }}" data-theme="{{ theme }}" data-color="{{ color }}"></a>',link:function(b){b.$on("$destroy",function(){a.splice(a.indexOf(b),
1)});a.push(b);b.$watch("duration",function(){d=b.duration})}}}]);angular.module("genius").directive("geniusSvg",["Bowser","$templateCache",function(a,b){return{scope:{src:"@"},link:function(c,d,e){c=$(b.get(c.src));c.attr("class",e.class);d.replaceWith(c);a.msie&&e.viewbox&&(d=e.viewbox.split(" "),3<d.length&&c.width(c.height()*(parseInt(d[2])/parseInt(d[3]))))}}}]);angular.module("genius").directive("headerMenuItem",function(){return{restrict:"E",transclude:!0,scope:{name:"@",url:"@"},templateUrl:"header_menu_item.html"}});
angular.module("genius").directive("kb",["$window",function(a){return{restrict:"E",link:function(b,c,d){$(a).bind("keydown",d.shortcut,function(){b.$apply(function(){b.$eval(d.action)});return!1})}}}]);angular.module("genius").directive("leaderboard",function(){return{restrict:"E",templateUrl:"leaderboard.html",scope:{leaderboard_rows:"=collection"}}});
angular.module("genius").directive("lyrics",["$compile","LyricsEditingService","Session",function(a,b,c){var d=$("lyrics").html();return{restrict:"E",templateUrl:"lyrics.html",transclude:!0,controller:["$scope",function(d){d.can_edit=c.has_permission("edit_lyrics",d.song);this.start_editing=function(){d.editing=!0;var a=b.prepare_lyrics_for_editing(d.lyrics_html);d.editable_markdown=a.markdown;d.editable_attr_hash=a.attr_hash};this.finish_editing=function(){d.saving||(d.saving=!0,b.save({song:d.song,
edited:d.editable_markdown,attr_hash:d.editable_attr_hash}).then(function(b){angular.extend(d.song,b.client_timestamps);d.lyrics_section_html(a(b.lyrics)(d));d.lyrics_html=b.lyrics;d.editing=!1}).finally(function(){d.saving=!1}))}}],controllerAs:"lyricsCtrl",link:function(a,b){var c=b.find("section"),g=b.find("textarea");a.lyrics_section_html=c.html.bind(c);a.lyrics_html=d;a.$watch("editing",function(){g.trigger("autosize.resize")});g.autosize()}}}]);
angular.module("genius").directive("ngBodyClass",function(){var a=$("body");return{restrict:"A",link:function(b,c,d){b.$watch(d.ngBodyClass,function(b){for(var c in b)a.toggleClass(c,!!b[c])},!0)}}});angular.module("genius").directive("ngClickDisabled",function(){return{priority:-2,restrict:"A",link:function(a,b,c){b.on("click",function(b){if(a.$eval(c.ngClickDisabled))return b.stopImmediatePropagation(),!1})}}});
angular.module("genius").directive("notificationInbox",["$document","TopBarIndicatorsLoader","Pusher","Tracking","Session",function(a,b,c,d,e){var f=function(a,b){b.qtip({content:{prerender:!0,url:"/"+a.inbox_name,data:{event_id_to_expand:$.deparam.querystring().event_id_to_expand},text:$("<div>",{"class":"qtip-loading-bar",text:"Loading..."})},position:{target:$(".sub_header_content"),corner:{target:"bottomRight",tooltip:"topRight"}},hide:{effect:{length:0},when:{event:"unfocus"}},show:{effect:{length:0},
delay:0,when:{event:"click"}},style:{name:"light",tip:{corner:"topRight",size:{x:20,y:20}},width:{min:580,max:580},border:{width:0,color:"transparent"},classes:{tooltip:"activity_stream_tooltip mecha--deprecated",content:a.inbox_name+"_tooltip_content",tip:"activity_stream_tip"}},api:{onContentUpdate:a.mark_visible_as_read,onShow:a.$apply.bind(a,a.record_inbox_shown),onHide:a.$apply.bind(a,a.record_inbox_hidden)}})};return{scope:{inbox_name:"@inboxName",icon_modifier:"@iconModifier",abbreviate_after:"@abbreviateAfter",
sync_count_to_title:"@syncCountToTitle"},restrict:"E",templateUrl:"notification_inbox.html",controller:["$scope",function(c){angular.extend(c,{reload_inbox_tooltip:function(){c.qtip_element.reloadTooltip()},record_inbox_shown:function(){d.track("Inbox Open",{inbox_name:c.inbox_name,unread_count:c.unread_count});c.unread_count=0;c.update_window_title_count();c.inbox_tooltip_open=!0;c.mark_visible_as_read()},record_inbox_hidden:function(){c.inbox_tooltip_open=!1;c.new_events_available&&(c.reload_inbox_tooltip(),
c.new_events_available=!1)},mark_visible_as_read:function(){var a=$("form#mark_"+c.inbox_name+"_read");a.length&&c.inbox_tooltip_open&&($.post(a.attr("action"),a.serialize()),a.remove())},notify_new_events:function(){b.refresh();c.inbox_tooltip_open?c.new_events_available=!0:c.reload_inbox_tooltip()},update_window_title_count:function(){c.sync_count_to_title&&(a[0].title=a[0].title.replace(/^(\(\d+\) )?/,0<c.unread_count?"("+c.unread_count+") ":""))}})}],link:function(a,d){a.inbox_tooltip_open=!1;
a.new_events_available=!1;a.qtip_element=d.find(".header-inbox_icon");f(a,a.qtip_element);b.listen_for(a.inbox_name,function(b){a.unread_count=b});a.$watch("unread_count",function(b){!b||1>b?a.unread_count_for_display=void 0:a.abbreviate_after&&b>parseInt(a.abbreviate_after,10)?a.unread_count_for_display=a.abbreviate_after+"+":a.unread_count_for_display=b;a.update_window_title_count()});c.subscribe(e.current_user.pusher_channel,"new-"+a.inbox_name.replace(/_/g,"-")+"-event",function(){a.notify_new_events()});
c.subscribe(e.current_user.pusher_channel,"inbox-marked-read",function(b){b.inbox===a.inbox_name&&a.notify_new_events()});$("."+a.inbox_name+"_tooltip_content").live("ajax:complete",a.mark_visible_as_read)}}}]);
angular.module("genius").directive("openInApp",["$timeout","$window","Tracking","Bowser","AppConfig",function(a,b,c,d,e){return{restrict:"E",templateUrl:"open_in_app.html",scope:{iosDeepLink:"=",placement:"@"},link:function(a,h){a.is_ios=d.ios;h.on("click",function(){a.hasTriedToOpenApp||(a.hasTriedToOpenApp=!0,c.track("Clicked Open in App"),b.location=a.iosDeepLink,a.appStoreUrl=e.app_store_url)})}}}]);
angular.module("genius").directive("preload",function(){return{restrict:"E",link:function(a,b,c){c=JSON.parse(c.preloadData);angular.forEach(c,function(b,c){a[c]=b});b.remove()}}});angular.module("genius").directive("preventDefaultClick",function(){return{priority:-1,restrict:"A",link:function(a,b){b.on("click",function(a){a.preventDefault();a.stopPropagation()})}}});angular.module("genius").directive("primaryAlbum",function(){return{restrict:"E",scope:{album:"=",highlightedTrack:"="},templateUrl:"primary_album.html"}});
angular.module("genius").directive("pusher",["Pusher",function(a){return{scope:{channel:"@pusherChannel",event_name:"@pusherEventName",updateCallback:"&pusherUpdate",enabled:"="},link:function(b){var c=function(){a.subscribe(b.channel,b.event_name,function(a){b.updateCallback({value:a.value})})};void 0===b.enabled&&(b.enabled=!0);b.enabled&&c();b.$watch("enabled",function(a,b){a&&!b&&c()})}}}]);
angular.module("genius").directive("pyongButton",["PyongService",function(a){return{restrict:"E",scope:{id:"=",onPyong:"&",pyonged:"=",pyongsCount:"=",showForm:"&",type:"@"},templateUrl:"pyong_button.html",link:function(b){b.pyong=function(){b.pyonged||(b.showForm(),b.pyonged=b.clickedPyong=!0,b.pyongsCount+=1,a.pyong(b.type,b.id).then(function(a){b.pyonged=a.current_user_metadata.interactions.pyong;b.pyongsCount=a.pyongs_count;b.onPyong()}).catch(function(){b.pyongsCount-=1;b.pyonged=!1}))}}}}]);
angular.module("genius").directive("pyongForm",["PyongService",function(a){return{restrict:"E",scope:{id:"=",type:"@",onComplete:"&"},templateUrl:"pyong_form.html",link:function(b){b.submit=function(c){b.disabled=!0;a.finalizePyong(b.type,b.id,c).then(function(){b.onComplete()}).finally(function(){b.disabled=!1})}}}}]);
angular.module("genius").directive("quickSearch",function(){return{restrict:"A",link:function(a,b){b.autocomplete("/search/quick.js",{delay:250,scrollHeight:500,matchSubset:!1,max:20,minChars:4,selectFirst:!1,resultsClass:"ac_results quick_search-results",formatResult:function(a){return a[1]?"Loading...":" "}}).result(function(a,b){b&&b[1]&&($("form.global_search :submit").attr("disabled","disabled"),window.location.href=b[1])})}}});
angular.module("genius").directive("referentFragment",function(){return{templateUrl:"referent_fragment.html",restrict:"E",scope:{referent:"=object"},link:function(a){a.expand_referent=function(){a.referent_too_tall=!1};a.$watch("referent",function(b){b&&30<b.fragment.split(/\s+/).length&&(a.referent_too_tall=!0)})}}});
angular.module("genius").directive("scrollPoint",["$rootScope",function(a){var b=[];a.scroll_to=function(a){for(var d=0;d<b.length;d++){var e=b[d];if(e.object===a){e.callback();break}}};return{scope:{object:"="},link:function(a,d){a.callback=function(){$("html,body").animate({scrollTop:d.offset().top})};b.push(a);a.$on("$destroy",function(){b.splice(b.indexOf(a),1)})}}}]);
angular.module("genius").directive("scrubber",["$document",function(a){return{scope:{scrubPercentage:"=",scrubbed:"&",scale:"@"},link:function(b,c){var d=c.width()*parseFloat(b.scale||"1"),e=function(a){a=Math.max(0,Math.min(d,a-c.offset().left));b.scrubbed({percentage:a/d})};c.on("click",function(a){e(a.pageX)});c.on("mousedown",function(){var f=function(a){a=Math.max(0,Math.min(d,a.pageX-c.offset().left));b.scrubPercentage=a/d};a.on("mousemove",f);a.one("mouseup",function(c){e(c.pageX);a.off("mousemove",
f);setTimeout(function(){b.scrubPercentage=null},500)})})}}}]);angular.module("genius").directive("searchForm",function(){return{restrict:"E",templateUrl:"search_form.html",scope:{style:"@searchStyle",path:"@"},link:function(a,b){var c=b.find("input");a.unfocus=function(){a.focused=!1};a.focus=function(){a.focused=!0;c.focus()};b.on("click",function(){a.$apply(function(){a.focus()})});a.submit_form=function(){a.focused&&(a.submitting=!0,b.find("form").submit(),a.search_text="Loading...")}}}});
angular.module("genius").directive("selectAllOnClick",function(){return{restrict:"A",link:function(a,b){b.on("click",function(){this.select()})}}});angular.module("genius").directive("setCookieAndCloseOnClick",["Tracking",function(a){return{require:"^displayUnlessCookie",link:function(b,c,d,e){c.on("click",function(){a.track(b.$parent.name);e.set_cookie_and_close();b.$apply();return!1})}}}]);
angular.module("genius").directive("slideOverPane",function(){return{restrict:"E",templateUrl:"slide_over_pane.html",transclude:!0,scope:{condition:"=",closeOn:"&",darkBackground:"="}}});
angular.module("genius").directive("songMetadata",["SongService",function(a){return{templateUrl:"song_metadata.html",restrict:"E",scope:{song:"="},link:function(b){b.$watch("tags",function(){b.primary_tags=b.song.tags.filter(function(a){return a.primary})});b.toggle_contributors=function(){0!==b.song.stats.contributors&&(b.contributors_showing=!b.contributors_showing,d())};var c=0;b.loading_contributors=!1;var d=_.once(function(){b.loading_contributors=!0;a.load_contributor_data(b.song.id).then(function(a){b.contributors=
a;b.has_more_iq_earners=b.contributors.iq_earners.length<a.iq_earners_total;c+=1}).finally(function(){b.loading_contributors=!1})});b.load_more_iq_earners=function(){b.loading_contributors||(b.loading_contributors=!0,a.load_iq_earners(b.song.id,{page:c}).then(function(a){b.contributors.iq_earners=b.contributors.iq_earners.concat(a.iq_earners);b.has_more_iq_earners=b.contributors.iq_earners.length<a.iq_earners_total;c+=1}).finally(function(){b.loading_contributors=!1}))}}}}]);
angular.module("genius").directive("timestampInput",["timestamp_for_displayFilter","$debounce",function(a,b){return{scope:{timestamp:"=ngModel",ngDisabled:"="},template:'<input ng-model="string" ng-disabled="ngDisabled" type="text"/>',link:function(c,d){c.$watch("timestamp",function(b){c.string=a(b)});var e=function(){var a;(a=c.string)?(a=a.split(":"),a=Math.floor(1E3*(60*parseInt(a[0]||"0",10)+parseFloat(a[1]||"0")))):a=null;c.timestamp=a},f=b(e,2E3);d.on("keyup",f);d.find("input").on("blur",function(){e()})}}}]);
angular.module("genius").directive("tooltip",function(){return{restrict:"E",transclude:!0,replace:!0,templateUrl:"tooltip.html",scope:{header:"@",icon:"@",menu:"="}}});angular.module("genius").directive("trackListing",function(){return{restrict:"E",scope:{tracks:"=",currentSong:"="},templateUrl:"track_listing.html"}});
angular.module("genius").directive("twitterShareButton",["Twitter","Tracking",function(a,b){return{restrict:"E",scope:{url:"=",message:"="},templateUrl:"twitter_share_button.html",link:function(c){c.share_on_twitter=function(){b.track("Bagon Twitter Share");a.share({url:c.url,message:c.message})}}}}]);
!function(a,b){function c(a){return function(){var b={method:a},c=Array.prototype.slice.call(arguments);/^get/.test(a)?(d.assert(0<c.length,"Get methods require a callback."),c.unshift(b)):(/^set/.test(a)&&(d.assert(0!==c.length,"Set methods require a value."),b.value=c[0]),c=[b]);this.send.apply(this,c)}}var d={DEBUG:!1,VERSION:"0.0.10",CONTEXT:"player.js"};d.POST_MESSAGE=!!a.postMessage;d.ENABLE_CONTEXT=!1;d.origin=function(b){return"//"===b.substr(0,2)&&(b=a.location.protocol+b),b.split("/").slice(0,
3).join("/")};d.addEvent=function(a,b,c){a&&(a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent?a.attachEvent("on"+b,c):a["on"+b]=c)};d.log=function(){d.log.history=d.log.history||[];d.log.history.push(arguments);a.console&&d.DEBUG&&a.console.log(Array.prototype.slice.call(arguments))};d.isString=function(a){return"[object String]"===Object.prototype.toString.call(a)};d.isObject=function(a){return"[object Object]"===Object.prototype.toString.call(a)};d.isArray=function(a){return"[object Array]"===
Object.prototype.toString.call(a)};d.isNone=function(a){return null===a||void 0===a};d.has=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};d.indexOf=function(a,b){if(null==a)return-1;var c=0,d=a.length;if(Array.prototype.IndexOf&&a.indexOf===Array.prototype.IndexOf)return a.indexOf(b);for(;d>c;c++)if(a[c]===b)return c;return-1};d.assert=function(a,b){if(!a)throw b||"Player.js Assert Failed";};d.Keeper=function(){this.init()};d.Keeper.prototype.init=function(){this.data={}};d.Keeper.prototype.getUUID=
function(){return"listener-xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"===a?b:3&b|8).toString(16)})};d.Keeper.prototype.has=function(a,b){if(!this.data.hasOwnProperty(a))return!1;if(d.isNone(b))return!0;for(var c=this.data[a],e=0;e<c.length;e++)if(c[e].id===b)return!0;return!1};d.Keeper.prototype.add=function(a,b,c,d,e){a={id:a,event:b,cb:c,ctx:d,one:e};this.has(b)?this.data[b].push(a):this.data[b]=[a]};d.Keeper.prototype.execute=function(a,b,c,
e){if(!this.has(a,b))return!1;for(var f=[],h=[],u=0;u<this.data[a].length;u++){var v=this.data[a][u];d.isNone(b)||!d.isNone(b)&&v.id===b?(h.push({cb:v.cb,ctx:v.ctx?v.ctx:e,data:c}),!1===v.one&&f.push(v)):f.push(v)}0===f.length?delete this.data[a]:this.data[a]=f;for(a=0;a<h.length;a++)b=h[a],b.cb.call(b.ctx,b.data)};d.Keeper.prototype.on=function(a,b,c,d){this.add(a,b,c,d,!1)};d.Keeper.prototype.one=function(a,b,c,d){this.add(a,b,c,d,!0)};d.Keeper.prototype.off=function(a,b){var c=[];if(!this.data.hasOwnProperty(a))return c;
for(var e=[],f=0;f<this.data[a].length;f++){var h=this.data[a][f];d.isNone(b)||h.cb===b?d.isNone(h.id)||c.push(h.id):e.push(h)}return 0===e.length?delete this.data[a]:this.data[a]=e,c};d.Player=function(a,b){return this instanceof d.Player?void this.init(a,b):new d.Player(a,b)};d.EVENTS={READY:"ready",PLAY:"play",PAUSE:"pause",ENDED:"ended",TIMEUPDATE:"timeupdate",PROGRESS:"progress",ERROR:"error"};d.EVENTS.all=function(){var a=[],b;for(b in d.EVENTS)d.has(d.EVENTS,b)&&d.isString(d.EVENTS[b])&&a.push(d.EVENTS[b]);
return a};d.METHODS={PLAY:"play",PAUSE:"pause",GETPAUSED:"getPaused",MUTE:"mute",UNMUTE:"unmute",GETMUTED:"getMuted",SETVOLUME:"setVolume",GETVOLUME:"getVolume",GETDURATION:"getDuration",SETCURRENTTIME:"setCurrentTime",GETCURRENTTIME:"getCurrentTime",SETLOOP:"setLoop",GETLOOP:"getLoop",REMOVEEVENTLISTENER:"removeEventListener",ADDEVENTLISTENER:"addEventListener"};d.METHODS.all=function(){var a=[],b;for(b in d.METHODS)d.has(d.METHODS,b)&&d.isString(d.METHODS[b])&&a.push(d.METHODS[b]);return a};d.READIED=
[];d.Player.prototype.init=function(c){var e=this;d.isString(c)&&(c=b.getElementById(c));this.elem=c;this.origin=d.origin(c.src);this.keeper=new d.Keeper;this.isReady=!1;this.queue=[];this.events=d.EVENTS.all();this.methods=d.METHODS.all();d.POST_MESSAGE?d.addEvent(a,"message",function(a){e.receive(a)}):d.log("Post Message is not Available.");-1<d.indexOf(d.READIED,c.src)?e.loaded=!0:this.elem.onload=function(){e.loaded=!0}};d.Player.prototype.send=function(a,b,c){if(a.context=d.CONTEXT,a.version=
d.VERSION,b){var e=this.keeper.getUUID();a.listener=e;this.keeper.one(e,a.method,b,c)}return this.isReady||"ready"===a.value?(d.log("Player.send",a,this.origin),!0===this.loaded&&this.elem.contentWindow.postMessage(JSON.stringify(a),this.origin),!0):(d.log("Player.queue",a),this.queue.push(a),!1)};d.Player.prototype.receive=function(a){if(d.log("Player.receive",a),a.origin!==this.origin)return!1;var b;try{b=JSON.parse(a.data)}catch(c){return!1}return d.ENABLE_CONTEXT&&b.context!==d.CONTEXT?!1:("ready"===
b.event&&b.value&&b.value.src===this.elem.src&&this.ready(b),void(this.keeper.has(b.event,b.listener)&&this.keeper.execute(b.event,b.listener,b.value,this)))};d.Player.prototype.ready=function(a){if(!0===this.isReady)return!1;a.value.events&&(this.events=a.value.events);a.value.methods&&(this.methods=a.value.methods);this.loaded=this.isReady=!0;for(var b=0;b<this.queue.length;b++){var c=this.queue[b];d.log("Player.dequeue",c);"ready"===a.event&&this.keeper.execute(c.event,c.listener,!0,this);this.send(c)}this.queue=
[]};d.Player.prototype.on=function(a,b,c){var d=this.keeper.getUUID();return"ready"===a?this.keeper.one(d,a,b,c):this.keeper.on(d,a,b,c),this.send({method:"addEventListener",value:a,listener:d}),!0};d.Player.prototype.off=function(a,b){var c=this.keeper.off(a,b);if(d.log("Player.off",c),0<c.length)for(var e in c)return this.send({method:"removeEventListener",value:a,listener:c[e]}),!0;return!1};d.Player.prototype.supports=function(a,b){d.assert(-1<d.indexOf(["method","event"],a),'evtOrMethod needs to be either "event" or "method" got '+
a);b=d.isArray(b)?b:[b];for(var c="event"===a?this.events:this.methods,e=0;e<b.length;e++)if(-1===d.indexOf(c,b[e]))return!1;return!0};for(var e=0,f=d.METHODS.all().length;f>e;e++){var h=d.METHODS.all()[e];d.Player.prototype.hasOwnProperty(h)||(d.Player.prototype[h]=c(h))}a.playerjs=d;d.addEvent(a,"message",function(a){var b;try{b=JSON.parse(a.data)}catch(c){return!1}return d.ENABLE_CONTEXT&&b.context!==d.CONTEXT?!1:void("ready"===b.event&&b.value&&b.value.src&&d.READIED.push(b.value.src))});d.Receiver=
function(a,b){this.init(a,b)};d.Receiver.prototype.init=function(c,e){var f=this;this.isReady=!1;this.origin=d.origin(b.referrer);this.methods={};this.supported={events:c?c:d.EVENTS.all(),methods:e?e:d.METHODS.all()};this.eventListeners={};(this.reject=!(a.self!==a.top&&d.POST_MESSAGE))||d.addEvent(a,"message",function(a){f.receive(a)})};d.Receiver.prototype.receive=function(b){if(b.origin!==this.origin)return!1;var c={};if(d.isObject(b.data))c=b.data;else try{c=a.JSON.parse(b.data)}catch(e){d.log("JSON Parse Error",
e)}if((d.log("Receiver.receive",b,c),!c.method)||d.ENABLE_CONTEXT&&c.context!==d.CONTEXT)return!1;if(-1===d.indexOf(d.METHODS.all(),c.method))return this.emit("error",{code:2,msg:'Invalid Method "'+c.method+'"'}),!1;b=d.isNone(c.listener)?null:c.listener;"addEventListener"===c.method?(this.eventListeners.hasOwnProperty(c.value)?-1===d.indexOf(this.eventListeners[c.value],b)&&this.eventListeners[c.value].push(b):this.eventListeners[c.value]=[b],"ready"===c.value&&this.isReady&&this.ready()):"removeEventListener"===
c.method?this.eventListeners.hasOwnProperty(c.value)&&(b=d.indexOf(this.eventListeners[c.value],b),-1<b&&this.eventListeners[c.value].splice(b,1),0===this.eventListeners[c.value].length&&delete this.eventListeners[c.value]):this.get(c.method,c.value,b)};d.Receiver.prototype.get=function(a,b,c){var d=this;if(!this.methods.hasOwnProperty(a))return this.emit("error",{code:3,msg:'Method Not Supported"'+a+'"'}),!1;var e=this.methods[a];"get"===a.substr(0,3)?e.call(this,function(b){d.send(a,b,c)}):e.call(this,
b)};d.Receiver.prototype.on=function(a,b){this.methods[a]=b};d.Receiver.prototype.send=function(b,c,e){if(d.log("Receiver.send",b,c,e),this.reject)return d.log("Receiver.send.reject",b,c,e),!1;b={context:d.CONTEXT,version:d.VERSION,event:b};d.isNone(c)||(b.value=c);d.isNone(e)||(b.listener=e);c=JSON.stringify(b);a.parent.postMessage(c,""===this.origin?"*":this.origin)};d.Receiver.prototype.emit=function(a,b){if(!this.eventListeners.hasOwnProperty(a))return!1;d.log("Instance.emit",a,b,this.eventListeners[a]);
for(var c=0;c<this.eventListeners[a].length;c++)this.send(a,b,this.eventListeners[a][c]);return!0};d.Receiver.prototype.ready=function(){d.log("Receiver.ready");this.isReady=!0;var b={src:a.location.toString(),events:this.supported.events,methods:this.supported.methods};this.emit("ready",b)||this.send("ready",b)};d.HTML5Adapter=function(a){return this instanceof d.HTML5Adapter?void this.init(a):new d.HTML5Adapter(a)};d.HTML5Adapter.prototype.init=function(a){d.assert(a,"playerjs.VideoJSReceiver requires a video element");
var b=this.receiver=new d.Receiver;a.addEventListener("playing",function(){b.emit("play")});a.addEventListener("pause",function(){b.emit("pause")});a.addEventListener("ended",function(){b.emit("ended")});a.addEventListener("timeupdate",function(){b.emit("timeupdate",{seconds:a.currentTime,duration:a.duration})});a.addEventListener("progress",function(){b.emit("buffered",{percent:a.buffered.length})});b.on("play",function(){a.play()});b.on("pause",function(){a.pause()});b.on("getPaused",function(b){b(a.paused)});
b.on("getCurrentTime",function(b){b(a.currentTime)});b.on("setCurrentTime",function(b){a.currentTime=b});b.on("getDuration",function(b){b(a.duration)});b.on("getVolume",function(b){b(100*a.volume)});b.on("setVolume",function(b){a.volume=b/100});b.on("mute",function(){a.muted=!0});b.on("unmute",function(){a.muted=!1});b.on("getMuted",function(b){b(a.muted)});b.on("getLoop",function(b){b(a.loop)});b.on("setLoop",function(b){a.loop=b})};d.HTML5Adapter.prototype.ready=function(){this.receiver.ready()};
d.JWPlayerAdapter=function(a){return this instanceof d.JWPlayerAdapter?void this.init(a):new d.JWPlayerAdapter(a)};d.JWPlayerAdapter.prototype.init=function(a){d.assert(a,"playerjs.JWPlayerAdapter requires a player object");var b=this.receiver=new d.Receiver;this.looped=!1;a.onPause(function(){b.emit("pause")});a.onPlay(function(){b.emit("play")});a.onTime(function(a){var c=a.position;a=a.duration;if(!c||!a)return!1;b.emit("timeupdate",{seconds:c,duration:a})});var c=this;a.onComplete(function(){!0===
c.looped?a.seek(0):b.emit("ended")});a.onError(function(){b.emit("error")});b.on("play",function(){a.play(!0)});b.on("pause",function(){a.pause(!0)});b.on("getPaused",function(b){b("PLAYING"!==a.getState())});b.on("getCurrentTime",function(b){b(a.getPosition())});b.on("setCurrentTime",function(b){a.seek(b)});b.on("getDuration",function(b){b(a.getDuration())});b.on("getVolume",function(b){b(a.getVolume())});b.on("setVolume",function(b){a.setVolume(b)});b.on("mute",function(){a.setMute(!0)});b.on("unmute",
function(){a.setMute(!1)});b.on("getMuted",function(b){b(!0===a.getMute())});b.on("getLoop",function(a){a(this.looped)},this);b.on("setLoop",function(a){this.looped=a},this)};d.JWPlayerAdapter.prototype.ready=function(){this.receiver.ready()};d.MockAdapter=function(){return this instanceof d.MockAdapter?void this.init():new d.MockAdapter};d.MockAdapter.prototype.init=function(){var a={duration:20,currentTime:0,interval:null,timeupdate:function(){},volume:100,mute:!1,playing:!1,loop:!1,play:function(){a.interval=
setInterval(function(){a.currentTime+=.25;a.timeupdate({seconds:a.currentTime,duration:a.duration})},250);a.playing=!0},pause:function(){clearInterval(a.interval);a.playing=!1}},b=this.receiver=new d.Receiver;b.on("play",function(){var b=this;a.play();this.emit("play");a.timeupdate=function(a){b.emit("timeupdate",a)}});b.on("pause",function(){a.pause();this.emit("pause")});b.on("getPaused",function(b){b(!a.playing)});b.on("getCurrentTime",function(b){b(a.currentTime)});b.on("setCurrentTime",function(b){a.currentTime=
b});b.on("getDuration",function(b){b(a.duration)});b.on("getVolume",function(b){b(a.volume)});b.on("setVolume",function(b){a.volume=b});b.on("mute",function(){a.mute=!0});b.on("unmute",function(){a.mute=!1});b.on("getMuted",function(b){b(a.mute)});b.on("getLoop",function(b){b(a.loop)});b.on("setLoop",function(b){a.loop=b})};d.MockAdapter.prototype.ready=function(){this.receiver.ready()};d.SublimeAdapter=function(a){return this instanceof d.SublimeAdapter?void this.init(a):new d.SublimeAdapter(a)};
d.SublimeAdapter.prototype.events=[d.EVENTS.READY,d.EVENTS.PLAY,d.EVENTS.PAUSE,d.EVENTS.ENDED,d.EVENTS.TIMEUPDATE,d.EVENTS.ERROR];d.SublimeAdapter.prototype.methods=[d.METHODS.PLAY,d.METHODS.PAUSE,d.METHODS.GETDURATION,d.METHODS.SETCURRENTTIME,d.METHODS.GETCURRENTTIME,d.METHODS.REMOVEEVENTLISTENER,d.METHODS.ADDEVENTLISTENER];d.SublimeAdapter.prototype.init=function(a){d.assert(a,"playerjs.SublimeAdapter requires a player object");var b=this.receiver=new d.Receiver(this.events,this.methods);a.on("pause",
function(){b.emit("pause")});a.on("play",function(){b.emit("play")});a.on("timeUpdate",function(a,c){var d=a.duration();if(!c||!d)return!1;b.emit("timeupdate",{seconds:c,duration:d})});a.on("end",function(){b.emit("ended")});b.on("play",function(){a.play()});b.on("pause",function(){a.pause()});b.on("getCurrentTime",function(b){b(a.playbackTime())});b.on("setCurrentTime",function(b){a.seekTo(b)});b.on("getDuration",function(b){b(a.duration())})};d.SublimeAdapter.prototype.ready=function(){this.receiver.ready()};
d.VideoJSAdapter=function(a){return this instanceof d.VideoJSAdapter?void this.init(a):new d.VideoJSAdapter(a)};d.VideoJSAdapter.prototype.init=function(a){d.assert(a,"playerjs.VideoJSReceiver requires a player object");var b=this.receiver=new d.Receiver;a.on("pause",function(){b.emit("pause")});a.on("play",function(){b.emit("play")});a.on("timeupdate",function(){var c=a.currentTime(),d=a.duration();if(!c||!d)return!1;b.emit("timeupdate",{seconds:c,duration:d})});a.on("ended",function(){b.emit("ended")});
a.on("error",function(){b.emit("error")});b.on("play",function(){a.play()});b.on("pause",function(){a.pause()});b.on("getPaused",function(b){b(a.paused())});b.on("getCurrentTime",function(b){b(a.currentTime())});b.on("setCurrentTime",function(b){a.currentTime(b)});b.on("getDuration",function(b){b(a.duration())});b.on("getVolume",function(b){b(100*a.volume())});b.on("setVolume",function(b){a.volume(b/100)});b.on("mute",function(){a.volume(0)});b.on("unmute",function(){a.volume(1)});b.on("getMuted",
function(b){b(0===a.volume())});b.on("getLoop",function(b){b(a.loop())});b.on("setLoop",function(b){a.loop(b)})};d.VideoJSAdapter.prototype.ready=function(){this.receiver.ready()}}(window,document);
angular.module("genius").directive("unifiedPlayer",["$sce","$timeout","Tracking",function(a,b,c){var d={youtube:{youtube_controls:0,youtube_modestbranding:1,youtube_showinfo:0,youtube_iv_load_policy:3}};return{restrict:"E",templateUrl:"unified_player.html",scope:{api:"=",autoplay:"=",media:"=",ready:"=",loading:"=",placeholder:"="},link:function(e,f){var h=function(){var a=playerjs.Player(f.find("iframe")[0]);a.on("ready",function(){e.autoplay&&a.play();e.$apply(function(){e.ready=!0})});a.on("play",
function(){c.track("play_song_media",{playing:!0,first_interaction:!1})})};e.load_media=function(){c.track("play_song_media",{playing:!1,first_interaction:!0});e.loading=!0;b(function(){h()})};e.api={load_media:e.load_media};var g={};"youtube"===e.media.provider&&(g.youtube_start=e.media.start);angular.extend(g,d[e.media.provider]);$.embedly.oembed(e.media.url,{query:g}).done(function(b){b[0].author_name&&"error"!==b[0].type&&e.$apply(function(){e.placeholder=b[0].thumbnail_url;e.media_html=a.trustAsHtml(b[0].html)})})}}}]);
angular.module("genius").directive("userBadge",function(){return{restrict:"E",templateUrl:"user_badge.html",scope:{user:"=object",type:"@",pinnedRole:"=",anonymousUser:"="}}});angular.module("genius").directive("voters",["VoteService",function(a){return{restrict:"E",templateUrl:"voters.html",scope:{type:"@",object:"="},link:function(b){a.load_voters(b.type,b.object.id).then(function(a){b.loaded_voters=!0;b.voters=a;b.object.votes_total=a.votes_total})}}}]);
angular.module("genius").directive("voting",["$window","Session","Tracking","VoteService",function(a,b,c,d){var e={down:-1,up:1};return{restrict:"E",templateUrl:"voting.html",scope:{clickCount:"&",total:"=",object:"=",type:"@",currentVote:"="},link:function(f){var h=function(a,b){var c=(e[a]||0)-(e[b]||0);f.total+=c;d.submit_vote(f.type,f.object.id,a).catch(function(){f.total-=c;f.currentVote=b})};f.submit_vote=function(d){if(!b.user_signed_in)c.track("Logged out vote attempt"),a.location.href="/login";
else if(b.has_permission("vote",f.object)){var e=f.currentVote;d===e&&(d=void 0);f.currentVote=d;h(d,e)}}}}}]);angular.module("genius").directive("watchImagesLoaded",["$timeout",function(a){return{restrict:"A",link:function(b,c,d){b.$watch(d.ngBindHtml,function(d){d&&a(function(){c.waitForImages(function(){b.$apply(function(){b.$emit("images_loaded")})})})})}}}]);
angular.module("genius").directive("waypoint",["Waypoint",function(a){return{scope:{type:"@waypoint",stuckClass:"@"},link:function(b,c){var d=b.type||"normal";new {sticky:a.Sticky,normal:a}[d]({element:c,wrapper:{sticky:'<div class="sticky_wrapper" />',normal:"<div />"}[d],stuckClass:b.stuckClass})}}}]);angular.module("genius").factory("AppConfig",["$window",function(a){return a.APP_CONFIG}]);
angular.module("genius").factory("$debounce",["$timeout",function(a){return function(b,c){var d;return function(){a.cancel(d);d=a(b,c)}}}]);angular.module("genius").factory("OAuthInterceptor",["AppConfig",function(a){return{request:function(b){0===b.url.indexOf(a.api_root_url)&&(b.headers.Authorization="Bearer "+a.access_token);return b}}}]);
angular.module("genius").factory("OnsiteInterceptor",function(){return{request:function(a){var b;b=a.url;var c=document.createElement("a");c.href=b;b=c.hostname;b&&b!=window.location.hostname||(a.headers["X-Requested-With"]="XMLHttpRequest","POST"===a.method&&(a.headers["X-CSRF-Token"]=$.cookie("_csrf_token")));return a}}});
angular.module("genius").factory("Preloader",["$q",function(a){var b=function(a){this.bulk_load_function=a};b.prototype={cache:{},insert:function(b,d){this.cache[b]=a.when(d)},load:function(a){this.bulk_load([a]);return this.cache[a]},filter_unloaded:function(a){var b=this.cache;return a.filter(function(a){return!b[a]})},bulk_load:function(a){var b=this.cache;a=this.filter_unloaded(a);var e=a.length?this.bulk_load_function(a):void 0;a.forEach(function(a){b[a]=e.then(function(b){return b[a]})})}};
return b}]);angular.module("genius").factory("RetryFailureInterceptor",["$injector","$q",function(a,b){return{responseError:function(c){var d=c.config;return d.retries&&0<d.retries?(d.retries-=1,a.get("$http")(d)):b.reject(c)}}}]);angular.module("genius").factory("SessionConfig",["$window",function(a){return a.SESSION_CONFIG}]);angular.module("genius").filter("andMore",function(){return function(a){return"(and "+a+" more)"}});
angular.module("genius").filter("highlight_braced",["$sce","$sanitize",function(a,b){var c=/\[(.+?)\]/g;return function(d,e){e=e||{};var f=e.class_name,h=b(d);return a.trustAsHtml(h.replace(c,'<span class="'+f+'">$1</span>'))}}]);angular.module("genius").filter("i18n",function(){return function(a,b){return I18n.t(a,b)}});angular.module("genius").filter("minBy",["$parse",function(a){return function(b,c){var d=a(c);return _.min(b,function(a){return d(a)})}}]);
angular.module("genius").filter("minimum_readable_time",function(){return function(a){return 240*a.split(/\s+/).length}});angular.module("genius").filter("minusModulo",function(){return function(a,b){return a-a%b}});angular.module("genius").filter("signed_number",function(){return function(a){return a&&0<a?"+"+a.toString():a.toString()}});
angular.module("genius").filter("spotify_artist_metadata",["SpotifyService",function(a){var b={};return function(c){if(!c)return{};var d=b[c];if(d)return d;b[c]={};a.load_artist_metadata(c).then(function(a){b[c]=a})}}]);
angular.module("genius").filter("timestamp_for_display",function(){var a=function(a,c){return"0000".substring(0,c-a.toString().length)+a};return function(b,c){if(!b&&0!==b)return"";var d=c&&c.skip_millis,e=b/1E3,e=Math.floor(e/60)+":"+a(Math.floor(e%60),2),f=Math.floor(b%1E3);f&&!d&&(e+="."+a(f,3));return e}});
angular.module("genius").service("AnnotationService",["$http","AppConfig","querystring",function(a,b,c){return{load_annotation:function(d,e){e=e||{};var f=c.stringify({text_format:e.format||"html"});return a.get(b.api_root_url+"/annotations/"+d+"?"+f).then(function(a){return a.data.response.annotation})},save_annotation:function(d,e){var f=c.stringify({text_format:"html"});return a.put(b.api_root_url+"/annotations/"+d+"?"+f,e).then(function(a){return a.data.response.annotation})}}}]);
angular.module("genius").service("Bowser",["$window",function(a){return a.bowser}]);angular.module("genius").service("CommentService",["$http","querystring","AppConfig",function(a,b,c){return{load:function(d,e,f){f=b.stringify(f);return a.get(c.api_root_url+"/"+d+"/"+e+"/comments?"+f).then(function(a){return a.data.response})},create:function(b,e,f){return a.post(c.api_root_url+"/"+b+"/"+e+"/comments?text_format=html",f).then(function(a){return a.data.response.comment})}}}]);
angular.module("genius").service("CustomAppNotificationService",["$http",function(a){return{send_preview_notification:function(b){return a.post("/custom_app_notifications",{custom_app_notification:_.extend(b,{preview:!0})})}}}]);
angular.module("genius").factory("EagerLoader",function(){var a=function(){this.data={};this.listeners={}};a.prototype={loaded:function(a,c){this.listeners[a]?this.listeners[a].forEach(function(a){a(c)}):this.data[a]=c},listen_for:function(a,c){this.listeners[a]=this.listeners[a]||[];this.listeners[a].push(c);this.data[a]&&(c(this.data[a]),delete this.data[a])}};return a});
angular.module("genius").service("Facebook",["AppConfig","$window","$q",function(a,b,c){var d=c.defer();b.fbAsyncInit=function(){b.FB.init({appId:a.facebook_app_id,version:"v2.4"});d.resolve(b.FB)};$.getScript("//connect.facebook.net/en_US/sdk.js");return{share:function(a){d.promise.then(function(b){b.ui({method:"share",href:a})})}}}]);
angular.module("genius").service("FollowService",["AppConfig","$http",function(a,b){return{set_following:function(c,d,e){return b.post(a.api_root_url+"/"+c+"s/"+d+"/"+(e?"follow":"unfollow")).then(function(a){return a.data.response})}}}]);
angular.module("genius").factory("HtmlService",["$window",function(a){a={top_level_block_containers:a.TOP_LEVEL_BLOCK_CONTAINERS,top_level_stand_alone_blocks:a.TOP_LEVEL_STANDALONE_BLOCKS};a.top_level_block_containers_regexp=new RegExp("</("+a.top_level_block_containers.join("|")+")>\\s*","gi");a.top_level_stand_alone_blocks_regexp=new RegExp("</("+a.top_level_stand_alone_blocks.join("|")+")>\\s*","gi");return a}]);
angular.module("genius").service("LyricsEditingService",["$http","$q","AppConfig","HtmlService","MarkdownHelpersService",function(a,b,c,d,e){return{save:function(d){var e;try{e=this.lyrics_pseudo_markdown_to_html__deprecated(d.edited,d.attr_hash)}catch(g){return b.reject(g)}return a.put(c.api_root_url+"/songs/"+d.song.id+"/lyrics",{lyrics:e,client_timestamps:_.pick(d.song,["updated_by_human_at","lyrics_updated_at"])}).then(function(a){return a.data.response.lyrics_update})},prepare_lyrics_for_editing:function(a){return this.lyrics_html_to_pseudo_markdown__deprecated(this.clean_up_lyrics__deprecated(a))},
clean_up_lyrics__deprecated:function(a){return $.trim($("<div>").append(a).find("a").each(function(){var a=$(this);if(!a.attr("data-id")&&!a.data("real-link"))throw a=Error("Error processing lyrics for editing: detected non-annotation link ("+a.html()+")"),a.human_readable_message=app.templates.link_injection_error_message,a;a.html().match(/<br[\s\/]?>$/i)&&(a.find("br:last").remove(),a.after("<br>"))}).end().find("#annotation_prompt").remove().end().html().replace(/<p( [^>]*)?>/gi,"").replace(/<\/p>\s*/gi,
"\n\n").replace(d.top_level_block_containers_regexp,"$&\n\n").replace(d.top_level_stand_alone_blocks_regexp,"$&\n\n").replace(/\s*<br[\s\/]?>([ \t]*)\s*/gi,"\n$1"))},lyrics_html_to_pseudo_markdown__deprecated:function(a){var b={attr_hash:{}};b.markdown=$("<div>").append(a).find("a").each(function(){var a=$(this),c=a.attr("data-id");_.isUndefined(c)?a.data("real-link")?a.replaceWith("["+a.html()+"]("+a.attr("href")+")"):a.replaceWith(a.html()):(_.set(b.attr_hash,c,{"class":a.attr("class"),"data-editorial-state":a.attr("data-editorial-state")}),
a.replaceWith("["+a.html()+"]("+c+")"))}).end().html();return b},lyrics_pseudo_markdown_to_html__deprecated:function(a,b){b||(b={});a=a.replace(/\n/gi,"<br>");var d=$("<div>").append(e.convert_markdown_anchors(a)).find("a").each(function(){var a=$(this);a.attr("href",$.trim(a.attr("href")));if(a.attr("href").match(/^\d+$/))a.attr("data-id",a.attr("href")).attr("href","/"+a.attr("data-id")).attr(b[a.attr("data-id")]);else{var d=(a.attr("href")||"").trim();"/"===d[0]||0===d.indexOf("http")||0<=d.indexOf(c.canonical_domain)?
a.attr("target",$.isUrlInternal(a.attr("href"))?"_self":"_blank").attr("data-real-link",!0):a.replaceWith("["+a.html()+"]("+a.attr("href")+")")}}).end().html();return e.unescape_special_characters_escaped_by_markdown_anchor_converter(d)}}}]);
angular.module("genius").factory("MarkdownHelpersService",function(){var a=function(a,c,d,e,f,h,g,k){void 0==k&&(k="");a=e.toLowerCase();if(""==f)if(""==a&&d.toLowerCase().replace(/ ?\n/g," "),-1<c.search(/\(\s*\)$/m))f="";else return c;c='<a href="'+f+'"';""!=k&&(k=k.replace(/"/g,"&quot;"),c+=' title="'+k+'"');return c+(">"+d+"</a>")};return{unescape_special_characters_escaped_by_markdown_anchor_converter:function(a){return a.replace(/~E(\d+)E/,function(a,b){return String.fromCharCode(b)})},convert_markdown_anchors:function(b){return b.replace(/(\[((?:\[[^\]]*\]|\[\[[^\]]*\]\]|[^\[\]])*)\]\([ \t]*()<?(.*?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,
a)}}});angular.module("genius").service("Pusher",["$window","AppConfig",function(a,b){var c={},d,e=function(){d||(d=new a.Pusher(b.pusher_app_key));return d};return{pusher:e,subscribe:function(a,b,d){c[a]||(c[a]={},e().subscribe(a).bind_all(function(b,d){var e=c[a][b];e&&e.forEach(function(a){a(d)})}));c[a][b]=c[a][b]||[];c[a][b].push(d)}}}]);
angular.module("genius").service("PyongService",["AppConfig","$http",function(a,b){var c=function(c,e,f,h){h=_.set(h||{},e+"_id",f);return b.post(a.api_root_url+c,h).then(function(a){return a.data.response.song})};return{pyong:function(a,b){return c("/pyongs",a,b,{note_may_follow:!0})},finalizePyong:function(a,b,f){return c("/pyongs/finalize",a,b,{pyong_note:f})}}}]);angular.module("genius").service("querystring",function(){return{stringify:function(a){return $.param(a)}}});
angular.module("genius").service("ReferentService",["$http","AppConfig","querystring",function(a,b,c){return{bulk_load:function(d){d=c.stringify({text_format:"html",ids:d});return a.get(b.api_root_url+"/referents/multi?"+d).then(function(a){return a.data.response.referents})}}}]);
angular.module("genius").factory("Session",["$window","SessionConfig",function(a,b){return Object.create(Object.prototype,{has_permission:{value:function(a,b){return(b=b||this.current_user)&&b.current_user_metadata&&b.current_user_metadata.permissions?-1!==b.current_user_metadata.permissions.indexOf(a):!1}},user_signed_in:{get:function(){return!!this.current_user}},current_user:{get:function(){return b.current_user},set:function(a){b.current_user=a}}})}]);
(function(a,b){function c(a){u[p]=d.apply(b,a);return p++}function d(a){var c=[].slice.call(arguments,1);return function(){"function"===typeof a?a.apply(b,c):(new Function(""+a))()}}function e(a){if(v)setTimeout(d(e,a),0);else{var b=u[a];if(b){v=!0;try{b()}finally{f(a),v=!1}}}}function f(a){delete u[a]}function h(){D=function(){var a=c(arguments);process.nextTick(d(e,a));return a}}function g(){if(a.postMessage&&!a.importScripts){var b=!0,c=a.onmessage;a.onmessage=function(){b=!1};a.postMessage("",
"*");a.onmessage=c;return b}}function k(){var b="setImmediate$"+Math.random()+"$",d=function(c){c.source===a&&"string"===typeof c.data&&0===c.data.indexOf(b)&&e(+c.data.slice(b.length))};a.addEventListener?a.addEventListener("message",d,!1):a.attachEvent("onmessage",d);D=function(){var d=c(arguments);a.postMessage(b+d,"*");return d}}function n(){var a=new MessageChannel;a.port1.onmessage=function(a){e(a.data)};D=function(){var b=c(arguments);a.port2.postMessage(b);return b}}function q(){var a=A.documentElement;
D=function(){var b=c(arguments),d=A.createElement("script");d.onreadystatechange=function(){e(b);d.onreadystatechange=null;a.removeChild(d);d=null};a.appendChild(d);return b}}function m(){D=function(){var a=c(arguments);setTimeout(d(e,a),0);return a}}if(!a.setImmediate){var p=1,u={},v=!1,A=a.document,D,x=Object.getPrototypeOf&&Object.getPrototypeOf(a),x=x&&x.setTimeout?x:a;"[object process]"==={}.toString.call(a.process)?h():g()?k():a.MessageChannel?n():A&&"onreadystatechange"in A.createElement("script")?
q():m();x.setImmediate=D;x.clearImmediate=f}})((new Function("return this"))());angular.module("genius").service("setImmediate",["$window",function(a){return a.setImmediate}]);
angular.module("genius").service("SongService",["$http","AppConfig","querystring",function(a,b,c){return{count_view:function(c){return a.post(b.api_root_url+"/songs/"+c+"/count_view")},load_contributor_data:function(c){return a.get(b.api_root_url+"/songs/"+c+"/contributors").then(function(a){return a.data.response.contributors})},load_iq_earners:function(d,e){var f=c.stringify(e);return a.get(b.api_root_url+"/songs/"+d+"/iq_earners?"+f).then(function(a){return a.data.response.contributors})},perform_action:function(c,
e){return a.post(b.api_root_url+"/songs/"+c+"/"+e).then(function(a){return a.data.response.song})}}}]);angular.module("genius").service("SpotifyAnnotationService",["$http",function(a){return{save_song:function(b,c,d){return a.post("/spotify_annotations/bulk_update",{song_id:b,spotify_annotations:d,spotify_song:{note:c.note,lock_version:c.lock_version,finalized:c.finalized}})},load_song:function(b){return a.get("/songs/"+b+"/spotify_annotations")}}}]);
angular.module("genius").service("SpotifyService",["$http",function(a){return{load_artist_metadata:function(b){return a.get("https://api.spotify.com/v1/artists/"+b).then(function(a){return a.data})}}}]);angular.module("genius").service("TopBarIndicatorsLoader",["EagerLoader","$http","Session",function(a,b,c){var d=new a;a=function(){c.user_signed_in&&b.get("/top_bar_indicators",{retries:2}).then(function(a){for(var b in a.data)d.loaded(b,a.data[b])})};a();return{listen_for:d.listen_for.bind(d),refresh:a}}]);
angular.module("genius").service("Tracking",["$window",function(a){return new a.Tracking}]);angular.module("genius").service("Twitter",["$window","querystring",function(a,b){return{share:function(c){c="https://twitter.com/intent/tweet?"+b.stringify({url:c.url,text:c.message});a.open(c)}}}]);
angular.module("genius").service("VoteService",["AppConfig","querystring","$http",function(a,b,c){return{load_voters:function(d,e){var f=_.set({},d+"_id",e);return c.get(a.api_root_url+"/voters?"+b.stringify(f)).then(function(a){return a.data.response.voters})},submit_vote:function(b,e,f){b=_.set({direction:f||"middle"},b+"_id",e);return c.post(a.api_root_url+"/votes",b)}}}]);angular.module("genius").service("Waypoint",["$window",function(a){return a.Waypoint}]);
angular.module("genius").service("ZeroClipboard",["$window",function(a){var b;b="https://assets.rapgenius.com/flash/ZeroClipboard.swf?1445007648".replace("https:",window.location.protocol);ZeroClipboard.config({swfPath:b});return a.ZeroClipboard}]);window.app=window.app||{};
app.templates={ajax_error_message:'<h1>Whoops, our bad!!!</h1>       <h3>Something went wrong; we have to reload the page</h3>       <p class="callout"><a class="facebox" href="/feedback/new">Contact us</a> if this keeps happening</p>',link_injection_error_message:"<h1>Something weird is going on!</h1>       <p>We noticed some links on the page that shouldn't be there. It's       possible you have a malicious browser extension installed that is       putting spam on the page.</p>",twitter_embed:Hogan.compile('<blockquote class="twitter-tweet"><a href="{{tweet_url}}"></a></blockquote>'),
cosign_message:function(){var a=null;return function(){a||(a=Hogan.compile('<li class="cosign_message" data-user-id="{{user_id}}" data-uncosign-path="{{uncosign_path}}"><a href="{{artist_url}}" class="cosigner">You</a> cosigned this '+app.sc("annotation.singular_noun")+' {{#moderator}}<a href="#" class="remove_cosign">Remove</a>{{/moderator}}</li>'));return a}}(),rg_standalone_annotation_embed:function(){var a=null;return function(){a||(a=Hogan.compile('<blockquote class="rg_standalone_container" data-src="//'+
CANONICAL_DOMAIN+"/annotations/{{annotation_id}}/standalone_embed"+("undefined"!==typeof RG_EMBEDDED_PAGE&&RG_EMBEDDED_PAGE?"":"?dark=1")+'"></blockquote>'));return a}}()};window.app=window.app||{};$.expr[":"].inner_text_matches=function(a,b,c){return(new RegExp(c[3],"i")).test($.trim($(a).text()))};
$.extend(window.app,{setup_embedly_pro:function(a,b){var c,d;"function"===typeof a?(d=a,c=$(".embedly_pro:visible")):(d=b||$.noop,c=$(a||".embedly_pro:visible"));c.find("a:inner_text_matches(^https?://)").each(function(){if(app.embedlyURLre.test(this.href))return!0;var a=$(this);a.embedly({key:EMBEDLY_KEY,width:"",secure:!0,query:{secure:"true"},display:function(b){if(b.description&&a.parent().contents().last()[0]===a[0]&&a.is(":only-child")){var c='<div class="embedly_preview"><img class="thumb" src="'+
(b.thumbnail_url||"")+'">           <div class="text"><a class="title" href="'+b.original_url+'">'+b.title+'</a>           <a class="provider" href="'+b.provider_url+'">'+b.provider_name+'</a>           <div class="description">'+b.description+"</div></div></div>";b.thumbnail_url||(c=$(c).removeClass("has_thumb").find("img.thumb").remove().end().outer_html());a.replaceWith(c)}else a.text(b.title);d()}})})},setup_embedly:function(a,b){var c,d;"function"===typeof a?(d=a,c=$(".embedly:visible")):(d=
b||$.noop,c=$(a||".embedly:visible"));c.find("a:inner_text_matches(^https?://)").each(function(){var a=$(this),b;if(a.parent().is(".embedly_preview"))return!0;if(app.twitterURLre.test(this.href))a.replaceWith($(app.templates.twitter_embed.render({tweet_url:this.href}))),$.getScript("//platform.twitter.com/widgets.js",d);else if(app.rgURLre.test(this.href)&&this.href===a.text()&&!a.closest(".embedded_annotation.standalone_embed").length)b=app.rgURLre.exec(this.href).pop(),a.replaceWith($(app.templates.rg_standalone_annotation_embed().render({annotation_id:b}))),
$.getScript("//"+CANONICAL_DOMAIN+"/annotations/load_standalone_embeds.js",d);else{if(b=this.href.match(/https?:\/\/embed\.vidyard\.com\/(landingpage|share)\/(.*)/i))return a.addClass("vidyard_container").attr("data-vidyard-id",b[2]).removeAttr("href"),app.load_vidyard_players(c,!1,d),!0;if(app.embedlyURLre.test(this.href))b=a.closest("[data-embedly-width]").attr("data-embedly-width")||a.parent().width()-10,MOBILE_DEVICE&&(b=a.parent().width()),a.embedly({addImageStyles:!1,className:"embedly_preview",
secure:!0,query:{maxwidth:b,luxe:!MOBILE_DEVICE,secure:"true"},key:EMBEDLY_KEY,width:"",display:function(a){var b=a.html;/soundcloud\.com/.test(b)&&(a.html=b.replace("visual%3Dtrue","visual%3Dfalse").replace(/height="\d+"/,'height="165"'),a.height=165);a.display();d()}});else return!0}a.text("Loading embed...")});app.setup_embedly_pro(a,d)}});window.Recorder=window.CameratagRecorder;
$.extend(window.app,{on_document_load:function(){app.pusher=app.angular_inject_get__deprecated("Pusher").pusher;app.setup_markdown_previews();app.setup_no_annotation_anchors();app.remove_hot_song_tooltips();app.activate_generic_tool_tips();app.setup_annotations();app.load_song_metadata();app.activate_faceboxes();app.setup_zeroclipboard();app.setup_annotation_credits_button();app.ajaxify_pagination_links();app.set_up_comments();app.get_comment_counts();app.set_up_autogrow();app.setup_sticky_waypoints();
app.set_up_timeago();app.process_auto_load_containers();app.set_up_rg_audio_players();SC.initialize({client_id:SOUNDCLOUD_CLIENT_ID});app.unobfuscate_urls();app.unified_player.init();app.set_up_bop_fm_player();app.setup_embedly();app.load_vidyard_players();app.set_up_facebook_likebox_and_twitter_follow_buttons();app.set_up_mentions_autocomplete();app.tracking.start_tracking();app.is_on_song_page()&&app.setup_decorators();app.setup_group_membership_controls();app.unobfuscate_group_emails();app.set_up_dirtyable_inputs();
app.customize_cloudflare_banner()},setup_sticky_waypoints:function(){$(".sticky").each(function(a,b){new Waypoint.Sticky({element:b})})},on_window_load:function(){PRODUCTION_ENV||(log("Client load time: "+((new Date).getTime()-_sf_startpt)/1E3),log("Server load time: "+$("#request_time").text()));$("html").addClass("on_load_event_fired");app.load_deferred_images();app.redraw_decorators()},on_ajax_complete:function(){app.setup_markdown_previews();app.fix_webkit_autocomplete_bug();app.activate_generic_tool_tips();
app.kill_orphaned_tooltips();app.set_up_timeago();app.setup_embedly();app.load_vidyard_players();app.set_up_mentions_autocomplete();app.unobfuscate_group_emails();app.hydrate_edit_diffs();app.set_up_dirtyable_inputs()}});$(document).ready(function(){app.on_document_load()});$(window).load(function(){app.on_window_load()});
window.onbeforeunload=function(){if(1===app.ajaxQueue.inProgress)return"Something is saving in the background. You should chill for a few seconds";if(app.cameraTagUploadInProgress)return'Your video is uploading. Click "Don\'t Reload" to wait until it finishes';if($("textarea:focus, textarea.dirty").length)return"Looks like you're in the middle of something."};
(function(){function a(a,b,c){"addEventListener"in window?a.addEventListener(b,c,!1):"attachEvent"in window&&a.attachEvent("on"+b,c)}function b(a){R&&"object"===typeof window.console&&console.log("[iFrameSizer]["+U+"] "+a)}function c(a){"object"===typeof window.console&&console.warn("[iFrameSizer]["+U+"] "+a)}function d(){var a=la.substr(13).split(":");U=a[0];Q=void 0!==a[1]?Number(a[1]):Q;X=void 0!==a[2]?"true"===a[2]?!0:!1:X;R=void 0!==a[3]?"true"===a[3]?!0:!1:R;w=void 0!==a[4]?Number(a[4]):w;ua=
void 0!==a[5]?"true"===a[5]?!0:!1:ua;L=void 0!==a[6]?"true"===a[6]?!0:!1:L;T=a[7];W=void 0!==a[8]?a[8]:W;N=a[9];E=a[10];V=void 0!==a[11]?Number(a[11]):V}function e(a,c){void 0!==c&&""!==c&&"null"!==c&&(document.body.style[a]=c,b("Body "+a+' set to "'+c+'"'))}function f(){a(window,"resize",function(){G("resize","Window resized")})}function h(){a(window,"click",function(){G("click","Window clicked")})}function g(){"offset"!==W&&(W in qa||(c(W+" is not a valid option for heightCalculationMethod."),W=
"bodyScroll"),b('Height calculation method set to "'+W+'"'))}function k(){var a=document.createElement("div");a.style.clear="both";a.style.display="block";document.body.appendChild(a)}function n(){ua&&(b("Enable public methods"),window.parentIFrame={close:function(){G("close","parentIFrame.close()",0,0)},getId:function(){return U},reset:function(){J("parentIFrame.size")},scrollTo:function(a,b){C(b,a,"scrollTo")},scrollToOffset:function(a,b){C(b,a,"scrollToOffset")},sendMessage:function(a,b){C(0,0,
"message",JSON.stringify(a),b)},setHeightCalculationMethod:function(a){W=a;g()},setTargetOrigin:function(a){b("Set targetOrigin: "+a);ub=a},size:function(a,b){G("size","parentIFrame.size("+(""+(a?a:"")+(b?","+b:""))+")",a,b)}})}function q(){0!==w&&(b("setInterval: "+w+"ms"),setInterval(function(){G("interval","setInterval: "+w)},Math.abs(w)))}function m(c){function d(c){if(void 0===c.height||void 0===c.width||0===c.height||0===c.width)b("Attach listerner to "+c.src),a(c,"load",function(){G("imageLoad",
"Image loaded")})}c.forEach(function(a){"attributes"===a.type&&"src"===a.attributeName?d(a.target):"childList"===a.type&&(a=a.target.querySelectorAll("img"),Array.prototype.forEach.call(a,function(a){d(a)}))})}function p(){function b(a){"height"!==a.propertyName&&"width"!==a.propertyName||G("transitionend","Transition end")}a(window,"transitionend",b);a(window,"webkitTransitionEnd",b);a(window,"oTransitionEnd",b);a(window,"otransitionend",b)}function u(){function a(){var c=document.querySelector("body"),
e=new d(function(a){G("mutationObserver","mutationObserver: "+a[0].target+" "+a[0].type);m(a)});b("Enable MutationObserver");e.observe(c,{attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0})}var d=window.MutationObserver||window.WebKitMutationObserver;d?0>w?q():a():(c("MutationObserver not supported in this browser!"),q())}function v(){function a(b){var c=document.body,d=0;if("defaultView"in document&&"getComputedStyle"in document.defaultView)d=document.defaultView.getComputedStyle(c,
null),d=null!==d?d[b]:0;else if(b=c.currentStyle[b],/^\d+(px)?$/i.test(b))d=parseInt(b,10);else{var d=c.style.left,e=c.runtimeStyle.left;c.runtimeStyle.left=c.currentStyle.left;c.style.left=b||0;b=c.style.pixelLeft;c.style.left=d;c.runtimeStyle.left=e;d=b}return parseInt(d,10)}return document.body.offsetHeight+a("marginTop")+a("marginBottom")}function A(){return document.body.scrollHeight}function D(){return document.documentElement.offsetHeight}function x(){return document.documentElement.scrollHeight}
function B(){for(var a=document.querySelectorAll("body *"),c=a.length,d=0,e=(new Date).getTime(),f=0;f<c;f++)a[f].getBoundingClientRect().bottom>d&&(d=a[f].getBoundingClientRect().bottom);e=(new Date).getTime()-e;b("Parsed "+c+" HTML elements");b("LowestElement bottom position calculated in "+e+"ms");return d}function s(){return Math.max.apply(null,[v(),A(),D(),x()])}function G(a,c,d,e){function f(){a in{reset:1,resetPage:1,init:1}||b("Trigger event: "+c)}d=void 0!==d?d:qa[W]();e=void 0!==e?e:Math.max(document.documentElement.scrollWidth,
document.body.scrollWidth);Math.abs(aa-d)<=V&&(!X||Math.abs(Da-e)<=V)?!(a in{init:1,interval:1,size:1})&&W in wa?J(c):a in{interval:1}||(f(),b("No change in size detected")):(f(),aa=d,Da=e,C(aa,Da,a),b("--"))}function K(a){aa=qa[W]();Da=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth);C(aa,Da,a)}function J(a){var c=W;W="offset";b("Reset trigger event: "+a);K("reset");W=c}function C(a,c,d,e,f){void 0===f?f=ub:b("Message targetOrigin: "+f);a=U+":"+(a+":"+c)+":"+d+(void 0!==e?
":"+e:"");b("Sending message to host page ("+a+")");pb.postMessage("[iFrameSizer]"+a,f)}var L=!0,N="",Q=0,T="",E="",X=!1,aa=1,r=!0,W="offset",ba=!0,la="",w=32,R=!1,U="",ua=!1,wa={max:1,scroll:1,bodyScroll:1,documentElementScroll:1},ub="*",pb=window.parent,V=0,Da=1,qa={offset:v,bodyOffset:v,bodyScroll:A,documentElementOffset:D,scroll:x,documentElementScroll:x,max:s,min:function(){return Math.min.apply(null,[v(),A(),D(),x()])},grow:s,lowestElement:function(){return Math.max(v(),B())}};a(window,"message",
function(a){function m(){la=a.data;pb=a.source;b("Initialising iFrame");d();void 0===T&&(T=Q+"px");-1!==T.indexOf("-")&&c("Negative CSS value ignored for margin");e("margin",T);e("background",N);e("padding",E);k();g();document.documentElement.style.height="";document.body.style.height="";b('HTML & body height set to "auto"');n();!0===L?(f(),h(),p(),u()):b("Auto Resize disabled");G("init","Init message from host page");r=!1;setTimeout(function(){ba=!1},128)}"[iFrameSizer]"===(""+a.data).substr(0,13)&&
(r&&a.data.split(":")[2]in{"true":1,"false":1}?m():"reset"===a.data.split("]")[1]?ba?b("Page reset ignored by init"):(b("Page size reset by host page"),K("resetPage")):a.data===la||"iFrameResize"in window||c("Unexpected message ("+a.data+")"))})})();
$(document).ready(function(){$(".action_summary").live("click",function(){var a=$(this).closest(".activity_stream_event_unit"),b=a.find(".target");a.hasClass("details_loaded")?a.toggleClass("active"):(a.addClass("loading"),$.ajax_with_retry({url:b.attr("data-get-url"),success:function(c){a.addClass("active details_loaded").removeClass("loading");app.tracking.track("Line Item Open",{inbox_name:a.data("inbox-name"),strategy_name:a.data("strategy-name"),action_name:a.data("action-name"),target_type:a.data("target-type"),
viewing_context:a.closest("[data-viewing-context]").data("viewing-context"),index:a.index()});b.find(".event_context").html(c);app.hydrate_edit_diffs()}}))})});
$(function(){var a=$(".song_list");if(a.hasClass("can_edit_album_appearances")){var b=Hogan.compile($("#new_track_template").html());$("#add_song_to_album").autocomplete("/search/quick.js",{delay:250,scrollHeight:500,matchSubset:!1,max:20,minChars:4,selectFirst:!0,dataType:"html"}).result(function(c,d){app.ajaxQueue.add({type:"post",url:$("form.edit_album").attr("action")+"/album_appearances",data:{"album_appearance[song_id]":d[2]},dataType:"json",success:function(c){$("#add_song_to_album").val("");
a.append(b.render(c.album_appearance))}})});$(".remove_song_from_album").live("click",function(){if(!confirm("Are you surreeeeee?!?!"))return!1;app.ajaxQueue.add({type:"post",url:$(this).siblings("select").attr("data-url"),data:{_method:"delete"}});$(this).parent().slideUp("fast",function(){$(this).remove()});return!1});$(".song_list select").live("change",function(){app.ajaxQueue.add({type:"post",url:$(this).attr("data-url"),data:{_method:"put","album_appearance[track_number]":$(this).val()},dataType:"json"})})}});
window.app=window.app||{};
window.app.annotator=function(a,b){function c(a){var c=b.createRange();c.selectNodeContents(a);return c}return{calculate_referent_locator:function(a,b){var f;f=c(b);f.setEnd(a.startContainer,a.startOffset);f=f.toString().replace(/\s+/g,"");var h=f.substring(f.length-32,f.length),g=c(b);g.setStart(a.endContainer,a.endOffset);g=g.toString().replace(/\s+/g,"").substring(0,32);return{previous_context:h,text:a.toString(),next_context:g,total_offset:f.length}},calculate_image_locator:function(b,c){return{image_url:c.src,
occurrence:a(b).find('img[src="'+c.src+'"]').index(c)+1}}}}(jQuery,document);$(document).on("click",".generate_access_token",function(){var a=$(this);$.ajax({url:a.attr("data-endpoint"),type:"post",skip_csrf:!0,data:{client_id:a.attr("data-client_id"),client_secret:a.attr("data-client_secret"),grant_type:"client_credentials"},headers:{}}).then(function(b){b=$('<input type="text" class="click_to_select_all" readonly>').val(b.access_token);a.replaceWith(b)});return!1});
window._bopPlayerReady=function(a){if(a.available){a=$("#bopPlayer");a.closest(".sidebar_unit.media").addClass("bop_available");a.show();var b=$("<div>",{"class":"flashContainer"}),c=$("<div>",{"class":"control_container",style:"display: none;"}).appendTo(b);"undefined"!==typeof window.envoOptions&&c.addClass("chat_present");var d=$("<div>",{"class":"controlDiv play"}).appendTo(c),e=$("<div>",{"class":"progressBar"}).appendTo(c),f=$("<div>",{"class":"elapsed"}).appendTo(e);b.appendTo(a.parent());
d.click(function(){b.hasClass("playing")?Bop.pause():Bop.play()});e.click(function(a){a=(a.pageX-e.offset().left)/e.outerWidth();Bop.seek(a);return!1});Bop.on("positionChange",function(a){f.width(a.perc+"%")});Bop.on("serviceSwitch",function(a){"spotify"==a.service?c.hide():a.service&&c.show()});Bop.on("playingStateChange",function(a){1==a.state?(d.removeClass("play replay").addClass("pause"),b.addClass("playing")):(d.removeClass("pause").addClass("play"),b.removeClass("playing"))})}};
$(function(){$("#chat").length&&($("#chat_dock").click(function(){$("#chat").addClass("open").removeClass("has_message message notification invitation")}),$("#close_chat").click(function(){$("#chat").remove();return!1}),$.fn.add_message=function(a,b,c){var d=$(this),e=$("#chat");a=$.trim_to_length(a.data.message,30);d.find(".new_message").text(a);e.addClass("has_message "+b);c&&$.titleAlert(a,{interval:1E3,requireBlur:!0});"message"==b&&setTimeout(function(){e.removeClass("has_message message")},
2E3)},window.addEventListener("message",function(a){if(a.origin.replace(/https?:\/\//i,"")!==window.location.host)return!1;var b=$("#chat_dock"),c=$("#chat");switch(a.data.type){case "summary":b.removeClass("loading_with_indicator");b.find(".visitors_count").text(a.data.visitors_count);break;case "closing":c.removeClass("open");break;case "new_message":b.add_message(a,"message");break;case "notification":b.add_message(a,"notification");break;case "invitation":b.add_message(a,"invitation","flash_title_bar")}},
!1))});
(function(){var a=this,b=a.Chart,c=function(a){this.canvas=a.canvas;this.ctx=a;var b=function(a,b){return a["offset"+b]?a["offset"+b]:document.defaultView.getComputedStyle(a).getPropertyValue(b)},c=this.width=b(a.canvas,"Width"),b=this.height=b(a.canvas,"Height");a.canvas.width=c;a.canvas.height=b;c=this.width=a.canvas.width;b=this.height=a.canvas.height;return this.aspectRatio=this.width/this.height,d.retinaScale(this),this};c.defaults={global:{animation:!0,animationSteps:60,animationEasing:"easeOutQuart",showScale:!0,
scaleOverride:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleLabel:"<%=value%>",scaleIntegersOnly:!0,scaleBeginAtZero:!1,scaleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",responsive:!1,maintainAspectRatio:!0,showTooltips:!0,customTooltips:!1,tooltipEvents:["mousemove","touchstart","touchmove","mouseout"],tooltipFillColor:"rgba(0,0,0,0.8)",
tooltipFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipFontSize:14,tooltipFontStyle:"normal",tooltipFontColor:"#fff",tooltipTitleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipTitleFontSize:14,tooltipTitleFontStyle:"bold",tooltipTitleFontColor:"#fff",tooltipYPadding:6,tooltipXPadding:6,tooltipCaretSize:8,tooltipCornerRadius:6,tooltipXOffset:10,tooltipTemplate:"<%if (label){%><%=label%>: <%}%><%= value %>",multiTooltipTemplate:"<%= value %>",multiTooltipKeyBackground:"#fff",
onAnimationProgress:function(){},onAnimationComplete:function(){}}};c.types={};var d=c.helpers={},e=d.each=function(a,b,c){var d=Array.prototype.slice.call(arguments,3);if(a)if(a.length===+a.length){var e;for(e=0;e<a.length;e++)b.apply(c,[a[e],e].concat(d))}else for(e in a)b.apply(c,[a[e],e].concat(d))},f=d.clone=function(a){var b={};return e(a,function(c,d){a.hasOwnProperty(d)&&(b[d]=c)}),b},h=d.extend=function(a){return e(Array.prototype.slice.call(arguments,1),function(b){e(b,function(c,d){b.hasOwnProperty(d)&&
(a[d]=c)})}),a},g=d.merge=function(){var a=Array.prototype.slice.call(arguments,0);return a.unshift({}),h.apply(null,a)},k=d.indexOf=function(a,b){if(Array.prototype.indexOf)return a.indexOf(b);for(var c=0;c<a.length;c++)if(a[c]===b)return c;return-1},n=(d.where=function(a,b){var c=[];return d.each(a,function(a){b(a)&&c.push(a)}),c},d.findNextWhere=function(a,b,c){c||(c=-1);for(c+=1;c<a.length;c++){var d=a[c];if(b(d))return d}},d.findPreviousWhere=function(a,b,c){c||(c=a.length);for(c-=1;0<=c;c--){var d=
a[c];if(b(d))return d}},d.inherits=function(a){var b=this,c=a&&a.hasOwnProperty("constructor")?a.constructor:function(){return b.apply(this,arguments)},d=function(){this.constructor=c};return d.prototype=b.prototype,c.prototype=new d,c.extend=n,a&&h(c.prototype,a),c.__super__=b.prototype,c}),q=d.noop=function(){},m=d.uid=function(){var a=0;return function(){return"chart-"+a++}}(),p=d.warn=function(a){window.console&&"function"==typeof window.console.warn&&console.warn(a)},u=d.amd="function"==typeof define&&
define.amd,v=d.isNumber=function(a){return!isNaN(parseFloat(a))&&isFinite(a)},A=d.max=function(a){return Math.max.apply(Math,a)},D=d.min=function(a){return Math.min.apply(Math,a)},x=(d.cap=function(a,b,c){if(v(b)){if(a>b)return b}else if(v(c)&&c>a)return c;return a},d.getDecimalPlaces=function(a){return 0!==a%1&&v(a)?a.toString().split(".")[1].length:0}),B=d.radians=function(a){return Math.PI/180*a},s=(d.getAngleFromPoint=function(a,b){var c=b.x-a.x,d=b.y-a.y,e=Math.sqrt(c*c+d*d),f=2*Math.PI+Math.atan2(d,
c);return 0>c&&0>d&&(f+=2*Math.PI),{angle:f,distance:e}},d.aliasPixel=function(a){return 0===a%2?0:.5}),G=(d.splineCurve=function(a,b,c,d){var e=Math.sqrt(Math.pow(b.x-a.x,2)+Math.pow(b.y-a.y,2)),f=Math.sqrt(Math.pow(c.x-b.x,2)+Math.pow(c.y-b.y,2)),g=d*e/(e+f);d=d*f/(e+f);return{inner:{x:b.x-g*(c.x-a.x),y:b.y-g*(c.y-a.y)},outer:{x:b.x+d*(c.x-a.x),y:b.y+d*(c.y-a.y)}}},d.calculateOrderOfMagnitude=function(a){return Math.floor(Math.log(a)/Math.LN10)}),K=(d.calculateScaleRange=function(a,b,c,d,e){b=Math.floor(b/
(1.5*c));c=2>=b;var f=A(a),g=D(a);f===g&&(f+=.5,.5<=g&&!d?g-=.5:f+=.5);a=Math.abs(f-g);a=G(a);f=Math.ceil(f/(1*Math.pow(10,a)))*Math.pow(10,a);d=d?0:Math.floor(g/(1*Math.pow(10,a)))*Math.pow(10,a);for(var f=f-d,g=Math.pow(10,a),h=Math.round(f/g);(h>b||b>2*h)&&!c;)if(h>b)g*=2,h=Math.round(f/g),0!==h%1&&(c=!0);else{if(e&&0<=a&&0!==g/2%1)break;g/=2;h=Math.round(f/g)}return c&&(h=2,g=f/h),{steps:h,stepValue:g,min:d,max:d+h*g}},d.template=function(a,b){if(a instanceof Function)return a(b);var c={},c=/\W/.test(a)?
new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+a.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):c[a]=c[a];return b?c(b):c}),J=(d.generateLabels=function(a,b,c,d){var f=Array(b);return labelTemplateString&&e(f,function(b,e){f[e]=K(a,{value:c+d*(e+1)})}),f},d.easingEffects={linear:function(a){return a},
easeInQuad:function(a){return a*a},easeOutQuad:function(a){return-1*a*(a-2)},easeInOutQuad:function(a){return 1>(a/=.5)?.5*a*a:-.5*(--a*(a-2)-1)},easeInCubic:function(a){return a*a*a},easeOutCubic:function(a){return 1*((a=a/1-1)*a*a+1)},easeInOutCubic:function(a){return 1>(a/=.5)?.5*a*a*a:.5*((a-=2)*a*a+2)},easeInQuart:function(a){return a*a*a*a},easeOutQuart:function(a){return-1*((a=a/1-1)*a*a*a-1)},easeInOutQuart:function(a){return 1>(a/=.5)?.5*a*a*a*a:-.5*((a-=2)*a*a*a-2)},easeInQuint:function(a){return 1*
(a/=1)*a*a*a*a},easeOutQuint:function(a){return 1*((a=a/1-1)*a*a*a*a+1)},easeInOutQuint:function(a){return 1>(a/=.5)?.5*a*a*a*a*a:.5*((a-=2)*a*a*a*a+2)},easeInSine:function(a){return-1*Math.cos(a/1*(Math.PI/2))+1},easeOutSine:function(a){return 1*Math.sin(a/1*(Math.PI/2))},easeInOutSine:function(a){return-.5*(Math.cos(Math.PI*a/1)-1)},easeInExpo:function(a){return 0===a?1:1*Math.pow(2,10*(a/1-1))},easeOutExpo:function(a){return 1===a?1:1*(-Math.pow(2,-10*a/1)+1)},easeInOutExpo:function(a){return 0===
a?0:1===a?1:1>(a/=.5)?.5*Math.pow(2,10*(a-1)):.5*(-Math.pow(2,-10*--a)+2)},easeInCirc:function(a){return 1<=a?a:-1*(Math.sqrt(1-(a/=1)*a)-1)},easeOutCirc:function(a){return 1*Math.sqrt(1-(a=a/1-1)*a)},easeInOutCirc:function(a){return 1>(a/=.5)?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1)},easeInElastic:function(a){var b=1.70158,c=0,d=1;return 0===a?0:1==(a/=1)?1:(c||(c=.3),d<Math.abs(1)?(d=1,b=c/4):b=c/(2*Math.PI)*Math.asin(1/d),-(d*Math.pow(2,10*(a-=1))*Math.sin(2*(1*a-b)*Math.PI/c)))},
easeOutElastic:function(a){var b=1.70158,c=0,d=1;return 0===a?0:1==(a/=1)?1:(c||(c=.3),d<Math.abs(1)?(d=1,b=c/4):b=c/(2*Math.PI)*Math.asin(1/d),d*Math.pow(2,-10*a)*Math.sin(2*(1*a-b)*Math.PI/c)+1)},easeInOutElastic:function(a){var b=1.70158,c=0,d=1;return 0===a?0:2==(a/=.5)?1:(c||(c=.3*1.5),d<Math.abs(1)?(d=1,b=c/4):b=c/(2*Math.PI)*Math.asin(1/d),1>a?-.5*d*Math.pow(2,10*(a-=1))*Math.sin(2*(1*a-b)*Math.PI/c):d*Math.pow(2,-10*(a-=1))*Math.sin(2*(1*a-b)*Math.PI/c)*.5+1)},easeInBack:function(a){return 1*
(a/=1)*a*(2.70158*a-1.70158)},easeOutBack:function(a){return 1*((a=a/1-1)*a*(2.70158*a+1.70158)+1)},easeInOutBack:function(a){var b=1.70158;return 1>(a/=.5)?.5*a*a*(((b*=1.525)+1)*a-b):.5*((a-=2)*a*(((b*=1.525)+1)*a+b)+2)},easeInBounce:function(a){return 1-J.easeOutBounce(1-a)},easeOutBounce:function(a){return(a/=1)<1/2.75?7.5625*a*a:2/2.75>a?1*(7.5625*(a-=1.5/2.75)*a+.75):2.5/2.75>a?1*(7.5625*(a-=2.25/2.75)*a+.9375):1*(7.5625*(a-=2.625/2.75)*a+.984375)},easeInOutBounce:function(a){return.5>a?.5*
J.easeInBounce(2*a):.5*J.easeOutBounce(2*a-1)+.5}}),C=d.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){return window.setTimeout(a,1E3/60)}}(),L=d.cancelAnimFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(a){return window.clearTimeout(a,
1E3/60)}}(),N=(d.animationLoop=function(a,b,c,d,e,f){var g=0,h=J[c]||J.linear,k=function(){g++;var c=g/b,m=h(c);a.call(f,m,c,g);d.call(f,m,c);b>g?f.animationFrame=C(k):e.apply(f)};C(k)},d.getRelativePosition=function(a){var b,c,d=a.originalEvent||a;a=(a.currentTarget||a.srcElement).getBoundingClientRect();return d.touches?(b=d.touches[0].clientX-a.left,c=d.touches[0].clientY-a.top):(b=d.clientX-a.left,c=d.clientY-a.top),{x:b,y:c}},d.addEvent=function(a,b,c){a.addEventListener?a.addEventListener(b,
c):a.attachEvent?a.attachEvent("on"+b,c):a["on"+b]=c}),Q=d.removeEvent=function(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent?a.detachEvent("on"+b,c):a["on"+b]=q},T=(d.bindEvents=function(a,b,c){a.events||(a.events={});e(b,function(b){a.events[b]=function(){c.apply(a,arguments)};N(a.chart.canvas,b,a.events[b])})},d.unbindEvents=function(a,b){e(b,function(b,c){Q(a.chart.canvas,c,b)})}),E=d.getMaximumWidth=function(a){return a.parentNode.clientWidth},X=d.getMaximumHeight=
function(a){return a.parentNode.clientHeight},aa=(d.getMaximumSize=d.getMaximumWidth,d.retinaScale=function(a){var b=a.ctx,c=a.canvas.width;a=a.canvas.height;window.devicePixelRatio&&(b.canvas.style.width=c+"px",b.canvas.style.height=a+"px",b.canvas.height=a*window.devicePixelRatio,b.canvas.width=c*window.devicePixelRatio,b.scale(window.devicePixelRatio,window.devicePixelRatio))}),r=d.clear=function(a){a.ctx.clearRect(0,0,a.width,a.height)},W=d.fontString=function(a,b,c){return b+" "+a+"px "+c},ba=
d.longestText=function(a,b,c){a.font=b;var d=0;return e(c,function(b){b=a.measureText(b).width;d=b>d?b:d}),d},la=d.drawRoundedRectangle=function(a,b,c,d,e,f){a.beginPath();a.moveTo(b+f,c);a.lineTo(b+d-f,c);a.quadraticCurveTo(b+d,c,b+d,c+f);a.lineTo(b+d,c+e-f);a.quadraticCurveTo(b+d,c+e,b+d-f,c+e);a.lineTo(b+f,c+e);a.quadraticCurveTo(b,c+e,b,c+e-f);a.lineTo(b,c+f);a.quadraticCurveTo(b,c,b+f,c);a.closePath()};c.instances={};c.Type=function(a,b,d){this.options=b;this.chart=d;this.id=m();c.instances[this.id]=
this;b.responsive&&this.resize();this.initialize.call(this,a)};h(c.Type.prototype,{initialize:function(){return this},clear:function(){return r(this.chart),this},stop:function(){return L(this.animationFrame),this},resize:function(a){this.stop();var b=this.chart.canvas,c=E(this.chart.canvas),d=this.options.maintainAspectRatio?c/this.chart.aspectRatio:X(this.chart.canvas);return b.width=this.chart.width=c,b.height=this.chart.height=d,aa(this.chart),"function"==typeof a&&a.apply(this,Array.prototype.slice.call(arguments,
1)),this},reflow:q,render:function(a){return a&&this.reflow(),this.options.animation&&!a?d.animationLoop(this.draw,this.options.animationSteps,this.options.animationEasing,this.options.onAnimationProgress,this.options.onAnimationComplete,this):(this.draw(),this.options.onAnimationComplete.call(this)),this},generateLegend:function(){return K(this.options.legendTemplate,this)},destroy:function(){this.clear();T(this,this.events);var a=this.chart.canvas;a.width=this.chart.width;a.height=this.chart.height;
a.style.removeProperty?(a.style.removeProperty("width"),a.style.removeProperty("height")):(a.style.removeAttribute("width"),a.style.removeAttribute("height"));delete c.instances[this.id]},showTooltip:function(a,b){"undefined"==typeof this.activeElements&&(this.activeElements=[]);if(function(a){var b=!1;return a.length!==this.activeElements.length?b=!0:(e(a,function(a,c){a!==this.activeElements[c]&&(b=!0)},this),b)}.call(this,a)||b){if(this.activeElements=a,this.draw(),this.options.customTooltips&&
this.options.customTooltips(!1),0<a.length)if(this.datasets&&1<this.datasets.length){for(var f,g,h=this.datasets.length-1;0<=h&&(f=this.datasets[h].points||this.datasets[h].bars||this.datasets[h].segments,g=k(f,a[0]),-1===g);h--);var m=[],n=[];f=function(){var a,b,c,e,f,h=[],k=[],q=[];return d.each(this.datasets,function(b){a=b.points||b.bars||b.segments;a[g]&&a[g].hasValue()&&h.push(a[g])}),d.each(h,function(a){k.push(a.x);q.push(a.y);m.push(d.template(this.options.multiTooltipTemplate,a));n.push({fill:a._saved.fillColor||
a.fillColor,stroke:a._saved.strokeColor||a.strokeColor})},this),f=D(q),c=A(q),e=D(k),b=A(k),{x:e>this.chart.width/2?e:b,y:(f+c)/2}}.call(this,g);(new c.MultiTooltip({x:f.x,y:f.y,xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,xOffset:this.options.tooltipXOffset,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,titleTextColor:this.options.tooltipTitleFontColor,
titleFontFamily:this.options.tooltipTitleFontFamily,titleFontStyle:this.options.tooltipTitleFontStyle,titleFontSize:this.options.tooltipTitleFontSize,cornerRadius:this.options.tooltipCornerRadius,labels:m,legendColors:n,legendColorBackground:this.options.multiTooltipKeyBackground,title:a[0].label,chart:this.chart,ctx:this.chart.ctx,custom:this.options.customTooltips})).draw()}else e(a,function(a){var b=a.tooltipPosition();(new c.Tooltip({x:Math.round(b.x),y:Math.round(b.y),xPadding:this.options.tooltipXPadding,
yPadding:this.options.tooltipYPadding,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,caretHeight:this.options.tooltipCaretSize,cornerRadius:this.options.tooltipCornerRadius,text:K(this.options.tooltipTemplate,a),chart:this.chart,custom:this.options.customTooltips})).draw()},this);return this}},toBase64Image:function(){return this.chart.canvas.toDataURL.apply(this.chart.canvas,
arguments)}});c.Type.extend=function(a){var b=this,d=function(){return b.apply(this,arguments)};if(d.prototype=f(b.prototype),h(d.prototype,a),d.extend=c.Type.extend,a.name||b.prototype.name){var e=a.name||b.prototype.name,k=c.defaults[b.prototype.name]?f(c.defaults[b.prototype.name]):{};c.defaults[e]=h(k,a.defaults);c.types[e]=d;c.prototype[e]=function(a,b){var f=g(c.defaults.global,c.defaults[e],b||{});return new d(a,f,this)}}else p("Name not provided for this chart, so it hasn't been registered");
return b};c.Element=function(a){h(this,a);this.initialize.apply(this,arguments);this.save()};h(c.Element.prototype,{initialize:function(){},restore:function(a){return a?e(a,function(a){this[a]=this._saved[a]},this):h(this,this._saved),this},save:function(){return this._saved=f(this),delete this._saved._saved,this},update:function(a){return e(a,function(a,b){this._saved[b]=this[b];this[b]=a},this),this},transition:function(a,b){return e(a,function(a,c){this[c]=(a-this._saved[c])*b+this._saved[c]},
this),this},tooltipPosition:function(){return{x:this.x,y:this.y}},hasValue:function(){return v(this.value)}});c.Element.extend=n;c.Point=c.Element.extend({display:!0,inRange:function(a,b){var c=this.hitDetectionRadius+this.radius;return Math.pow(a-this.x,2)+Math.pow(b-this.y,2)<Math.pow(c,2)},draw:function(){if(this.display){var a=this.ctx;a.beginPath();a.arc(this.x,this.y,this.radius,0,2*Math.PI);a.closePath();a.strokeStyle=this.strokeColor;a.lineWidth=this.strokeWidth;a.fillStyle=this.fillColor;
a.fill();a.stroke()}}});c.Arc=c.Element.extend({inRange:function(a,b){var c=d.getAngleFromPoint(this,{x:a,y:b}),e=c.distance>=this.innerRadius&&c.distance<=this.outerRadius;return c.angle>=this.startAngle&&c.angle<=this.endAngle&&e},tooltipPosition:function(){var a=this.startAngle+(this.endAngle-this.startAngle)/2,b=(this.outerRadius-this.innerRadius)/2+this.innerRadius;return{x:this.x+Math.cos(a)*b,y:this.y+Math.sin(a)*b}},draw:function(a){a=this.ctx;a.beginPath();a.arc(this.x,this.y,this.outerRadius,
this.startAngle,this.endAngle);a.arc(this.x,this.y,this.innerRadius,this.endAngle,this.startAngle,!0);a.closePath();a.strokeStyle=this.strokeColor;a.lineWidth=this.strokeWidth;a.fillStyle=this.fillColor;a.fill();a.lineJoin="bevel";this.showStroke&&a.stroke()}});c.Rectangle=c.Element.extend({draw:function(){var a=this.ctx,b=this.width/2,c=this.x-b,b=this.x+b,d=this.base-(this.base-this.y),e=this.strokeWidth/2;this.showStroke&&(c+=e,b-=e,d+=e);a.beginPath();a.fillStyle=this.fillColor;a.strokeStyle=
this.strokeColor;a.lineWidth=this.strokeWidth;a.moveTo(c,this.base);a.lineTo(c,d);a.lineTo(b,d);a.lineTo(b,this.base);a.fill();this.showStroke&&a.stroke()},height:function(){return this.base-this.y},inRange:function(a,b){return a>=this.x-this.width/2&&a<=this.x+this.width/2&&b>=this.y&&b<=this.base}});c.Tooltip=c.Element.extend({draw:function(){var a=this.chart.ctx;a.font=W(this.fontSize,this.fontStyle,this.fontFamily);this.xAlign="center";this.yAlign="above";var b=this.caretPadding=2,c=a.measureText(this.text).width+
2*this.xPadding,d=this.fontSize+2*this.yPadding,e=d+this.caretHeight+b;this.x+c/2>this.chart.width?this.xAlign="left":0>this.x-c/2&&(this.xAlign="right");0>this.y-e&&(this.yAlign="below");var f=this.x-c/2,e=this.y-e;if(a.fillStyle=this.fillColor,this.custom)this.custom(this);else{switch(this.yAlign){case "above":a.beginPath();a.moveTo(this.x,this.y-b);a.lineTo(this.x+this.caretHeight,this.y-(b+this.caretHeight));a.lineTo(this.x-this.caretHeight,this.y-(b+this.caretHeight));a.closePath();a.fill();
break;case "below":e=this.y+b+this.caretHeight,a.beginPath(),a.moveTo(this.x,this.y+b),a.lineTo(this.x+this.caretHeight,this.y+b+this.caretHeight),a.lineTo(this.x-this.caretHeight,this.y+b+this.caretHeight),a.closePath(),a.fill()}switch(this.xAlign){case "left":f=this.x-c+(this.cornerRadius+this.caretHeight);break;case "right":f=this.x-(this.cornerRadius+this.caretHeight)}la(a,f,e,c,d,this.cornerRadius);a.fill();a.fillStyle=this.textColor;a.textAlign="center";a.textBaseline="middle";a.fillText(this.text,
f+c/2,e+d/2)}}});c.MultiTooltip=c.Element.extend({initialize:function(){this.font=W(this.fontSize,this.fontStyle,this.fontFamily);this.titleFont=W(this.titleFontSize,this.titleFontStyle,this.titleFontFamily);this.height=this.labels.length*this.fontSize+this.fontSize/2*(this.labels.length-1)+2*this.yPadding+1.5*this.titleFontSize;this.ctx.font=this.titleFont;var a=this.ctx.measureText(this.title).width,b=ba(this.ctx,this.font,this.labels)+this.fontSize+3;this.width=A([b,a])+2*this.xPadding;a=this.height/
2;0>this.y-a?this.y=a:this.y+a>this.chart.height&&(this.y=this.chart.height-a);this.x>this.chart.width/2?this.x-=this.xOffset+this.width:this.x+=this.xOffset},getLineHeight:function(a){var b=this.y-this.height/2+this.yPadding;return 0===a?b+this.titleFontSize/2:b+(1.5*this.fontSize*(a-1)+this.fontSize/2)+1.5*this.titleFontSize},draw:function(){if(this.custom)this.custom(this);else{la(this.ctx,this.x,this.y-this.height/2,this.width,this.height,this.cornerRadius);var a=this.ctx;a.fillStyle=this.fillColor;
a.fill();a.closePath();a.textAlign="left";a.textBaseline="middle";a.fillStyle=this.titleTextColor;a.font=this.titleFont;a.fillText(this.title,this.x+this.xPadding,this.getLineHeight(0));a.font=this.font;d.each(this.labels,function(b,c){a.fillStyle=this.textColor;a.fillText(b,this.x+this.xPadding+this.fontSize+3,this.getLineHeight(c+1));a.fillStyle=this.legendColorBackground;a.fillRect(this.x+this.xPadding,this.getLineHeight(c+1)-this.fontSize/2,this.fontSize,this.fontSize);a.fillStyle=this.legendColors[c].fill;
a.fillRect(this.x+this.xPadding,this.getLineHeight(c+1)-this.fontSize/2,this.fontSize,this.fontSize)},this)}}});c.Scale=c.Element.extend({initialize:function(){this.fit()},buildYLabels:function(){this.yLabels=[];for(var a=x(this.stepValue),b=0;b<=this.steps;b++)this.yLabels.push(K(this.templateString,{value:(this.min+b*this.stepValue).toFixed(a)}));this.yLabelWidth=this.display&&this.showLabels?ba(this.ctx,this.font,this.yLabels):0},addXLabel:function(a){this.xLabels.push(a);this.valuesCount++;this.fit()},
removeXLabel:function(){this.xLabels.shift();this.valuesCount--;this.fit()},fit:function(){this.startPoint=this.display?this.fontSize:0;this.endPoint=this.display?this.height-1.5*this.fontSize-5:this.height;this.startPoint+=this.padding;this.endPoint-=this.padding;var a,b=this.endPoint-this.startPoint;this.calculateYRange(b);this.buildYLabels();for(this.calculateXLabelRotation();b>this.endPoint-this.startPoint;)b=this.endPoint-this.startPoint,a=this.yLabelWidth,this.calculateYRange(b),this.buildYLabels(),
a<this.yLabelWidth&&this.calculateXLabelRotation()},calculateXLabelRotation:function(){this.ctx.font=this.font;var a,b=this.ctx.measureText(this.xLabels[0]).width;if(this.xScalePaddingRight=this.ctx.measureText(this.xLabels[this.xLabels.length-1]).width/2+3,this.xScalePaddingLeft=b/2>this.yLabelWidth+10?b/2:this.yLabelWidth+10,this.xLabelRotation=0,this.display){var c,d=ba(this.ctx,this.font,this.xLabels);this.xLabelWidth=d;for(var e=Math.floor(this.calculateX(1)-this.calculateX(0))-6;this.xLabelWidth>
e&&0===this.xLabelRotation||this.xLabelWidth>e&&90>=this.xLabelRotation&&0<this.xLabelRotation;)c=Math.cos(B(this.xLabelRotation)),a=c*b,a+this.fontSize/2>this.yLabelWidth+8&&(this.xScalePaddingLeft=a+this.fontSize/2),this.xScalePaddingRight=this.fontSize/2,this.xLabelRotation++,this.xLabelWidth=c*d;0<this.xLabelRotation&&(this.endPoint-=Math.sin(B(this.xLabelRotation))*d+3)}else this.xLabelWidth=0,this.xScalePaddingLeft=this.xScalePaddingRight=this.padding},calculateYRange:q,drawingArea:function(){return this.startPoint-
this.endPoint},calculateY:function(a){var b=this.drawingArea()/(this.min-this.max);return this.endPoint-b*(a-this.min)},calculateX:function(a){var b=(0<this.xLabelRotation,this.width-(this.xScalePaddingLeft+this.xScalePaddingRight))/Math.max(this.valuesCount-(this.offsetGridLines?0:1),1);a=b*a+this.xScalePaddingLeft;return this.offsetGridLines&&(a+=b/2),Math.round(a)},update:function(a){d.extend(this,a);this.fit()},draw:function(){var a=this.ctx,b=(this.endPoint-this.startPoint)/this.steps,c=Math.round(this.xScalePaddingLeft);
this.display&&(a.fillStyle=this.textColor,a.font=this.font,e(this.yLabels,function(e,f){var g=this.endPoint-b*f,h=Math.round(g),k=this.showHorizontalLines;a.textAlign="right";a.textBaseline="middle";this.showLabels&&a.fillText(e,c-10,g);0!==f||k||(k=!0);k&&a.beginPath();0<f?(a.lineWidth=this.gridLineWidth,a.strokeStyle=this.gridLineColor):(a.lineWidth=this.lineWidth,a.strokeStyle=this.lineColor);h+=d.aliasPixel(a.lineWidth);k&&(a.moveTo(c,h),a.lineTo(this.width,h),a.stroke(),a.closePath());a.lineWidth=
this.lineWidth;a.strokeStyle=this.lineColor;a.beginPath();a.moveTo(c-5,h);a.lineTo(c,h);a.stroke();a.closePath()},this),e(this.xLabels,function(b,c){var d=this.calculateX(c)+s(this.lineWidth),e=this.calculateX(c-(this.offsetGridLines?.5:0))+s(this.lineWidth),f=0<this.xLabelRotation,g=this.showVerticalLines;0!==c||g||(g=!0);g&&a.beginPath();0<c?(a.lineWidth=this.gridLineWidth,a.strokeStyle=this.gridLineColor):(a.lineWidth=this.lineWidth,a.strokeStyle=this.lineColor);g&&(a.moveTo(e,this.endPoint),a.lineTo(e,
this.startPoint-3),a.stroke(),a.closePath());a.lineWidth=this.lineWidth;a.strokeStyle=this.lineColor;a.beginPath();a.moveTo(e,this.endPoint);a.lineTo(e,this.endPoint+5);a.stroke();a.closePath();a.save();a.translate(d,f?this.endPoint+12:this.endPoint+8);a.rotate(-1*B(this.xLabelRotation));a.font=this.font;a.textAlign=f?"right":"center";a.textBaseline=f?"middle":"top";a.fillText(b,0,0);a.restore()},this))}});c.RadialScale=c.Element.extend({initialize:function(){this.size=D([this.height,this.width]);
this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2},calculateCenterOffset:function(a){return this.drawingArea/(this.max-this.min)*(a-this.min)},update:function(){this.lineArc?this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2:this.setScaleSize();this.buildYLabels()},buildYLabels:function(){this.yLabels=[];for(var a=x(this.stepValue),b=0;b<=this.steps;b++)this.yLabels.push(K(this.templateString,{value:(this.min+b*
this.stepValue).toFixed(a)}))},getCircumference:function(){return 2*Math.PI/this.valuesCount},setScaleSize:function(){var a,b,c,d,e,f,g,h=D([this.height/2-this.pointLabelFontSize-5,this.width/2]);g=this.width;var k=0;this.ctx.font=W(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily);for(b=0;b<this.valuesCount;b++)a=this.getPointPosition(b,h),c=this.ctx.measureText(K(this.templateString,{value:this.labels[b]})).width+5,0===b||b===this.valuesCount/2?(d=c/2,a.x+d>g&&(g=a.x+d,
e=b),a.x-d<k&&(k=a.x-d,f=b)):b<this.valuesCount/2?a.x+c>g&&(g=a.x+c,e=b):b>this.valuesCount/2&&a.x-c<k&&(k=a.x-c,f=b);a=k;g=Math.ceil(g-this.width);e=this.getIndexAngle(e);f=this.getIndexAngle(f);e=g/Math.sin(e+Math.PI/2);f=a/Math.sin(f+Math.PI/2);e=v(e)?e:0;f=v(f)?f:0;this.drawingArea=h-(f+e)/2;this.setCenterPoint(f,e)},setCenterPoint:function(a,b){this.xCenter=(a+this.drawingArea+(this.width-b-this.drawingArea))/2;this.yCenter=this.height/2},getIndexAngle:function(a){return 2*Math.PI/this.valuesCount*
a-Math.PI/2},getPointPosition:function(a,b){var c=this.getIndexAngle(a);return{x:Math.cos(c)*b+this.xCenter,y:Math.sin(c)*b+this.yCenter}},draw:function(){if(this.display){var a=this.ctx;if(e(this.yLabels,function(b,c){if(0<c){var d;d=this.drawingArea/this.steps*c;var e=this.yCenter-d;if(0<this.lineWidth){if(a.strokeStyle=this.lineColor,a.lineWidth=this.lineWidth,this.lineArc)a.beginPath(),a.arc(this.xCenter,this.yCenter,d,0,2*Math.PI);else{a.beginPath();for(var f=0;f<this.valuesCount;f++)d=this.getPointPosition(f,
this.calculateCenterOffset(this.min+c*this.stepValue)),0===f?a.moveTo(d.x,d.y):a.lineTo(d.x,d.y)}a.closePath();a.stroke()}if(this.showLabels){if(a.font=W(this.fontSize,this.fontStyle,this.fontFamily),this.showLabelBackdrop)d=a.measureText(b).width,a.fillStyle=this.backdropColor,a.fillRect(this.xCenter-d/2-this.backdropPaddingX,e-this.fontSize/2-this.backdropPaddingY,d+2*this.backdropPaddingX,this.fontSize+2*this.backdropPaddingY);a.textAlign="center";a.textBaseline="middle";a.fillStyle=this.fontColor;
a.fillText(b,this.xCenter,e)}}},this),!this.lineArc){a.lineWidth=this.angleLineWidth;a.strokeStyle=this.angleLineColor;for(var b=this.valuesCount-1;0<=b;b--){if(0<this.angleLineWidth){var c=this.getPointPosition(b,this.calculateCenterOffset(this.max));a.beginPath();a.moveTo(this.xCenter,this.yCenter);a.lineTo(c.x,c.y);a.stroke();a.closePath()}c=this.getPointPosition(b,this.calculateCenterOffset(this.max)+5);a.font=W(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily);a.fillStyle=
this.pointLabelFontColor;var d=this.labels.length,f=this.labels.length/2,g=f/2,h=g>b||b>d-g,d=b===g||b===d-g;a.textAlign=0===b?"center":b===f?"center":f>b?"left":"right";a.textBaseline=d?"middle":h?"bottom":"top";a.fillText(this.labels[b],c.x,c.y)}}}}});d.addEvent(window,"resize",function(){var a;return function(){clearTimeout(a);a=setTimeout(function(){e(c.instances,function(a){a.options.responsive&&a.resize(a.render,!0)})},50)}}());u?define(function(){return c}):"object"==typeof module&&module.exports&&
(module.exports=c);a.Chart=c;c.noConflict=function(){return a.Chart=b,c}}).call(this);
(function(){var a=this.Chart,b=a.helpers;a.Type.extend({name:"Bar",defaults:{scaleBeginAtZero:!0,scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0,barShowStroke:!0,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].fillColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'},initialize:function(c){var d=
this.options;this.ScaleClass=a.Scale.extend({offsetGridLines:!0,calculateBarX:function(a,b,c){var g=this.calculateBaseWidth();c=this.calculateX(c)-g/2;a=this.calculateBarWidth(a);return c+a*b+b*d.barDatasetSpacing+a/2},calculateBaseWidth:function(){return this.calculateX(1)-this.calculateX(0)-2*d.barValueSpacing},calculateBarWidth:function(a){return(this.calculateBaseWidth()-(a-1)*d.barDatasetSpacing)/a}});this.datasets=[];this.options.showTooltips&&b.bindEvents(this,this.options.tooltipEvents,function(a){a=
"mouseout"!==a.type?this.getBarsAtEvent(a):[];this.eachBars(function(a){a.restore(["fillColor","strokeColor"])});b.each(a,function(a){a.fillColor=a.highlightFill;a.strokeColor=a.highlightStroke});this.showTooltip(a)});this.BarClass=a.Rectangle.extend({strokeWidth:this.options.barStrokeWidth,showStroke:this.options.barShowStroke,ctx:this.chart.ctx});b.each(c.datasets,function(a){var d={label:a.label||null,fillColor:a.fillColor,strokeColor:a.strokeColor,bars:[]};this.datasets.push(d);b.each(a.data,
function(b,g){d.bars.push(new this.BarClass({value:b,label:c.labels[g],datasetLabel:a.label,strokeColor:a.strokeColor,fillColor:a.fillColor,highlightFill:a.highlightFill||a.fillColor,highlightStroke:a.highlightStroke||a.strokeColor}))},this)},this);this.buildScale(c.labels);this.BarClass.prototype.base=this.scale.endPoint;this.eachBars(function(a,c,d){b.extend(a,{width:this.scale.calculateBarWidth(this.datasets.length),x:this.scale.calculateBarX(this.datasets.length,d,c),y:this.scale.endPoint});a.save()},
this);this.render()},update:function(){this.scale.update();b.each(this.activeElements,function(a){a.restore(["fillColor","strokeColor"])});this.eachBars(function(a){a.save()});this.render()},eachBars:function(a){b.each(this.datasets,function(d,e){b.each(d.bars,a,this,e)},this)},getBarsAtEvent:function(a){var d,e=[];a=b.getRelativePosition(a);for(var f=function(a){e.push(a.bars[d])},h=0;h<this.datasets.length;h++)for(d=0;d<this.datasets[h].bars.length;d++)if(this.datasets[h].bars[d].inRange(a.x,a.y))return b.each(this.datasets,
f),e;return e},buildScale:function(a){var d=this,e=function(){var a=[];return d.eachBars(function(b){a.push(b.value)}),a};a={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:a.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(a){a=
b.calculateScaleRange(e(),a,this.fontSize,this.beginAtZero,this.integersOnly);b.extend(this,a)},xLabels:a,font:b.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,showHorizontalLines:this.options.scaleShowHorizontalLines,showVerticalLines:this.options.scaleShowVerticalLines,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?
this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.barShowStroke?this.options.barStrokeWidth:0,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&b.extend(a,{calculateYRange:b.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth});this.scale=new this.ScaleClass(a)},addData:function(a,
d){b.each(a,function(a,b){this.datasets[b].bars.push(new this.BarClass({value:a,label:d,x:this.scale.calculateBarX(this.datasets.length,b,this.scale.valuesCount+1),y:this.scale.endPoint,width:this.scale.calculateBarWidth(this.datasets.length),base:this.scale.endPoint,strokeColor:this.datasets[b].strokeColor,fillColor:this.datasets[b].fillColor}))},this);this.scale.addXLabel(d);this.update()},removeData:function(){this.scale.removeXLabel();b.each(this.datasets,function(a){a.bars.shift()},this);this.update()},
reflow:function(){b.extend(this.BarClass.prototype,{y:this.scale.endPoint,base:this.scale.endPoint});var a=b.extend({height:this.chart.height,width:this.chart.width});this.scale.update(a)},draw:function(a){var d=a||1;this.clear();this.chart.ctx;this.scale.draw(d);b.each(this.datasets,function(a,c){b.each(a.bars,function(a,b){a.hasValue()&&(a.base=this.scale.endPoint,a.transition({x:this.scale.calculateBarX(this.datasets.length,c,b),y:this.scale.calculateY(a.value),width:this.scale.calculateBarWidth(this.datasets.length)},
d).draw())},this)},this)}})}).call(this);
(function(){var a=this.Chart,b=a.helpers,c={segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,percentageInnerCutout:50,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'};a.Type.extend({name:"Doughnut",defaults:c,
initialize:function(c){this.segments=[];this.outerRadius=(b.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2;this.SegmentArc=a.Arc.extend({ctx:this.chart.ctx,x:this.chart.width/2,y:this.chart.height/2});this.options.showTooltips&&b.bindEvents(this,this.options.tooltipEvents,function(a){a="mouseout"!==a.type?this.getSegmentsAtEvent(a):[];b.each(this.segments,function(a){a.restore(["fillColor"])});b.each(a,function(a){a.fillColor=a.highlightColor});this.showTooltip(a)});
this.calculateTotal(c);b.each(c,function(a,b){this.addData(a,b,!0)},this);this.render()},getSegmentsAtEvent:function(a){var c=[],f=b.getRelativePosition(a);return b.each(this.segments,function(a){a.inRange(f.x,f.y)&&c.push(a)},this),c},addData:function(a,b,c){this.segments.splice(b||this.segments.length,0,new this.SegmentArc({value:a.value,outerRadius:this.options.animateScale?0:this.outerRadius,innerRadius:this.options.animateScale?0:this.outerRadius/100*this.options.percentageInnerCutout,fillColor:a.color,
highlightColor:a.highlight||a.color,showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,startAngle:1.5*Math.PI,circumference:this.options.animateRotate?0:this.calculateCircumference(a.value),label:a.label}));c||(this.reflow(),this.update())},calculateCircumference:function(a){return 2*Math.PI*(Math.abs(a)/this.total)},calculateTotal:function(a){this.total=0;b.each(a,function(a){this.total+=Math.abs(a.value)},this)},update:function(){this.calculateTotal(this.segments);
b.each(this.activeElements,function(a){a.restore(["fillColor"])});b.each(this.segments,function(a){a.save()});this.render()},removeData:function(a){a=b.isNumber(a)?a:this.segments.length-1;this.segments.splice(a,1);this.reflow();this.update()},reflow:function(){b.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2});this.outerRadius=(b.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2;b.each(this.segments,function(a){a.update({outerRadius:this.outerRadius,
innerRadius:this.outerRadius/100*this.options.percentageInnerCutout})},this)},draw:function(a){var c=a?a:1;this.clear();b.each(this.segments,function(a,b){a.transition({circumference:this.calculateCircumference(a.value),outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout},c);a.endAngle=a.startAngle+a.circumference;a.draw();0===b&&(a.startAngle=1.5*Math.PI);b<this.segments.length-1&&(this.segments[b+1].startAngle=a.endAngle)},this)}});a.types.Doughnut.extend({name:"Pie",
defaults:b.merge(c,{percentageInnerCutout:0})})}).call(this);
(function(){var a=this.Chart,b=a.helpers;a.Type.extend({name:"Line",defaults:{scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0,bezierCurve:!0,bezierCurveTension:.4,pointDot:!0,pointDotRadius:4,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'},initialize:function(c){this.PointClass=
a.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx,inRange:function(a){return Math.pow(a-this.x,2)<Math.pow(this.radius+this.hitDetectionRadius,2)}});this.datasets=[];this.options.showTooltips&&b.bindEvents(this,this.options.tooltipEvents,function(a){a="mouseout"!==a.type?this.getPointsAtEvent(a):[];this.eachPoints(function(a){a.restore(["fillColor",
"strokeColor"])});b.each(a,function(a){a.fillColor=a.highlightFill;a.strokeColor=a.highlightStroke});this.showTooltip(a)});b.each(c.datasets,function(a){var e={label:a.label||null,fillColor:a.fillColor,strokeColor:a.strokeColor,pointColor:a.pointColor,pointStrokeColor:a.pointStrokeColor,points:[]};this.datasets.push(e);b.each(a.data,function(b,h){e.points.push(new this.PointClass({value:b,label:c.labels[h],datasetLabel:a.label,strokeColor:a.pointStrokeColor,fillColor:a.pointColor,highlightFill:a.pointHighlightFill||
a.pointColor,highlightStroke:a.pointHighlightStroke||a.pointStrokeColor}))},this);this.buildScale(c.labels);this.eachPoints(function(a,c){b.extend(a,{x:this.scale.calculateX(c),y:this.scale.endPoint});a.save()},this)},this);this.render()},update:function(){this.scale.update();b.each(this.activeElements,function(a){a.restore(["fillColor","strokeColor"])});this.eachPoints(function(a){a.save()});this.render()},eachPoints:function(a){b.each(this.datasets,function(d){b.each(d.points,a,this)},this)},getPointsAtEvent:function(a){var d=
[],e=b.getRelativePosition(a);return b.each(this.datasets,function(a){b.each(a.points,function(a){a.inRange(e.x,e.y)&&d.push(a)})},this),d},buildScale:function(c){var d=this,e=function(){var a=[];return d.eachPoints(function(b){a.push(b.value)}),a};c={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,
valuesCount:c.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(a){a=b.calculateScaleRange(e(),a,this.fontSize,this.beginAtZero,this.integersOnly);b.extend(this,a)},xLabels:c,font:b.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,showHorizontalLines:this.options.scaleShowHorizontalLines,showVerticalLines:this.options.scaleShowVerticalLines,
gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.pointDotRadius+this.options.pointDotStrokeWidth,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&b.extend(c,{calculateYRange:b.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,
max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth});this.scale=new a.Scale(c)},addData:function(a,d){b.each(a,function(a,b){this.datasets[b].points.push(new this.PointClass({value:a,label:d,x:this.scale.calculateX(this.scale.valuesCount+1),y:this.scale.endPoint,strokeColor:this.datasets[b].pointStrokeColor,fillColor:this.datasets[b].pointColor}))},this);this.scale.addXLabel(d);this.update()},removeData:function(){this.scale.removeXLabel();b.each(this.datasets,function(a){a.points.shift()},
this);this.update()},reflow:function(){var a=b.extend({height:this.chart.height,width:this.chart.width});this.scale.update(a)},draw:function(a){var d=a||1;this.clear();var e=this.chart.ctx,f=function(a){return null!==a.value},h=function(a,c,d){return b.findNextWhere(c,f,d)||a},g=function(a,c,d){return b.findPreviousWhere(c,f,d)||a};this.scale.draw(d);b.each(this.datasets,function(a){var c=b.where(a.points,f);b.each(a.points,function(a,b){a.hasValue()&&a.transition({y:this.scale.calculateY(a.value),
x:this.scale.calculateX(b)},d)},this);this.options.bezierCurve&&b.each(c,function(a,d){var e=0<d&&d<c.length-1?this.options.bezierCurveTension:0;a.controlPoints=b.splineCurve(g(a,c,d),a,h(a,c,d),e);a.controlPoints.outer.y>this.scale.endPoint?a.controlPoints.outer.y=this.scale.endPoint:a.controlPoints.outer.y<this.scale.startPoint&&(a.controlPoints.outer.y=this.scale.startPoint);a.controlPoints.inner.y>this.scale.endPoint?a.controlPoints.inner.y=this.scale.endPoint:a.controlPoints.inner.y<this.scale.startPoint&&
(a.controlPoints.inner.y=this.scale.startPoint)},this);e.lineWidth=this.options.datasetStrokeWidth;e.strokeStyle=a.strokeColor;e.beginPath();b.each(c,function(a,b){if(0===b)e.moveTo(a.x,a.y);else if(this.options.bezierCurve){var d=g(a,c,b);e.bezierCurveTo(d.controlPoints.outer.x,d.controlPoints.outer.y,a.controlPoints.inner.x,a.controlPoints.inner.y,a.x,a.y)}else e.lineTo(a.x,a.y)},this);e.stroke();this.options.datasetFill&&0<c.length&&(e.lineTo(c[c.length-1].x,this.scale.endPoint),e.lineTo(c[0].x,
this.scale.endPoint),e.fillStyle=a.fillColor,e.closePath(),e.fill());b.each(c,function(a){a.draw()})},this)}})}).call(this);
(function(){var a=this.Chart,b=a.helpers;a.Type.extend({name:"PolarArea",defaults:{scaleShowLabelBackdrop:!0,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBeginAtZero:!0,scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,scaleShowLine:!0,segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'},
initialize:function(c){this.segments=[];this.SegmentArc=a.Arc.extend({showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,ctx:this.chart.ctx,innerRadius:0,x:this.chart.width/2,y:this.chart.height/2});this.scale=new a.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,
showLabelBackdrop:this.options.scaleShowLabelBackdrop,backdropColor:this.options.scaleBackdropColor,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,lineArc:!0,width:this.chart.width,height:this.chart.height,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,valuesCount:c.length});
this.updateScaleRange(c);this.scale.update();b.each(c,function(a,b){this.addData(a,b,!0)},this);this.options.showTooltips&&b.bindEvents(this,this.options.tooltipEvents,function(a){a="mouseout"!==a.type?this.getSegmentsAtEvent(a):[];b.each(this.segments,function(a){a.restore(["fillColor"])});b.each(a,function(a){a.fillColor=a.highlightColor});this.showTooltip(a)});this.render()},getSegmentsAtEvent:function(a){var d=[],e=b.getRelativePosition(a);return b.each(this.segments,function(a){a.inRange(e.x,
e.y)&&d.push(a)},this),d},addData:function(a,b,e){this.segments.splice(b||this.segments.length,0,new this.SegmentArc({fillColor:a.color,highlightColor:a.highlight||a.color,label:a.label,value:a.value,outerRadius:this.options.animateScale?0:this.scale.calculateCenterOffset(a.value),circumference:this.options.animateRotate?0:this.scale.getCircumference(),startAngle:1.5*Math.PI}));e||(this.reflow(),this.update())},removeData:function(a){a=b.isNumber(a)?a:this.segments.length-1;this.segments.splice(a,
1);this.reflow();this.update()},calculateTotal:function(a){this.total=0;b.each(a,function(a){this.total+=a.value},this);this.scale.valuesCount=this.segments.length},updateScaleRange:function(a){var d=[];b.each(a,function(a){d.push(a.value)});a=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:b.calculateScaleRange(d,b.min([this.chart.width,
this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);b.extend(this.scale,a,{size:b.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2})},update:function(){this.calculateTotal(this.segments);b.each(this.segments,function(a){a.save()});this.reflow();this.render()},reflow:function(){b.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2});this.updateScaleRange(this.segments);
this.scale.update();b.extend(this.scale,{xCenter:this.chart.width/2,yCenter:this.chart.height/2});b.each(this.segments,function(a){a.update({outerRadius:this.scale.calculateCenterOffset(a.value)})},this)},draw:function(a){var d=a||1;this.clear();b.each(this.segments,function(a,b){a.transition({circumference:this.scale.getCircumference(),outerRadius:this.scale.calculateCenterOffset(a.value)},d);a.endAngle=a.startAngle+a.circumference;0===b&&(a.startAngle=1.5*Math.PI);b<this.segments.length-1&&(this.segments[b+
1].startAngle=a.endAngle);a.draw()},this);this.scale.draw()}})}).call(this);
(function(){var a=this.Chart,b=a.helpers;a.Type.extend({name:"Radar",defaults:{scaleShowLine:!0,angleShowLineOut:!0,scaleShowLabels:!1,scaleBeginAtZero:!0,angleLineColor:"rgba(0,0,0,.1)",angleLineWidth:1,pointLabelFontFamily:"'Arial'",pointLabelFontStyle:"normal",pointLabelFontSize:10,pointLabelFontColor:"#666",pointDot:!0,pointDotRadius:3,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'},
initialize:function(c){this.PointClass=a.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx});this.datasets=[];this.buildScale(c);this.options.showTooltips&&b.bindEvents(this,this.options.tooltipEvents,function(a){a="mouseout"!==a.type?this.getPointsAtEvent(a):[];this.eachPoints(function(a){a.restore(["fillColor","strokeColor"])});b.each(a,function(a){a.fillColor=
a.highlightFill;a.strokeColor=a.highlightStroke});this.showTooltip(a)});b.each(c.datasets,function(a){var e={label:a.label||null,fillColor:a.fillColor,strokeColor:a.strokeColor,pointColor:a.pointColor,pointStrokeColor:a.pointStrokeColor,points:[]};this.datasets.push(e);b.each(a.data,function(b,h){var g;this.scale.animation||(g=this.scale.getPointPosition(h,this.scale.calculateCenterOffset(b)));e.points.push(new this.PointClass({value:b,label:c.labels[h],datasetLabel:a.label,x:this.options.animation?
this.scale.xCenter:g.x,y:this.options.animation?this.scale.yCenter:g.y,strokeColor:a.pointStrokeColor,fillColor:a.pointColor,highlightFill:a.pointHighlightFill||a.pointColor,highlightStroke:a.pointHighlightStroke||a.pointStrokeColor}))},this)},this);this.render()},eachPoints:function(a){b.each(this.datasets,function(d){b.each(d.points,a,this)},this)},getPointsAtEvent:function(a){a=b.getRelativePosition(a);a=b.getAngleFromPoint({x:this.scale.xCenter,y:this.scale.yCenter},a);var d=Math.round((a.angle-
1.5*Math.PI)/(2*Math.PI/this.scale.valuesCount)),e=[];return(d>=this.scale.valuesCount||0>d)&&(d=0),a.distance<=this.scale.drawingArea&&b.each(this.datasets,function(a){e.push(a.points[d])}),e},buildScale:function(b){this.scale=new a.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,
backdropColor:this.options.scaleBackdropColor,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,angleLineColor:this.options.angleLineColor,angleLineWidth:this.options.angleShowLineOut?this.options.angleLineWidth:0,pointLabelFontColor:this.options.pointLabelFontColor,pointLabelFontSize:this.options.pointLabelFontSize,pointLabelFontFamily:this.options.pointLabelFontFamily,
pointLabelFontStyle:this.options.pointLabelFontStyle,height:this.chart.height,width:this.chart.width,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,labels:b.labels,valuesCount:b.datasets[0].data.length});this.scale.setScaleSize();this.updateScaleRange(b.datasets);this.scale.buildYLabels()},updateScaleRange:function(a){var d=function(){var d=[];return b.each(a,function(a){a.data?d=d.concat(a.data):b.each(a.points,function(a){d.push(a.value)})}),
d}(),d=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:b.calculateScaleRange(d,b.min([this.chart.width,this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);b.extend(this.scale,d)},addData:function(a,d){this.scale.valuesCount++;b.each(a,function(a,b){var c=this.scale.getPointPosition(this.scale.valuesCount,
this.scale.calculateCenterOffset(a));this.datasets[b].points.push(new this.PointClass({value:a,label:d,x:c.x,y:c.y,strokeColor:this.datasets[b].pointStrokeColor,fillColor:this.datasets[b].pointColor}))},this);this.scale.labels.push(d);this.reflow();this.update()},removeData:function(){this.scale.valuesCount--;this.scale.labels.shift();b.each(this.datasets,function(a){a.points.shift()},this);this.reflow();this.update()},update:function(){this.eachPoints(function(a){a.save()});this.reflow();this.render()},
reflow:function(){b.extend(this.scale,{width:this.chart.width,height:this.chart.height,size:b.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2});this.updateScaleRange(this.datasets);this.scale.setScaleSize();this.scale.buildYLabels()},draw:function(a){var d=a||1,e=this.chart.ctx;this.clear();this.scale.draw();b.each(this.datasets,function(a){b.each(a.points,function(a,b){a.hasValue()&&a.transition(this.scale.getPointPosition(b,this.scale.calculateCenterOffset(a.value)),
d)},this);e.lineWidth=this.options.datasetStrokeWidth;e.strokeStyle=a.strokeColor;e.beginPath();b.each(a.points,function(a,b){0===b?e.moveTo(a.x,a.y):e.lineTo(a.x,a.y)},this);e.closePath();e.stroke();e.fillStyle=a.fillColor;e.fill();b.each(a.points,function(a){a.hasValue()&&a.draw()})},this)}})}).call(this);
$(function(){if($(document.body).is(".cont-contributors.act-index")){$(".contributor_chart").each(function(){var a=this.getContext("2d"),b=JSON.parse(this.innerHTML);(new Chart(a)).Line({labels:b.map(function(a){return a.label}),datasets:[{data:b.map(function(a){return a.count}),strokeColor:"#aaa",fillColor:"rgba(255, 255, 255, 0.2)"}]},{showScale:!1,pointDotRadius:3})});var a=$(".contributor_user_data"),b="gaining",c=!0,d=$('<div class="contributor-loading_indicator">Loading</div>'),e=function(){a.html(d);
$.get("/contributors/list?strategy="+b+"&filter_coached="+(c&&"coachees"!==b?1:0),{dataType:"html"}).then(function(b){a.html(b)})};e();$(document).on("click","[data-contributor_strategy]",function(){$(".contributor_strategies .active").removeClass("active");$(this).addClass("active");b=$(this).attr("data-contributor_strategy");e();return!1});$(document).on("click",".toggle_coach",function(){$.post(this.href).then(e);return!1});$(document).on("click","[data-toggle_show_coached]",function(){c="true"==
$(this).attr("data-toggle_show_coached");e();return!1})}});
$(document).ready(function(){$("form.bulk_edit").ajaxForm({beforeSubmit:function(){$("<span>",{"class":"indicator",text:"Saving..."}).appendTo("body")},success:function(){$("span.indicator").remove()}});$("table.songs_edit input[name='song[primary_artist]'], #song_primary_artist, .single_artist_autocomplete").autocomplete("/search/artist_autocomplete",{delay:250,scrollHeight:400,matchSubset:!1,minChars:3,selectFirst:!1});$(".verified_artist_autocomplete").autocomplete("/search/artist_autocomplete",{extraParams:{song_id:$(".lyrics").attr("data-id"),
verified_only:!0},delay:250,scrollHeight:400,matchSubset:!1,minChars:3,selectFirst:!1}).result(function(a,b){$(this).attr({artist_name:b[0],login:b[1]});$("#explain_as_container").hide();$(".explain_as_message").show().find("strong").text(b[0]);$("a.explain_as").text($.capitalize_first_letter(app.sc("annotation.present_tense"))+" as someone else...").show()});$.extend(window.app,{reset_album_autocomplete:function(){$(".album_autocomplete").autocomplete("/search/album_autocomplete",{delay:250,scrollHeight:400,
selectFirst:!1,minChars:3,matchSubset:!1})}});app.reset_album_autocomplete();$("table.songs_edit input[name='song[featured_artists]'], #song_featured_artists, #song_producer_artists, #song_writer_artists").autocomplete("/search/artist_autocomplete",{multiple:!0,multipleSeparator:", ",delay:250,scrollHeight:400,selectFirst:!1,minChars:3,matchSubset:!1})});
$(function(){$.each(["edit_metadata","edit_media","edit_title_and_authors"],function(a,b){var c="."+b+"_form";$(c).on("toggle_target:visible",function(){$("#main").addClass(b)});$(c).on("toggle_target:hidden",function(){$("#main").removeClass(b)})})});
$(function(){app.make_lyrics_editable();$(".song_actions").on("click",".edit_lyrics",app.enable_lyrics_edit_mode);$(".song_actions").on("click",".cancel_edit_lyrics",app.cancel_lyrics_edit_mode);$(".song_actions").on("click",".save_lyrics",function(){app.lyrics_have_changed()&&$(".lyrics form").submit();$(".cancel_edit_lyrics").click();return!1})});
$.extend(window.app,{lyrics_have_changed:function(){return $(".lyrics").data("lyrics")!=$(".lyrics textarea[name='value']").val()},enable_lyrics_edit_mode:function(a){if($.browser.msie)return app.ie_fail(),!1;$(".lyrics").trigger("make_editable");a.preventDefault()},cancel_lyrics_edit_mode:function(a){$(".lyrics").reset_editable();a.preventDefault()}});
$.fn.youTubeEmbed=function(a){"string"==typeof a&&(a={video:a});a=$.extend({width:640,progressBar:!0,start:0},a);var b={originalDIV:this,container:null,control_container:null,control:null,player:null,progress:null,elapsed:null,api:{}};try{a.videoID=a.video.match(/v=(.{11})/)[1],a.safeID=a.videoID.replace(/[^a-z0-9]/ig,"")}catch(c){return b.originalDIV.parent().addClass("invalid_video"),b.originalDIV}$.get("http://gdata.youtube.com/feeds/api/videos/"+a.videoID+"?v=2&alt=jsonc",{},function(c){c=c.data;
if(!c)return b.originalDIV.parent().addClass("video_not_found"),b.originalDIV;if("allowed"!=c.accessControl.embed)return c=$("<a>",{href:"http://youtube.com/watch?v="+a.videoID,target:"_blank",text:"Open YouTube video in new window"}),b.originalDIV.parent().append(c),b.originalDIV;a.ratio=.75;a.ratio=.5625;a.height=Math.round(a.width*a.ratio);b.container=$("<div>",{"class":"flashContainer",css:{width:a.width,height:a.height}}).appendTo(b.originalDIV);b.container.flash({swf:"http://www.youtube.com/apiplayer?enablejsapi=1&version=3&start="+
a.start,id:"video_"+a.safeID,height:a.height,width:a.width,allowScriptAccess:"always",wmode:"transparent",flashvars:{video_id:a.videoID,playerapiid:a.safeID}});b.player=b.container.flash().get(0);b.api={playing:function(){var a=function(){var a=b.player;try{return a.getPlayerState()}catch(c){return null}};return 1==a()||3==a()},seek_n_seconds:function(a,c){var d=b.player,e=d.getCurrentTime();d.seekTo("forward"==c?e+a:e-a)}};b.control_container=$("<div>",{"class":"control_container"}).appendTo(b.container);
"undefined"!=typeof envoOptions&&$(".control_container").addClass("chat_present");b.control=$("<div>",{"class":"controlDiv play"}).appendTo(b.control_container);a.progressBar&&(b.progress=$("<div>",{"class":"progressBar"}).appendTo(b.control_container),b.elapsed=$("<div>",{"class":"elapsed"}).appendTo(b.progress),b.progress.click(function(a){a=(a.pageX-b.progress.offset().left)/b.progress.outerWidth();b.elapsed.width(100*a+"%");b.player.seekTo(Math.round(b.player.getDuration()*a),!0);return!1}));
var e=!1;window["eventListener_"+a.safeID]=function(c){var d;1!=c||b.container.hasClass("playing")||b.control.click();-1==c&&(e?b.container.hasClass("playing")&&b.control.click():(b.control.click(function(){b.container.hasClass("playing")?(b.control.removeClass("pause").addClass("play"),b.container.removeClass("playing"),b.player.pauseVideo(),a.progressBar&&window.clearInterval(d)):(b.control.removeClass("play replay").addClass("pause"),b.container.addClass("playing"),b.player.playVideo(),a.progressBar&&
(d=window.setInterval(function(){b.elapsed.width(b.player.getCurrentTime()/b.player.getDuration()*100+"%")},500)))}),e=!0));0==c&&(b.control.removeClass("pause").addClass("replay"),b.container.removeClass("playing"))};window.onYouTubePlayerReady=function(a){var c="eventListener_"+a;document.getElementById("video_"+a).addEventListener("onStateChange",c);window.setTimeout(function(){window[c](b.player.getPlayerState())},50)}},"jsonp");b.originalDIV.data("yt",b);return b.originalDIV};
$(function(){filepicker.setKey(FILEPICKER_API_KEY);$(".upload_photo").live("click",function(){filepicker.pick({mimetypes:["image/jpeg","image/png","image/gif"],services:"COMPUTER URL FACEBOOK INSTAGRAM IMAGE_SEARCH WEBCAM".split(" "),policy:FILEPICKER_POLICY,signature:FILEPICKER_SIGNATURE},function(a){var b=$(".user_avatar_"+CURRENT_USER.id);b.wrap('<div class="loading_with_indicator">');$.ajax_with_retry({url:"/account",type:"POST",data:{_method:"put",user:{photo_url:a.url}},success:function(){b.attr("src",
a.url+"?policy="+FILEPICKER_POLICY+"&signature="+FILEPICKER_SIGNATURE).unwrap();$("#avatar_solicitation").remove()}})});return!1});$(document).on("click",".image_adder",function(){var a=$(this);filepicker.pickAndStore({mimetypes:["image/jpeg","image/png","image/gif"],services:["IMAGE_SEARCH","COMPUTER"],openTo:"IMAGE_SEARCH",policy:FILEPICKER_POLICY,signature:FILEPICKER_SIGNATURE},{},function(b){b="http://s3.amazonaws.com/"+S3_IMAGE_BUCKET+"/"+encodeURIComponent(b[0].key);a.closest("[data-filepicker-form]").find("[data-filepicker-target]").insertAtCursor(b)});
return!1})});window.app=window.app||{};var firehose=window.app.firehose={};
$.extend(window.app.firehose,{filters:function(){return{tag_ids:$.map($("form#firehose_filters input[name='existing_tag_ids[]']"),function(a){return $(a).val()}),actor_roles:$("fieldset.users input:checked").values_for_attribute("name"),actor_id:$("fieldset.users .user_badge").values_for_attribute("data-badge-user-id"),page_features:$("fieldset.page_features input:checked").values_for_attribute("name"),artist_ids:$("fieldset.artists .selected_artist").values_for_attribute("data-artist-id"),language:$("fieldset.language input:checked").values_for_attribute("name"),
activity_type:$("fieldset.activity_type input:checked").values_for_attribute("name"),special_filters:$("fieldset.specials input:checked").values_for_attribute("name")}},has_active_filters:function(){var a=firehose.filters();return 0<$.map(a,function(a){return a.length}).reduce(function(a,c){return c+a},0)},apply_filters_from_url:function(){$.each($.deparam(location.search.slice(1)).filters,function(a,b){$.each(b,function(a,b){$("input#"+b).prop("checked",!0)})})}});
$(function(){app.history=window.History;var a=$("#firehose");if(a.length){var b="";app.pusher().subscribe(FIREHOSE_PUSHER_CHANNEL).bind_all(function(a,d){switch(a){case "new_activity":firehose.has_active_filters()||(b+=d)}});setInterval(function(){0<b.length&&(a.prepend($(b).fadeIn("slow")),a.find(".activity_stream_event_unit:gt(200)").remove(),b="")},500);$('#firehose_filters input[name="username"]').user_autocomplete({extraParams:{for_firehose:!0}}).result(function(a,b){$("#selected_users").append(b[2]);
$('input[name="username"]').val("").focus()});$("#artist_chooser").autocomplete("/search/artist_autocomplete",{delay:250,scrollHeight:400,matchSubset:!1,minChars:3,selectFirst:!1,extraParams:{for_firehose:!0}}).result(function(a,b){$("#selected_artists").append(b[1]);$("#artist_chooser").val("").focus()});$("a.remove_selected_user").live("click",function(){$(this).closest(".selected_user").remove();return!1});$("a.remove_selected_artist").live("click",function(){$(this).closest(".selected_artist").remove();
return!1});$("input#search_button").click(function(){var a={filters:firehose.filters()};$("#firehose").html('<div class="loading_with_indicator"></div>');$.get("/firehose",a,function(a){$("#firehose").html(a)});app.history.replaceState({},"Filtered Firehose","/firehose?"+$.param(a));return!1});location.search.length&&firehose.apply_filters_from_url()}});
$(document).ready(function(){$("body.act-show.cont-discussions").length&&CURRENT_USER&&app.pusher().subscribe($("#group_discussion").data("pusher_channel")).bind_all(function(a,b){switch(a){case "new-forum-post":if(b.created_by_login!=CURRENT_USER.login){var c=$(".forum_post_container");$.get(c.data("extra-posts-path"),{cutoff:$(".forum_post_unit:last").data("t")},function(a){$(".forum_post_unit").add(a).sort(function(a,b){return parseInt($(a).data("t"))-parseInt($(b).data("t"))}).prependTo(c);c.find(".pagination.no_auto_more").insertAfter($(".forum_post_unit:first"));
a=$("#new_posts_available_message");a.hasClass("active")?a.find("span").text(""+c.find(".forum_post_unit.pending").length+" new posts."):a.addClass("active").find("span").text("New post from "+b.created_by_login+".")})}}})});window.app=window.app||{};
$.extend(window.app,{setup_group_membership_controls:function(){0!==$(".add_new_group_member").length&&($('.add_new_group_member input[name="username"]').user_autocomplete(),$(".add_new_group_member :submit").click(function(){var a=$(this),b=a.closest("form"),c=b.find('input[name="username"]');if(!a.attr("disabled")&&c.val()!==c.attr("placeholder")&&0<$.trim(c.val()).length){var d=a.val();b.submitWithAjaxQueue({dataType:"json",success:function(b){a.removeAttr("disabled").val(d);b.error?(b=b.error,
$.isArray(b)||(b=[b]),a.siblings(".error").html(b.join("<br>")).show()):$(".group_memberships").prepend($(b.membership).hide().fadeIn("slow")).find(".no_members").remove()}});c.val("");a.attr("disabled",!0).val("Doin it...").siblings(".error").hide()}return!1}))},unobfuscate_group_emails:function(){$(".group_summary[data-group-info]").each(function(){var a=$(this),b=app.unobfuscate_url(a.attr("data-group-info"));a.find(".group_email").text(b).attr("href","mailto:"+b)})}});
$(function(){$("#new_discussion").submit(function(){var a=$(this),b=a.validate();if(b.form())return window.setTimeout(function(){a.find("input[type='submit']").attr("disabled","true").val("Loading...")},1),!0;b.showErrors();return!1});$("#new_forum_post").live("submit",function(){var a=$(this),b=a.validate();b.form()?(a.submitWithAjaxQueue(),b=$("#current_user_badge").html(),b='<div class="forum_post_unit" data-t="'+(parseInt($(".forum_post_unit:last").data("t"),10)+1)+'">                     <div class="forum_post-header">                       <div class="name">'+
b+'</div>                     </div>                     <div class="body embedly" data-autolink-mentions="true"></div>                   </div>',b=$(b),app.markdown_to_html(a.find("[name='forum_post[body]']").val(),b.find(".body")),$(".forum_post_container").find(".reply_container").before(b),window.setTimeout(function(){a.find("textarea").val("");a.find(".preview").html("")},1)):b.showErrors();return!1});$(".group_membership .remove").live("click",function(){var a=$(this);a.attr("data-disabled")||
(app.ajaxQueue.add({url:a.attr("href"),type:"POST",data:{_method:a.attr("data-method")},success:function(){a.closest(".group_membership").fadeOut("slow",function(){$(this).remove()})}}),a.attr("data-disabled",!0).text("Doin it..."));return!1});$(".forum_post_container").on("click","#new_posts_available_message a",function(){var a=$(this);a.closest(".forum_post_container").find(".forum_post_unit.pending").removeClass("pending");a.closest("#new_posts_available_message").removeClass("active");return!1})});
window.app=window.app||{};$.extend(window.app,{remove_hot_song_tooltips:function(){$("#newsfeed_hot_songs .song_list[data-no-tooltip] .song_link").removeAttr("tooltip__deprecated")}});(function(){window["com.genius.Genius"].require.define({"shared/universal/jquery":function(a,b,c){c.exports=(window["com.genius.Genius"]||{}).jQuery||jQuery}})})();
(function(){window["com.genius.Genius"].require.define({"shared/universal/keyboard_shortcuts":function(a,b,c){var d=b("shared/universal/jquery");c.exports={shortcut:function(a,b){d(window).bind("keydown",a,function(a){b(a);return!1})}}}})})();
$(function(){var a=require("shared/universal/keyboard_shortcuts");$(document).bind("keypress",{keys:"shift+return",allowInTextInputField:!0},function(a){$("button.submit_annotation:visible:first").click();$(".save_pyong_note:visible").click();$(".save_title_and_authors:visible").click();$(".save_lyrics:visible").click();a=$(a.target).closest("form");a.is("#new_post, .edit_post, .edit_postlet, .edit_media_form, .edit_metadata_form")&&a.submit();return!1});a.shortcut("shift+a",function(){$(".edit_title_and_authors:visible").click()});
a.shortcut("shift+l",function(){$(".edit_lyrics:visible").click()});a.shortcut("shift+t",function(){$(".edit_metadata:visible").click()});a.shortcut("shift+m",function(){$(".edit_media:visible").click()});a.shortcut("shift+e",function(){$(".edit_annotation:visible").click()});a.shortcut("ctrl+shift+m",function(){var a=$(".controlDiv");if(a.length)return a.click(),!1});a.shortcut("shift+left",function(){try{Bop.seekRelative(-5)}catch(a){return null}});a.shortcut("shift+right",function(){try{Bop.seekRelative(5)}catch(a){return null}})});
$(function(){$(document).on("click",".tag_page_leaderboard_container-period_dropdown-period",function(){$(".leaderboard_toggle_container").removeClass("leaderboard_toggle_container--toggled").filter("[data-period='"+$(this).data("period")+"']").addClass("leaderboard_toggle_container--toggled");$(this).parent().prepend($(this));app.process_auto_load_containers()})});
"undefined"!=typeof google&&"undefined"!=typeof google.maps&&($.extend(window.app,{gmap:{info_window:new google.maps.InfoWindow,location_get_request:null,markers:{},init:function(a){var b=$(".location_unit[meme='true']");this.map=new google.maps.Map($(a)[0],{zoom:14,center:new google.maps.LatLng(b.attr("lat"),b.attr("lng")),mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.DROPDOWN_MENU},mapTypeId:google.maps.MapTypeId.ROADMAP,backgroundColor:"#212121",mapTypeControl:!1,navigationControlOptions:{position:google.maps.ControlPosition.TOP_LEFT}});
google.maps.event.addListener(this.map,"click",function(){app.gmap.info_window.close()});this.set_up_markers()},set_up_markers:function(){$(".location_unit").each(function(){var a=$(this),b=new google.maps.Marker({position:new google.maps.LatLng(a.attr("lat"),a.attr("lng")),icon:new google.maps.MarkerImage("/images/headphone_marker.png",new google.maps.Size(32,37),new google.maps.Point(0,0),new google.maps.Point(0,0)),shadow:new google.maps.MarkerImage("/images/headphone_marker_shadow.png",new google.maps.Size(51,
37),new google.maps.Point(0,0),new google.maps.Point(-3,0)),map:app.gmap.map,title:a.attr("data-name")});b.slug=a.attr("id");b.path=a.attr("data-path");b.content=a[0];b.image_url=a.attr("image-url");google.maps.event.addListener(b,"click",function(){app.gmap.location_get_request&&app.gmap.location_get_request.abort();$(b.content).hasClass("content_loaded")||(app.gmap.location_get_request=$.get(b.path,function(a){b.content=a;app.gmap.open_info_window_with_marker_content(b)}));app.gmap.open_info_window_with_marker_content(b)});
google.maps.event.addListener(b,"mouseover",function(){app.gmap.load_images_in_marker(b)});app.gmap.markers[b.slug]=b})},open_info_window_with_marker_content:function(a){$("#image_loading_message_container").addClass("active");this.load_images_in_marker(a);$(a.content).find("img:first").one("load",function(){app.gmap.open_info_window_with_content(a,a.content);$("#image_loading_message_container").removeClass("active")}).each(function(){this.complete&&$(this).load()})},open_info_window_with_content:function(a,
b){this.info_window.close();this.info_window.setContent(b);this.info_window.open(app.gmap.map,a)},load_images_in_marker:function(a){a.content=$(a.content).find("img:first").attr("src",a.image_url).end()[0]},open_info_window_by_slug:function(a){if("undefined"===typeof this.markers[a])return!1;google.maps.event.trigger(this.markers[a],"click");return!0}}}),$(document).ready(function(){app.gmap.init("#map");$.trim(window.location.hash)&&app.gmap.open_info_window_by_slug(window.location.hash.substr(1))||
app.gmap.open_info_window_by_slug($(".location_unit[meme='true']").attr("id"));window.location.hash="";$.ajax_with_retry({type:"GET",url:"/locations/bulk_load_locations",dataType:"json",success:function(a){for(var b in a)app.gmap.markers[b].content=a[b]}});$("a").click(function(){var a=this.href.split("/").pop();if(app.gmap.open_info_window_by_slug(a))return!1}).mouseover(function(){var a=this.href.split("/").pop();app.gmap.markers[a]&&google.maps.event.trigger(app.gmap.markers[a],"mouseover")});
$(".reference_city").click(function(){var a=$.trim($(this).text());(new google.maps.Geocoder).geocode({address:a},function(a){app.gmap.map.panTo(a[0].geometry.location)})})}));window.app=window.app||{};
$.extend(window.app,{set_up_mentions_autocomplete:function(){$("textarea[data-mentions-autocomplete]").each(function(){var a=$(this),b=!1;a.atwho({at:"@",data:JSON.parse(a.attr("data-mentions-seed-data")||"[]"),tpl:'<li data-value="${value}">${name}</li>',callbacks:{sorter:function(a,d,e){return b?(b=!1,d):$.fn.atwho.default.callbacks.sorter(a,d,e)},remote_filter:function(){var a=null,d={};return function(e,f){a&&a.abort();e=e||"";if(!(1>e.length||" "==e[0]))if(e in d)b=!0,f(d[e]);else{var h=this;
$.doTimeout("mentions_autocomplete",200,function(){a=$.ajax({url:h.$inputor.attr("data-mentions-autocomplete-url"),dataType:"json",data:{q:e},success:function(a){b=!0;d[e]=a;f(a)}})})}}}()}})})}});
$(document).ready(function(){$("#inbox_icon").qtip({content:{prerender:!0,url:"/conversations",text:"Loading..."},position:{adjust:{x:24,screen:!0},corner:{target:"bottomLeft",tooltip:"topRight"}},hide:{effect:{length:0},when:{event:"unfocus"}},show:{effect:{length:0},delay:0,when:{event:"click"}},style:{name:"light",tip:{corner:"topRight",size:{x:20,y:20}},width:{min:455,max:455},border:{radius:0,width:5}},api:{onRender:function(){}}});$(".user_badge .send_message, .annotation_unit .send_message, .send_message.rate_limit_response").live("click",
function(){var a=$(this).attr("data-path")||this.href;$.facebox(function(){$.get(a,function(a){$.facebox(a)})});return!1});"#show-inbox"==location.hash&&(location.hash="",$("#inbox_icon").click());$(".messages-message_snippet").live("mouseup",function(){var a=$(this).find(".unread_messages_from_this_sender");0<a.length&&($("#unread_messages_items_count").change_counter_value_by(-1*a.counter_value()),0==$("#unread_messages_items_count").counter_value()&&$("#unread_messages_items_count").hide().parent().removeClass("has_unread_items"),
a.remove())});var a=app.angular_inject_get__deprecated("Pusher"),b=app.angular_inject_get__deprecated("TopBarIndicatorsLoader");b.listen_for("messages",function(a){$("#unread_messages_items_count").text(a).parent().toggleClass("has_unread_items",0<a)});CURRENT_USER&&a.subscribe(CURRENT_USER.pusher_channel,"new-message",function(){b.refresh();$("#inbox_icon").reloadTooltip()})});
$(document).ready(function(){$("#new_song").find("#song_title, #song_primary_artist").keyup(function(){$(this).doTimeout("song-suggestions",500,function(){var a=$("#new_song").find("#song_title, #song_primary_artist").map(function(){return this.value}).get().join(" "),b=$("#new_song .suggestions");b.empty();5>a.length||(b.addClass("loading"),$.ajax({type:"get",url:"/search/quick.html",data:{q:a,limit:3},success:function(a){b.removeClass("loading").html(a)}}))})});$("#new_song").submit(function(){var a=
$(this),b=a.validate(),c=$("#song_lyrics").val(),c=c.replace(/\n/gi,"<br>"),c=app.clean_up_lyrics(app.lyrics_pseudo_markdown_to_html(c));$("#song_lyrics").val(c);if(b.form())return window.setTimeout(function(){a.find("input[type='submit']").attr("disabled","true").val("Loading...")},1),!0;b.showErrors();return!1})});
$(function(){if($(document.body).is(".cont-newsfeeds.act-show")){var a=function(a){var c=a.attr("data-annotation-ids").split(",");if(!a.data("on_annotations_loaded")){var d=$.get("/annotations/bulk_standalone",{annotation_ids:c}).pipe(function(a){return _.map(c,function(b){return a[b]}).join("")});a.data("on_annotations_loaded",d)}return a.data("on_annotations_loaded")};$(document).on("click",".no-touch .newsfeed-line_item",function(){$(document.body).addClass("newsfeed--sidebar_open");$(this).addClass("newsfeed-line_item--active");
a($(this)).done(function(a){var c=$(a).find(".title").first();$(".newsfeed-annotations").html(a).prepend(c.addClass("newsfeed-annotatable_title"));$(document.body).addClass("newsfeed--sidebar_loaded")});return!1}).on("hover",".no-touch .newsfeed-line_item",function(){a($(this))});$(".newsfeed-overlay").on("click",function(a){$(a.target).is(".newsfeed-overlay")&&($(document.body).removeClass("newsfeed--sidebar_open newsfeed--sidebar_loaded"),$(".newsfeed-annotations").empty(),$(".newsfeed-line_item").removeClass("newsfeed-line_item--active"))})}});
app.pop_up_video={set_up_video:function(){$("#pop_up_video_player").empty();$("#pop_up_video_player").youTubeEmbed({video:$("#song_youtube_url").val(),width:$("#pop_up_video_player").outerWidth()})},seconds_to_human:function(a){var b=parseInt(a/60,10);return b+":"+Math.round(a%60*10)/10},parse_script:function(){var a=$("#song_video_script_user_input").val();return $.map(a.split("\n"),function(a){a=a.split(/\s+/);var c=a[0].split(":"),d=c[1],c=60*parseInt(c[0],10)+parseFloat(d);return[[c,a[1]]]})},
set_up_script:function(){app.pop_up_video.current_script=app.pop_up_video.parse_script().sort(function(a,b){return a[0]-b[0]}).reverse()},current_script:[],how_long_to_show:10};
$(function(){$("form.edit_song_video").submit(function(){var a=$("#song_youtube_url").val(),c=a.match(/v=(.{11})/)[1],d=$("#pop_up_video_player").data("yt").player.getVideoUrl().match(/v=(.{11})/)[1];c!=d&&app.pop_up_video.set_up_video();c=app.pop_up_video.parse_script();app.pop_up_video.set_up_script();$("#song_submit").val("Saving...").attr("disabled","disabled");app.ajaxQueue.add({dataType:"script",type:"post",url:this.action,data:{"song[youtube_url]":a,"song[video_script_user_input]":c,_method:"_put"},
complete:function(){$("#song_submit").val("Save").removeAttr("disabled")}});return!1});var a=$("#pop_up_video_player");a.length&&(app.load_annotation_containers(a.attr("data-id")),app.add_callback_once("bulk_annotations:loaded",function(b){app.pop_up_video.set_up_video();app.pop_up_video.set_up_script();var c=$(a.attr("data-lyrics"));window.setInterval(function(){var d=a.data("yt");if(d&&d.api.playing&&d.api.playing()){var e=a.data("yt").player.getCurrentTime();$("#time").text(app.pop_up_video.seconds_to_human(e));
$.each(app.pop_up_video.current_script,function(a,d){var g=b[d[1]];if(!g)return!0;var k=d[0],n=k+app.pop_up_video.how_long_to_show,q=0==a?Number.MAX_VALUE:app.pop_up_video.current_script[a-1][0];if(e>k&&e<n)return $("#pop_up").is(":hidden")&&$("#pop_up").fadeIn("fast"),g=$("<blockquote class='lyric'>"+c.filter("a[data-id="+d[1]+"]:last").attr("target","_blank").outer_html()+"<span class='explanation_number'> (Explanation&nbsp;#:&nbsp;"+d[1]+")</blockquote>"+$(g).find(".annotation_body .body_text").html()),
app.setup_annotation_display(g),$("#pop_up").attr("data-current")!=d[1]&&$("#pop_up").html(g).attr("data-current",d[1]),!1;e<q&&e>n&&$("#pop_up").fadeOut("fast")})}},100)}))});
$(function(){$("body.act-probably_spam.cont-songs #mark_all_not_spam").click(function(){var a=$(this);if(a.hasClass("disabled")||!confirm("Are you sure there's no spam on the page? (This action only affects the spam you can see, not songs on subsequent pages.)"))return!1;var b=Array.prototype.slice.apply($(".song_list li").map(function(){return $(this).attr("data-id")}));a.text("Doin it...").addClass("disabled");$.post(a.attr("data-path"),{song_ids:b}).done(function(){$.facebox("Almost done! It'll take a second to process. Reload the page for more.")});
return!1})});
$(document).ready(function(){$(document).unbind("mousedown.qtip");$(document).bind("mousedown.qtip",function(a){if(0!==$(a.target).parents("div.qtip").length||0!==$(a.target).parents("#facebox").length||$(a.target).is("#facebox_overlay")||$(a.target).is("#global-zeroclipboard-flash-bridge")||0!==$(a.target).parents(".flashContainer").length)return!0;$(".qtip[unfocus]").each(function(){var b=$(this).qtip("api");$(this).is(":visible")&&!b.status.disabled&&1<$(a.target).add(b.elements.target).length&&b.hide(a)})})});
$(function(){$("form.recaptcha").live("submit",function(){var a=$(this);a.attr("disabled",!0).find('input[type="submit"]').val("Doin it...");a.siblings(".recaptcha_model").find("form").append(a.find("input").clone()).submitWithAjaxQueue();$(document).trigger("close.facebox");return!1})});
$(document).ready(function(){$("body.act-show.cont-songs div.lyrics")[0]&&CURRENT_USER&&(app.song_pusher_channel=app.pusher().subscribe($("div.lyrics").attr("data-pusher_channel")),app.song_pusher_channel.bind_all(function(a,b){switch(a){case "verified-video-ready":$(".annotation_body[data-id="+b.annotation_id+"]").find(".video_processing_message").replaceWith("<div data-vidyard-id='"+b.video_id+"' class='vidyard_container'>");app.load_vidyard_players();break;case "lyrics-updated":CURRENT_USER&&b.id_of_user_who_made_original_edit!=
CURRENT_USER.id?app.ajaxQueue.add({type:"get",url:b.url,success:function(a){app.update_on_page_lyrics({new_timestamps:{lyrics_updated_at:b.lyrics_updated_at},new_lyrics:a,updated_by_current_user:!1})}}):$("div.lyrics_updated_at").text(b.lyrics_updated_at)}}))});
$.extend(window.app,{move_open_explanation:function(){var a=null;return function(b){null===a&&(a=$(".lyrics a[data-id]"));var c=a.filter("[data-current-active-referent]");if(!c.length)return!0;var c=a.index(c),d;"next"===b?(b="gt",d=0):(b="lt",d=-1);var e=a.filter(":"+b+"("+c+")").filter(":not(.active)").eq(d);e.length&&(e.is_scrolled_into_view()||e.scrollToCenterOfScreen({onAfter:function(){app.display_annotation_qtip(e)}}))}}(),range_contains:function(a,b){var c=$(a.cloneContents()).children();
return!(!c.is(b)&&!c.find(b).length)},range_contains_annotation:function(a){return app.range_contains(a,"a")},range_contains_content:function(a){return"undefined"===typeof a?!1:""!==$.trim(a.toString())||app.range_contains(a,"img")},remove_annotation_from_page:function(a){var b=a.siblings(".annotation_unit"),c=a.attr("data-id"),d=a.closest(".annotation_container"),e=a.closest(".qtip.explanation");if(e.length){var f=e.qtip("api"),h=f.elements.target,g=!1;app.get_annotation_units(c).remove();a.hasClass("verified")?
(d.find(".add_verified_explanation").parent().removeClass("inactive"),a=b.filter(".verified").length,b=b.filter(".not_verified").find(".annotation_body .body_text"),"?"==$.trim(b.text())&&0==a&&(g=!0)):0==d.find(".annotation_unit.verified:not(.annotation_prompt)").length&&(g=!0);g&&(app.hide_annotation(e),h.replaceWith(h.html()),f.destroy())}else a.closest(".stand_alone_annotation_container").remove()},update_editorial_state:function(a,b){var c=$(".lyrics a[data-id="+a+"]");$(c,".annotation_container[data-id="+
a+"]").attr("data-editorial-state",b);app.recalculate_decorators_for_referent(c)}});
$(document).ready(function(){$("#annotations").on("click",".add_verified_explanation",function(){var a=$(this);if(a.hasClass("loading"))return!1;var b=a.closest(".annotation_container"),e=b.attr("data-id");if(!e)return!1;var f=$("div.lyrics a[data-id='"+e+"']"),h=app.clean_up_lyrics(f.html());b.addClass("current_user_can_add_verified_to_this_song has_verified_annotation");b={"annotation[base_annotation_id]":e,referent:h};if(e=$("#explain_as").attr("login"))b.explain_as=e;app.ajaxQueue.add({type:"POST",
url:$(".lyrics").attr("data-annotate-path"),dataType:"json",data:b,success:function(b){a.parent().addClass("inactive").end().removeClass("loading");var d=$(b.tooltip_content).find(".annotation_unit[data-id="+b.id+"]");a.closest(".annotation_unit").after($("#edit_annotation_form").html()).after(d);d.addClass("un_edited").hide().closest(".annotation_container").addClass("editing_annotation");app.set_up_tooltip_lyric_editor();app.set_up_vidyard_id_container(d);f.addClass(b.target_class);a.closest(".annotation_container").find(".edit_annotation_form .annotation_text").focus()}});
a.addClass("loading");return!1});$("#annotations, .song_sidebar").on("click",".add_non_verified_explanation.logged_in",function(){app.start_annotation_edit_mode($(this).parent(".annotation_unit").siblings(".community"));return!1});if(app.is_on_song_page())$(document).on("submit","form",function(){var a=$(this);$("div.lyrics_updated_at").length&&(a.find('input[name="song[lyrics_updated_at]"]').remove(),$("<input>",{type:"hidden",name:"song[lyrics_updated_at]"}).val($("div.lyrics_updated_at").first().text()).appendTo(a));
$("div.song_updated_by_human_at").length&&(a.find('input[name="song[updated_by_human_at]"]').remove(),$("<input>",{type:"hidden",name:"song[updated_by_human_at]"}).val($("div.song_updated_by_human_at").first().text()).appendTo(a))});$(".remove_annotation_from_editor_queue").live("click",function(a){a.preventDefault();$(this).remove();app.ajaxQueue.add({type:"post",url:this.href})});$(".edit_annotation_form .record_video").live("click",function(){if(DISABLE_VIDEO_RECORDING)return!1;var a=$(this),b=
"camera_tag_"+(new Date).getTime(),e=a.closest(".edit_annotation_form"),f=e.prev(".annotation_unit"),h=f.attr("data-id"),a=$("<camera>",{"data-uuid":CAMERA_TAG_UUID,id:b,style:"width: "+CAMERA_TAG_WIDTH+"px; height: "+CAMERA_TAG_HEIGHT+"px"});$("#accept-screen").clone().attr("id",b+"-accept-screen").appendTo("#custom_cameratag_screens");e.find(".video_recorder_container").append(a);CameraTag.setup();var g=CameraTag.cameras[b];setTimeout(function(){e.addClass("video_mode")},200);CameraTag.observe(b,
"initialized",function(){g.record()});CameraTag.observe(b,"publishing",function(){app.cameraTagUploadInProgress=!0});CameraTag.observe(b,"published",function(){app.cameraTagUploadInProgress=!1;var a={_method:"put","annotation[video_id]":g.getVideo().uuid,"annotation[video_processing]":"true"},b=$("#explain_as").attr("login");b&&(a.explain_as=b);app.ajaxQueue.add({type:"post",url:"/annotations/"+h,data:a});f.find(".vidyard_container").remove().end().addClass("video_processing");e.removeClass("video_mode").find(".submit_annotation").click()})});
$(".delete_annotation").live("click",function(){var a=$(this);if("undefined"==typeof a.data("no-confirm")&&!confirm("Are you sure?"))return!1;var b=a.closest("div.annotation_unit");b.closest(".annotation_container.just_submitted_edit").removeClass("just_submitted_edit");app.remove_annotation_from_page(b);app.delete_annotation(a.attr("href"));return!1});$(document).on("click",".merge_edit, .reject_edit",function(){var a=$(this);if(!confirm(a.data("confirmation-message")))return!1;var b=a.closest(".pending_edit_unit"),
e=a.data("edit-action");"merge"===e?b.prepend("<h1>Merging...</h1>"):b.remove();app.ajaxQueue.add({type:"put",url:a.data("url"),success:function(b){a.closest(".annotation_version").remove();var d=$(".annotation_unit[data-id="+b.annotation_id+"]");"merge"===e&&(d.find(".body_text").html(b.new_body_html),d.find(".markdown_version").val(b.new_body_markdown),d.closest(".stand_alone_annotation_container").length||(b=d.closest(".qtip"),b.qtip("api").reposition(),app.update_bulk_loaded_annotation(b.find(".annotation_container"))));
$("#facebox .pending_edit_unit").length||(d.find(".view_proposed_edits").remove(),$.facebox.close())}});return!1});$("button[data-song-action], a[data-song-action]").live("click",function(a){a.preventDefault();a=$(this);var b=a.attr("data-confirmation-message")||"Are you sure?";if(!confirm(b))return!1;app.ajaxQueue.add({type:"post",url:"/songs/"+$(".lyrics").attr("data-id")+"/"+a.attr("data-song-action"),data:{_method:"put",song:{updated_by_human_at:$("div.song_updated_by_human_at").text(),lyrics_updated_at:$("div.lyrics_updated_at").text()}},
dataType:"script"});$.facebox('<div class="loading_with_indicator"></div>')});$("a.accept_annotation").live("click",function(a){var b=$(this).closest(".annotation_unit");app.submit_annotation_state_change(b,this.href,{state_event:"accept",stand_alone:!!b.closest(".stand_alone_annotation_container").length});b.find(".moderate_annotation").addClass("loading_with_indicator");a.preventDefault()});$("a.reject_annotation").live("click",function(a){var b=$(this).closest(".annotation_unit"),e=this.href;b.find(".edit_annotation.disabled, .delete_annotation.disabled").removeClass("disabled").removeAttr("tooltip");
b.find(".editor_links, .footer").hide();b.find(".reasons").slideDown(150);b.find(".comment_container .show_all_comments").hide();b.find("form.comment textarea").attr("placeholder","Add a note to explain your rejection");b.find('form.comment input[type="submit"]').attr("value","Reject");b.find("form.comment").submit(function(){b.find(".comment_section").addClass("loading_with_indicator");var a={};_.map($(this).serializeArray(),function(b){b.name.match(/^comment/)&&(a[b.name]=b.value)});var c={state_event:"reject",
stand_alone:!!b.closest(".stand_alone_annotation_container").length};app.submit_annotation_state_change(b,e,$.extend(c,a));return!1});a.preventDefault()});$("a.change_comment_state").live("click",function(a){var b=$(this),e=b.attr("href");if(e.match(/comments.*state_event=mark_spam/)&&!confirm("Are you sure you want to mark this comment as spam?")||e.match(/comments.*state_event=accept/)&&!confirm("Are you sure?"))return a.preventDefault();app.ajaxQueue.add({type:"post",url:e,data:{_method:"put"}});
var b=b.closest(".comment_unit"),f=b.find(".comment"),h=f.closest(".comment_section");b.slideUp("fast",function(){var a=h.closest(".qtip.explanation");!h.find("div.comment:visible").length&&a.length&&a.qtip("api").elements.target.removeClass("has_comments")});if(e.match(/comments.*state_event=accept/)||e.match(/comments.*state_event=integrate/)){f.addClass("accepted");f.hide().text("\n\nPROPOSED SUGGESTION: "+f.find(".comment_markdown_version").val());var e=b.data("comment-for"),g=b.closest(".annotation_container").find(".annotation_unit[data-id="+
e+"]");g.length||(g=b.closest(".activity_stream_event_unit").find('.annotation_container .annotation_unit[data-id="'+e+'"]'));app.start_annotation_edit_mode(g,f.remove().text())}a.preventDefault()});$(".album_name a.remove").live("click",function(a){a.preventDefault();a=$(this).parents(".album_name");var b=a.find('input[id$="_destroy"]');b.val(1);b.length?a.hide():a.remove()});var a=Hogan.compile($("#new-album-template").html()||"");$("#add_album_name").click(function(b){b.preventDefault();b=$("#album_appearances");
var d=b.find(".album_name").length,d=a.render({index:d});$(d).appendTo(b);app.reset_album_autocomplete()});var b=$(".upload_audio");b.click(function(){filepicker.pick({extensions:[".mp3"],services:["COMPUTER","DROPBOX","URL"],maxSize:31457280,policy:FILEPICKER_POLICY,signature:FILEPICKER_SIGNATURE},function(a){$("#song_audio_url").val(a.url);b.closest("form").submit()});return!1});$(document).on("click","button.cosign",function(){var a=$(this),b=a.closest(".annotation_unit"),e=b.find("ul.cosign_messages"),
f=b.closest(".annotation_container"),h=e.outerHeight();app.ajaxQueue.add({type:"post",url:a.data("cosign-path"),data:{_method:"put"}});b.addClass("cosigned").addClass("cosigned_by_me");e.append($(app.templates.cosign_message().render({moderator:CURRENT_USER.is_moderator,artist_url:a.data("user-url"),user_id:CURRENT_USER.id,uncosign_path:a.siblings(".uncosign").data("uncosign-path")})));a=b.closest(".qtip");a.qtip("api").elements.target.addClass("has_verified_annotation");e=e.outerHeight();a.css("top",
"-="+(e-h));app.update_bulk_loaded_annotation(f);return!1});$(document).on("click","button.uncosign, a.remove_cosign",function(){if(!confirm("Are you sure you want to uncosign this "+app.sc("annotation.singular_noun")+"?"))return!1;var a=$(this),b=a.closest(".annotation_unit"),e=a.closest(".cosign_message"),f=e.data("user-id"),h=b.find(".cosign_messages:visible"),g=b.closest(".annotation_container");app.ajaxQueue.add({type:"post",url:a.data("uncosign-path"),data:{_method:"put",cosigner_id:f}});a=
h.outerHeight()+b.find(".annotation_unit_label:visible").outerHeight("include_margins");e.length?(CURRENT_USER.id==f&&b.removeClass("cosigned_by_me"),e.remove()):(b.removeClass("cosigned_by_me"),b.find('li.cosign_message[data-user-id="'+CURRENT_USER.id+'"]').remove());b.find("li.cosign_message").length||(b.removeClass("cosigned"),g.hasClass("has_verified_annotation")||b.closest(".qtip").qtip("api").elements.target.removeClass("has_verified_annotation"));e=h.outerHeight()+b.find(".annotation_unit_label:visible").outerHeight("include_margins");
b.closest(".qtip").css("top","+="+(a-e));app.update_bulk_loaded_annotation(g);return!1});$(document).on("click",".embed_script_code",function(){$(this).select()});$(".act-new.cont-songs").on("change",'input[name="song[primary_tag_id]"]',function(){var a=$(this).data("implied-channel-name");$(".lyrics_style_guide."+a).addClass("active").siblings(".active").removeClass("active");$.each(["producer","featured","writer"],function(b,e){$("#song_"+e+"_artists").attr("placeholder",$(".placeholder_examples[data-channel-name='"+
a+"'][data-artist-type='"+e+"']").text())})});$(".act-new.cont-songs, .act-show.cont-songs").on("change",'input[name="song[primary_tag_id]"]',function(){$("#tag_chooser_container select").chosen_auto_choose(this.value)});$(".song_actions").each(function(a,b){new Waypoint.Sticky({element:b,wrapper:'<div class="actions_wrapper"></div>'})});$(".song_footer .comment_section_wrapper").each(function(a,b){var e=$(b);new Waypoint({offset:"100%",element:b,handler:function(){e.addClass("auto_load_url");app.process_auto_load_containers(e);
this.destroy()}})})});
$(function(){0<$("input#tag_name").length&&$("input#tag_name").focus();$(".tag_list").on("click",".just_delete",function(a){a.preventDefault();a=$(this);if(!a.prop("disabled")){if(!confirm(app.sc("manage_tags.just_delete_warning")))return!1;a.prop("disabled",!0);$.facebox_then_reload("Deleting... <div class='loading_with_indicator'></div>","always_reload");app.ajaxQueue.add({type:"POST",url:a.data("tag-path"),data:{_method:"delete"},success:function(){$.facebox("Your tag was successfully deleted")}})}});$(".tag_list").on("click",
".delete_tag",function(a){a.preventDefault();a=$(this);a.closest("ul").addClass("deleting");a.closest("li").addClass("delete_origin")});$(".tag_list").on("click",".cancel_delete_tag",function(a){a.preventDefault();a=$(this);a.closest("li").removeClass("delete_origin");a.closest("ul").removeClass("deleting")});$(".tag_list").on("click",".transfer_target",function(a){a.preventDefault();a=$(this);if(a.prop("disabled")||!confirm(app.sc("manage_tags.delete_and_transfer_warning")))return!1;app.ajaxQueue.add({type:"post",
url:a.data("delete-and-transfer-path"),data:{from_tag_id:$("li.delete_origin").data("tag-id"),to_tag_id:a.closest("li").data("tag-id")}});a.prop("disabled",!0);$.facebox_then_reload("Transferring... <div class='loading_with_indicator'></div>","always_reload")});if(0<$("#tag_chooser_container").length){var a=$("#tag_ids");a.chosen();app.add_tag_data_to_form(a.closest("form"));a.change(function(){app.add_tag_data_to_form($(this).closest("form"))});$("#tag_ids").data("can-add-new-tag")&&(Chosen.prototype.no_results=
function(a){return this.search_results.append($("<li>",{"class":"no-results new_tag",html:'Add "<span>'+a+'</span>" as a new tag'}))});$(".new_tag").live("click",function(){var a=$(this).find("span").text();$("#tag_ids").append($("<option>",{value:a,html:$.hyphen_compatible_titleize(a),"data-new-tag":!0})).trigger("liszt:updated");$(".chzn-results li:last").trigger("mouseup");return!1});$(".search-field input").live("keydown",function(a){9==a.keyCode&&0<$("ul.chzn-results li.active-result.highlighted").length&&
(a.preventDefault(),$(this).trigger($.Event("keyup",{which:13})))});$("#tag_chooser_container .search-field input").focus(function(){$(this).closest(".chzn-choices").addClass("focused")});$("#tag_chooser_container .search-field input").blur(function(){$(this).closest(".chzn-choices").removeClass("focused")});$("#tag_chooser_save").click(function(a){a.preventDefault();var c=$(this);c.val("Saving...").prop("disabled",!0);app.ajaxQueue.add({type:"put",url:c.data("update-tags-path"),data:app.tag_data(),
success:function(){c.val("Save").prop("disabled",!1)}})})}});
$(document).ready(function(){CURRENT_USER&&(app.user_pusher_channel=app.pusher().subscribe(CURRENT_USER.pusher_channel),app.user_pusher_channel.bind_all(function(a,b){switch(a){case "iq-changed":$(".user_badge[data-id="+CURRENT_USER.id+"] .iq .iq_value").text(b.total);break;case "placed-in-penalty-box":$(".env-font").remove();break;case "class-page-ready":0<$('.lyrics[data-id="'+b.source_id+'"]').length&&(window.location.href=b.url);break;case "class-page-failed":$("#facebox:visible .content").find(".placeholder").replaceWith($("<b>",
{text:"Whoops! Something went wrong: "+b.msg}));break;case "tag-transfer-finished":0<$(".tag_list").length&&$("#facebox:visible .content").html(app.sc(b.msg.key,b.msg.options))}}))});
$(document).ready(function(){$("a.impersonate").live("click",function(){var a=prompt("Who do you want to impersonate? (Enter the nickname or email of the user you want to sign in as)");""!==$.trim(a)&&($.post("/users/impersonate",{login:a},function(){window.location.reload(!0)}),$.facebox("<h1>JUST A SEC!! DON'T COME IN!!!</h1>"))});$(document).on("click",".remove_asset",function(){var a=prompt("Enter the url to remove");""!==a.trim()&&$.ajax({url:$(this).attr("data-path"),data:{asset_url:a},dataType:"script",
type:"POST"})});$("a.search_user_aliases").live("click",function(){var a=prompt("Find all users who've ever had this login");""!==$.trim(a)&&(window.location.href="/users/aliases?alias="+encodeURIComponent(a))});$("#user_followers > button[data-tab]").live("click",function(){$("a[href="+$(this).attr("data-tab")+"]").click()});$("body.cont-identities.act-create #user_login").focus().select();$("body.cont-user_sessions.act-new #user_session_login").focus().select();"#genius"===location.hash&&$("body").is(".cont-users.act-new")&&
($(".sign_in_with_email").toggle_target(!0),$("#user_login").focus(),$.cookie("offsite_beta_signup",!0,{path:"/"}))});$.fn.user_autocomplete=function(a){a=$.extend({delay:250,scrollHeight:500,matchSubset:!1,max:20,minChars:2,formatItem:function(a){return a[1]},formatResult:function(a){return a[0]}},a);return $(this).autocomplete("/search/user_autocomplete",a)};
$(document).ready(function(){$("body").is(".act-claim-your-verified-account.cont-static")&&$(".new_feedback").submit(function(){var a=$(this),b=a.validate();b.form()?(window.setTimeout(function(){a.find("input[type='submit']").attr("disabled","true").val("Loading...")},1),a.submitWithAjaxQueue({dataType:"text"}),a.addClass("success")):b.showErrors();return!1})});
$("a.clear_votes").live("click",function(){var a=$(this);if(!confirm(a.attr("data-confirm")))return!1;$.post(this.href,function(b){a.closest(".qtip").qtip("api").elements.target.closest(".voting_links").replaceWith(b)});return!1});(function(){$(document).on("annotation:featured",".web_page_moderation_queue-annotation",function(){var a=$(this);a.slideUp(a.remove.bind(a))})})();
$(function(){$(document).ajaxError(function(a,b,c){if(!1!==c.alert_on_error&&0!==b.readyState)app.on_ajax_error(b,c)}).ajaxComplete(app.on_ajax_complete).ajaxSend(function(a,b,c){b.setRequestHeader("Accept","application/x-javascript, text/javascript, text/html, application/xml, text/xml, */*");a=app.get_csrf_token();c.skip_csrf||c.type.match(/^get$/i)||!a||b.setRequestHeader("X-CSRF-Token",a)})});window.app=window.app||{};
$.extend(window.app,{ajaxQueue:jQuery.manageAjax.create("queue",{queue:!0}),markdown_to_html:function(a,b,c){var d=function(a){var b=new Attacklab.showdown.converter;a=a.replace(/(?:^|\s+)https?:\/\/(?:[a-z0-9\-]+\.)+[a-z]{2,6}(?:\/[^\/#?]+)+\.(?:jpe?g|gif|png)(?=$|\s+)/igm,function(a){return"\n\n![]("+$.trim(a)+")"});a=b.makeHtml(a);return $("<div>").append(a).find("a").each(function(){var a=$(this);a.attr("href").match(/^\d+$/)&&a.attr("href","/"+a.attr("href"))}).end().html()};if(null==b)return d(a);
var e=b.attr("data-autolink-mentions")&&a.match(/@\S/);-1<a.indexOf("[[")||e||b.html(d(a));$.ajax_with_retry({url:"/utils/markdown_preview",type:"POST",data:{md:a,autolink_mentions:e},success:function(a){b.html(a);c=c||$.noop;c(b);app.setup_embedly()}});return b},get_csrf_token:function(){return $.cookie("_csrf_token")},setup_zeroclipboard:function(){var a;a="https://assets.rapgenius.com/flash/ZeroClipboard.swf?1445007648".replace("https:",window.location.protocol);ZeroClipboard.config({swfPath:a});
$(document.body).on("click",".copy_to_clipboard",function(){return!1});$(document.body).on("click",".copy_content input, .embed_content input",function(){this.select()});var b=new ZeroClipboard;b.on("ready",function(){b.on("copy",function(a){a.clipboardData.setData("text/plain",$(a.target).attr("title"))});b.on("aftercopy",function(a){var b=$(a.target),e=b.text();b.text("Copied!").addClass("copied");setTimeout(function(){b.text(e).removeClass("copied")},500)})});$(document).on("mouseenter",".copy_to_clipboard.inactive",
function(){ZeroClipboard.focus(this);b.clip(this);$(this).removeClass("inactive")})},is_on_song_page:function(){return 0<$("body.act-show.cont-songs").length&&0<$(".lyrics").length},set_up_timeago:function(){var a=null,b=function(a){$(a||"body").find("[data-timeago]").each(function(){var a=$(this),b=a.data("timeago"),c=null;a.data("timeago-shortened")?(c=$.timeago.settings.strings,$.timeago.settings.strings={suffixAgo:"",seconds:"<1m",minute:"1m",minutes:"%dm",hour:"1h",hours:"%dh",day:"1d",days:"%dd",
month:"1 month",months:"%d months",year:"1 year",years:"%d years"},b=$.timeago(b),$.timeago.settings.strings=c,c=b):c=$.timeago(b).replace(/^about /,"");c!==a.text()&&a.text(c)})};return function(c){b(c);a||(a=setInterval(function(){b()},6E4))}}(),set_up_autogrow:function(){$(document).on("focus",".autogrow",function(){$(this).autosize({callback:function(){$(this).trigger("textarea:autogrown")}}).removeClass("autogrow")})},set_up_dirtyable_inputs:function(){$(document).on("focus","textarea:not([data-not-dirtyable])",
function(){$(this).dirtyable()})},delete_annotation:function(a){var b={_method:"delete"},c=$("#explain_as").attr("login");c&&(b.explain_as=c);app.ajaxQueue.add({type:"post",url:a,data:b})},start_annotation_edit_mode:function(a,b){b||(b="");var c=a.closest(".annotation_container");a.hide().after($("#edit_annotation_form").html());c.addClass("editing_annotation");c=a.nextAll(".edit_annotation_form").addClass("editing_explanation");c.find("textarea").trigger("dirtyable:changed",!0);a.find(".edit_annotation").data("proposed_edit")&&
(c.find(".submit_annotation").attr("data-proposed_edit",!0),c.find(".annotation_text_wrapper .edit_label").first().html("Propose an edit:"));""!==$.trim(b)&&c.children(".edit_annotation_form-integration_notice").removeClass("hide");var d=$.trim(a.find(".markdown_version").val()+b);c.find(".annotation_text").focus().val(d).trigger("autosize.resize");app.set_up_vidyard_id_container(a);app.set_up_tooltip_lyric_editor();$("#explain_as").attr("login")&&$(".annotation_container").addClass("current_user_can_add_verified_to_this_song");
return c},process_auto_load_containers:function(a){$(a||".auto_load_url:visible, .auto_load_url.load_if_not_visible").each(function(){var a=$(this);$.ajax_with_retry({url:a.attr("data-url"),success:function(c){if(""==$.trim(c))return a.remove();a.html(c).removeClass("auto_load_url").trigger("auto_load_url:loaded");setTimeout(function(){app.activate_more_links(a)},250)}})})},activate_more_links:function(a){$(a||"body").find("a.more:visible:not(.loading, .no_auto_more a)").click()},angular_inject_get__deprecated:function(a){return angular.element(document.body).injector().get(a)}});
(function(){window["com.genius.Genius"].require.define({"shared/universal/flash":function(a,b,c){c.exports={read:function(){var a=$.cookie("flash");if(!a)return{};this.clear();return JSON.parse(a)},clear:function(){$.removeCookie("flash",{path:"/"})}}}})})();
$(function(){$(document).on("click",".toggle_target",function(a){$(this).toggle_target();a.stopImmediatePropagation();return!1});$(document).on("click",".click_to_select_all",function(){$(this).select()});$(document).on("click",".click_to_toggle_hidden_radio_button",function(){var a=$(this).find('input[type="radio"]');a.prop("checked",!a.is(":checked"));return!1});$(document).on("click",".custom_share[data-service='facebook']",function(){FB.ui({method:"share",href:$(this).attr("href")},function(){});
return!1});$(document).on("click","[data-focuses-form-field]",function(){$("[data-focusable-form-field="+$(this).data("focuses-form-field")+"]").focus()});$(document).on("click",".custom_share[data-service='twitter']:not(.tweet_composer, .auth)",function(a){a.stopImmediatePropagation();return!1});$(document).on("focus",".condensed textarea, .condensed input",function(){$(this).closest(".condensed").removeClass("condensed");$(this).trigger("genius:resized")});$(document).on("click",'form.validate input[type="submit"], form[data-validate] input[type="submit"]',
function(a){var b=$(this.form).validate();if(!b.form())return b.showErrors(),a.stopImmediatePropagation(),!1}).on("click","[data-disable-with]",function(a){var b=$(this);if(!b.attr("disabled")){var c=b.data("disable-with"),d=b.is("button")?"html":"val";b.data("value-before-disabled",b.data("value-before-disabled")||b[d]());b[d](c);b.attr("disabled",!0);a.preventDefault();this.form&&(a=$(this.form),a.trigger("submit"),a.one("ajax:complete",function(){b[d](b.data("value-before-disabled"));b.removeAttr("disabled")}))}});
$(document).on("click","[data-method]",function(){var a=$(this),b=a.attr("target"),a=$("<form>",{method:"post",action:a.attr("href")}).append($("<input>",{name:"_method",value:a.attr("data-method"),type:"hidden"})).append($("<input>",{name:"authenticity_token",value:app.get_csrf_token(),type:"hidden"}));b&&a.attr("target",b);a.hide().appendTo("body").submit();return!1});$(".header-primary").on("click",".create_account:not(.pressed)",function(){$.cookie("desired_location",window.location.href,{path:"/"});
$.cookie("attempted_offsite_signup",!0,{path:"/",expires:1})});$(document).on("click",".edit_annotation",function(){if($(".edit_annotation_form:visible").length)return!1;app.start_annotation_edit_mode($(this).closest(".annotation_unit"));return!1});$(document).on("click",".feature_annotation",function(){var a=$(this);$.post(a.attr("href")).done(function(){a.closest(".annotation_unit").trigger("annotation:featured");a.text("featured").addClass("unfeature_annotation").removeClass("feature_annotation");
a.attr("href",a.attr("data-unfeature-url"));setTimeout(function(){a.text("unfeature")},2E3)});return!1});$(document).on("click",".unfeature_annotation",function(){var a=$(this);$.post(a.attr("href")).done(function(){a.closest(".annotation_unit").trigger("annotation:unfeatured");a.text("unfeatured").addClass("feature_annotation").removeClass("unfeature_annotation");a.attr("href",a.attr("data-feature-url"));setTimeout(function(){a.text("feature")},2E3)});return!1});$(document).on("click",".cancel_annotation",
function(){var a=$(this),b=a.closest(".edit_annotation_form"),c=b.prev(".annotation_unit"),d=c.closest(".annotation_container"),a=a.closest(".qtip.explanation");a.length&&(a.qtip("api").beforeHide=function(){return!0},c.hasClass("un_edited")&&c.find(".delete_annotation").data("no-confirm",!0).click());d.removeClass("editing_annotation");b.find("textarea").trigger("dirtyable:changed",!1);b.remove();c.hasClass("needs_exegesis")||c.show();a.length&&a.is(":visible")&&a.qtip("api").reposition();return!1});
$(document).on("click",".submit_annotation",function(){var a=$(this),b=a.closest(".edit_annotation_form"),c=b.prev(".annotation_unit"),d=c.closest(".annotation_container"),e=c.attr("data-id"),f=d.attr("data-id"),h=!!c.closest(".stand_alone_annotation_container").length||c.hasClass("description"),g=a.data("proposed_edit"),k=$.trim(b.find(".annotation_text").val()),n=$.trim(b.find(".video_id").val()),q=$.trim(b.find(".edit_annotation_note").val()),m=k||n||c.hasClass("video_processing");if(!m&&!c.hasClass("verified")&&
!c.hasClass("description"))return!1;var e=a.attr("data-url")||"/annotations/"+e,p={_method:a.attr("data-method")||"put","annotation[body]":k};n&&(p["annotation[video_id]"]=n);q&&(p["annotation[edit_note]"]=q);if(n=$("#explain_as").attr("login"))p.explain_as=n;(m||c.hasClass("description"))&&app.ajaxQueue.add({type:"post",url:e,data:p,success:function(a){h||app.update_editorial_state(f,a.editorial_state);a.user_can_clear_votes&&c.find(".footer .voting_links").addClass("user_can_clear_votes")}});c.find(".markdown_version").text(k);
c.removeClass("being_created");c.hasClass("description")&&(k?c.removeClass("blank"):c.addClass("blank"));if(0<b.find(".lyric_editor").length&&(q=b.find(".lyric_text").data("old-value"),n=$.trim(b.find(".lyric_text").val()),""!=n&&n!=q&&(q=$("div.lyrics a[data-id='"+f+"']"),n=n.replace(/\n/gi,"<br>"),q.html().match(/<br[\s\/]?>$/i)&&(n+="<br>"),q.html(n),app.save_lyrics()),!m&&c.hasClass("verified")))return d.find("button.cancel_annotation").click(),!1;var u;h||(u=a.closest(".qtip"),u.qtip("api").beforeHide=
function(){return!0},k.match(/^\?$/)?c.addClass("needs_exegesis"):c.removeClass("needs_exegesis"));b.find("textarea").trigger("dirtyable:changed",!1);d.removeClass("editing_annotation");b.remove();g?(a=c.find(".editor_links .view_proposed_edits").closest("a"),$.facebox("Your edit has been proposed and will be reviewed!<br>"+$("<div>").append(a.clone()).html()),c.find(".view_proposed_edits_wrapper").addClass("has_pending_edits")):app.markdown_to_html(k,c.find(".annotation_body .body_text"),function(){h||
(u.qtip("api").reposition(),app.update_bulk_loaded_annotation(u.find(".annotation_container")))});c.show().addClass("just_submitted_edit").removeClass("un_edited").closest(".annotation_container").addClass("just_submitted_edit");!h&&u.qtip("api").reposition()});$(document).on("submit","form[data-submit-with-ajax-queue]",function(a){var b=$(this);b.find('input[type="submit"]').each(function(){var a=$(this);b.data("disable-with")&&a.prop("value",b.data("disable-with"));a.prop("disabled",!0)});b.submitWithAjaxQueue({dataType:b.data("ajax-data-type")||
"script",success:function(a){b.trigger("submit_with_ajax_queue:success",a)},error:function(a){b.trigger("submit_with_ajax_queue:error",a)},complete:function(a){b.trigger("submit_with_ajax_queue:complete",a)}});a.stopImmediatePropagation();return!1});$(document).on("click","[data-select-on-click]",function(){this.select()})});
(function(){var a=$(document.documentElement);a.toggleClass("chrome",!!bowser.chrome);a.toggleClass("iphone",!!bowser.iphone);a.toggleClass("ios",!!bowser.ios);a.toggleClass("win",/Windows/i.test(navigator.userAgent));a.toggleClass("msie",!!bowser.msie);a.toggleClass("firefox",!!bowser.firefox)})();(function(){window["com.genius.Genius"].require.define({"shared/universal/lodash":function(a,b,c){c.exports=(window["com.genius.Genius"]||{}).lodash}})})();
Modernizr.addTest("flash_enabled",function(){try{return!!new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(a){return navigator.mimeTypes&&navigator.mimeTypes["application/x-shockwave-flash"]&&navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin}});(function(){window["com.genius.Genius"].require.define({"shared/universal/mutation_observer":function(a,b,c){c.exports=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver}})})();
(function(){window["com.genius.Genius"].require.define({"shared/universal/promise_channel":function(a,b,c){var d=function(a){this.buffer=[];a.done(function(a){this.buffer.forEach(function(b){a[b.method].apply(a,b.arguments)})}.bind(this))};["bind","notify","call"].forEach(function(a){d.prototype[a]=function(){this.buffer.push({method:a,arguments:arguments})}});c.exports=d}})})();
$(function(){$(document).on("rg:toggled",".toggle_follow",function(){var a=$(this),b=a.hasClass("new_status_follow");a.removeClass("disabled");a.toggleClass("new_status_follow",!b);a.toggleClass("new_status_unfollow",b);a.find("span").text(b?"Following":"Follow")});$(document).on("click",".toggle_follow:not(.disabled)",function(a){a.preventDefault();a=$(this);var b=a.hasClass("new_status_follow");a.addClass("disabled");a.trigger("rg:toggled");$.ajax({type:b?"post":"delete",url:a.attr("href")})});
$(document).on("hover",".toggle_follow.new_status_unfollow",function(a){var b=$(this);"mouseenter"===a.type?b.find("span").text("Unfollow!"):"mouseleave"===a.type&&(a=b.hasClass("new_status_unfollow"),b.find("span").text(a?"Following":"Follow"))})});
(function(){window["com.genius.Genius"].require.define({"shared/universal/tweet_composer":function(a,b,c){var d=b("shared/universal/jquery");a=function(a){var b=a.find(".twitter_button");b.attr({"data-href":b.attr("href"),href:"#"});this.$annotation=a;this.$compose_tweet_wrapper=this.$annotation.find(".compose_tweet_wrapper");this.attach_events()};a.prototype={show_tweet_composer:function(){this.$compose_tweet_wrapper.show();var a=this.$compose_tweet_wrapper.find("#tweet_text");a.focus();Modernizr.touch||
(a[0].selectionStart=0,a[0].selectionEnd=parseInt(a.attr("data-tweet-body-length"),10))},validate_tweet_text:function(){var a=this.$compose_tweet_wrapper.find("#tweet_text"),b=a.closest(".annotation_tweet_form"),c=a.closest(".compose_tweet_wrapper"),d=a.val(),k=b.find(".referent_image"),a=b.find(".characters_remaining"),b=b.find('input[type="submit"]');c.hasClass("has_image_attachment")&&(d=d+" "+(k.attr("src")||"http://www.example.com/image.png"));c=140-twttr.txt.getTweetLength(d);a.html(c);c=0>
c;a.toggleClass("warning",c);b.prop("disabled",c)},toggle_image_attachment:function(){var a=!this.$compose_tweet_wrapper.hasClass("has_image_attachment");this.$compose_tweet_wrapper.toggleClass("has_image_attachment",a);this.$compose_tweet_wrapper.find("#include_referent_image").val(a);this.$compose_tweet_wrapper.find("#tweet_text").focus();this.validate_tweet_text()},attach_events:function(){var a=this.$compose_tweet_wrapper;this.$annotation.find(".twitter_button.tweet_composer").on("click",function(){this.show_tweet_composer();
return!1}.bind(this));this.$annotation.find(".twitter_button.auth").on("click",function(){d.cookie("desired_location",d(this).closest(".embedded_annotation").attr("data-path"),{path:"/"});d.cookie("focus_tweet_text",!0,{path:"/",expires:1/24/60})});if(d.cookie("focus_tweet_text"))d(window).one("frame_visible",function(){this.show_tweet_composer();return!1}.bind(this));this.$annotation.find(".annotation_tweet_form").on("click","input[type='submit']",function(){d(this).val("Tweeting...")}).on("submit_with_ajax_queue:success",
function(b,c){a.html(c)}).on("submit_with_ajax_queue:error",function(){a.find("footer").html('<span class="tweet_composer_error"><em>Whoops!</em> Refresh the page to try again.</span>')}).on("submit_with_ajax_queue:complete",function(){a.find("#tweet_text").attr("disabled",!0)});a.on("click",".referent_image",function(){d(this).toggleClass("zoom")});this.$annotation.find("#tweet_text").on("input focus",this.validate_tweet_text.bind(this));this.$annotation.find(".toggle_attachment_label").on("click",
function(){this.toggle_image_attachment();return!1}.bind(this))}};c.exports=a}})})();$(function(){$(".unified_player_media_vevo-close").on("click",function(){$(".unified_player_media_vevo").remove();$(".song_header--expand_for_vevo").removeClass("song_header--expand_for_vevo")})});
$(document).ready(function(){$(".new_user, .new_feedback").live("submit",function(){var a=$(this);a.attr("data-action")&&a.attr("action",a.attr("data-action"));var b=a.validate();if(b.form())return window.setTimeout(function(){a.find("input[type='submit']").attr("disabled","true").val("Loading...")},1),!0;b.showErrors();return!1})});
$(function(){$("a.ignore_follow_suggestion").live("click",function(a){a.preventDefault();app.ajaxQueue.add({url:this.href,type:"post",data:{_method:"put"}});$(this).trigger("rg:ignored")});$(".follow_suggestions_full a.ignore_follow_suggestion").live("rg:ignored",function(){var a=$(this).closest("li");a.slideUp(a.remove)});var a=function(){var a=$(this),c=a.closest(".follow_suggestions_mini"),d=a.closest(".follow_suggestion"),a=c.find("[data-follow-suggestion-id]").map(function(){return $(this).attr("data-follow-suggestion-id")}).toArray();
app.ajaxQueue.add({url:c.attr("data-refresh-path"),data:{except:a},success:function(a){d.parent().append(a);d.slideUp(function(){d.remove();0===c.find(".follow_suggestion").size()&&c.fadeOut()})}})};$(".follow_suggestions_mini a.ignore_follow_suggestion").live("rg:ignored",a);$(document).on("rg:toggled",".toggle_follow.new_status_follow",a);$("a.follow_all").live("click",function(a){a.preventDefault();a=$(this).closest(".follow_suggestions_container").find("[data-followable-id]");var c={};a.each(function(){var a=
$(this),b=a.attr("data-followable-type");(c[b]||(c[b]=[])).push(a.attr("data-followable-id"))});a.find(".new_status_follow").trigger("rg:toggled");app.ajaxQueue.add({url:this.href,type:"post",data:{followables:c}})})});
$(document).ready(function(){$(".annotation_body a, .post_body a, .message_container .message a, .lyrics a[data-real-link]").live("click",function(a){if($.isUrlInternal(this.href)){var b=this.href.replace(jQuery.urlInternalRegExp(),"").split("/")[0];app.open_annotation_by_id(b,{scroll:!0})&&a.preventDefault()}$.isUrlFragment(this.href)||$(this).attr("target","_blank")});$("a:urlExternal").live("click",function(a){app.embedlyURLre.test(this.href)||this.hostname.match(/^\S+\.genius.com$/)||(a.preventDefault(),
_gaq.push(["_trackEvent","Outbound Links",this.href]),window.open(this.href))});$(".submit_on_blur").blur(function(){var a=$(this).closest("form"),b=0==a.length?$(".edit_title_and_authors_form"):a;$.doTimeout("submit-on-blur",500,function(){b.submit()})});$("input.submit_on_click").click(function(){var a=$(this).closest("form"),b=0==a.length?$(".edit_title_and_authors_form"):a;$.doTimeout("submit-on-click",500,function(){b.submit()})});$("form.bulk_edit input[type='checkbox']").click(function(){$(this).closest("form").submit()});
$("a.more_by_this_artist").click(function(){_gaq.push(["_trackEvent","Go To Box","More by this artist"]);return app.delayed_nav(this.href)});$("ul.radio").click(function(){$("li",$(this)).removeClass("selected").filter(":has(:checked)").addClass("selected")});$("a.before").click(function(){var a=$(this);$.get(this.href,function(b){a.before(b)});return!1});$("a.load_in_parent").live("click",function(a){var b=$(this).parent();b.addClass("loading_with_indicator");$.ajax_with_retry({url:this.href,success:function(a){b.html(a).removeClass("loading_with_indicator")}});
a.stopImmediatePropagation();return!1});$("a.prevent_default").live("click",function(a){a.preventDefault()});$(".activate_on_change").live("input",function(){$(this).addClass("active")});$(".toggle_rg_tooltip:not(.pressed)").live("click",function(a){var b=$(this),c=b.attr("data-relative")?b.find(b.attr("data-target")):$(b.attr("data-target"));app.hide_all_rg_tooltips();c.show().addClass("active").find(".close").click(function(){app.hide_all_rg_tooltips();return!1});b.addClass("pressed");$("body").addClass("hide_all_rg_tooltips_on_click");
a.stopImmediatePropagation();return!1});$(".hide_all_rg_tooltips_on_click").live("click",function(a){a=$(a.target);a.is(".rg_tooltip")||a.is('embed[id*="ZeroClipboardMovie"]')||a.closest(".rg_tooltip").length||(app.hide_all_rg_tooltips(),$(this).removeClass("hide_all_rg_tooltips"))});$(".double_toggle a").live("click",function(a){$($(this).siblings("a").removeClass("active").attr("data-target")).hide();$($(this).toggleClass("active").attr("data-target")).toggle();a.stopImmediatePropagation();return!1});
$("a.disabled").live("click",function(a){a.stopImmediatePropagation();return!1});$("input#embed_song_mp3_url").keyup(function(){var a='<object height="24" width="290" data="/flash/player.swf" type="application/x-shockwave-flash">     <param value="/flash/player.swf" name="movie">     <param value="playerID=1&amp;bg=0xf8f8f8&amp;leftbg=0x000000&amp;lefticon=0xFFAD5A&amp;rightbg=0xcccccc&amp;rightbghover=0x999999&amp;righticon=0x666666&amp;righticonhover=0xffffff&amp;text=0x666666&amp;slider=0xFFAD5A&amp;track=0xFFFFFF&amp;border=0x000000&amp;loader=0x222222&amp;soundFile='+
this.value+'" name="FlashVars">    <param value="high" name="quality"><param value="false" name="menu"><param value="transparent" name="wmode"></object>';$("#embed_song_html").val(a)}).keyup();$("input#postlet_image_url").bind("keyup blur",function(){var a=this.value;$(".postlet_unit").toggleClass("no_image",$.trim(a)).find(".overlay").css("backgroundImage","url("+a+")")}).keyup();$("#postlet_sample").bind("keyup blur",function(){var a=this.value;$.doTimeout("postlet_sample",500,function(){app.markdown_to_html(a,
$(".postlet_unit .sample"))})}).keyup();$("#postlet_body").bind("keyup blur",function(){var a=this.value;$.doTimeout("postlet_body",500,function(){app.markdown_to_html(a,$(".postlet_unit .body.embedly"))})}).keyup();$("#new_editorial_feedback").live("submit",function(a){$(this).ajaxSubmit({dataType:"script"});a.stopImmediatePropagation();return!1});$("a.reveal_next_element_and_remove").live("click",function(){$(this).next().show().end().remove();return!1});$("form").live("submit",function(){var a=
app.get_csrf_token();"undefined"!==typeof a&&$(this).find('input[name="authenticity_token"]').val(a)});$("[data-select-current-by-id]").each(function(){$(this).find("[data-id="+$(this).attr("data-select-current-by-id")+"]").addClass("current")})});(function(){var a=require("shared/universal/flash");$(function(){var b=a.read();$(document).ajaxComplete(a.clear.bind(a));for(var c in b){var d=b[c];d&&$("<div>",{class:"alert alert_"+c}).html(d).prependTo("#container")}})})();
$(function(){var a=$("[data-timed-gif-image]").each(function(){var a=$(this),b=new Image;b.src=a.attr("src");var c=new Image;c.src=a.attr("data-timed-gif-image");a.on("swap_blurb_image",function(a,d){$(this).attr("src","png"===d?b.src:c.src)})});$("[data-activate-timed-gifs]").on("click",function(){var b=0;window.setInterval(function(){a.eq(b%a.length).trigger("swap_blurb_image","gif").siblings().trigger("swap_blurb_image","png");b+=1},3E3)});var b=1,c=$("ul.song_cards");$(".home_page_content-load_more").on("click",
function(){var a=$(this);if(a.hasClass("loading_with_indicator"))return!1;a.addClass("loading_with_indicator");var e=$(".song_card").values_for_attribute("data-id");$.ajax({url:a.attr("href"),data:{page:b,exclude:e}}).then(function(e){c.append(e);b+=1;a.removeClass("loading_with_indicator");4<b&&a.remove()})})});window.I18n=window.I18n||{};I18n.defaultLocale="en";
I18n.translations={en:{date:{formats:{"default":"%Y-%m-%d","short":"%b %d","long":"%B %d, %Y"},day_names:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),abbr_day_names:"Sun Mon Tue Wed Thu Fri Sat".split(" "),month_names:[null,"January","February","March","April","May","June","July","August","September","October","November","December"],abbr_month_names:[null,"Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],order:["year","month","day"]},time:{formats:{"default":"%a, %d %b %Y %H:%M:%S %z",
"short":"%d %b %H:%M","long":"%B %d, %Y %H:%M"},am:"am",pm:"pm"},support:{array:{words_connector:", ",two_words_connector:" and ",last_word_connector:", and "},select:{prompt:"Please select"}},activerecord:{errors:{messages:{inclusion:"is not included in the list",exclusion:"is reserved",invalid:"is invalid",confirmation:"doesn't match confirmation",accepted:"must be accepted",empty:"can't be empty",blank:"can't be blank",too_long:"is too long (maximum is %{count} characters)",too_short:"is too short (minimum is %{count} characters)",
wrong_length:"is the wrong length (should be %{count} characters)",taken:"has already been taken",not_a_number:"is not a number",greater_than:"must be greater than %{count}",greater_than_or_equal_to:"must be greater than or equal to %{count}",equal_to:"must be equal to %{count}",less_than:"must be less than %{count}",less_than_or_equal_to:"must be less than or equal to %{count}",odd:"must be odd",even:"must be even",record_invalid:"Validation failed: %{errors}"},full_messages:{format:"%{attribute} %{message}"},
template:{header:{one:"1 error prohibited this %{model} from being saved",other:"%{count} errors prohibited this %{model} from being saved"},body:"There were problems with the following fields:"}},models:{annotation_edit:"Annotation Edit",album_appearance:"Album",forum_post:"Post",group:"Forum",performance:"Artist",tagging:"Tag",facebook_identity:"Facebook",twitter_identity:"Twitter",edx_identity:"edX",google_identity:"Google"},group:{access_policy:{human_description:{"public":"Public Forum",role_based:"Private Forum accessible by certain roles (e.g. 'All Editors')",
invite_only:"Private invitation only Forum"}}}},number:{format:{separator:".",delimiter:",",precision:3},currency:{format:{format:"%u%n",unit:"$",separator:".",delimiter:",",precision:2}},percentage:{format:{delimiter:""}},precision:{format:{delimiter:""}},human:{format:{delimiter:"",precision:1},storage_units:{format:"%n %u",units:{"byte":{one:"Byte",other:"Bytes"},kb:"KB",mb:"MB",gb:"GB",tb:"TB"}}}},datetime:{distance_in_words:{half_a_minute:"half a minute",less_than_x_seconds:{one:"less than 1 second",
other:"less than %{count} seconds"},x_seconds:{one:"1 second",other:"%{count} seconds"},less_than_x_minutes:{one:"less than a minute",other:"less than %{count} minutes"},x_minutes:{one:"1 minute",other:"%{count} minutes"},about_x_hours:{one:"an hour",other:"%{count} hours"},x_days:{one:"1 day",other:"%{count} days"},about_x_months:{one:"a month",other:"%{count} months"},x_months:{one:"1 month",other:"%{count} months"},about_x_years:{one:"a year",other:"%{count} years"},over_x_years:{one:"a year",
other:"%{count} years"},almost_x_years:{one:"a year",other:"%{count} years"}},prompts:{year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",second:"Seconds"}},annotation:{present_tense:"annotate",past_tense:"annotated",singular_present:"annotates",present_participle:"annotating",singular_noun:"annotation",plural_noun:"annotations",community_brand_name:"Genius Annotation",prompt:"Write an Annotation",placeholder:"Say something interesting",offsite_placeholder:"Add your annotation"},voting:{upvote:{annotation:"This is a good %{name}",
comment:"This is a good suggestion",forumpost:""},downvote:{annotation:"This needs improvement",comment:"This is a bad suggestion \u2014 it should be deleted",forumpost:""}},annotator:{already_annotated_referent:"An annotation cannot contain another annotation",unable_to_anchor:"Whoops, couldn't find that line!",referent_mismatch:"Whoops, couldn't find that line!"},embed:{unable_to_anchor:"Sorry, we couldn't find where this annotation belongs on the page. But you can read it here:",click_underlying_link:"Go to the original link:"},
asset_remover:{invalid_uri:"That url doesn't seem to be valid.",not_found:"Whoops, couldn't find that url!"},follow_message:{user:"Follow %{name} to see their annotations and pyongs in your newsfeed",discussion:"Follow this discussion to get notified when there are new posts",group:"Following \u201c%{name}\u201d is the same as following all of its discussions",artist:"Follow %{name} to see their new songs, texts, and annotations in your newsfeed",song:"Follow %{name} to get notified of new annotations and comments",
webpage:"Follow %{name} to get notified of new annotations"},pyong_tooltip_text:"Promote this %{text_type} on your followers' homepages!",pressed_pyong_tooltip_text:"You pyonged this %{text_type} recently! You'll be able to pyong it again in a bit",manage_tags:{just_delete_warning:"AHHH! Do you really want to just delete that tag (instead of choosing a replacement to transfer associated songs to)?",delete_and_transfer_warning:"BEWARE! Do you really want to delete that tag, and transfer everything associated with it to this one??",
tag_transfer_finished:"Successfully transferred everything associated with <b>%{from_tag}</b> to <b>%{to_tag}</b> and deleted <b>%{from_tag}</b>."},body_content_conflict_message:"This text has been changed by someone else. Copy your work to your clipboard and <a href='%{url}'>click here to reload</a>",media_player_error_message:"There was a problem loading the player media. <a href='#' id='fix_audio'>Fix it!</a>",recaptcha_explanation:"Sorry, but this %{model_name} looks like it might be spam! Prove to us you're a human with the form below.",
cloud_flare_always_on_message:'Genius is experiencing a service disruption. Some features or pages may not work.<br>Check <a href="https://twitter.com/genius" target="_blank">@genius</a> for updates. We\'ll have things fixed soon.',iq:"IQ",sle:{edit_instruction:"Edit the description to add:",name:"Description"},default_meta_description:"Genius breaks down text with line-by-line annotations, added and edited by anyone in the world. It's your interactive guide to human culture.",rap:{tagline:"Discover the meaning of rap lyrics",
sle:{historical_context:"what album the song's on, how popular it was",overall_story:'An explanation of the overall story (e.g. "In this song, Eminem corresponds with a crazed fan who...")',miscellaneous:"The sample used for a beat."},map:{name:"The Rap Map",description:"Mapping the Hip-Hop Terrain of the Planet",description_meta_tag:"The Rap Map guides you through the hip-hop terrain of the planet. If you're looking for JAY Z's birthplace or Lil Wayne's neighborhood\u2014check out the Rap Map."},
name_for_body_content:"lyrics",text_type:"song",edit_title_artists_album:"Edit title, artists, &amp; album",artist_name:"artist",collection_of_texts_name:"album",verified_artist_share_success:"Swag. Now share your explanation for even more hype!",exclamation_upon_success:"Ballin!",song_track_number:"Track %{number} on %{album}",example_featured_artists:"e.g. JAY Z, Lil Wayne, T.I.",example_producer_artists:"e.g. J Dilla, No I.D., 9th Wonder, Just Blaze, Kanye West",example_writer_artists:"e.g. Pharrell Williams, Sean Garrett, Jermaine Dupri"},
rock:{tagline:"Your guide to the world of rock, pop, indie, and more",sle:{historical_context:"what album the song's on, how popular it was",overall_story:"An explanation of the song's overall story (example: \"In this song, Kurt breaks down a day at his grandparents' house\")",miscellaneous:"The song's instrumentation and sound"},map:{name:"The Rock Map",description:"Your Guide to International Sex, Drugs and Rock & Roll",description_meta_tag:"The Rock Map is your guide to international Sex, Drugs and Rock & Roll. If you're looking for the Eagles' real Hotel California, or what 'Back Home' means to Eric Clapton \u2013 check out the Rock Map."},
name_for_body_content:"lyrics",text_type:"song",edit_title_artists_album:"Edit title, artists, &amp; album",artist_name:"artist",collection_of_texts_name:"album",verified_artist_share_success:"Swag. Now share your explanation for even more hype!",exclamation_upon_success:"Huzzah!",song_track_number:"Track %{number} on %{album}",example_featured_artists:"e.g. Paul Simon, Sting, Led Zeppelin",example_producer_artists:"e.g. Justin Timberlake, Avicii, Mariah Carey",example_writer_artists:"e.g. John Lennon, Brian Wilson, Pete Townshend"},
poetry:{tagline:"Discover the meaning of literature \u2013 your guide to the global canon",sle:{historical_context:"the work's place in history, how it was received",overall_story:'A summary of the work\'s overall themes (example: "Here, Byron evokes the classic struggle between virtue and temptation...")',miscellaneous:"A description of the work's overall style and tone"},name_for_body_content:"text",text_type:"text",edit_title_artists_album:"Edit title, author, &amp; work",artist_name:"author",
collection_of_texts_name:"work",verified_artist_share_success:"Nice. Now share your explanation and feel the love!",exclamation_upon_success:"Huzzah!",song_track_number:"From %{album}",example_featured_artists:"e.g. Virginia Woolf, Abraham Lincoln, Lawrence Kasdan",example_producer_artists:"e.g. Richmond Lattimore, The New Yorker, Christopher Nolan",example_writer_artists:"e.g. Virginia Woolf, Abraham Lincoln, Lawrence Kasdan"},news:{tagline:"Your guide to breaking news",sle:{historical_context:"how the event or text affects the world and history",
overall_story:'An explanation of the work\'s overall story (example: "Here, President Obama confirms the legality of drone strikes...")',miscellaneous:"The work's impact on current issues"},name_for_body_content:"text",text_type:"text",edit_title_artists_album:"Edit title, author, &amp; work",artist_name:"author",collection_of_texts_name:"work",verified_artist_share_success:"Nice. Now share your explanation and feel the love!",exclamation_upon_success:"Huzzah!",song_track_number:"From %{album}",example_featured_artists:"e.g. Steve Stoute, Bill Simmons, U.S. Congress",
example_producer_artists:"e.g. CNN, Grantland, Twitter",example_writer_artists:"e.g. Peggy Noonan, Ted Sorensen, Jon Favreau"},ability:{not_enough_iq_to_annotate_locked_songs:"You need 600 IQ to add annotations to this page"},terms:{contributor:{one:"contributor",other:"contributors"},scholar:{one:"1 Scholar",other:"%{count} Scholars"}},leaderboards:{periods:{day:"Daily",week:"Weekly",month:"Monthly",all_time:"All-time"}},users:{identity:{unlink:"Unlink",unlinking:"Unlinking..."}},contributor_strategies:{newest:"The newest users with activity",
losing:"These users are about to lose their active contributor streak",gaining:"These users are about to become active contributors",coachees:"These are your coachees, try to help them grow as contributors"},contributor_classifications:{losing:"Becoming Inactive",gaining:"Almost Active",active:"Active Contributor",inactive:"Inactive"},comments:{feedback_noun:"improvement",placeholder:{annotation:"Reply\u2026",genius_annotation:"Suggest an improvement to earn %{iq}",song:"Suggest an improvement or correction to earn %{iq}",
verified_annotation:"Reply\u2026"},noun:{annotation:"reply",genius_annotation:"suggestion",song:"reply",verified_annotation:"reply"},past_tense_verb:{annotation:"replied",genius_annotation:"added a suggestion",song:"added a suggestion",verified_annotation:"replied"}},commentables:{noun:{annotation:"annotation",genius_annotation:"annotation",song:"song",verified_annotation:"annotation",description:"description"}},comment_notifications:{comment_type:{annotation:"comment",genius_annotation:"suggestion",
song:"reply",verified_annotation:"reply",description:"suggestion"},commentable_type:{annotation:"annotation",genius_annotation:"annotation",song:"song",verified_annotation:"annotation",description:"description"},action:{annotation:"added a comment to",genius_annotation:"added a suggestion for",song:"added a suggestion for",verified_annotation:"replied to",description:"added a suggestion for"}},can_can:{access_denied:"Sorry, you're not allowed to do that"},song:{actions:{pin_to_homepage_hot_songs:"Pin to homepage hot songs",
unpin_from_homepage_hot_songs:"Unpin from homepage hot songs",pin_to_hot_songs:"Pin to primary tag hot songs",unpin_from_hot_songs:"Unpin from primary tag hot songs",allow_in_hot_songs:"Allow in hot songs",exclude_from_hot_songs:"Exclude from hot songs"}},reason:{sentence_intro:"Marked this as",sentence:"Marked this as \u201c%{inline_reason}\u201d",inline:{"restates-the-line":"restating the line","its-a-stretch":"a stretch","missing-something":"missing something",other:"other",confusing:"confusing",
boring:"boring",offensive:"offensive",obvious:"obvious",wordy:"wordy",needs_more_media:"lacking media",paraphrases_lyric:"paraphrasing lyric"},bookmark:{"restates-the-line":"improvement_restates_line","its-a-stretch":"improvement_stretch","missing-something":"improvement_missing",other:"improvement_other"}},api_scopes:{me:"access your profile",create_annotation:"create annotations",manage_annotation:"update and delete annotations",vote:"vote on annotations",ifttt:"access your profile, be alerted of your activity, and follow new pages and songs"},
activemodel:{activity_stream_line_item_message:{message:{"default":"%{actors} %{verb} %{target} %{context}",user:{make_editor:{user:{one:"%{actors} made %{target} an editor",other:"%{actors} made %{target} editors"}},make_mediator:{user:{one:"%{actors} made %{target} a mediator",other:"%{actors} made %{target} mediators"}},make_moderator:{user:{one:"%{actors} made %{target} a moderator",other:"%{actors} made %{target} moderators"}},make_educator:{user:{one:"%{actors} made %{target} an educator",other:"%{actors} made %{target} educators"}},
make_regulator:{user:{one:"%{actors} made %{target} a regulator",other:"%{actors} made %{target} regulators"}},create:{identity:"Your %{provider} friend %{name} is on %{service_name}!"},Follow:{artist:"%{actors} followed %{target}",web_page:"%{actors} followed <em>%{title}</em>"},Pyong:{song:"%{actors} %{verb} %{target} %{note}",annotation:"%{actors} %{verb} %{target} %{note}"},Mention:{user:{ForumPost:"%{actors} %{verb} %{target} in <em>%{context}</em>",Comment:"%{actors} %{verb} %{target} in a comment on <em>%{context}</em>"},
group:{ForumPost:"%{actors} %{verb} %{target} in <em>%{context}</em>",Comment:"%{actors} %{verb} %{target} in a comment on <em>%{context}</em>"}},GroupInvitation:{user:"%{actors} just gave %{target} access to the %{group_human_name} <em>%{context}</em>"},incorporate:{annotation:"%{actors} incorporated %{target} into a Genius Annotation"},move:{discussion:"%{actors} %{verb} %{target} to <em>%{context}</em>"},accept_offsite_beta_invitation:{user:"%{actors} accepted your beta invitation"},pin:{discussion:"%{actors} %{verb} %{target} to <em>%{group_name}</em>"},
unpin:{discussion:"%{actors} %{verb} %{target} from <em>%{group_name}</em>"},merge:{artist:"%{actors} %{verb} %{artist_name_at_time_of_merge}'s discography into %{target_artist_name}'s"}}}}},preference:{description:{mention_notifications:"Receive an email when someone @mentions you in a suggestion.",creation_comment_notifications:"Receive an email when someone comments on something you created.",mentioned_forum_notifications:"Receive an email when a forum you follow is mentioned.",forum_post_creation_notifications:"Receive an email whenever someone posts in a forum you follow.",
followed_thread_notifications:"Receive an email whenever someone posts in an individual forum thread you follow.",message_notifications:"Receive an email whenever someone sends you an onsite message.",editorial_suggestion_notifications:"Receive an email whenever someone integrates or archives your suggestions."}}}};
$(document).ready(function(){$("form.new_message").live("submit",function(){var a=$(this),b=a.validate();b.form()?(a.submitWithAjaxQueue(),b='<div class="message new">         <a href="'+CURRENT_USER.profile_path+'" class="avatar_container">           <img src="'+CURRENT_USER.avatar_url+'">         </a>         <div class="message-user_and_body message-user_and_body--message">           <a target="_blank" href="'+CURRENT_USER.profile_path+'" class="sender_info">             <div class="name_and_avatar">               '+
CURRENT_USER.login+'               <span class="iq">'+app.sc("iq")+" \u2013 "+CURRENT_USER.iq.total+'</span>             </div>           </a>           <div class="message-body_content body">'+app.markdown_to_html(a.find("[name='message[body]']").val())+"</div>         </div>       </div>",a.siblings(".messages").append($(b)),a.prev(".message_container .message_send_reply_header").remove(),a.replaceWith("<h1 class='confirmation'>Sent!</h1>"),$(".message.new").removeClass("new")):b.showErrors();return!1})});
$(document).ready(function(){$("#about_me.editable #about_body").editable(function(a){$.post("/account/",{_method:"put","user[about_me]":a});$(".about_me_markdown_version").val(a);app.markdown_to_html(a,$("#about_body"))},{placeholder:"<p>Tell us a little about yourself (what your interests are, things that make you smile, etc)</p>",type:"textarea",submit:"Save",cancel:"Cancel",onblur:"ignore",event:"make_editable",cssclass:"profile_page-about_me-edit_mode",data:function(){return $.trim($(".about_me_markdown_version").val())},
onreset:function(){$("#about_me").removeClass("editing")},callback:function(){$("#about_me").removeClass("editing")}});$(".editable .edit_about_me").live("click",function(){$("#about_me.editable").addClass("editing").find("#about_body").trigger("make_editable");return!1});$('#linked_accounts input[type="checkbox"]').live("change",function(){$(this).closest("form").submitWithAjaxQueue()})});
$(function(){if($(".shadow_page").length){bowser.iphone&&($(".shadow_page-iphone_install_instructions").show(),$(".shadow_page-generic_install_instructions").hide());var a=function(){$(".annotations_container, .shadow_page-header").addClass("see_all_annotations")};(-1!=document.referrer.search(WRAP_GENIUS_HOST)||document.location.search.match(/unwrappable=1/))&&$(".shadow_page-unwrappable_message").addClass("unwrappable");(function(){var b=/(?:#|&)annotations[\/:](\d+)/.exec(location.hash);b?(b=$("<div>",
{class:"rg_standalone_container","data-src":"//"+CANONICAL_DOMAIN+"/annotations/"+b[1]+"/standalone_embed",html:$("<div>",{class:"loading_with_indicator"})}),$(".shadow_page-single_annotation").append(b),$.getScript("//"+CANONICAL_DOMAIN+"/annotations/load_standalone_embeds.js")):a()})();$(document).on("iFrameResize",function(){$(".shadow_page-show_all_annotations").addClass("active")});$(document).on("click",".shadow_page-show_all_annotations",function(){a();$(this).removeClass("active");return!1})}});
$(document).ready(function(){function a(a){app.hide_all_rg_tooltips();var b=$(a.target),c=b.closest(".pyong_action");if(b.hasClass("pressed")||b.data("disabled"))return!1;var h=c.find(".add_pyong_note");CURRENT_USER&&h.show().addClass("loading_with_indicator").children().hide();app.ajaxQueue.add({type:"post",url:b.prop("href"),data:{_method:"post"},dataType:"html",success:function(a){b.addClass("pressed");c.find(".pyong_button_helper").replaceWith(a);h.removeClass("loading_with_indicator").children().show();
h.show().find("textarea").focus();c.find(".pyong_note").keyup(function(){c.find(".save_pyong_note").toggleClass("disabled",""===$(this).val())})},complete:function(){b.removeData("disabled")}});b.data("disabled",!0);return!1}var b=function(a){$(a.target).closest("form").trigger("reset");return!1},c=function(a){$(a.target).closest("form").submit();return!1};$(document.body).on("reset","#pyong_form",function(){var a=$(this);a.hide();app.ajaxQueue.add({type:"post",url:a.data("finalize-url"),data:{_method:"put"}});
return!1});$(document.body).on("submit","#pyong_form",function(){var a=$(this),b=a.find(".save_pyong_note"),c=a.find("#pyong_note"),h=c.val();if(!h||h===c.attr("placeholder"))return alert("Add a note first!");if(b.hasClass("loading"))return!1;b.addClass("loading");a.submitWithAjaxQueue({success:function(){b.removeClass("loading").addClass("saved").html("Saved!");setTimeout(function(){a.find(".add_pyong_note").hide()},750)}});return!1});MOBILE_DEVICE?($(".song_actions").find(".pyong_button").click(a),
$("#pyong_form").find("div.cancel_pyong_note").click(b),$("#pyong_form").find("a.save_pyong_note").click(c)):($(document.body).on("click",".pyong_button",a),$(document.body).on("click","div.cancel_pyong_note",b),$(document.body).on("click","a.save_pyong_note",c));$(document).on("click","a[data-action]",function(a){a.preventDefault();var b=$(this);$.ajax({url:b.attr("href"),type:b.attr("data-action"),success:function(a){b.remove();$.facebox(a)}})})});window.app=window.app||{};
app.unified_player=function(){var a=require("shared/universal/keyboard_shortcuts"),b=function(a){var b=a.filter(".unified_player_media"),d=a.filter(".unified_player"),u=$(".song_header_and_overlay_wrapper").outerWidth()+"px",v=d.attr("data-media-type"),A=new RGUnifiedPlayerController[v](b,{media_width:u});A.on("ready",function(){f(A,a);MOBILE_DEVICE||(h(A,a),$(".unified_player_media-undock").on("click",e),g(A),k(A,a),n(A,a));a.removeClass("loading").addClass("ready");d.on("click mousedown mouseup",
function(a){a.stopPropagation()})});A.on("error",function(){c(a)})},c=function(a){$(".song_header").hasClass("can_edit")&&(a.remove(),$(document.body).prepend('<div class="alert alert_error">'+app.sc("media_player_error_message")+"</div>"),$(document).on("click","#fix_audio",function(){$(".edit_media").click();return!1}))},d=function(){$(".unified_player_media").addClass("unified_player_media--show_non_featured_video");$(".unified_player").addClass("unified_player--moved_for_video")},e=function(){var a=
$(".unified_player_media");a.hasClass("unified_player_media--featured")&&a.addClass("unified_player_media--animate_featured_video_undock");a.removeClass("unified_player_media--docked");$(".unified_player").removeClass("unified_player--docked")},f=function(a,b){$(".unified_player-play_pause").on("click",function(){b.hasClass("playing")?a.pause():a.play()});$(".unified_player[data-media-type='youtube']:not(.unified_player--featured) .unified_player-play_pause").one("click",d);$(".unified_player_featured_play_button").one("click",
function(){var c=$(".unified_player_media");c.addClass("unified_player_media--animate_featured_video_intro unified_player_media--show_featured_video");$(".unified_player_featured_play_button").addClass("unified_player_featured_play_button--hide");MOBILE_DEVICE||($(".song_header_container").animate({height:c.find("iframe").height()},200),$(".unified_player").removeClass("unified_player--hide"));a.play();b.addClass("has_interacted");MOBILE_DEVICE&&app.tracking.track("play_song_media",{first_interaction:!0})})},
h=function(a,b){$(".unified_player_media-close").on("click",function(){$(".song_header_container").height("auto");$(".unified_player_media").removeClass("unified_player_media--show_featured_video");b.removeClass("unified_player--featured unified_player_media--featured");a.pause()})},g=function(a){$(".unified_player-progress_bar").on("click",function(b){b=void 0!==b.offsetX?b.offsetX:b.clientX-$(b.target).offset().left;a.seek(parseFloat(b)/$(this).innerWidth())})},k=function(a,b){a.on("progress",function(a,
b){$(".unified_player-progress").css("width",parseFloat(100*b.percentage)+"%");var c=parseInt(b.seconds%60,10).toString(),d=parseInt(b.seconds/60,10).toString();2>c.length&&(c="0"+c);2>d.length&&(d="0"+d);$(".unified_player-progress_counter").text(d+":"+c)});a.on("playpause",function(a,c){app.tracking.track("play_song_media",{playing:c,first_interaction:!b.hasClass("has_interacted")});b.toggleClass("playing",c).addClass("has_interacted");b.toggleClass("paused",!c)});a.on("ended",function(){this.mute();
this.seek(0);a.on("progress",function(a,b){0>=b.percentage&&(this.pause(),this.unmute())}).bind(this)});$(".song_body").waypoint(function(a){"down"===a&&b.hasClass("playing")&&($(".unified_player_media").addClass("unified_player_media--docked").removeClass("unified_player_media--animate_featured_video_intro unified_player_media--animate_featured_video_undock"),$(".unified_player").addClass("unified_player--docked"));"up"===a&&e()})},n=function(b,c){a.shortcut("shift+right",function(){b.seek_offset(5)});
a.shortcut("shift+left",function(){b.seek_offset(-5)});a.shortcut("ctrl+shift+m",function(){c.hasClass("playing")?b.pause():b.play()})};return{init:function(){var a=$(".unified_player, .unified_player_media, .unified_player_featured_play_button, .unified_player_featured_video_still");a.length&&b(a)}}}();
window.RGUnifiedPlayerController=function(){var a=function(a){this.audio=a.find("audio")[0];this.add_event_listeners()};$.extend(a.prototype,$.event_emitter,{play:function(){this.audio.play()},pause:function(){this.audio.pause()},seek:function(a){this.audio.currentTime=a*this.audio.duration},seek_offset:function(a){this.audio.currentTime+=a},add_event_listeners:function(){var a=this,b=this.audio,c=$(this.audio);c.one("canplaythrough",function(){a.emit("ready")});c.on("error",function(){b.networkState===
HTMLMediaElement.NETWORK_NO_SOURCE&&a.emit("error")});c.on("timeupdate seeked",function(){a.emit("progress",{percentage:b.currentTime/b.duration,seconds:b.currentTime})});c.on("playing",function(){a.emit("playpause",!0)});c.on("pause",function(){a.emit("playpause",!1)});c.on("ended",function(){a.emit("playpause",!1);a.emit("ended",!0)})}});var b={init:function(a,b){var c=a.find(".media_placeholder"),d=$(".unified_player_featured_video_still"),k=c.attr("data-src"),n=this,q={key:EMBEDLY_KEY,query:$.extend(this.embedly_params,
{width:b.media_width})};$.embedly.oembed(k,q).done(function(b){(n.is_private(b)||n.is_error(b))&&n.emit("error");c.replaceWith(b[0].html);d.length&&d.css("background-image","url("+b[0].thumbnail_url+")");n.setup_widget(a)});this.on("ready",function(){n.player.unmute()})},setup_widget:function(a){var b=this;a=this.player=new playerjs.Player(a.find("iframe")[0]);a.on("ready",function(){b.emit("ready")});a.on("error",function(){b.emit("error")});a.on("play",function(){b.emit("playpause",!0)});a.on("pause",
function(){b.emit("playpause",!1)});a.on("ended",function(){b.emit("playpause",!1);b.emit("ended",!0)});a.on("timeupdate",function(a){b.emit("progress",{percentage:a.seconds/a.duration,seconds:a.seconds})})},play:function(){this.player.play()},pause:function(){this.player.pause()},mute:function(){this.player.setVolume(0)},unmute:function(){this.player.setVolume(100)},seek:function(a){var b=this.player;b.getDuration(function(c){b.setCurrentTime(a*c)})},seek_offset:function(a){var b=this.player;b.getCurrentTime(function(c){b.setCurrentTime(c+
a)})},is_private:function(a){return!a[0].author_name},is_error:function(a){return"error"===a[0].type}},c=function(a,b){this.embedly_params={youtube_start:a.attr("data-media-start"),youtube_controls:0,youtube_modestbranding:1,youtube_showinfo:0,youtube_iv_load_policy:3};this.init(a,b)};$.extend(c.prototype,b,$.event_emitter,{play:function(){b.play.call(this);this.emit_play_event_for_youtube_ad_preroll()},emit_play_event_for_youtube_ad_preroll:function(){this.emit("playpause",!0)}});var d=function(a,
b){this.init(a,b)};$.extend(d.prototype,b,$.event_emitter);return{soundcloud:d,youtube:c,rg:a}}();Backbone.View.attach(".comment_unit",{events:{"click .destroy_comment":function(a){this.destroy_comment($(a.target));return!1}},destroy_comment:function(a){app.ajaxQueue.add({type:"post",url:a.attr("href"),data:{_method:"delete"}});a.parents(".comment_unit").slideUp("fast",this.notify_resize.bind(this))},notify_resize:function(){this.$el.trigger("genius:resized")}});
Backbone.View.attach(".comment_section",{events:{"submit form.comment":function(a){this.submit_comment($(a.target));return!1}},initialize:function(){this.ANIMATION_SPEED=150;this.ANIMATION_END_EVENT="animationend webkitAnimationEnd";this.$comment_container=this.$el.find(".comment_container");app.setup_embedly(this.$comment_container);this.set_up_show_all_comments();this.set_up_show_needs_improvement();this.set_up_animation_handlers()},set_up_animation_handlers:function(){this.$comment_container.on(this.ANIMATION_END_EVENT,
".comment_unit",function(){$(this).removeClass("comment_unit--new")})},set_up_show_all_comments:function(){this.$comment_container.on("click",".show_all_comments",function(){$(this).addClass("pressed").siblings(".comment_unit").show();app.setup_embedly();return!1})},set_up_show_needs_improvement:function(){var a=this.$el.find(".reasons");this.$el.parents(".annotation_unit").on("click","[data-show-needs-improvement]",function(){a.slideDown(this.ANIMATION_SPEED)})},render_new_comment:function(a){var b=
Hogan.compile($("#new_comment_template").html());return a.allows_reason?$(b.render(a)).hide().prependTo(this.$comment_container).slideDown(this.ANIMATION_SPEED):$(b.render(a)).appendTo(this.$comment_container)},render_post_comment_message:function(a,b,c){a.remove();a=$($("#post_comment_message").html());this.$comment_container.append(a);a.find("[name='user[login]']").val(b);a.find("[name='user[email]']").val(c);a.find("#user_password").focus()},submit_comment:function(a){var b=a.validate({rules:{"comment[body]":{maxlength:5E4,
required:{depends:function(){var b=a.find('input[name="comment[reason]"]:checked');return!b.length||"other"===b.val()}}},"comment[name]":{maxlength:255}},messages:{"comment[body]":{maxlength:"Your comment is too long."},"comment[name]":{maxlength:"Your name is too long."}}});if(b.form()){var c="new_comment_"+(new Date).getTime();a.submitWithAjaxQueue({complete:function(a){CURRENT_USER&&$("#"+c).find("a.destroy_comment").attr("href","/comments/"+a.responseText).removeClass("loading");this.notify_resize()}.bind(this)});
var d=a.find("[name='comment[reason]']:checked"),b=a.find("[name='comment[name]']").val(),e=a.find("[name='comment[email]']").val(),f=d.data("is-other")?null:d.val(),h=d.data("inline-reason"),g=a.find("[name='allows_reason']").length,k=d.data("reason-context-url"),d=a.find("[name='comment[body]']").val(),f=this.render_new_comment({identifier:c,name:b,reason:f,inline_reason:h,allows_reason:g,reason_context_url:k,body:"",timestamp:(new Date).toISOString()});app.markdown_to_html(d,f.find(".body"),function(a){$(a).find("a").attr("target",
"_blank")});this.reset_interface(a);this.notify_resize();window.top!==window||CURRENT_USER||this.render_post_comment_message(a,b,e);window._gaq&&_gaq.push(["_trackEvent","Comments","Create comment"])}else b.showErrors(),this.notify_resize()},reset_interface:function(a){var b=a.find('input[name="comment[reason]"]:checked');a=a.find('textarea[name="comment[body]"]');b.prop("checked",!1);a.val("")},notify_resize:function(){this.$el.trigger("genius:resized")}});
app.define_partial_view("songs","annotation_prompt",{events:{"mousedown .add_non_verified_explanation, .add_verified_explanation":"on_click_explanation_button"},initialize:function(a){this.selected_range=a.selected_range;this.$img=a.$img},render:function(){this.setElement($("#annotation_prompt_template").html());this.$img&&this.$el.addClass("image_annotation_prompt");return this},on_click_explanation_button:function(a){var b=this.selected_range;a=$(a.target).closest("a");if(this.loading)return!1;
if(app.range_contains_annotation(b))return this.trigger("overlapping_referent_error"),!1;a.addClass("loading");this.loading=!0;b=!(a.hasClass("add_verified_explanation")||$("#explain_as").attr("login"));this.create_referent({community:b})},calculate_locator:function(){return this.$img?app.annotator.calculate_image_locator($(".lyrics"),this.$img[0]):app.annotator.calculate_referent_locator(this.selected_range,$(".lyrics")[0])},create_referent:function(a){a=_.extend(a,{referent:this.calculate_locator()});
var b=$("#explain_as").attr("login");b&&(a.explain_as=b);a.song={updated_by_human_at:$("div.song_updated_by_human_at").text(),lyrics_updated_at:$("div.lyrics_updated_at").text()};this.convert_range_to_anchor();app.ajaxQueue.add({type:"POST",url:$(".lyrics").attr("data-create-referent-path"),dataType:"json",data:a,success:this.on_referent_created.bind(this),error:function(a){$.facebox_then_reload(a,"always_reload")}})},convert_range_to_anchor:function(){var a=this.selected_range,b=$("<a>",{html:a.extractContents(),
href:"#","data-id":"pending"});a.insertNode(b[0]);a.collapse(!0);this.$referent_anchor=b},on_referent_created:function(a){if(!a.id)return!1;this.loading=!1;this.trigger("referent_created",this.$referent_anchor,a)},is_loading:function(){return!!this.loading}});
Backbone.View.attach(".song_sidebar .annotation_container, #explanation_scroller .annotation_container",{events:{"click .annotation_container .show_all_personal":"show_all_hidden_annotations","click .incorporate_annotation a":"start_incorporation"},initialize:function(){this.$tooltip=this.$el.closest(".qtip");this.$show_all_button=this.$el.find(".show_all_personal");(this.hidden_count=this.find_hidden_annotations().length)&&this.display_annotation_show_button()},find_hidden_annotations:function(){return this.$el.find(".annotation_unit").not(".needs_exegesis").not(".annotation_prompt").not(".being_created").not(".un_edited").not(":visible")},
display_annotation_show_button:function(){this.$show_all_button.addClass("visible");this.$show_all_button.children("span").text(this.hidden_count)},show_all_hidden_annotations:function(){this.$el.addClass("expanded");this.find_hidden_annotations().remove().insertAfter(this.$show_all_button).show()},start_incorporation:function(a){var b=$(a.target).closest(".annotation_unit");app.ajaxQueue.add({type:"get",url:b.attr("data-new-incorporation-path"),dataType:"text",success:function(a){this.display_incorporation_interface(a,
b)}.bind(this)});return!1},display_incorporation_interface:function(a,b){var c=this.$el.find(".annotation_unit.community:not(.annotation_prompt)"),c=app.start_annotation_edit_mode(c);c.find(".annotation_text").val(a).focus();c.find(".submit_annotation").attr("data-url",b.attr("data-create-incorporation-path")).attr("data-method","post")}});
Backbone.View.attach("body.cont-songs.act-show #main",{events:function(){return MOBILE_DEVICE?{}:{"textselected .lyrics":"on_text_selection","mouseenter .lyrics img":"on_image_hover","mouseleave .lyrics img":"on_image_blur"}},routes:{"note-:id":"open_annotation_by_id","":"load_all_annotations"},initialize:function(){this.start_router();if(!MOBILE_DEVICE)$(document.body).on("mouseup",this.on_text_selection_blur.bind(this))},start_router:function(){if(MOBILE_DEVICE)return this.load_all_annotations();
var a={},b;for(b in this.routes){var c=this.routes[b];_.isFunction(c)||(c=this[this.routes[b]]);a[b]=c}new Backbone.Router({routes:a});Backbone.history.start({root:window.location.pathname})},open_annotation_by_id:function(a){app.tracking.set_annotation_opened_from_permalink(a);app.open_annotation_by_id(a,{scroll:!0},app.load_annotation_containers)},load_all_annotations:function(){app.load_annotation_containers()},on_text_selection:function(a){$.browser.msie&&$.browser.version&&9>parseFloat($.browser.version,
10)||$(a.target).is("#annotation_prompt, textarea")||$(".lyrics form").is(":visible")||app.range_contains(a.range,"img")||$(".edit_annotation_form:visible").length||!app.range_contains_content(a.range)||this.display_annotation_prompt(a.range)},display_annotation_prompt:function(a){var b=a.getBoundingClientRect(),b=$(window).scrollTop()+(b.top+b.bottom)/2,c=$(".song_sidebar").offset().top;this.close_annotation_prompt();$(".song_sidebar").addClass("annotation_prompt");this.create_annotation_prompt(a).$el.appendTo("#annotations").css("top",
b-c-$("#annotation_prompt").outerHeight()/2)},on_referent_created:function(a,b){this.remove_annotation_prompt();app.update_client_timestamps(b.song);this.display_create_annotation_form(a,b)},on_overlapping_referent_error:function(){this.close_annotation_prompt();$.facebox("<h1>"+app.sc("annotator.already_annotated_referent")+"</h1>")},on_image_hover:function(a){a=$(a.target);a.closest("a").length||$("#annotation_prompt").length||this.display_image_annotation_prompt(a)},display_image_annotation_prompt:function(a){this.close_annotation_prompt();
var b=this.create_annotation_prompt(app.select(a[0]).getRangeAt(0),{$img:a});b.$el.css({visibility:"hidden"}).data("img",a[0]).appendTo("body").css({visibility:"visible",top:a.offset().top+(a.height()/2-b.$el.outerHeight()/2),left:a.offset().left+(a.width()/2-b.$el.outerWidth()/2)})},create_annotation_prompt:function(a,b){var c=(new app.views.songs._annotation_prompt(_.extend({selected_range:a},b))).render();this.listenTo(c,"referent_created",this.on_referent_created);this.listenTo(c,"overlapping_referent_error",
this.on_overlapping_referent_error);return this.annotation_prompt=c},on_text_selection_blur:function(a){if($(a.target).closest("#annotation_prompt").length)return!1;this.close_annotation_prompt()},close_annotation_prompt:function(){!1!==this.remove_annotation_prompt()&&$(".song_sidebar").removeClass("annotation_prompt")},remove_annotation_prompt:function(){if(this.annotation_prompt){if(this.annotation_prompt.is_loading())return!1;this.annotation_prompt.remove();this.stopListening(this.annotation_prompt);
delete this.annotation_prompt}},on_image_blur:function(){$("#annotation_prompt").is(":hover")||$("#annotation_prompt:not(.image_annotation_prompt)").length||$.doTimeout("mouseleave_image",1,function(){this.close_annotation_prompt();app.get_selection().collapseToStart()}.bind(this))},display_create_annotation_form:function(a,b){var c=b.id,d=b.base_id,e=$(b.tooltip_content),f=b.target_class;a.attr("data-id",d);a.children("img").length&&a.addClass("image_annotation");app.bulk_annotations[d]=e;d=app.display_annotation_qtip(a);
d.beforeHide=function(){return!1};app.start_annotation_edit_mode($(d.elements.tooltip).find(".annotation_unit[data-id="+c+"]").addClass("un_edited",f));$("#explain_as").attr("login")&&($(".annotation_container").addClass("current_user_can_add_verified_to_this_song"),$(".annotation_container .explain_as_message").show().find("strong").text($("#explain_as").attr("artist_name")))}});
Backbone.View.attach(".voting_links",{events:{"click a.vote":"on_click_vote_button","click .votes_total":"toggle_voters_panel"},initialize:function(){var a=this;a.$vote_total=a.$el.find(".votes_total");a.$vote_total.on("qtip:beforeContentUpdate",function(b,c){var d=$(c).attr("data-votes-total");d&&a.update_vote_total(parseInt(d,10))})},on_click_vote_button:function(a){var b=$(a.target);(CURRENT_USER||"up"==b.attr("data-direction"))&&this.submit_vote(b);a.preventDefault()},toggle_voters_panel:function(a){a=
$(a.target);if(a.closest(".embedded_annotation").length){a=a.attr("tooltip__deprecated");var b=this.$el.attr("data-voteable-id"),c=$(".votes_for_"+b);c.toggle();c.is(":visible")&&(c.text("Loading..."),$.ajax_with_retry({type:"GET",url:a,success:function(a){c.html(a)}}));return!1}},submit_vote:function(a){var b=a.hasClass("toggled")?"middle":a.attr("data-direction");this.increment_vote_count_by(this.voting_delta_for(a));a.toggleClass("toggled").siblings(".vote").removeClass("toggled");$.post(a.attr("href"),
{direction:b}).done(function(a){this.$el.replaceWith(a)}.bind(this))},voting_delta_for:function(a){var b="up"===a.attr("data-direction")?1:-1;a.hasClass("toggled")?b*=-1:a.siblings(".vote").hasClass("toggled")&&(b*=2);return b},increment_vote_count_by:function(a){var b=parseInt(this.$vote_total.text(),10);this.update_vote_total(b+a)},update_vote_total:function(a){var b,c;0>a?(c="downvote",b=a.toString()):(b="+"+a,c=0<a?"upvote":"neutral");this.$vote_total.removeClass("downvote upvote no_votes neutral").addClass(c).text(b)}});
(function(){window["com.genius.Genius"].require.define({"offsite_header/host_page_channel":function(a,b,c){a=b("jschannel");var d;window!==window.parent&&(d=a.build({window:window.parent,origin:"*",scope:"com.genius.Genius"}));c.exports=d}})})();
$(function(){$(".header-primary").addClass("active");var a=require("offsite_header/host_page_channel");a&&(a.notify({method:"header_loaded"}),a.bind("document_click",function(){$("body").trigger("click").trigger("mousedown")}),$(document).on("loading.facebox",function(){a.call({method:"activate_full_header_height",success:function(){$("#facebox").css({top:document.body.scrollTop+self.innerHeight/10})},error:function(a,c){throw a+" "+c;}})}),$(window).on("keydown",function(b){$(b.target).acts_like_input()||
a.notify({method:"window_keydown",params:b.which})}),$(document).on("close.facebox",function(){a.notify({method:"deactivate_full_header_height"})}))});
$(function(){var a=require("offsite_header/host_page_channel");if(a){var b=function(){$(".offsite_explainer_message").removeClass("visible").on("webkitTransitionEnd transitionend",c)},c=function(){$(".offsite_explainer_message").addClass("collapse")};a.bind("show_offsite_explainer_message",function(){if($.cookie("has_closed_offsite_explainer_message"))return c();$(".offsite_explainer_message").addClass("visible")});$(document).on("click",".offsite_explainer_message",function(){b();$.cookie("has_closed_offsite_explainer_message",
"true",{domain:CANONICAL_DOMAIN,expires:365,path:"/"})});$(window).one("scroll scrollstart",b);a.bind("first_scroll",b)}});
